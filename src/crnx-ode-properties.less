.crnx-ode-properties {
	font-size: 14px;
	table {
		@cell-width: 200;
		@arc-cell-height: 30;
		@arc-arrow-width: 8;
		@arc-arrow-length: 12;
		@node-cell-padding: 20;
		@button-width: 20;
		@button-height: 20;
		@passive-stroke-color: #444;
		@passive-fill-color: #EEE;
		@active-stroke-color: #000;
		@active-fill-color: #FFF;
		.svg(@width,@height,@contents) {
			@svg: "<svg xmlns='http://www.w3.org/2000/svg' width='@{width}' height='@{height}'>@{contents}</svg>";
			@data: escape(@svg);
			background-image+: url("data:image/svg+xml;charset=utf-8,@{data}");
		}
		.arc(@width,@height,@d) {
			.svg(@width,@height,"<path d='@{d}' fill='none' stroke='@{passive-stroke-color}' stroke-width='2' />");
		}
		table-layout: fixed;
		border-collapse: collapse;
		td, th {
			min-width: unit(@cell-width,px);
			width: unit(@cell-width,px);
			padding: 0;
			position: relative;
		}
		tr.nodes {
			@cx: @cell-width;
			@hcx: @cell-width/2;
			@ax1: @hcx + @arc-arrow-width/2;
			@ax2: @hcx - @arc-arrow-width/2;
			@cy: @node-cell-padding;
			@ay: @arc-arrow-length + 0.5;
			th {
				padding: unit(@cy,px) 0;
				background-repeat: no-repeat;
				@start-path-data: "M @{hcx} 0 V @{cy}";
				@end-path: "<path d='M @{hcx} @{cy} V @{ay}' fill='none' stroke='@{passive-stroke-color}' stroke-width='2' />";
				@arrow-path: "<path d='M @{ax1} @{ay} L @{hcx} 0.5 L @{ax2} @{ay} Z' fill='@{passive-fill-color}' stroke='@{passive-stroke-color}' stroke-width='1' />";
				&.b {
					.svg(@cx, @cy, @end-path @arrow-path);
					background-position+: bottom;
				}
				&.t {
					.arc(@cx, @cy ,@start-path-data);
					background-position+: top;
				}
				&.b.t {
					.svg(@cx ,@cy, @end-path @arrow-path);
					background-position+: bottom;
					.arc(@cx, @cy, @start-path-data);
					background-position+: top;
				}
				button {
					@obx: @button-width;
					@oby: @button-height;
					@hobx: @obx/2;
					@hoby: @oby/2;
					@bx: @obx - 4;
					@by: @oby - 4;
					@hbx: @bx/2;
					@hby: @by/2;
					display: block;
					position: absolute;
					z-index: 2;
					width: unit(@obx,px);
					height: unit(@oby,px);
					left: unit(@hcx - @hobx, px);
					padding: 1px;
					border: solid 1px @passive-stroke-color;
					.svg(@bx,@by,
						"<path d='M @{hbx} 0 V @{by} M 0 @{hby} H @{bx}' fill='none' stroke='@{passive-stroke-color}' stroke-width='2' />"
					);
					background-color: @passive-fill-color;
					background-position: 1px 1px;
					background-repeat: no-repeat;
					&.t {
						top: unit(@cy - @oby, px);
					}
					span {
						position: absolute;
						left: -10000px;
					}
					opacity: 0;
					transition: 300ms;
					&:focus, &:hover {
						transition: none;
						opacity: 1;
						border: solid 1px @active-stroke-color;
						.svg(@bx,@by,
							"<path d='M @{hbx} 0 V @{by} M 0 @{hby} H @{bx}' fill='none' stroke='@{active-stroke-color}' stroke-width='2' />"
						);
						background-color: @active-fill-color;
					}
					&.attached-b, &.attached-t {
						transition: none;
						opacity: 1;
						.svg(@bx,@by,
							"<path d='M 0 @{hby} H @{bx}' fill='none' stroke='@{passive-stroke-color}' stroke-width='2' />"
						);
					}
					&.attached-b {
						border-bottom: none;
					}
					&.attached-t {
						border-top: none;
						background-position: 1px 2px;
					}
				}
				&:hover button {
					opacity: 1;
				}
				ul {
					@w: @cx - 2;
					position: absolute; // to be vertically positioned with js
					z-index: 1;
					width: unit(@w,px);
					margin: 0;
					padding: 0;
					border: 1px solid @active-stroke-color;
					background: @passive-fill-color;
					color: @passive-stroke-color;
					text-align: left;
					font-weight: normal;
					li {
						list-style: none;
						padding: 5px;
						&:focus, &:hover {
							background: @active-fill-color;
							color: @active-stroke-color;
						}
						cursor: default;
					}
					visibility: hidden;
					&.attached {
						visibility: visible;
					}
				}
			}
		}
		tr.arcs {
			@cx: @cell-width;
			@cy: @arc-cell-height;
			@hcx: @cx/2;
			@hcy: @cy/2;
			th {
				height: unit(@arc-cell-height,px);
				&.rt {
					.arc(@cx,@cy,"M @{hcx} 0 a @{hcy} @{hcy} 0 0 0 @{hcy} @{hcy} H @{cx}");
				}
				&.bl {
					.arc(@cx,@cy,"M @{hcx} @{cy} a @{hcy} @{hcy} 0 0 0 -@{hcy} -@{hcy} H 0");
				}
				&.rl {
					.arc(@cx,@cy,"M 0 @{hcy} H @{cx}");
				}
				&.rl.rt {
					.arc(@cx,@cy,"M 0 @{hcy} H @{cx} M @{hcx} 0 a @{hcy} @{hcy} 0 0 0 @{hcy} @{hcy}");
				}
				&.rl.bl {
					.arc(@cx,@cy,"M 0 @{hcy} H @{cx} M @{hcx} @{cy} a @{hcy} @{hcy} 0 0 0 -@{hcy} -@{hcy}");
				}
				&.bt {
					.arc(@cx,@cy,"M @{hcx} 0 V @{cy}");
				}
				&.bt.rt {
					.arc(@cx,@cy,"M @{hcx} 0 V @{cy} M @{hcx} 0 a @{hcy} @{hcy} 0 0 0 @{hcy} @{hcy} H @{cx}");
				}
				&.bt.bl {
					.arc(@cx,@cy,"M @{hcx} 0 V @{cy} M @{hcx} @{cy} a @{hcy} @{hcy} 0 0 0 -@{hcy} -@{hcy} H 0");
				}
			}
		}
		tfoot td {
			text-align: center;
		}
		tbody {
			ul {
				padding: 0;
			}
			li {
				list-style: none;
				padding: 0 10px;
				.svg(10,14,"<circle cx='5' cy='9' r='2' />");
				background-repeat: no-repeat;
			}
		}
	}
}
