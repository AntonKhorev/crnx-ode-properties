{"version":3,"sources":["crnx-ode-properties.js","node_modules/browser-pack/_prelude.js","src/data.js","src/main.js","src/thead-layout.js","src/thead-layout/arc-layers.js","src/thead-layout/cell-layers.js","src/thead-layout/node-layers.js"],"names":["babelHelpers","typeof","obj","Symbol","constructor","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","classCallCheck","instance","TypeError","possibleConstructorReturn","self","call","ReferenceError","inherits","subClass","superClass","defaults","keys","getOwnPropertyNames","value","getOwnPropertyDescriptor","undefined","create","taggedTemplateLiteralLoose","strings","raw","e","t","n","r","s","o","u","a","require","f","Error","code","l","exports",1,"module","dd","b","dydt","ddt","int","fx","x","sint","eqsol","name","root","parents","importance","equation","properties","separable","htmlName","solutions","autonomous","bernoulli","equationNotes","linear","linearHomogeneous","separableInT","expGrowth","logisticGrowth",2,"TheadLayout","data","$","each","$container","this","dag","idag","selectedNodes","id","_id","pid","getHtmlName","theadLayout","breadthWalk","graph","result","visited","queue","shift","push","apply","sort","writeButton","text","tip","$button","attr","writeData","output","markAncestors","forEach","reachAncestors","overrides","raiseOverride","iid","lowerOverride","rec","cid","forOverrides","fn","item","section","iids","skip","type","outItem","append","map","contents","$section","line","$b1","$b2","prepend","$bs","add","click","hasClass","removeClass","html","addClass","writeTable","visibleAncestors","computeVisibleAncestors","aid","naid","_id2","$equations","$attachedMenu","$attachedToButton","attachedDirection","attachTimeoutId","deleteNode","addNode","setCellClasses","$cell","cell","dir","writeTheadButton","nodes","keyCodeEnter","keyCodeSpace","keyCodeUp","keyCodeDown","removeAttachedMenu","remove","clearTimeout","startAttachingMenu","keydown","ev","keyCode","$toFocus","prev","focus","_$toFocus","next","setTimeout","mh","outerHeight","mo","offset","bh","bo","top","insertBefore","left","is","children","last","first","writeTheadCell","node","reverse","writeThead","$thead","nodeLayers","arcLayers","row","writeTfoot","columns","empty","$td","hover","notes","noteText","note","MathJax","Hub","Queue","3","makeNodeLabelLayersWithParents","makeArcLocationLayers","makeLayoutLayers","_ref","nodeLabelLayers","arcLocationLayers","concat","4","5","6","depthList","merge","c","j","arcRows","xs","arcs","parentXs","parentNode","_j","String","splice","sum","arr","reduce","times","Array","head","layoutWidth","makeBlankRow","nodeLayoutLayers","arcLayoutLayers","drawArcUp","k","bt","drawArcDown","_loop","_i","parentLocations","childLocations","pi","ci","rl","rt","bl","ancestorDistances","addAncestorDistance","fromNode","toNode","distance","oldDistance","newDistance","Math","max","traverseNode","ancestorNode","parentDistance","depth","nextParentOrder","parentOrder","_depth","sortedParents","node0","node1","p0","p1","cmpLen","cmpOrd","_node"],"mappings":"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","file":"crnx-ode-properties.js","sourcesContent":["(function () {\n    var babelHelpers = {\n        typeof: function (obj) {\n            return obj && typeof Symbol !== 'undefined' && obj.constructor === Symbol ? 'symbol' : typeof obj;\n        },\n        createClass: function () {\n            function defineProperties(target, props) {\n                for (var i = 0; i < props.length; i++) {\n                    var descriptor = props[i];\n                    descriptor.enumerable = descriptor.enumerable || false;\n                    descriptor.configurable = true;\n                    if ('value' in descriptor)\n                        descriptor.writable = true;\n                    Object.defineProperty(target, descriptor.key, descriptor);\n                }\n            }\n            return function (Constructor, protoProps, staticProps) {\n                if (protoProps)\n                    defineProperties(Constructor.prototype, protoProps);\n                if (staticProps)\n                    defineProperties(Constructor, staticProps);\n                return Constructor;\n            };\n        }(),\n        classCallCheck: function (instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n                throw new TypeError('Cannot call a class as a function');\n            }\n        },\n        possibleConstructorReturn: function (self, call) {\n            if (!self) {\n                throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n            }\n            return call && (typeof call === 'object' || typeof call === 'function') ? call : self;\n        },\n        inherits: function (subClass, superClass) {\n            function defaults(obj, defaults) {\n                var keys = Object.getOwnPropertyNames(defaults);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = keys[i];\n                    var value = Object.getOwnPropertyDescriptor(defaults, key);\n                    if (value && value.configurable && obj[key] === undefined) {\n                        Object.defineProperty(obj, key, value);\n                    }\n                }\n                return obj;\n            }\n            ;\n            if (typeof superClass !== 'function' && superClass !== null) {\n                throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n                constructor: {\n                    value: subClass,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true\n                }\n            });\n            if (superClass)\n                defaults(subClass, superClass);\n        },\n        taggedTemplateLiteralLoose: function (strings, raw) {\n            strings.raw = raw;\n            return strings;\n        }\n    };\n    (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == 'function' && require;\n                    if (!u && a)\n                        return a(o, !0);\n                    if (i)\n                        return i(o, !0);\n                    var f = new Error('Cannot find module \\'' + o + '\\'');\n                    throw f.code = 'MODULE_NOT_FOUND', f;\n                }\n                var l = n[o] = { exports: {} };\n                t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }\n            return n[o].exports;\n        }\n        var i = typeof require == 'function' && require;\n        for (var o = 0; o < r.length; o++)\n            s(r[o]);\n        return s;\n    }({\n        1: [\n            function (require, module, exports) {\n                'use strict';\n                var dd = function (a, b) {\n                    return '\\\\frac{\\\\mathrm{d}' + a + '}{\\\\mathrm{d}' + b + '}';\n                };\n                var dydt = dd('y', 't');\n                var ddt = dd('', 't');\n                var int = function (fx, x) {\n                    return '\\\\int\\\\!' + fx + '\\\\,\\\\mathrm{d}' + x;\n                };\n                var sint = function (fx, x) {\n                    return '\\\\int\\\\!' + fx + '\\\\mathrm{d}' + x;\n                };\n                var eqsol = function (name) {\n                    return '<a href=\\'https://en.wikipedia.org/wiki/Equilibrium_point\\'>' + name + '</a>';\n                };\n                module.exports = {\n                    root: {\n                        parents: {},\n                        name: 'first-order',\n                        importance: 0,\n                        equation: dydt + ' = f(t,y)',\n                        properties: [[[\n                                    'main',\n                                    ['Can test if \\\\(y_p(t)\\\\) is a solution by substituting \\\\(y = y_p\\\\) into the equation.']\n                                ]]]\n                    },\n                    separable: {\n                        parents: { root: true },\n                        name: 'first-order separable',\n                        htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29\\'>separable</a>',\n                        importance: 1,\n                        equation: dydt + ' = f_1(t) \\\\cdot f_2(y)',\n                        solutions: [\n                            [\n                                [\n                                    'id',\n                                    'general'\n                                ],\n                                [\n                                    'title',\n                                    ['Solutions']\n                                ],\n                                ['form'],\n                                [\n                                    'detail',\n                                    [\n                                        '\\\\[ ' + dydt + ' = f_1(t) \\\\cdot f_2(y) \\\\]',\n                                        '\\\\[ \\\\frac{1}{f_2(y)} \\\\cdot ' + dydt + ' = f_1(t) \\\\]',\n                                        '\\\\[ ' + int('\\\\frac{1}{f_2(y)} ' + dydt, 't') + ' = ' + int('f_1(t)', 't') + ' + C \\\\]'\n                                    ]\n                                ],\n                                [\n                                    'main',\n                                    ['\\\\[ ' + int('\\\\frac{1}{f_2(y)}', 'y') + ' = ' + int('f_1(t)', 't') + ' + C \\\\]']\n                                ],\n                                [\n                                    'note',\n                                    ['this may or may not include ' + eqsol('equilibrium solutions')]\n                                ]\n                            ],\n                            [\n                                [\n                                    'id',\n                                    'equilibrium'\n                                ],\n                                [\n                                    'title',\n                                    [eqsol('Equilibrium solutions')]\n                                ],\n                                ['form'],\n                                [\n                                    'main',\n                                    ['solve \\\\( f_2(y) = 0 \\\\) for constant \\\\( y \\\\)']\n                                ]\n                            ]\n                        ]\n                    },\n                    //`domain is not necessary \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)`\n                    autonomous: {\n                        parents: { separable: true },\n                        name: 'first-order autonomous',\n                        htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29\\'>autonomous</a>',\n                        importance: 1,\n                        equation: dydt + ' = f(y)',\n                        properties: [\n                            [[\n                                    'main',\n                                    ['horizontal <a href=\\'https://en.wikipedia.org/wiki/Isocline\\'>isoclines</a>']\n                                ]],\n                            [[\n                                    'main',\n                                    ['\\\\( y_p(t) \\\\) is a solution \\\\( \\\\Rightarrow \\\\) \\\\( y_p(t+C) \\\\) is a solution']\n                                ]]\n                        ],\n                        solutions: [\n                            [\n                                [\n                                    'id',\n                                    'general'\n                                ],\n                                [\n                                    'override',\n                                    ['general']\n                                ],\n                                [\n                                    'title',\n                                    ['Solutions']\n                                ],\n                                ['form'],\n                                [\n                                    'detail',\n                                    [\n                                        '\\\\[ ' + dydt + ' = f(y) \\\\]',\n                                        '\\\\[ \\\\frac{1}{f(y)} \\\\cdot ' + dydt + ' = 1 \\\\]',\n                                        '\\\\[ ' + int('\\\\frac{1}{f(y)} ' + dydt, 't') + ' = ' + int('1', 't') + ' + C \\\\]'\n                                    ]\n                                ],\n                                [\n                                    'main',\n                                    ['\\\\[ ' + int('\\\\frac{1}{f(y)}', 'y') + ' = t + C \\\\]']\n                                ],\n                                [\n                                    'note',\n                                    ['this may or may not include ' + eqsol('equilibrium solutions')]\n                                ]\n                            ],\n                            [\n                                [\n                                    'id',\n                                    'equilibrium'\n                                ],\n                                [\n                                    'override',\n                                    ['equilibrium']\n                                ],\n                                [\n                                    'title',\n                                    [eqsol('Equilibrium solutions')]\n                                ],\n                                ['form'],\n                                [\n                                    'main',\n                                    ['solve \\\\( f(y) = 0 \\\\) for constant \\\\( y \\\\)']\n                                ]\n                            ]\n                        ]\n                    },\n                    //`domain is \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)` // only if f(y) is continuous\n                    bernoulli: {\n                        parents: { root: true },\n                        name: 'Bernoulli',\n                        htmlName: '<a href=\\'https://en.wikipedia.org/wiki/Bernoulli_differential_equation\\'>Bernoulli</a>',\n                        importance: 2,\n                        equation: dydt + ' = a(t) \\\\cdot y + b(t) \\\\cdot y^n',\n                        equationNotes: [\n                            '\\\\( n \\u2260 1 \\\\)',\n                            'usually it\\'s also defined that additionally \\\\( n \\u2260 0 \\\\), but we ignore this requirement here'\n                        ],\n                        solutions: [\n                            [\n                                [\n                                    'id',\n                                    'general'\n                                ],\n                                [\n                                    'title',\n                                    ['Solutions']\n                                ],\n                                ['form'],\n                                [\n                                    'detail',\n                                    [\n                                        '\\\\[ ' + dydt + ' = a(t) \\\\cdot y + b(t) \\\\cdot y^n \\\\]',\n                                        'multiply the equation by \\\\( \\\\frac{1-n}{y^n} \\\\)',\n                                        '\\\\[ \\\\frac{1-n}{y^n} ' + dydt + ' = \\\\cdots \\\\]',\n                                        '\\\\[ \\\\cdots = \\\\frac{(1-n) a(t)}{y^{n-1}} + (1-n) b(t) \\\\]',\n                                        'introduce a new variable',\n                                        '\\\\[ z = \\\\frac{1}{y^{n-1}} \\\\]',\n                                        '\\\\[ ' + dd('z', 't') + ' = ' + dd('z', 'y') + ' ' + dydt + ' = \\\\frac{1-n}{y^n} ' + dydt + ' \\\\]',\n                                        'substitute \\\\( z \\\\) and \\\\( ' + dd('z', 't') + ' \\\\) into the equation',\n                                        '\\\\[ ' + dd('z', 't') + ' = (1-n) a(t) z + (1-n) b(t) \\\\]',\n                                        'solve this equation as a linear equation in \\\\( z \\\\), then return to the original variable \\\\( y \\\\)',\n                                        '\\\\[ \\\\mu(t) z = (1-n) ' + int('\\\\mu(t) b(t)', 't') + ' + C \\\\]'\n                                    ]\n                                ],\n                                [\n                                    'main',\n                                    [\n                                        '\\\\[ \\\\mu(t) = e^{(n-1)' + sint('a(t)', 't') + '} \\\\]',\n                                        '\\\\[ \\\\frac{\\\\mu(t)}{y^{n-1}} = (1-n) ' + int('\\\\mu(t) b(t)', 't') + ' + C \\\\]'\n                                    ]\n                                ],\n                                [\n                                    'note',\n                                    ['this may or may not include ' + eqsol('equilibrium solutions')]\n                                ]\n                            ],\n                            [\n                                [\n                                    'id',\n                                    'equilibrium'\n                                ],\n                                [\n                                    'override',\n                                    ['equilibrium']\n                                ],\n                                [\n                                    'title',\n                                    [eqsol('Equilibrium solution')]\n                                ],\n                                ['form'],\n                                [\n                                    'main',\n                                    ['if \\\\( n>0 \\\\), there\\'s an equilibrium solution \\\\( y(t) = 0 \\\\)']\n                                ]\n                            ]\n                        ]\n                    },\n                    linear: {\n                        parents: { bernoulli: true },\n                        name: 'first-order linear',\n                        htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Linear_differential_equation\\'>linear</a>',\n                        importance: 1,\n                        equation: dydt + ' = a(t) \\\\cdot y + b(t)',\n                        properties: [\n                            [\n                                [\n                                    'id',\n                                    'linearity'\n                                ],\n                                [\n                                    'title',\n                                    ['Extended linearity']\n                                ],\n                                ['form'],\n                                [\n                                    'main',\n                                    [\n                                        'If \\\\( y_p(t) \\\\) is a solution of the original equation \\\\( ' + dydt + ' = a(t) \\\\cdot y + b(t) \\\\)',\n                                        'and \\\\( y_h(t) \\\\) is a solution of its associated homogeneous equation \\\\( ' + dydt + ' = a(t) \\\\cdot y \\\\),',\n                                        'then \\\\( K y_h(t) + y_p(t) \\\\) is a solution of the original equation.',\n                                        'If additionally \\\\( y_h(t) \\\\neq 0 \\\\), then \\\\( K y_h(t) + y_p(t) \\\\) is a general solution.'\n                                    ]\n                                ]\n                            ],\n                            [\n                                [\n                                    'id',\n                                    'homodiff'\n                                ],\n                                ['form'],\n                                [\n                                    'main',\n                                    [\n                                        'If \\\\( y_p(t) \\\\) and \\\\( y_q(t) \\\\) are solutions,',\n                                        'then \\\\( y_p(t) - y_q(t) \\\\) is a solution of the associated homogeneous equation \\\\( ' + dydt + ' = a(t) \\\\cdot y \\\\).'\n                                    ]\n                                ]\n                            ]\n                        ],\n                        solutions: [\n                            [\n                                [\n                                    'id',\n                                    'general'\n                                ],\n                                [\n                                    'override',\n                                    ['general']\n                                ],\n                                [\n                                    'title',\n                                    ['Solutions found with method of <a href=\\'https://en.wikipedia.org/wiki/Integrating_factor\\'>integrating factors</a>']\n                                ],\n                                ['form'],\n                                [\n                                    'detail',\n                                    [\n                                        '\\\\[ ' + dydt + ' = a(t) \\\\cdot y + b(t) \\\\]',\n                                        'introduce a new function',\n                                        '\\\\[ g(t) = -a(t) \\\\]',\n                                        'rewrite the equation with \\\\( g(t) \\\\)',\n                                        '\\\\[ ' + dydt + ' + g(t) \\\\cdot y = b(t) \\\\]',\n                                        'introduce the integrating factor',\n                                        '\\\\[ \\\\mu(t) = e^{' + sint('g(t)', 't') + '} \\\\]',\n                                        'multiply the equation by \\\\( \\\\mu(t) \\\\)',\n                                        '\\\\[ \\\\mu(t) ' + dydt + ' + \\\\mu(t) g(t) y = \\\\mu(t) b(t) \\\\]',\n                                        '\\\\[ \\\\mu(t) ' + dydt + ' + e^{' + sint('g(t)', 't') + '} g(t) y = \\\\mu(t) b(t) \\\\]',\n                                        '\\\\[ \\\\mu(t) ' + dydt + ' + ' + ddt + '(e^{' + sint('g(t)', 't') + '}) y = \\\\mu(t) b(t) \\\\]',\n                                        '\\\\[ \\\\mu(t) ' + dydt + ' + ' + ddt + '(\\\\mu(t)) y = \\\\mu(t) b(t) \\\\]',\n                                        '\\\\[ ' + ddt + '(\\\\mu(t) y) = \\\\mu(t) b(t) \\\\]',\n                                        'integrate the equation multiplied by \\\\( \\\\mu(t) \\\\)',\n                                        '\\\\[ \\\\mu(t) y = ' + int('\\\\mu(t) b(t)', 't') + ' + C \\\\]'\n                                    ]\n                                ],\n                                [\n                                    'main',\n                                    [\n                                        '\\\\[ \\\\mu(t) = e^{-' + sint('a(t)', 't') + '} \\\\]',\n                                        '\\\\[ \\\\mu(t) y = ' + int('\\\\mu(t) b(t)', 't') + ' + C \\\\]'\n                                    ]\n                                ]\n                            ],\n                            [[\n                                    'override',\n                                    ['equilibrium']\n                                ]]\n                        ]\n                    },\n                    linearHomogeneous: {\n                        parents: {\n                            separable: true,\n                            linear: true\n                        },\n                        name: 'first-order linear homogeneous',\n                        htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Linear_differential_equation\\'>linear</a> <a href=\\'https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations\\'>homogeneous</a>',\n                        importance: 1,\n                        equation: dydt + ' = a(t) \\\\cdot y',\n                        properties: [[\n                                [\n                                    'id',\n                                    'linearity'\n                                ],\n                                [\n                                    'override',\n                                    [\n                                        'linearity',\n                                        'homodiff'\n                                    ]\n                                ],\n                                [\n                                    'title',\n                                    ['Linearity']\n                                ],\n                                [\n                                    'main',\n                                    [\n                                        'If \\\\( y_h(t) \\\\) is a solution, then \\\\( K y_h(t) \\\\) is a solution.',\n                                        'If additionally \\\\( y_h(t) \\\\neq 0 \\\\), then \\\\( K y_h(t) \\\\) is a general solution.'\n                                    ]\n                                ]\n                            ]],\n                        solutions: [\n                            [\n                                [\n                                    'id',\n                                    'general'\n                                ],\n                                [\n                                    'override',\n                                    ['general']\n                                ],\n                                [\n                                    'title',\n                                    ['Solutions']\n                                ],\n                                ['form'],\n                                [\n                                    'detail',\n                                    [\n                                        '\\\\[ ' + dydt + ' = a(t) \\\\cdot y \\\\]',\n                                        '\\\\[ \\\\frac{1}{y} \\\\cdot ' + dydt + ' = a(t) \\\\]',\n                                        '\\\\[ ' + int('\\\\frac{1}{y} ' + dydt, 't') + ' = ' + int('a(t)', 't') + ' + C \\\\]',\n                                        '\\\\[ ' + int('\\\\frac{1}{y}', 'y') + ' = ' + int('a(t)', 't') + ' + C \\\\]',\n                                        '\\\\[ \\\\ln|y| = ' + int('a(t)', 't') + ' + C \\\\]'\n                                    ]\n                                ],\n                                [\n                                    'main',\n                                    ['\\\\[ y = K \\\\cdot e^{' + sint('a(t)', 't') + '} \\\\]']\n                                ],\n                                [\n                                    'note',\n                                    ['includes ' + eqsol('equilibrium solution') + ' when \\\\( K = 0 \\\\)']\n                                ]\n                            ],\n                            [\n                                [\n                                    'id',\n                                    'equilibrium'\n                                ],\n                                [\n                                    'override',\n                                    ['equilibrium']\n                                ],\n                                [\n                                    'title',\n                                    [eqsol('Equilibrium solution')]\n                                ],\n                                [\n                                    'main',\n                                    ['\\\\[ y(t) = 0 \\\\]']\n                                ]\n                            ]\n                        ]\n                    },\n                    separableInT: {\n                        parents: {\n                            separable: true,\n                            linear: true\n                        },\n                        name: 'first-order separable in independent variable',\n                        htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29\\'>separable</a> in \\\\(t\\\\)',\n                        importance: 2,\n                        equation: dydt + ' = f(t)',\n                        properties: [\n                            [[\n                                    'main',\n                                    ['vertical <a href=\\'https://en.wikipedia.org/wiki/Isocline\\'>isoclines</a>']\n                                ]],\n                            [\n                                [\n                                    'id',\n                                    'linearity'\n                                ],\n                                [\n                                    'override',\n                                    [\n                                        'linearity',\n                                        'homodiff'\n                                    ]\n                                ],\n                                [\n                                    'main',\n                                    ['\\\\( y_p(t) \\\\) is a solution \\\\( \\\\Rightarrow \\\\) \\\\( y_p(t) + C \\\\) is a solution']\n                                ]\n                            ]\n                        ],\n                        solutions: [\n                            [\n                                [\n                                    'id',\n                                    'general'\n                                ],\n                                [\n                                    'override',\n                                    ['general']\n                                ],\n                                [\n                                    'title',\n                                    ['Solutions']\n                                ],\n                                ['form'],\n                                [\n                                    'detail',\n                                    [\n                                        '\\\\[ ' + dydt + ' = f(t) \\\\]',\n                                        '\\\\[ ' + int('' + dydt, 't') + ' = ' + int('f(t)', 't') + ' + C \\\\]'\n                                    ]\n                                ],\n                                [\n                                    'main',\n                                    ['\\\\[ y = ' + int('f(t)', 't') + ' + C \\\\]']\n                                ]\n                            ],\n                            [[\n                                    'override',\n                                    ['equilibrium']\n                                ]]\n                        ]\n                    },\n                    expGrowth: {\n                        parents: {\n                            autonomous: true,\n                            linearHomogeneous: true\n                        },\n                        name: 'exponential growth',\n                        htmlName: '<a href=\\'https://en.wikipedia.org/wiki/Exponential_growth#Differential_equation\\'>exponential growth</a>',\n                        importance: 2,\n                        equation: dydt + ' = k \\\\cdot y',\n                        solutions: [\n                            [\n                                [\n                                    'id',\n                                    'general'\n                                ],\n                                [\n                                    'override',\n                                    ['general']\n                                ],\n                                [\n                                    'title',\n                                    ['Solutions']\n                                ],\n                                ['form'],\n                                [\n                                    'detail',\n                                    [\n                                        '\\\\[ ' + dydt + ' = k \\\\cdot y \\\\]',\n                                        '\\\\[ \\\\frac{1}{y} \\\\cdot ' + dydt + ' = k \\\\]',\n                                        '\\\\[ ' + int('\\\\frac{1}{y} ' + dydt, 't') + ' = ' + int('k', 't') + ' + C \\\\]',\n                                        '\\\\[ ' + int('\\\\frac{1}{y}', 'y') + ' = ' + int('k', 't') + ' + C \\\\]',\n                                        '\\\\[ \\\\ln|y| = kt + C \\\\]',\n                                        '\\\\[ y(t) = C_1 e^{kt} \\\\]',\n                                        '\\\\[ y(0) = C_1 e^0 \\\\]',\n                                        '\\\\[ C_1 = y(0) \\\\]'\n                                    ]\n                                ],\n                                [\n                                    'main',\n                                    ['\\\\[ y(t) = y(0) e^{kt} \\\\]']\n                                ],\n                                [\n                                    'note',\n                                    ['includes ' + eqsol('equilibrium solution') + ' when \\\\( y(0) = 0 \\\\)']\n                                ]\n                            ],\n                            [\n                                // TODO could have inherited from linear homogeneous, but have to override autonomous\n                                [\n                                    'id',\n                                    'equilibrium'\n                                ],\n                                [\n                                    'override',\n                                    ['equilibrium']\n                                ],\n                                [\n                                    'title',\n                                    [eqsol('Equilibrium solution')]\n                                ],\n                                [\n                                    'main',\n                                    ['\\\\[ y(t) = 0 \\\\]']\n                                ]\n                            ]\n                        ]\n                    },\n                    logisticGrowth: {\n                        parents: {\n                            autonomous: true,\n                            bernoulli: true\n                        },\n                        name: 'logistic growth',\n                        htmlName: '<a href=\\'https://en.wikipedia.org/wiki/Logistic_function#In_ecology:_modeling_population_growth\\'>logistic growth</a>',\n                        importance: 2,\n                        equation: dydt + ' = r \\\\cdot y \\\\cdot \\\\left(1 - \\\\frac{y}{k}\\\\right)',\n                        equationNotes: ['\\\\( k \\\\) is the <a href=\\'https://en.wikipedia.org/wiki/Carrying_capacity\\'>carrying capacity</a>'],\n                        solutions: [[\n                                [\n                                    'id',\n                                    'equilibrium'\n                                ],\n                                [\n                                    'override',\n                                    ['equilibrium']\n                                ],\n                                [\n                                    'title',\n                                    [eqsol('Equilibrium solutions')]\n                                ],\n                                ['form'],\n                                [\n                                    'main',\n                                    [\n                                        '\\\\[ y(t) = 0 \\\\]',\n                                        '\\\\[ y(t) = k \\\\]'\n                                    ]\n                                ]\n                            ]]\n                    }\n                };\n            },\n            {}\n        ],\n        2: [\n            function (require, module, exports) {\n                'use strict';\n                var TheadLayout = require(3);\n                var data = require(1);\n                $(function () {\n                    $('.crnx-ode-properties').each(function () {\n                        var $container = $(this);\n                        var dag = {}, idag = {};\n                        var selectedNodes = {};\n                        // visible nodes\n                        for (var id in data) {\n                            if (data[id].importance <= 1) {\n                                selectedNodes[id] = true;\n                            }\n                            dag[id] = data[id].parents;\n                            idag[id] = {};\n                        }\n                        for (var _id in data) {\n                            for (var pid in dag[_id]) {\n                                idag[pid][_id] = true;\n                            }\n                        }\n                        var getHtmlName = function (id) {\n                            return data[id].htmlName !== undefined ? data[id].htmlName : data[id].name;\n                        };\n                        var theadLayout = new TheadLayout(dag, selectedNodes);\n                        var breadthWalk = function (graph, id) {\n                            var result = [];\n                            var visited = {};\n                            var queue = [id];\n                            while (queue.length > 0) {\n                                id = queue.shift();\n                                if (visited[id]) {\n                                    continue;\n                                }\n                                visited[id] = true;\n                                if (!selectedNodes[id]) {\n                                    result.push(id);\n                                }\n                                queue.push.apply(queue, Object.keys(graph[id]).sort());\n                            }\n                            return result;\n                        };\n                        var writeButton = function (text, tip) {\n                            var $button = $('<button type=\\'button\\'><span>' + text + '</span></button>');\n                            if (tip !== undefined) {\n                                $button.attr('title', tip);\n                            }\n                            return $button;\n                        };\n                        var writeData = function (name, id) {\n                            var output = [];\n                            // mark ancestors of visible ancestors as visited\n                            var visited = {};\n                            var markAncestors = function (id) {\n                                if (visited[id])\n                                    return;\n                                visited[id] = true;\n                                Object.keys(data[id].parents).forEach(function (pid) {\n                                    markAncestors(pid);\n                                });\n                            };\n                            var reachAncestors = function (id) {\n                                if (visited[id])\n                                    return;\n                                Object.keys(data[id].parents).forEach(function (pid) {\n                                    if (selectedNodes[pid]) {\n                                        markAncestors(pid);\n                                    } else {\n                                        reachAncestors(pid);\n                                    }\n                                });\n                            };\n                            reachAncestors(id);\n                            var overrides = {};\n                            var raiseOverride = function (iid) {\n                                if (overrides[iid] === undefined) {\n                                    overrides[iid] = 0;\n                                }\n                                overrides[iid]++;\n                            };\n                            var lowerOverride = function (iid) {\n                                overrides[iid]--;\n                            };\n                            var rec = function (cid) {\n                                visited[cid] = true;\n                                var forOverrides = function (fn) {\n                                    if (data[cid][name]) {\n                                        data[cid][name].forEach(function (item) {\n                                            item.forEach(function (section) {\n                                                var type = section[0];\n                                                if (section[0] == 'override') {\n                                                    var iids = section[1];\n                                                    iids.forEach(function (iid) {\n                                                        fn(iid);\n                                                    });\n                                                }\n                                            });\n                                        });\n                                    }\n                                };\n                                // recursion on nodes that are not selected for display\n                                forOverrides(raiseOverride);\n                                Object.keys(data[cid].parents).sort().forEach(function (pid) {\n                                    if (!visited[pid]) {\n                                        rec(pid);\n                                    }\n                                });\n                                forOverrides(lowerOverride);\n                                // output of things that are not overridden by children\n                                if (data[cid][name]) {\n                                    data[cid][name].forEach(function (item) {\n                                        var skip = false;\n                                        item.forEach(function (section) {\n                                            var type = section[0];\n                                            if (type == 'id') {\n                                                var iid = section[1];\n                                                if (overrides[iid]) {\n                                                    skip = true;\n                                                }\n                                            }\n                                        });\n                                        if (skip)\n                                            return;\n                                        var outItem = [];\n                                        item.forEach(function (section) {\n                                            var type = section[0];\n                                            if (type == 'id' || type == 'override')\n                                                return;\n                                            if (type == 'form') {\n                                                if (cid != id) {\n                                                    outItem.push([\n                                                        'note',\n                                                        [\n                                                            'when equation is written as <em>' + getHtmlName(cid) + '</em>:',\n                                                            '\\\\[' + data[cid].equation + '\\\\]'\n                                                        ]\n                                                    ]);\n                                                }\n                                            } else {\n                                                outItem.push(section);\n                                            }\n                                        });\n                                        if (outItem.length > 0) {\n                                            output.push(outItem);\n                                        }\n                                    });\n                                }\n                            };\n                            rec(id);\n                            if (output.length == 0)\n                                return $();\n                            return $('<ul class=\\'major\\'>').append(output.map(function (item) {\n                                return $('<li>').append(item.map(function (section) {\n                                    var type = section[0], contents = section[1];\n                                    var $section = $('<div class=\\'' + type + '\\'>').append(contents.map(function (line) {\n                                        if (type == 'title') {\n                                            return $('<div><em>' + line + '</em>:</div>');\n                                        } else {\n                                            return $('<div>' + line + '</div>');\n                                        }\n                                    }));\n                                    if (type == 'detail') {\n                                        (function () {\n                                            var $b1 = writeButton('Open', 'Expand details');\n                                            var $b2 = writeButton('Open', 'Expand details');\n                                            $section.prepend($b1).append($b2);\n                                            var $bs = $b1.add($b2);\n                                            $bs.click(function () {\n                                                if (!$section.hasClass('open')) {\n                                                    $section.addClass('open');\n                                                    $bs.html('<span>Close</span>').attr('title', 'Collapse details');\n                                                } else {\n                                                    $section.removeClass('open');\n                                                    $bs.html('<span>Open</span>').attr('title', 'Expand details');\n                                                }\n                                            });\n                                        }());\n                                    }\n                                    return $section;\n                                }));\n                            }));\n                        };\n                        var writeTable = function () {\n                            var visibleAncestors = {};\n                            // including self\n                            var computeVisibleAncestors = function (id, aid) {\n                                if (selectedNodes[aid]) {\n                                    visibleAncestors[id][aid] = true;\n                                }\n                                for (var naid in dag[aid]) {\n                                    computeVisibleAncestors(id, naid);\n                                }\n                            };\n                            for (var _id2 in selectedNodes) {\n                                visibleAncestors[_id2] = {};\n                                computeVisibleAncestors(_id2, _id2);\n                            }\n                            var $equations = {};\n                            var $attachedMenu = void 0, $attachedToButton = void 0, attachedDirection = void 0, attachTimeoutId = void 0;\n                            var deleteNode = function (id) {\n                                delete selectedNodes[id];\n                                theadLayout = new TheadLayout(dag, selectedNodes);\n                                writeTable();\n                            };\n                            var addNode = function (id) {\n                                selectedNodes[id] = true;\n                                theadLayout = new TheadLayout(dag, selectedNodes);\n                                writeTable();\n                            };\n                            var setCellClasses = function ($cell, cell) {\n                                ;\n                                [\n                                    'b',\n                                    't',\n                                    'bt',\n                                    'rl',\n                                    'rt',\n                                    'bl'\n                                ].forEach(function (dir) {\n                                    if (cell[dir]) {\n                                        $cell.addClass(dir);\n                                    }\n                                });\n                            };\n                            var writeTheadButton = function ($cell, text, tip, dir, nodes) {\n                                var keyCodeEnter = 13;\n                                var keyCodeSpace = 32;\n                                var keyCodeUp = 38;\n                                var keyCodeDown = 40;\n                                var $button = writeButton(text, tip).addClass(dir).click(function () {\n                                    var removeAttachedMenu = function () {\n                                        $attachedToButton.removeClass('attached-t attached-b');\n                                        $attachedMenu.remove();\n                                        clearTimeout(attachTimeoutId);\n                                        $attachedToButton = undefined;\n                                        $attachedMenu = undefined;\n                                        attachedDirection = undefined;\n                                        attachTimeoutId = undefined;\n                                    };\n                                    var startAttachingMenu = function () {\n                                        $attachedToButton = $button;\n                                        $attachedMenu = $('<ul>').append(nodes.map(function (id) {\n                                            return $('<li tabindex=\\'0\\'>' + data[id].name + '</li>').click(function () {\n                                                addNode(id);\n                                            }).keydown(function (ev) {\n                                                if (!attachedDirection)\n                                                    return;\n                                                // not yet decided on attach direction (this can't happen)\n                                                if (ev.keyCode == keyCodeUp) {\n                                                    var $toFocus = $(this).prev();\n                                                    if ($toFocus.length) {\n                                                        $toFocus.focus();\n                                                        return false;\n                                                    } else if (attachedDirection == 'b') {\n                                                        $button.focus();\n                                                        return false;\n                                                    }\n                                                } else if (ev.keyCode == keyCodeDown) {\n                                                    var _$toFocus = $(this).next();\n                                                    if (_$toFocus.length) {\n                                                        _$toFocus.focus();\n                                                        return false;\n                                                    } else if (attachedDirection == 't') {\n                                                        $button.focus();\n                                                        return false;\n                                                    }\n                                                } else if (ev.keyCode == keyCodeEnter || ev.keyCode == keyCodeSpace) {\n                                                    addNode(id);\n                                                    return false;\n                                                }\n                                            });\n                                        }));\n                                        $cell.append($attachedMenu);\n                                        attachTimeoutId = setTimeout(function () {\n                                            // can calculate height only after it's displayed\n                                            var mh = $attachedMenu.outerHeight();\n                                            var mo = $attachedMenu.offset();\n                                            var bh = $button.outerHeight();\n                                            var bo = $button.offset();\n                                            var t = bo.top - mh + 1;\n                                            if (dir != 't' || t < 0) {\n                                                // want below or doesn't fit to screen above the button\n                                                t = bo.top + bh - 1;\n                                                attachedDirection = 'b';\n                                            } else {\n                                                $attachedMenu.insertBefore($button);\n                                                attachedDirection = 't';\n                                            }\n                                            $attachedMenu.offset({\n                                                top: t,\n                                                left: mo.left\n                                            });\n                                            $attachedMenu.addClass('attached');\n                                            $button.addClass('attached-' + attachedDirection);\n                                        }, 0);\n                                    };\n                                    if (!$button.is($attachedToButton)) {\n                                        if ($attachedToButton) {\n                                            removeAttachedMenu();    // close menu opened elsewhere\n                                        }\n                                        startAttachingMenu();\n                                    } else {\n                                        removeAttachedMenu();    // close menu here\n                                    }\n                                }).keydown(function (ev) {\n                                    if ($button.is($attachedToButton)) {\n                                        if (ev.keyCode == keyCodeUp && attachedDirection == 't') {\n                                            $attachedMenu.children().last().focus();\n                                            return false;\n                                        } else if (ev.keyCode == keyCodeDown && attachedDirection == 'b') {\n                                            $attachedMenu.children().first().focus();\n                                            return false;\n                                        }\n                                    }\n                                });\n                                return $button;\n                            };\n                            var writeTheadCell = function (cell) {\n                                var $cell = $('<th>');\n                                setCellClasses($cell, cell);\n                                if (cell.node !== undefined) {\n                                    $cell.append(getHtmlName(cell.node));\n                                    var parents = breadthWalk(dag, cell.node).reverse();\n                                    var $parents = void 0;\n                                    if (parents.length > 0) {\n                                        $cell.append(' ', writeTheadButton($cell, 'Add parent', 'Add one of supertypes of this equation type', 't', parents));\n                                    }\n                                    var children = breadthWalk(idag, cell.node);\n                                    if (children.length > 0) {\n                                        $cell.append(' ', writeTheadButton($cell, 'Add child', 'Add one of subtypes of this equation type', 'b', children));\n                                    }\n                                }\n                                return $cell;\n                            };\n                            var writeThead = function () {\n                                var $thead = $('<thead>');\n                                for (var i = 0; i < theadLayout.nodeLayers.length; i++) {\n                                    $thead.append($('<tr class=\\'nodes\\'>').append(theadLayout.nodeLayers[i].map(writeTheadCell)));\n                                    if (i < theadLayout.arcLayers.length) {\n                                        $thead.append(theadLayout.arcLayers[i].map(function (row) {\n                                            return $('<tr class=\\'arcs\\'>').append(row.map(function (cell) {\n                                                var $cell = $('<th>');\n                                                setCellClasses($cell, cell);\n                                                return $cell;\n                                            }));\n                                        }));\n                                    }\n                                }\n                                return $thead;\n                            };\n                            var writeTfoot = function () {\n                                if (theadLayout.columns.length <= 1) {\n                                    return $();\n                                }\n                                return $('<tfoot>').append($('<tr>').append(theadLayout.columns.map(function (id) {\n                                    return $('<td>').append(writeButton('Delete', 'Delete this equation type').click(function () {\n                                        deleteNode(id);\n                                    }));\n                                })));\n                            };\n                            $container.empty().append($('<table>').append(writeThead(), writeTfoot(), $('<tbody>').append(// equations\n                            $('<tr>').append(theadLayout.columns.map(function (id) {\n                                var $td = $('<td>');\n                                $td.append($equations[id] = $('<div class=\\'equation\\'>\\\\[' + data[id].equation + '\\\\]</div>').hover(function () {\n                                    for (var aid in visibleAncestors[id]) {\n                                        $equations[aid].addClass('highlight');\n                                    }\n                                }, function () {\n                                    for (var aid in visibleAncestors[id]) {\n                                        $equations[aid].removeClass('highlight');\n                                    }\n                                }));\n                                var notes = [];\n                                if (data[id].equationNotes !== undefined) {\n                                    notes.push.apply(notes, data[id].equationNotes.map(function (noteText) {\n                                        return $('<div class=\\'note\\'>').append(noteText);\n                                    }));\n                                }\n                                var parents = Object.keys(theadLayout.parents[id]);\n                                if (parents.length > 0) {\n                                    notes.push($('<div class=\\'note\\'>').append('can also be written as and has all properties of:', $('<ul>').append(parents.sort().map(function (pid) {\n                                        return $('<li>').append($('<em>' + getHtmlName(pid) + '</em>').hover(function () {\n                                            $equations[pid].addClass('highlight');\n                                        }, function () {\n                                            $equations[pid].removeClass('highlight');\n                                        }));\n                                    }))));\n                                }\n                                if (notes.length > 0) {\n                                    $td.append($('<ul>').append(notes.map(function (note) {\n                                        return $('<li>').append(note);\n                                    })));\n                                }\n                                return $td;\n                            })), // properties\n                            $('<tr>').append(theadLayout.columns.map(function (id) {\n                                return $('<td>').append(writeData('properties', id));\n                            })), // solutions\n                            $('<tr>').append(theadLayout.columns.map(function (id) {\n                                return $('<td>').append(writeData('solutions', id));\n                            })))), '<p>General notes:</p>', $('<ul>').append('<li>how to read the diagram: <ul>' + '<li>equation type names are written among arrows that show the relationship between types</li>' + '<li>properties of an equation type are listed in the table column below its name</li>' + '<li>every property of the equation type on the tip of the arrow <span class=\\'arrow\\'></span> is also true for the equation type on the other end of the arrow (like <a href=\\'https://en.wikipedia.org/wiki/Class_diagram\\'>class diagram</a>)</li>' + '</ul></li>', '<li>all functions have to be continuous on the interval of interest</li>', '<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t + C \\\\) is a family of antiderivatives of \\\\( f(t) \\\\) with parameter \\\\( C \\\\)</li>', '<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t \\\\) is any single antiderivative of \\\\( f(t) \\\\)'));\n                            MathJax.Hub.Queue([\n                                'Typeset',\n                                MathJax.Hub\n                            ]);\n                        };\n                        writeTable();\n                    });\n                });\n            },\n            {\n                '1': 1,\n                '3': 3\n            }\n        ],\n        3: [\n            function (require, module, exports) {\n                'use strict';\n                var makeNodeLabelLayersWithParents = require(6);\n                var makeArcLocationLayers = require(4);\n                var makeLayoutLayers = require(5);\n                var TheadLayout = function TheadLayout(dag, selectedNodes) {\n                    var _ref;\n                    babelHelpers.classCallCheck(this, TheadLayout);\n                    var t = void 0;\n                    t = makeNodeLabelLayersWithParents(dag, selectedNodes);\n                    var nodeLabelLayers = t[0], parents = t[1];\n                    var arcLocationLayers = makeArcLocationLayers(nodeLabelLayers, parents);\n                    t = makeLayoutLayers(nodeLabelLayers, arcLocationLayers);\n                    this.columns = (_ref = []).concat.apply(_ref, nodeLabelLayers);\n                    this.nodeLayers = t[0];\n                    this.arcLayers = t[1];\n                    this.parents = parents;    // TODO return as array in order of appearance, test\n                };\n                module.exports = TheadLayout;\n            },\n            {\n                '4': 4,\n                '5': 5,\n                '6': 6\n            }\n        ],\n        4: [\n            function (require, module, exports) {\n                'use strict';\n                module.exports = function (depthList, parents) {\n                    // TODO would prefer ordered parents list\n                    var merge = function (a, b) {\n                        // can also use lodash union and sort\n                        var c = [];\n                        var i = 0, j = 0;\n                        while (i < a.length || j < b.length) {\n                            if (j >= b.length) {\n                                c.push(a[i++]);\n                            } else if (i >= a.length) {\n                                c.push(b[j++]);\n                            } else if (a[i] < b[j]) {\n                                c.push(a[i++]);\n                            } else if (a[i] > b[j]) {\n                                c.push(b[j++]);\n                            } else {\n                                c.push(a[i++]);\n                                j++;\n                            }\n                        }\n                        return c;\n                    };\n                    var arcRows = [];\n                    var xs = {};\n                    var x = 0;\n                    for (var i = 0; i < depthList.length; i++) {\n                        depthList[i].forEach(function (node) {\n                            xs[node] = x++;\n                        });\n                        if (i > 0) {\n                            var arcs = [];\n                            for (var j = depthList[i].length - 1; j >= 0; j--) {\n                                var node = depthList[i][j];\n                                var parentXs = Object.keys(parents[node]).map(function (parentNode) {\n                                    return xs[parentNode];\n                                }).sort(function (a, b) {\n                                    return a - b;\n                                });\n                                arcs.push([\n                                    parentXs,\n                                    [xs[node]]\n                                ]);\n                            }\n                            for (var _j = 1; _j < arcs.length; _j++) {\n                                if (String(arcs[_j - 1][0]) === String(arcs[_j][0])) {\n                                    // sloppy but should be ok for numbers\n                                    arcs[_j - 1][1] = merge(arcs[_j - 1][1], arcs[_j][1]);\n                                    // merge children - parents already merged\n                                    arcs.splice(_j, 1);\n                                    _j -= 1;\n                                }\n                            }\n                            arcRows.push(arcs);\n                        }\n                    }\n                    return arcRows;\n                };\n            },\n            {}\n        ],\n        5: [\n            function (require, module, exports) {\n                'use strict';\n                // TODO fake lodash\n                var sum = function (arr) {\n                    return arr.reduce(function (a, b) {\n                        return a + b;\n                    });\n                };\n                //const times=(n,fn)=>Array(n).map((v,i)=>fn(i))\n                var times = function (n, fn) {\n                    var arr = Array(n);\n                    for (var i = 0; i < n; i++) {\n                        arr[i] = fn(i);\n                    }\n                    return arr;\n                };\n                var head = function (arr) {\n                    return arr[0];\n                };\n                var last = function (arr) {\n                    return arr[arr.length - 1];\n                };\n                module.exports = function (nodeLabelLayers, arcLocationLayers) {\n                    var layoutWidth = sum(nodeLabelLayers.map(function (x) {\n                        return x.length;\n                    }));\n                    var makeBlankRow = function () {\n                        return times(layoutWidth, function () {\n                            return {};\n                        });\n                    };\n                    var nodeLayoutLayers = [], arcLayoutLayers = [];\n                    var drawArcUp = function (i, j, k) {\n                        for (; i >= 0; i--) {\n                            for (j -= 1; j >= 0; j--) {\n                                arcLayoutLayers[i][j][k].bt = true;\n                            }\n                            if (nodeLayoutLayers[i][k].node !== undefined) {\n                                nodeLayoutLayers[i][k].b = true;\n                                return;\n                            }\n                            nodeLayoutLayers[i][k].bt = true;\n                            if (i <= 0) {\n                                return;\n                            }\n                            j = arcLayoutLayers[i - 1].length;\n                        }\n                    };\n                    var drawArcDown = function (i, j, k) {\n                        for (j += 1; j < arcLayoutLayers[i].length; j++) {\n                            arcLayoutLayers[i][j][k].bt = true;\n                        }\n                        nodeLayoutLayers[i + 1][k].t = true;\n                    };\n                    // create empty cells\n                    for (var i = 0; i < nodeLabelLayers.length; i++) {\n                        nodeLayoutLayers.push(makeBlankRow());\n                        if (i >= arcLocationLayers.length)\n                            continue;\n                        arcLayoutLayers.push(arcLocationLayers[i].map(makeBlankRow));\n                    }\n                    // fill cells\n                    var x = 0;\n                    var _loop = function (_i) {\n                        nodeLabelLayers[_i].forEach(function (node) {\n                            nodeLayoutLayers[_i][x++].node = node;\n                        });\n                        if (_i >= arcLocationLayers.length)\n                            return 'continue';\n                        for (var j = 0; j < arcLocationLayers[_i].length; j++) {\n                            var parentLocations = arcLocationLayers[_i][j][0];\n                            var childLocations = arcLocationLayers[_i][j][1];\n                            var pi = 0, ci = 0;\n                            for (var k = 0; k < layoutWidth; k++) {\n                                if (k > head(parentLocations) && k < last(childLocations)) {\n                                    arcLayoutLayers[_i][j][k].rl = true;\n                                }\n                                if (k == parentLocations[pi]) {\n                                    pi++;\n                                    arcLayoutLayers[_i][j][k].rt = true;\n                                    drawArcUp(_i, j, k);\n                                }\n                                if (k == childLocations[ci]) {\n                                    ci++;\n                                    arcLayoutLayers[_i][j][k].bl = true;\n                                    drawArcDown(_i, j, k);\n                                }\n                            }\n                        }\n                    };\n                    for (var _i = 0; _i < nodeLabelLayers.length; _i++) {\n                        var _ret = _loop(_i);\n                        if (_ret === 'continue')\n                            continue;\n                    }\n                    return [\n                        nodeLayoutLayers,\n                        arcLayoutLayers\n                    ];\n                };\n            },\n            {}\n        ],\n        6: [\n            function (require, module, exports) {\n                'use strict';\n                // dag = {nodeLabel:{parentLabel:true,...},...}\n                // nodes = {nodeLabel:true,...}\n                module.exports = function (dag, selectedNodes) {\n                    var ancestorDistances = {};\n                    // {node:{ancestorNode:distance,...},...}; node is any node, ancestorNode is one of selectedNodes\n                    var addAncestorDistance = function (fromNode, toNode, distance) {\n                        var oldDistance = ancestorDistances[fromNode][toNode];\n                        var newDistance = oldDistance === undefined ? distance : Math.max(distance, oldDistance);\n                        ancestorDistances[fromNode][toNode] = newDistance;\n                    };\n                    var traverseNode = function (node) {\n                        if (ancestorDistances[node]) {\n                            return;    // already visited\n                        }\n                        ancestorDistances[node] = {};\n                        for (var parentNode in dag[node]) {\n                            traverseNode(parentNode);\n                            if (selectedNodes[parentNode]) {\n                                addAncestorDistance(node, parentNode, 1);\n                            }\n                            for (var ancestorNode in ancestorDistances[parentNode]) {\n                                var parentDistance = ancestorDistances[parentNode][ancestorNode];\n                                addAncestorDistance(node, ancestorNode, parentDistance + !!selectedNodes[parentNode]);\n                            }\n                        }\n                    };\n                    var depthList = [];\n                    var parents = {};\n                    for (var node in selectedNodes) {\n                        traverseNode(node);\n                        var depth = 0;\n                        parents[node] = {};\n                        for (var ancestorNode in ancestorDistances[node]) {\n                            var distance = ancestorDistances[node][ancestorNode];\n                            if (distance > depth) {\n                                depth = distance;\n                            }\n                            if (distance == 1) {\n                                parents[node][ancestorNode] = true;\n                            }\n                        }\n                        if (depthList[depth] === undefined) {\n                            depthList[depth] = [];\n                        }\n                        depthList[depth].push(node);\n                    }\n                    // TODO separate fn\n                    // sort nodes at each depth by\n                    //\tlexicographic parent order\n                    //\tlabel\n                    var nextParentOrder = 0;\n                    var parentOrder = {};\n                    var _loop = function (_depth) {\n                        var sortedParents = {};\n                        depthList[_depth].forEach(function (node) {\n                            sortedParents[node] = Object.keys(parents[node]).map(function (parentNode) {\n                                return parentOrder[parentNode];\n                            }).sort(function (a, b) {\n                                return a - b;\n                            });\n                        });\n                        depthList[_depth].sort(function (node0, node1) {\n                            var p0 = sortedParents[node0];\n                            var p1 = sortedParents[node1];\n                            for (var i = 0; i < p0.length || i < p1.length; i++) {\n                                var cmpLen = (i < p0.length) - (i < p1.length);\n                                if (cmpLen != 0) {\n                                    return cmpLen;\n                                }\n                                var cmpOrd = p0[i] - p1[i];\n                                if (cmpOrd != 0) {\n                                    return cmpOrd;\n                                }\n                            }\n                            if (node0 < node1) {\n                                return -1;\n                            } else if (node0 > node1) {\n                                return +1;\n                            } else {\n                                return 0;\n                            }\n                        });\n                        for (var i in depthList[_depth]) {\n                            var _node = depthList[_depth][i];\n                            parentOrder[_node] = nextParentOrder++;\n                        }\n                    };\n                    for (var _depth in depthList) {\n                        _loop(_depth);\n                    }\n                    return [\n                        depthList,\n                        parents\n                    ];\n                };\n            },\n            {}\n        ]\n    }, {}, [2]));\n}());","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nconst dd=(a,b)=>`\\\\frac{\\\\mathrm{d}${a}}{\\\\mathrm{d}${b}}`\r\nconst dydt=dd('y','t')\r\nconst ddt=dd('','t')\r\nconst int=(fx,x)=>`\\\\int\\\\!${fx}\\\\,\\\\mathrm{d}${x}`\r\nconst sint=(fx,x)=>`\\\\int\\\\!${fx}\\\\mathrm{d}${x}`\r\nconst eqsol=(name)=>`<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>${name}</a>`\r\n\r\nmodule.exports={\r\n\troot: {\r\n\t\tparents: {},\r\n\t\tname: \"first-order\",\r\n\t\timportance: 0,\r\n\t\tequation: `${dydt} = f(t,y)`,\r\n\t\tproperties: [\r\n\t\t\t[\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t\"Can test if \\\\(y_p(t)\\\\) is a solution by substituting \\\\(y = y_p\\\\) into the equation.\",\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t]\r\n\t},\r\n\tseparable: {\r\n\t\tparents: {\r\n\t\t\troot: true,\r\n\t\t},\r\n\t\tname: \"first-order separable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${dydt} = f_1(t) \\\\cdot f_2(y)`,\r\n\t\tsolutions: [\r\n\t\t\t[\r\n\t\t\t\t['id','general'],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\t\"Solutions\",\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['detail',[\r\n\t\t\t\t\t`\\\\[ ${dydt} = f_1(t) \\\\cdot f_2(y) \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{1}{f_2(y)} \\\\cdot ${dydt} = f_1(t) \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${int(`\\\\frac{1}{f_2(y)} ${dydt}`,'t')} = ${int('f_1(t)','t')} + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`\\\\[ ${int(`\\\\frac{1}{f_2(y)}`,'y')} = ${int('f_1(t)','t')} + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['note',[\r\n\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t['id','equilibrium'],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\teqsol(\"Equilibrium solutions\"),\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`solve \\\\( f_2(y) = 0 \\\\) for constant \\\\( y \\\\)`,\r\n\t\t\t\t]],\r\n\t\t\t\t//`domain is not necessary \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)`\r\n\t\t\t],\r\n\t\t],\r\n\t},\r\n\tautonomous: {\r\n\t\tparents: {\r\n\t\t\tseparable: true,\r\n\t\t},\r\n\t\tname: \"first-order autonomous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${dydt} = f(y)`,\r\n\t\tproperties: [\r\n\t\t\t[\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t\"horizontal <a href='https://en.wikipedia.org/wiki/Isocline'>isoclines</a>\",\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t\"\\\\( y_p(t) \\\\) is a solution \\\\( \\\\Rightarrow \\\\) \\\\( y_p(t+C) \\\\) is a solution\",\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t],\r\n\t\tsolutions: [\r\n\t\t\t[\r\n\t\t\t\t['id','general'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'general',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\t\"Solutions\",\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['detail',[\r\n\t\t\t\t\t`\\\\[ ${dydt} = f(y) \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{1}{f(y)} \\\\cdot ${dydt} = 1 \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${int(`\\\\frac{1}{f(y)} ${dydt}`,'t')} = ${int('1','t')} + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`\\\\[ ${int(`\\\\frac{1}{f(y)}`,'y')} = t + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['note',[\r\n\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t['id','equilibrium'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'equilibrium',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\teqsol(\"Equilibrium solutions\"),\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`solve \\\\( f(y) = 0 \\\\) for constant \\\\( y \\\\)`,\r\n\t\t\t\t]],\r\n\t\t\t\t//`domain is \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)` // only if f(y) is continuous\r\n\t\t\t],\r\n\t\t],\r\n\t},\r\n\tbernoulli: {\r\n\t\tparents: {\r\n\t\t\troot: true,\r\n\t\t},\r\n\t\tname: \"Bernoulli\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Bernoulli_differential_equation'>Bernoulli</a>\",\r\n\t\timportance: 2,\r\n\t\tequation: `${dydt} = a(t) \\\\cdot y + b(t) \\\\cdot y^n`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\( n  1 \\\\)`,\r\n\t\t\t`usually it's also defined that additionally \\\\( n  0 \\\\), but we ignore this requirement here`,\r\n\t\t],\r\n\t\tsolutions: [\r\n\t\t\t[\r\n\t\t\t\t['id','general'],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\t\"Solutions\",\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['detail',[\r\n\t\t\t\t\t`\\\\[ ${dydt} = a(t) \\\\cdot y + b(t) \\\\cdot y^n \\\\]`,\r\n\t\t\t\t\t`multiply the equation by \\\\( \\\\frac{1-n}{y^n} \\\\)`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{1-n}{y^n} ${dydt} = \\\\cdots \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\cdots = \\\\frac{(1-n) a(t)}{y^{n-1}} + (1-n) b(t) \\\\]`,\r\n\t\t\t\t\t`introduce a new variable`,\r\n\t\t\t\t\t`\\\\[ z = \\\\frac{1}{y^{n-1}} \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${dd('z','t')} = ${dd('z','y')} ${dydt} = \\\\frac{1-n}{y^n} ${dydt} \\\\]`,\r\n\t\t\t\t\t`substitute \\\\( z \\\\) and \\\\( ${dd('z','t')} \\\\) into the equation`,\r\n\t\t\t\t\t`\\\\[ ${dd('z','t')} = (1-n) a(t) z + (1-n) b(t) \\\\]`,\r\n\t\t\t\t\t`solve this equation as a linear equation in \\\\( z \\\\), then return to the original variable \\\\( y \\\\)`,\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) z = (1-n) ${int('\\\\mu(t) b(t)','t')} + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{(n-1)${sint('a(t)','t')}} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{\\\\mu(t)}{y^{n-1}} = (1-n) ${int('\\\\mu(t) b(t)','t')} + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['note',[\r\n\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t['id','equilibrium'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'equilibrium',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\teqsol(\"Equilibrium solution\"),\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`if \\\\( n>0 \\\\), there's an equilibrium solution \\\\( y(t) = 0 \\\\)`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t],\r\n\t},\r\n\tlinear: {\r\n\t\tparents: {\r\n\t\t\tbernoulli: true,\r\n\t\t},\r\n\t\tname: \"first-order linear\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${dydt} = a(t) \\\\cdot y + b(t)`,\r\n\t\tproperties: [\r\n\t\t\t[\r\n\t\t\t\t['id','linearity'],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\t\"Extended linearity\",\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`If \\\\( y_p(t) \\\\) is a solution of the original equation \\\\( ${dydt} = a(t) \\\\cdot y + b(t) \\\\)`,\r\n\t\t\t\t\t`and \\\\( y_h(t) \\\\) is a solution of its associated homogeneous equation \\\\( ${dydt} = a(t) \\\\cdot y \\\\),`,\r\n\t\t\t\t\t`then \\\\( K y_h(t) + y_p(t) \\\\) is a solution of the original equation.`,\r\n\t\t\t\t\t`If additionally \\\\( y_h(t) \\\\neq 0 \\\\), then \\\\( K y_h(t) + y_p(t) \\\\) is a general solution.`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t['id','homodiff'],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`If \\\\( y_p(t) \\\\) and \\\\( y_q(t) \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( y_p(t) - y_q(t) \\\\) is a solution of the associated homogeneous equation \\\\( ${dydt} = a(t) \\\\cdot y \\\\).`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t],\r\n\t\tsolutions: [\r\n\t\t\t[\r\n\t\t\t\t['id','general'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'general',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\t\"Solutions found with method of <a href='https://en.wikipedia.org/wiki/Integrating_factor'>integrating factors</a>\",\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['detail',[\r\n\t\t\t\t\t`\\\\[ ${dydt} = a(t) \\\\cdot y + b(t) \\\\]`,\r\n\t\t\t\t\t`introduce a new function`,\r\n\t\t\t\t\t`\\\\[ g(t) = -a(t) \\\\]`,\r\n\t\t\t\t\t`rewrite the equation with \\\\( g(t) \\\\)`,\r\n\t\t\t\t\t`\\\\[ ${dydt} + g(t) \\\\cdot y = b(t) \\\\]`,\r\n\t\t\t\t\t`introduce the integrating factor`,\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{${sint('g(t)','t')}} \\\\]`,\r\n\t\t\t\t\t`multiply the equation by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) ${dydt} + \\\\mu(t) g(t) y = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) ${dydt} + e^{${sint('g(t)','t')}} g(t) y = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) ${dydt} + ${ddt}(e^{${sint('g(t)','t')}}) y = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) ${dydt} + ${ddt}(\\\\mu(t)) y = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${ddt}(\\\\mu(t) y) = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t`integrate the equation multiplied by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) y = ${int('\\\\mu(t) b(t)','t')} + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{-${sint('a(t)','t')}} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) y = ${int('\\\\mu(t) b(t)','t')} + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'equilibrium',\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t],\r\n\t},\r\n\tlinearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\tseparable: true,\r\n\t\t\tlinear: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${dydt} = a(t) \\\\cdot y`,\r\n\t\tproperties: [\r\n\t\t\t[\r\n\t\t\t\t['id','linearity'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'linearity',\r\n\t\t\t\t\t'homodiff',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\t\"Linearity\",\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`If \\\\( y_h(t) \\\\) is a solution, then \\\\( K y_h(t) \\\\) is a solution.`,\r\n\t\t\t\t\t`If additionally \\\\( y_h(t) \\\\neq 0 \\\\), then \\\\( K y_h(t) \\\\) is a general solution.`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t],\r\n\t\tsolutions: [\r\n\t\t\t[\r\n\t\t\t\t['id','general'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'general',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\t\"Solutions\",\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['detail',[\r\n\t\t\t\t\t`\\\\[ ${dydt} = a(t) \\\\cdot y \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{1}{y} \\\\cdot ${dydt} = a(t) \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${int(`\\\\frac{1}{y} ${dydt}`,'t')} = ${int('a(t)','t')} + C \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${int(`\\\\frac{1}{y}`,'y')} = ${int('a(t)','t')} + C \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\ln|y| = ${int('a(t)','t')} + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`\\\\[ y = K \\\\cdot e^{${sint('a(t)','t')}} \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['note',[\r\n\t\t\t\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( K = 0 \\\\)`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t['id','equilibrium'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'equilibrium',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\teqsol(\"Equilibrium solution\"),\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`\\\\[ y(t) = 0 \\\\]`\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t],\r\n\t},\r\n\tseparableInT: {\r\n\t\tparents: {\r\n\t\t\tseparable: true,\r\n\t\t\tlinear: true,\r\n\t\t},\r\n\t\tname: \"first-order separable in independent variable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a> in \\\\(t\\\\)\",\r\n\t\timportance: 2,\r\n\t\tequation: `${dydt} = f(t)`,\r\n\t\tproperties: [\r\n\t\t\t[\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t\"vertical <a href='https://en.wikipedia.org/wiki/Isocline'>isoclines</a>\",\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t['id','linearity'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'linearity',\r\n\t\t\t\t\t'homodiff',\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t\"\\\\( y_p(t) \\\\) is a solution \\\\( \\\\Rightarrow \\\\) \\\\( y_p(t) + C \\\\) is a solution\",\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t],\r\n\t\tsolutions: [\r\n\t\t\t[\r\n\t\t\t\t['id','general'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'general',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\t\"Solutions\",\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['detail',[\r\n\t\t\t\t\t`\\\\[ ${dydt} = f(t) \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${int(`${dydt}`,'t')} = ${int('f(t)','t')} + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`\\\\[ y = ${int('f(t)','t')} + C \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'equilibrium',\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t],\r\n\t},\r\n\texpGrowth: {\r\n\t\tparents: {\r\n\t\t\tautonomous: true,\r\n\t\t\tlinearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"exponential growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Exponential_growth#Differential_equation'>exponential growth</a>\",\r\n\t\timportance: 2,\r\n\t\tequation: `${dydt} = k \\\\cdot y`,\r\n\t\tsolutions: [\r\n\t\t\t[\r\n\t\t\t\t['id','general'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'general',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\t\"Solutions\",\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['detail',[\r\n\t\t\t\t\t`\\\\[ ${dydt} = k \\\\cdot y \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{1}{y} \\\\cdot ${dydt} = k \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${int(`\\\\frac{1}{y} ${dydt}`,'t')} = ${int('k','t')} + C \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${int(`\\\\frac{1}{y}`,'y')} = ${int('k','t')} + C \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\ln|y| = kt + C \\\\]`,\r\n\t\t\t\t\t`\\\\[ y(t) = C_1 e^{kt} \\\\]`,\r\n\t\t\t\t\t`\\\\[ y(0) = C_1 e^0 \\\\]`,\r\n\t\t\t\t\t`\\\\[ C_1 = y(0) \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`\\\\[ y(t) = y(0) e^{kt} \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t\t['note',[\r\n\t\t\t\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( y(0) = 0 \\\\)`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t\t[ // TODO could have inherited from linear homogeneous, but have to override autonomous\r\n\t\t\t\t['id','equilibrium'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'equilibrium',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\teqsol(\"Equilibrium solution\"),\r\n\t\t\t\t]],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`\\\\[ y(t) = 0 \\\\]`\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t],\r\n\t},\r\n\tlogisticGrowth: {\r\n\t\tparents: {\r\n\t\t\tautonomous: true,\r\n\t\t\tbernoulli: true,\r\n\t\t},\r\n\t\tname: \"logistic growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Logistic_function#In_ecology:_modeling_population_growth'>logistic growth</a>\",\r\n\t\timportance: 2,\r\n\t\tequation: `${dydt} = r \\\\cdot y \\\\cdot \\\\left(1 - \\\\frac{y}{k}\\\\right)`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\( k \\\\) is the <a href='https://en.wikipedia.org/wiki/Carrying_capacity'>carrying capacity</a>`,\r\n\t\t],\r\n\t\tsolutions: [\r\n\t\t\t[\r\n\t\t\t\t['id','equilibrium'],\r\n\t\t\t\t['override',[\r\n\t\t\t\t\t'equilibrium',\r\n\t\t\t\t]],\r\n\t\t\t\t['title',[\r\n\t\t\t\t\teqsol(\"Equilibrium solutions\"),\r\n\t\t\t\t]],\r\n\t\t\t\t['form'],\r\n\t\t\t\t['main',[\r\n\t\t\t\t\t`\\\\[ y(t) = 0 \\\\]`,\r\n\t\t\t\t\t`\\\\[ y(t) = k \\\\]`,\r\n\t\t\t\t]],\r\n\t\t\t],\r\n\t\t],\r\n\t},\r\n}\r\n","'use strict'\r\n\r\nconst TheadLayout=require('./thead-layout')\r\nconst data=require('./data')\r\n\r\n$(function(){\r\n\t$('.crnx-ode-properties').each(function(){\r\n\t\tconst $container=$(this)\r\n\t\tconst dag={}, idag={}\r\n\t\tconst selectedNodes={} // visible nodes\r\n\t\tfor (let id in data) {\r\n\t\t\tif (data[id].importance<=1) {\r\n\t\t\t\tselectedNodes[id]=true\r\n\t\t\t}\r\n\t\t\tdag[id]=data[id].parents\r\n\t\t\tidag[id]={}\r\n\t\t}\r\n\t\tfor (let id in data) {\r\n\t\t\tfor (let pid in dag[id]) {\r\n\t\t\t\tidag[pid][id]=true\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getHtmlName=id=>(data[id].htmlName!==undefined\r\n\t\t\t? data[id].htmlName\r\n\t\t\t: data[id].name\r\n\t\t)\r\n\r\n\t\tlet theadLayout=new TheadLayout(dag,selectedNodes)\r\n\t\tconst breadthWalk=(graph,id)=>{\r\n\t\t\tconst result=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst queue=[id]\r\n\t\t\twhile (queue.length>0) {\r\n\t\t\t\tid=queue.shift()\r\n\t\t\t\tif (visited[id]) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tif (!selectedNodes[id]) {\r\n\t\t\t\t\tresult.push(id)\r\n\t\t\t\t}\r\n\t\t\t\tqueue.push(...Object.keys(graph[id]).sort())\r\n\t\t\t}\r\n\t\t\treturn result\r\n\t\t}\r\n\t\tconst writeButton=(text,tip)=>{\r\n\t\t\tconst $button=$(`<button type='button'><span>${text}</span></button>`)\r\n\t\t\tif (tip!==undefined) {\r\n\t\t\t\t$button.attr('title',tip)\r\n\t\t\t}\r\n\t\t\treturn $button\r\n\t\t}\r\n\t\tconst writeData=(name,id)=>{\r\n\t\t\tconst output=[]\r\n\r\n\t\t\t// mark ancestors of visible ancestors as visited\r\n\t\t\tconst visited={}\r\n\t\t\tconst markAncestors=id=>{\r\n\t\t\t\tif (visited[id]) return\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tObject.keys(data[id].parents).forEach(pid=>{\r\n\t\t\t\t\tmarkAncestors(pid)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tconst reachAncestors=id=>{\r\n\t\t\t\tif (visited[id]) return\r\n\t\t\t\tObject.keys(data[id].parents).forEach(pid=>{\r\n\t\t\t\t\tif (selectedNodes[pid]) {\r\n\t\t\t\t\t\tmarkAncestors(pid)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treachAncestors(pid)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treachAncestors(id)\r\n\r\n\t\t\tconst overrides={}\r\n\t\t\tconst raiseOverride=iid=>{\r\n\t\t\t\tif (overrides[iid]===undefined) {\r\n\t\t\t\t\toverrides[iid]=0\r\n\t\t\t\t}\r\n\t\t\t\toverrides[iid]++\r\n\t\t\t}\r\n\t\t\tconst lowerOverride=iid=>{\r\n\t\t\t\toverrides[iid]--\r\n\t\t\t}\r\n\t\t\tconst rec=cid=>{\r\n\t\t\t\tvisited[cid]=true\r\n\t\t\t\tconst forOverrides=fn=>{\r\n\t\t\t\t\tif (data[cid][name]) {\r\n\t\t\t\t\t\tdata[cid][name].forEach(item=>{\r\n\t\t\t\t\t\t\titem.forEach(section=>{\r\n\t\t\t\t\t\t\t\tconst type=section[0]\r\n\t\t\t\t\t\t\t\tif (section[0]=='override') {\r\n\t\t\t\t\t\t\t\t\tconst iids=section[1]\r\n\t\t\t\t\t\t\t\t\tiids.forEach(iid=>{\r\n\t\t\t\t\t\t\t\t\t\tfn(iid)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// recursion on nodes that are not selected for display\r\n\t\t\t\tforOverrides(raiseOverride)\r\n\t\t\t\tObject.keys(data[cid].parents).sort().forEach(pid=>{\r\n\t\t\t\t\tif (!visited[pid]) {\r\n\t\t\t\t\t\trec(pid)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tforOverrides(lowerOverride)\r\n\t\t\t\t// output of things that are not overridden by children\r\n\t\t\t\tif (data[cid][name]) {\r\n\t\t\t\t\tdata[cid][name].forEach(item=>{\r\n\t\t\t\t\t\tlet skip=false\r\n\t\t\t\t\t\titem.forEach(section=>{\r\n\t\t\t\t\t\t\tconst type=section[0]\r\n\t\t\t\t\t\t\tif (type=='id') {\r\n\t\t\t\t\t\t\t\tconst iid=section[1]\r\n\t\t\t\t\t\t\t\tif (overrides[iid]) {\r\n\t\t\t\t\t\t\t\t\tskip=true\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (skip) return\r\n\t\t\t\t\t\tconst outItem=[]\r\n\t\t\t\t\t\titem.forEach(section=>{\r\n\t\t\t\t\t\t\tconst type=section[0]\r\n\t\t\t\t\t\t\tif (type=='id' || type=='override') return\r\n\t\t\t\t\t\t\tif (type=='form') {\r\n\t\t\t\t\t\t\t\tif (cid!=id) {\r\n\t\t\t\t\t\t\t\t\toutItem.push(['note',[\r\n\t\t\t\t\t\t\t\t\t\t\"when equation is written as <em>\"+getHtmlName(cid)+\"</em>:\",\r\n\t\t\t\t\t\t\t\t\t\t\"\\\\[\"+data[cid].equation+\"\\\\]\",\r\n\t\t\t\t\t\t\t\t\t]])\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\toutItem.push(section)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (outItem.length>0) {\r\n\t\t\t\t\t\t\toutput.push(outItem)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trec(id)\r\n\t\t\tif (output.length==0) return $()\r\n\t\t\treturn $(\"<ul class='major'>\").append(output.map(item=>{\r\n\t\t\t\treturn $(\"<li>\").append(item.map(section=>{\r\n\t\t\t\t\tconst type=section[0], contents=section[1]\r\n\t\t\t\t\tconst $section=$(`<div class='${type}'>`).append(contents.map(line=>{\r\n\t\t\t\t\t\tif (type=='title') {\r\n\t\t\t\t\t\t\treturn $(`<div><em>${line}</em>:</div>`)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn $(`<div>${line}</div>`)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}))\r\n\t\t\t\t\tif (type=='detail') {\r\n\t\t\t\t\t\tconst $b1=writeButton(\"Open\",\"Expand details\")\r\n\t\t\t\t\t\tconst $b2=writeButton(\"Open\",\"Expand details\")\r\n\t\t\t\t\t\t$section.prepend($b1).append($b2)\r\n\t\t\t\t\t\tconst $bs=$b1.add($b2)\r\n\t\t\t\t\t\t$bs.click(function(){\r\n\t\t\t\t\t\t\tif (!$section.hasClass('open')) {\r\n\t\t\t\t\t\t\t\t$section.addClass('open')\r\n\t\t\t\t\t\t\t\t$bs.html(\"<span>Close</span>\").attr('title',\"Collapse details\")\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$section.removeClass('open')\r\n\t\t\t\t\t\t\t\t$bs.html(\"<span>Open</span>\").attr('title',\"Expand details\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn $section\r\n\t\t\t\t}))\r\n\t\t\t}))\r\n\t\t}\r\n\t\tconst writeTable=()=>{\r\n\t\t\tconst visibleAncestors={} // including self\r\n\t\t\tconst computeVisibleAncestors=(id,aid)=>{\r\n\t\t\t\tif (selectedNodes[aid]) {\r\n\t\t\t\t\tvisibleAncestors[id][aid]=true\r\n\t\t\t\t}\r\n\t\t\t\tfor (let naid in dag[aid]) {\r\n\t\t\t\t\tcomputeVisibleAncestors(id,naid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\tvisibleAncestors[id]={}\r\n\t\t\t\tcomputeVisibleAncestors(id,id)\r\n\t\t\t}\r\n\r\n\t\t\tconst $equations={}\r\n\t\t\tlet $attachedMenu, $attachedToButton, attachedDirection, attachTimeoutId\r\n\r\n\t\t\tconst deleteNode=id=>{\r\n\t\t\t\tdelete selectedNodes[id]\r\n\t\t\t\ttheadLayout=new TheadLayout(dag,selectedNodes)\r\n\t\t\t\twriteTable()\r\n\t\t\t}\r\n\t\t\tconst addNode=id=>{\r\n\t\t\t\tselectedNodes[id]=true\r\n\t\t\t\ttheadLayout=new TheadLayout(dag,selectedNodes)\r\n\t\t\t\twriteTable()\r\n\t\t\t}\r\n\t\t\tconst setCellClasses=($cell,cell)=>{\r\n\t\t\t\t;['b','t','bt','rl','rt','bl'].forEach(dir=>{\r\n\t\t\t\t\tif (cell[dir]) {\r\n\t\t\t\t\t\t$cell.addClass(dir)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tconst writeTheadButton=($cell,text,tip,dir,nodes)=>{\r\n\t\t\t\tconst keyCodeEnter=13\r\n\t\t\t\tconst keyCodeSpace=32\r\n\t\t\t\tconst keyCodeUp=38\r\n\t\t\t\tconst keyCodeDown=40\r\n\t\t\t\tconst $button=writeButton(text,tip).addClass(dir).click(function(){\r\n\t\t\t\t\tconst removeAttachedMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton.removeClass('attached-t attached-b')\r\n\t\t\t\t\t\t$attachedMenu.remove()\r\n\t\t\t\t\t\tclearTimeout(attachTimeoutId)\r\n\t\t\t\t\t\t$attachedToButton=undefined\r\n\t\t\t\t\t\t$attachedMenu=undefined\r\n\t\t\t\t\t\tattachedDirection=undefined\r\n\t\t\t\t\t\tattachTimeoutId=undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst startAttachingMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton=$button\r\n\t\t\t\t\t\t$attachedMenu=$(\"<ul>\").append(nodes.map(\r\n\t\t\t\t\t\t\tid=>$(\"<li tabindex='0'>\"+data[id].name+\"</li>\").click(function(){\r\n\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\t\t\t\tif (!attachedDirection) return // not yet decided on attach direction (this can't happen)\r\n\t\t\t\t\t\t\t\tif (ev.keyCode==keyCodeUp) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).prev()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='b') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).next()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='t') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace) {\r\n\t\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t\t$cell.append($attachedMenu)\r\n\t\t\t\t\t\tattachTimeoutId=setTimeout(()=>{ // can calculate height only after it's displayed\r\n\t\t\t\t\t\t\tconst mh=$attachedMenu.outerHeight()\r\n\t\t\t\t\t\t\tconst mo=$attachedMenu.offset()\r\n\t\t\t\t\t\t\tconst bh=$button.outerHeight()\r\n\t\t\t\t\t\t\tconst bo=$button.offset()\r\n\t\t\t\t\t\t\tlet t=bo.top-mh+1\r\n\t\t\t\t\t\t\tif (dir!='t' || t<0) { // want below or doesn't fit to screen above the button\r\n\t\t\t\t\t\t\t\tt=bo.top+bh-1\r\n\t\t\t\t\t\t\t\tattachedDirection='b'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$attachedMenu.insertBefore($button)\r\n\t\t\t\t\t\t\t\tattachedDirection='t'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$attachedMenu.offset({\r\n\t\t\t\t\t\t\t\ttop: t,\r\n\t\t\t\t\t\t\t\tleft: mo.left,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t$attachedMenu.addClass('attached')\r\n\t\t\t\t\t\t\t$button.addClass('attached-'+attachedDirection)\r\n\t\t\t\t\t\t},0)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!$button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif ($attachedToButton) {\r\n\t\t\t\t\t\t\tremoveAttachedMenu() // close menu opened elsewhere\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstartAttachingMenu()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tremoveAttachedMenu() // close menu here\r\n\t\t\t\t\t}\r\n\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\tif ($button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif (ev.keyCode==keyCodeUp && attachedDirection=='t') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().last().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown && attachedDirection=='b') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().first().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $button\r\n\t\t\t}\r\n\t\t\tconst writeTheadCell=cell=>{\r\n\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\tif (cell.node!==undefined) {\r\n\t\t\t\t\t$cell.append(getHtmlName(cell.node))\r\n\t\t\t\t\tconst parents=breadthWalk(dag,cell.node).reverse()\r\n\t\t\t\t\tlet $parents\r\n\t\t\t\t\tif (parents.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add parent\",\"Add one of supertypes of this equation type\",'t',parents)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst children=breadthWalk(idag,cell.node)\r\n\t\t\t\t\tif (children.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add child\",\"Add one of subtypes of this equation type\",'b',children)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $cell\r\n\t\t\t}\r\n\t\t\tconst writeThead=()=>{\r\n\t\t\t\tconst $thead=$(\"<thead>\")\r\n\t\t\t\tfor (let i=0;i<theadLayout.nodeLayers.length;i++) {\r\n\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t$(\"<tr class='nodes'>\").append(\r\n\t\t\t\t\t\t\ttheadLayout.nodeLayers[i].map(writeTheadCell)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (i<theadLayout.arcLayers.length) {\r\n\t\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t\ttheadLayout.arcLayers[i].map(row=>$(\"<tr class='arcs'>\").append(\r\n\t\t\t\t\t\t\t\trow.map(cell=>{\r\n\t\t\t\t\t\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\t\t\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\t\t\t\t\t\treturn $cell\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $thead\r\n\t\t\t}\r\n\t\t\tconst writeTfoot=()=>{\r\n\t\t\t\tif (theadLayout.columns.length<=1) {\r\n\t\t\t\t\treturn $()\r\n\t\t\t\t}\r\n\t\t\t\treturn $(\"<tfoot>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\ttheadLayout.columns.map(id=>$(\"<td>\").append(\r\n\t\t\t\t\t\t\twriteButton(\"Delete\",\"Delete this equation type\").click(function(){\r\n\t\t\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t$container.empty().append(\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\twriteThead(),\r\n\t\t\t\t\twriteTfoot(),\r\n\t\t\t\t\t$(\"<tbody>\").append(\r\n\t\t\t\t\t\t// equations\r\n\t\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t\ttheadLayout.columns.map(id=>{\r\n\t\t\t\t\t\t\t\tconst $td=$(\"<td>\")\r\n\t\t\t\t\t\t\t\t$td.append(\r\n\t\t\t\t\t\t\t\t\t$equations[id]=$(\"<div class='equation'>\\\\[\"+data[id].equation+\"\\\\]</div>\").hover(function(){\r\n\t\t\t\t\t\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t\t\t\t\t\t$equations[aid].addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t\t\t\t\t\t$equations[aid].removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\tconst notes=[]\r\n\t\t\t\t\t\t\t\tif (data[id].equationNotes!==undefined) {\r\n\t\t\t\t\t\t\t\t\tnotes.push(...data[id].equationNotes.map(\r\n\t\t\t\t\t\t\t\t\t\tnoteText=>$(\"<div class='note'>\").append(noteText)\r\n\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconst parents=Object.keys(theadLayout.parents[id])\r\n\t\t\t\t\t\t\t\tif (parents.length>0) {\r\n\t\t\t\t\t\t\t\t\tnotes.push(\r\n\t\t\t\t\t\t\t\t\t\t$(\"<div class='note'>\").append(\r\n\t\t\t\t\t\t\t\t\t\t\t\"can also be written as and has all properties of:\",\r\n\t\t\t\t\t\t\t\t\t\t\t$(\"<ul>\").append(parents.sort().map(\r\n\t\t\t\t\t\t\t\t\t\t\t\tpid=>$(\"<li>\").append(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"<em>\"+getHtmlName(pid)+\"</em>\").hover(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$equations[pid].addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$equations[pid].removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (notes.length>0) {\r\n\t\t\t\t\t\t\t\t\t$td.append($(\"<ul>\").append(notes.map(\r\n\t\t\t\t\t\t\t\t\t\tnote=>$(\"<li>\").append(note)\r\n\t\t\t\t\t\t\t\t\t)))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn $td\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t// properties\r\n\t\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t\ttheadLayout.columns.map(id=>$(\"<td>\").append(\r\n\t\t\t\t\t\t\t\twriteData('properties',id)\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t// solutions\r\n\t\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t\ttheadLayout.columns.map(id=>$(\"<td>\").append(\r\n\t\t\t\t\t\t\t\twriteData('solutions',id)\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t\"<p>General notes:</p>\",\r\n\t\t\t\t$(\"<ul>\").append(\r\n\t\t\t\t\t`<li>how to read the diagram: <ul>`+\r\n\t\t\t\t\t\t`<li>equation type names are written among arrows that show the relationship between types</li>`+\r\n\t\t\t\t\t\t`<li>properties of an equation type are listed in the table column below its name</li>`+\r\n\t\t\t\t\t\t`<li>every property of the equation type on the tip of the arrow <span class='arrow'></span> is also true for the equation type on the other end of the arrow (like <a href='https://en.wikipedia.org/wiki/Class_diagram'>class diagram</a>)</li>`+\r\n\t\t\t\t\t`</ul></li>`,\r\n\t\t\t\t\t`<li>all functions have to be continuous on the interval of interest</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t + C \\\\) is a family of antiderivatives of \\\\( f(t) \\\\) with parameter \\\\( C \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t \\\\) is any single antiderivative of \\\\( f(t) \\\\)`\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\tMathJax.Hub.Queue([\"Typeset\",MathJax.Hub]);\r\n\t\t}\r\n\t\twriteTable()\r\n\t})\r\n})\r\n","'use strict'\r\n\r\nconst makeNodeLabelLayersWithParents=require('./thead-layout/node-layers')\r\nconst makeArcLocationLayers=require('./thead-layout/arc-layers')\r\nconst makeLayoutLayers=require('./thead-layout/cell-layers')\r\n\r\nclass TheadLayout {\r\n\tconstructor(dag,selectedNodes) {\r\n\t\tlet t\r\n\t\tt=makeNodeLabelLayersWithParents(dag,selectedNodes)\r\n\t\tconst nodeLabelLayers=t[0], parents=t[1]\r\n\t\tconst arcLocationLayers=makeArcLocationLayers(nodeLabelLayers,parents)\r\n\t\tt=makeLayoutLayers(nodeLabelLayers,arcLocationLayers)\r\n\t\tthis.columns=[].concat(...nodeLabelLayers)\r\n\t\tthis.nodeLayers=t[0]\r\n\t\tthis.arcLayers=t[1]\r\n\t\tthis.parents=parents // TODO return as array in order of appearance, test\r\n\t}\r\n}\r\n\r\nmodule.exports=TheadLayout\r\n","'use strict'\r\n\r\nmodule.exports=(depthList,parents)=>{ // TODO would prefer ordered parents list\r\n\tconst merge=(a,b)=>{ // can also use lodash union and sort\r\n\t\tconst c=[]\r\n\t\tlet i=0, j=0\r\n\t\twhile (i<a.length || j<b.length) {\r\n\t\t\tif (j>=b.length) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (i>=a.length) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else if (a[i]<b[j]) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (a[i]>b[j]) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t\tj++\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn c\r\n\t}\r\n\tconst arcRows=[]\r\n\tconst xs={}\r\n\tlet x=0\r\n\tfor (let i=0;i<depthList.length;i++) {\r\n\t\tdepthList[i].forEach(node=>{\r\n\t\t\txs[node]=x++\r\n\t\t})\r\n\t\tif (i>0) {\r\n\t\t\tconst arcs=[]\r\n\t\t\tfor (let j=depthList[i].length-1;j>=0;j--) {\r\n\t\t\t\tconst node=depthList[i][j]\r\n\t\t\t\tconst parentXs=Object.keys(parents[node]).map(parentNode=>xs[parentNode]).sort((a,b)=>a-b)\r\n\t\t\t\tarcs.push([parentXs,[xs[node]]])\r\n\t\t\t}\r\n\t\t\tfor (let j=1;j<arcs.length;j++) {\r\n\t\t\t\tif (String(arcs[j-1][0])===String(arcs[j][0])) { // sloppy but should be ok for numbers\r\n\t\t\t\t\tarcs[j-1][1]=merge(arcs[j-1][1],arcs[j][1]) // merge children - parents already merged\r\n\t\t\t\t\tarcs.splice(j,1)\r\n\t\t\t\t\tj-=1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tarcRows.push(arcs)\r\n\t\t}\r\n\t}\r\n\treturn arcRows\r\n}\r\n","'use strict'\r\n\r\n// TODO fake lodash\r\nconst sum=arr=>arr.reduce((a,b)=>a+b)\r\n//const times=(n,fn)=>Array(n).map((v,i)=>fn(i))\r\nconst times=(n,fn)=>{\r\n\tvar arr=Array(n)\r\n\tfor (var i=0;i<n;i++) {\r\n\t\tarr[i]=fn(i)\r\n\t}\r\n\treturn arr\r\n}\r\nconst head=arr=>arr[0]\r\nconst last=arr=>arr[arr.length-1]\r\n\r\nmodule.exports=(nodeLabelLayers,arcLocationLayers)=>{\r\n\tconst layoutWidth=sum(nodeLabelLayers.map(x=>x.length))\r\n\tconst makeBlankRow=()=>times(layoutWidth,()=>({}))\r\n\tconst nodeLayoutLayers=[], arcLayoutLayers=[]\r\n\tconst drawArcUp=(i,j,k)=>{\r\n\t\tfor (;i>=0;i--) {\r\n\t\t\tfor (j-=1;j>=0;j--) {\r\n\t\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t\t}\r\n\t\t\tif (nodeLayoutLayers[i][k].node!==undefined) {\r\n\t\t\t\tnodeLayoutLayers[i][k].b=true\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tnodeLayoutLayers[i][k].bt=true\r\n\t\t\tif (i<=0) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tj=arcLayoutLayers[i-1].length\r\n\t\t}\r\n\t}\r\n\tconst drawArcDown=(i,j,k)=>{\r\n\t\tfor (j+=1;j<arcLayoutLayers[i].length;j++) {\r\n\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t}\r\n\t\tnodeLayoutLayers[i+1][k].t=true\r\n\t}\r\n\t// create empty cells\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tnodeLayoutLayers.push(makeBlankRow())\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tarcLayoutLayers.push(arcLocationLayers[i].map(makeBlankRow))\r\n\t}\r\n\t// fill cells\r\n\tlet x=0\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tnodeLabelLayers[i].forEach(node=>{\r\n\t\t\tnodeLayoutLayers[i][x++].node=node\r\n\t\t})\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tfor (let j=0;j<arcLocationLayers[i].length;j++) {\r\n\t\t\tconst parentLocations=arcLocationLayers[i][j][0]\r\n\t\t\tconst childLocations=arcLocationLayers[i][j][1]\r\n\t\t\tlet pi=0, ci=0\r\n\t\t\tfor (let k=0;k<layoutWidth;k++) {\r\n\t\t\t\tif (k>head(parentLocations) && k<last(childLocations)) {\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rl=true\r\n\t\t\t\t}\r\n\t\t\t\tif (k==parentLocations[pi]) {\r\n\t\t\t\t\tpi++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rt=true\r\n\t\t\t\t\tdrawArcUp(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t\tif (k==childLocations[ci]) {\r\n\t\t\t\t\tci++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].bl=true\r\n\t\t\t\t\tdrawArcDown(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn [nodeLayoutLayers,arcLayoutLayers]\r\n}\r\n","'use strict'\r\n\r\n// dag = {nodeLabel:{parentLabel:true,...},...}\r\n// nodes = {nodeLabel:true,...}\r\nmodule.exports=(dag,selectedNodes)=>{\r\n\tconst ancestorDistances={} // {node:{ancestorNode:distance,...},...}; node is any node, ancestorNode is one of selectedNodes\r\n\tconst addAncestorDistance=(fromNode,toNode,distance)=>{\r\n\t\tconst oldDistance=ancestorDistances[fromNode][toNode]\r\n\t\tconst newDistance=(oldDistance===undefined\r\n\t\t\t? distance\r\n\t\t\t: Math.max(distance,oldDistance)\r\n\t\t)\r\n\t\tancestorDistances[fromNode][toNode]=newDistance\r\n\t}\r\n\tconst traverseNode=node=>{\r\n\t\tif (ancestorDistances[node]) {\r\n\t\t\treturn // already visited\r\n\t\t}\r\n\t\tancestorDistances[node]={}\r\n\t\tfor (let parentNode in dag[node]) {\r\n\t\t\ttraverseNode(parentNode)\r\n\t\t\tif (selectedNodes[parentNode]) {\r\n\t\t\t\taddAncestorDistance(node,parentNode,1)\r\n\t\t\t}\r\n\t\t\tfor (let ancestorNode in ancestorDistances[parentNode]) {\r\n\t\t\t\tconst parentDistance=ancestorDistances[parentNode][ancestorNode]\r\n\t\t\t\taddAncestorDistance(node,ancestorNode,parentDistance+!!selectedNodes[parentNode])\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconst depthList=[]\r\n\tconst parents={}\r\n\tfor (let node in selectedNodes) {\r\n\t\ttraverseNode(node)\r\n\t\tlet depth=0\r\n\t\tparents[node]={}\r\n\t\tfor (let ancestorNode in ancestorDistances[node]) {\r\n\t\t\tconst distance=ancestorDistances[node][ancestorNode]\r\n\t\t\tif (distance>depth) {\r\n\t\t\t\tdepth=distance\r\n\t\t\t}\r\n\t\t\tif (distance==1) {\r\n\t\t\t\tparents[node][ancestorNode]=true\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (depthList[depth]===undefined) {\r\n\t\t\tdepthList[depth]=[]\r\n\t\t}\r\n\t\tdepthList[depth].push(node)\r\n\t}\r\n\r\n\t// TODO separate fn\r\n\t// sort nodes at each depth by\r\n\t//\tlexicographic parent order\r\n\t//\tlabel\r\n\tlet nextParentOrder=0\r\n\tconst parentOrder={}\r\n\tfor (let depth in depthList) {\r\n\t\tconst sortedParents={}\r\n\t\tdepthList[depth].forEach(node=>{\r\n\t\t\tsortedParents[node]=Object.keys(parents[node]).map(\r\n\t\t\t\tparentNode=>parentOrder[parentNode]\r\n\t\t\t).sort((a,b)=>a-b)\r\n\t\t})\r\n\t\tdepthList[depth].sort((node0,node1)=>{\r\n\t\t\tconst p0=sortedParents[node0]\r\n\t\t\tconst p1=sortedParents[node1]\r\n\t\t\tfor (let i=0;i<p0.length||i<p1.length;i++) {\r\n\t\t\t\tconst cmpLen=(i<p0.length)-(i<p1.length)\r\n\t\t\t\tif (cmpLen!=0) {\r\n\t\t\t\t\treturn cmpLen\r\n\t\t\t\t}\r\n\t\t\t\tconst cmpOrd=p0[i]-p1[i]\r\n\t\t\t\tif (cmpOrd!=0) {\r\n\t\t\t\t\treturn cmpOrd\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (node0<node1) {\r\n\t\t\t\treturn -1\r\n\t\t\t} else if (node0>node1) {\r\n\t\t\t\treturn +1\r\n\t\t\t} else {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t})\r\n\t\tfor (let i in depthList[depth]) {\r\n\t\t\tconst node=depthList[depth][i]\r\n\t\t\tparentOrder[node]=nextParentOrder++\r\n\t\t}\r\n\t}\r\n\treturn [depthList,parents]\r\n}\r\n"],"sourceRoot":"."}