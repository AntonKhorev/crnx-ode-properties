{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/crnx-base/details-polyfill.js","crnx-ode-properties.js","node_modules/crnx-build/babel-helpers/arraylike-prototype-includes.es5","node_modules/crnx-build/babel-helpers/math-sign.es5","src/characteristic-equation-content.js","src/data.js","src/data/equations-1st.js","src/data/equations-2nd.js","src/data/equations-nth.js","src/data/systems.js","src/form-rows-output.js","src/lhc-content-classes.js","src/lhc-param-classes.js","src/lhc-plot.js","src/lhc-plot/canvas.js","src/lhc-plot/closest-point-on-hyperbola.js","src/lhc-plot/matrix.js","src/lhc-plot/phase-canvas.js","src/lhc-plot/trdet-canvas.js","src/main.js","src/notation.js","src/ordered-class-subgraph.js","src/tex.js","src/thead-layout.js","src/thead-layout/arc-layers.js","src/thead-layout/cell-layers.js","src/thead-layout/node-layers.js","src/tr-layout.js","src/trait-rows-output.js","src/unordered-class-subgraph.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","detailsSupported","document","createElement","$details","$","this","on","ev","preventDefault","toggleOpen","attr","removeAttr","trigger","keyCodeEnter","keyCodeSpace","handleEvent","target","closest","is","addClass","children","click","keydown","keyCode",2,"haystack","needle","start","undefined","includes","Array","isArray","indexOf",3,"Math","sign","x","isNaN",4,"tex","_len","arguments","terms","_key","needToCollect","collectedTerms","flipSign","_i","term","push","lambdaPow","order","mapTerms","nt","mapper","blockSum","apply","map","factor","step1","dd","step2","step3","step4","type","content","concat","22",5,"traits","classes","merge","mergedClasses","id","classId","classData","htmlName","name","traitId","traitData","formType","forms","split","pop","contents","6","7","8","9","characteristicEquationContent","eqsol","o1_linear_generalSolutionMethod_content","isLinear","mvp1","mvp2","mvp3","mvpa","mvpyh","sint","title","dxdt","ddt","int","o1_linearHomogeneous_generalSolutionMethod_content","o1_linearHomogeneous_equilibriumSolutionMethod_content","xMultiplier","o1_linearHomogeneousConstant_generalSolutionMethod_content","xMulSign","xMulValue","o1","parents","importance","equation","o1_separable","generalSolutionMethod","equilibriumSolutionMethod","o1_autonomous","isoclineProperty","shiftSolutionRelation","o1_bernoulli","notes","w","o1_linear","associatedHomogeneousEquation","linear_o1_linear","resolved_o1_linear","solutionSpaceBasis","homogeneitySolutionRelation","compare","additivitySolutionRelation","linearCombinationSolutionRelation","affineCombinationSolutionRelation","associatedSolutionRelation","close","o1_linearHomogeneous","linear_o1_linearHomogeneous","resolved_o1_linearHomogeneous","o1_separableInT","o1_linearHomogeneousConstant","on_linearHomogeneousConstant","characteristicEquation","linear_o1_linearHomogeneousConstant","resolved_o1_linearHomogeneousConstant","o1_expGrowth","linear_o1_expGrowth","resolved_o1_expGrowth","o1_expDecay","linear_o1_expDecay","resolved_o1_expDecay","halfLife","o1_logisticGrowth","LhcParam","LhcContent","ivp","harmonicOscillatorType","discriminantRelation","contentMethodName","o2_harmonicOscillator","y","X","linear_o2_harmonicOscillator","Linear","resolved_o2_harmonicOscillator","Resolved","system_o2_harmonicOscillator","ReducedSystem","vector_o2_harmonicOscillator","ReducedVector","o2OrderReductionForms","resolvedFormFn","o2","s2","o2_autonomous","s2_autonomous","o2_linearHomogeneous","s2_linearHomogeneous","linear_o2_linearHomogeneous","getContentFor_equilibriumSolutionMethod","resolved_o2_linearHomogeneous","system_o2_linearHomogeneous","vector_o2_linearHomogeneous","o2_linearHomogeneousConstant","s2_linearHomogeneousConstant","linear_o2_linearHomogeneousConstant","getContentFor_characteristicEquation","resolved_o2_linearHomogeneousConstant","system_o2_linearHomogeneousConstant","vector_o2_linearHomogeneousConstant","getContentFor_generalSolutionMethod","scalar_o2_simpleHarmonicOscillator","getContentFor_equilibriumSolutionMethod0","system_o2_simpleHarmonicOscillator","vector_o2_simpleHarmonicOscillator","o2_underdampedHarmonicOscillator","o2_criticallyDampedHarmonicOscillator","o2_overdampedHarmonicOscillator","o2_simpleHarmonicOscillator","linear_o2_simpleHarmonicOscillator","resolved_o2_simpleHarmonicOscillator","getContentFor_generalSolutionMethod_Imaginary","o2_vanDerPol","o2_unforcedDuffing","11","12","on_linearHomogeneousConstant_generalSolutionMethod_content","charEqn","isSystem","isVector","sn","testSolutionMethod","linear_on_linearHomogeneousConstant","resolved_on_linearHomogeneousConstant","system_on_linearHomogeneousConstant","vector_on_linearHomogeneousConstant","LhcPlot","s2_partlyDecoupled","_contents","ith","choose","g","generalSolutionMethodContents","_choose","dv","cv","_choose2","df","cf","_choose3","ex1","ex2","_choose4","dth","cth","sub","vec2","s2_linearHomogeneousConstant_characteristicEquation","scalar","s2_linearHomogeneousConstant_generalSolutionMethod_content","none","generalSolutionLeadX0","specificSolutionLeadX0","generalAndSpecificSolutionLeadX0","findRealEigenvector","svec2","mat2","findComplexEigenvector","generalRealSolution","eigx1","eigx2","eigy1","eigy2","specificSolution","smat2","xi","xy","s2_partlyDecoupled1","s2_partlyDecoupled2","s2_completelyDecoupled","system_s2_linearHomogeneousConstant","vector_s2_linearHomogeneousConstant","plot","$output","sn_sir","phaseSolutionMethod","13",10,"FormRowsOutput","i18n","orderedClassSubgraph","theadLayout","notation","$classHighlightables","formSelectCallback","___babelHelper___classCallCheck","writeEquations","iColumn","$cell","$classEquations","forEach","formData","append","$equation","add","select","$e","unselect","removeClass","hasClass","noteText","columnParents","visibleParents","pid","$li","hover","$trs","columns","Base","_class","param","prototype","getGeneralSolutionConstantsEquation","getX0","getGeneralSolutionConstantsSolution","kmatlead","kx1","ky1","kx2","ky2","eqn1","eqn2","getGeneralSolutionRepeatedCase","x0","getx0","y0","gety0","getRepeatedGeneralSolution","getGeneralSolutionRealCase","getRealGeneralSolution","getGeneralSolutionComplexCase","getComplexGeneralSolution","getGeneralSolutionImaginaryCase","getImaginaryGeneralSolution","getContentFor_generalSolutionMethod_Repeated","_this","getCharacteristicEquation","getContentFor_generalSolutionMethod_Real","_this2","getContentFor_generalSolutionMethod_Complex","_this3","_this4","linear","_this5","Scalar","_LhcContent$Base","_class2","___babelHelper___possibleConstructorReturn","___babelHelper___inherits","_LhcContent$Scalar","_class3","_this8","sum","_this9","_this10","_this11","_LhcContent$Scalar2","_class4","_this13","b","resolved","_this14","_this15","_this16","_LhcContent$Base2","_class5","c","system","d","_this18","sys2","_LhcContent$Base3","_class6","_this20","a2","a1","a0","j","b1","b0","A","detailsPolyfill","Matrix","TrdetCanvas","PhaseCanvas","xLabel","yLabel","matrix","$numberInputs","$rangeInputs","$equilibriumType","trdetCanvas","phaseCanvas","updateDetails","updateEquilibriumType","getEquilibriumType","D","det","T","tr","ssc","text","forUpdated","val","redraw","getCoefInputs","coef","isMatrixElement","valueRange","getRange","initCoefInput","getValue","setValue","$input","checkValidity","value","Number","$div","label","slice","charAt","$number","$range","v","toFixed","setZero","setAssociated","each","buttons","$canvas","width","h","height","trim","tRange","dRange","tClose","dClose","offsetX","offsetY","p","abs","setTrdetExternally","16","17","18",14,"Canvas","ctx","getContext","drawAxes","xAxisSize","yAxisSize","arrowSize","drawAxis","beginPath","moveTo","lineTo","stroke","save","lineWidth","strokeStyle","fillStyle","font","rotate","PI","restore","textBaseline","fillText","textAlign",15,"getClosestPointOnPositiveHyperbolaIn1stQuadrant","C","sqrt","epsilon2","iterationLimit","yx","x1","y1","getClosestPointOnPositiveHyperbola","getClosestPointOnHyperbola","_updated","fn","_computeElementsFromTrdet","_original","_a","_b","_c","_d","_tr","bc","_det","_computeTrdetFromElements","_computeEigenvaluesFromTrdet","discr","root","_re2","_re1","_im1","_im2","_root","re1","re2","im1","im2","_computeTrdetFromEigenvalues","getEigenvector","lambda","getComplexEigenvector","alpha","beta","_setRe","_setIm","___babelHelper___createClass","key","get","set","_Canvas","xRange","yRange","drawDirectionField","arrowSpacing","arrowLength","arrowWidth","drawArrow","dx","dy","dl","closePath","fill","nx","floor","ny","drawEigenline","otherLambda","iconSize","icon","scale","transform","_ref","xic","yic","xis","yis","drawEigenlineIcon","dir","drawDiamond","drawTriangle","ofs","drawSolution","color","max","fnOnFractions","xNum","xDen","yNum","yDen","drawFixedPoint","fixedPointSize","arc","drawSaddleOrNodeSolution","lambda1","lambda2","xy1","xy2","x2","y2","_ref2","_ref3","_ref4","k1","k2","_ref5","_ref6","_ref7","T1","T2","dT1","pow","ke1","exp","ke2","dt","min","_i2","_ke","_ke2","_dt","_t","drawSpiralSolution","xxyy","kxc","kxs","kyc","kys","cos","sin","calculateSemiaxes","B","F","DIS","A2","B2","A2B2","R2","t0","log","e0","nSegments","ceil","_i3","_t3","c0","s0","_t2","_i4","_s","dtRad","drawDefectiveSolution","t1","dT","fillRect","translate","crosshairSize","pointerSize","pointerMargin","trRange","detRange","drawRegionAreas","drawRegionLines","drawRegionLinesOnce","all","drawParabola","lineCap","drawPosition","SQRT2",19,"UnorderedClassSubgraph","OrderedClassSubgraph","TheadLayout","TrLayout","Notation","data","TraitRowsOutput","strings","trait.entity","trait.associatedHomogeneousEquation","trait.characteristicEquation","trait.halfLife","trait.property","trait.isoclineProperty","trait.solutionRelation","trait.shiftSolutionRelation","trait.linearitySolutionRelation","trait.solutionSpaceBasis","trait.homogeneitySolutionRelation","trait.additivitySolutionRelation","trait.linearCombinationSolutionRelation","trait.affineCombinationSolutionRelation","trait.associatedSolutionRelation","trait.transform","trait.orderReduction","trait.solutionMethod","trait.generalSolutionMethod","trait.phaseSolutionMethod","trait.equilibriumSolutionMethod","trait.testSolutionMethod","trait.plot","$container","empty","selectedNodes","traitAlignmentLevel","maxTraitAlignmentLevel","dependentVariables","availableDependentVariables","viewDependentVariables","xyw","yvz","unorderedClassSubgraph","trLayout","recomputeLayouts","breadthWalk","graph","result","visited","queue","shift","Object","keys","sort","writeButton","tip","$button","$tableContainer","$quickSelect","$quickSelectButton","updateQuickSelectButton","deleteNode","writeTable","addNode","writeQuickSelectControls","$option","change","_id","visibleAncestors","computeVisibleAncestors","aid","naid","_id2","$attachedMenu","$attachedToButton","attachedDirection","attachTimeoutId","setCellClasses","cell","_arr","writeTheadButton","nodes","keyCodeUp","keyCodeDown","removeAttachedMenu","remove","clearTimeout","startAttachingMenu","$toFocus","prev","focus","_$toFocus","next","setTimeout","mh","outerHeight","mo","offset","bh","bo","top","insertBefore","left","last","first","writeTheadCell","node","ancestors","allParents","reverse","descendants","allChildren","writeThead","$thead","nodeLayers","arcLayers","row","writeTfoot","writeTraitAlignmentControls","_loop","prop","writeDependentVariablesControls","_loop2","dvs","writeGeneralNotes","traitRowsOutput","formRowsOutput","form","updateForm","MathJax","Hub","Queue","20","21","23","27","28","29","toUpperCase","OrderedClassGraph","unorderedClassGraph","orderedClasses","ranks","id1","id2","mergeSign","alterSign","filter","_mergeSign","join","_alterSign","makeNodeLabelLayers","makeArcLocationLayers","makeLayoutLayers","orderedVisibleDepthNodes","visibleDepthNodes","arcLocationLayers","24","25","26","depthList","arcRows","xs","_node","arcs","parentXs","parentNode","_j","String","splice","arr","reduce","times","head","nodeLabelLayers","layoutWidth","makeBlankRow","nodeLayoutLayers","arcLayoutLayers","drawArcUp","k","bt","drawArcDown","parentLocations","childLocations","pi","ci","rl","rt","bl","nextParentOrder","parentOrder","depth","sortedParents","node0","node1","p0","p1","cmpLen","cmpOrd","classSubgraph","classColumns","getSubtreeLayout","traitSubtree","ancestorsHaveIntegratedTrait","walk","getIntegratedClassesForTrait","vpid","integratedClassIds","trait","integratedAncestors","cells","walkTraits","traitChildren","keepTraits","classTraitId","some","mathjaxDetailsFixAndPolyfill","columnTraitCells","writeTraitItem","forClassId","fromClassId","selectedForm","getTitle","$trait","rec","line","hasSelectedForm","selectedFormType","preferredForm","_arr2","writeTraitCell","traitCell","writeTraitRow","traitCells","cellWriterForForm","traitChild","_columnTraitCells$iCo","$oldCell","$newCell","replaceWith","UnorderedClassGraph","visibleClasses","invertGraph","igraph","ancestorDistances","addAncestorDistance","fromNode","toNode","distance","oldDistance","newDistance","traverseNode","ancestorNode","parentDistance","visibleChildren","cid","masked","maskAncestors","integrateAncestors","_pid"],"mappings":"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","file":"crnx-ode-properties.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nconst detailsSupported=('open' in document.createElement('details')) // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\r\n\r\nmodule.exports=function(){ // to be called in .each()\r\n\tconst $details=$(this)\r\n\t$details.on('click','summary :input, summary a[href]',function(ev){ // firefox lets those events through\r\n\t\tev.preventDefault()\r\n\t})\r\n\tif (detailsSupported) return\r\n\tconst toggleOpen=()=>{\r\n\t\tif (!$details.attr('open')) {\r\n\t\t\t$details.attr('open','')\r\n\t\t} else {\r\n\t\t\t$details.removeAttr('open')\r\n\t\t}\r\n\t\t$details.trigger('toggle') // TODO coalesce toggle events\r\n\t}\r\n\tconst keyCodeEnter=13\r\n\tconst keyCodeSpace=32\r\n\tconst handleEvent=ev=>$(ev.target).closest('summary, :input, a[href]').is('summary') // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\r\n\t$details.addClass('polyfill').children('summary').attr('tabindex',0).click(function(ev){\r\n\t\tif (handleEvent(ev)) {\r\n\t\t\ttoggleOpen()\r\n\t\t}\r\n\t}).keydown(function(ev){\r\n\t\tif (handleEvent(ev) && (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace)) {\r\n\t\t\ttoggleOpen()\r\n\t\t\treturn false\r\n\t\t}\r\n\t})\r\n}\r\n",null,"module.exports = function(haystack){\r\n\treturn function(needle,start){\r\n\t\tif (\r\n\t\t\t(haystack!=null && haystack.includes!==undefined) ||\r\n\t\t\t!((typeof haystack === 'string') || (Array.isArray(haystack)))\r\n\t\t) {\r\n\t\t\treturn haystack.includes(needle,start)\r\n\t\t} else {\r\n\t\t\treturn haystack.indexOf(needle,start) !== -1\r\n\t\t}\r\n\t}\r\n}\r\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\nmodule.exports = Math.sign || function(x){\r\n\tx=+x // convert to a number\r\n\tif (x===0 || isNaN(x)) {\r\n\t\treturn x\r\n\t}\r\n\treturn x>0 ? 1 : -1\r\n}\r\n","'use strict'\r\n\r\nconst tex=require('./tex')\r\n\r\n// terms are one of '+', '-', '=', '0', [order,factor]\r\nmodule.exports=(...terms)=>{\r\n\tlet needToCollect=true\r\n\tlet collectedTerms=terms\r\n\tif (terms[terms.length-2]=='=' && terms[terms.length-1]==0) {\r\n\t\tneedToCollect=false\r\n\t} else {\r\n\t\tcollectedTerms=[]\r\n\t\tlet flipSign=false\r\n\t\tfor (let term of terms) {\r\n\t\t\tif (Array.isArray(term)) {\r\n\t\t\t\tcollectedTerms.push(term)\r\n\t\t\t} else if (term=='=') {\r\n\t\t\t\tflipSign=true\r\n\t\t\t\tcollectedTerms.push('-')\r\n\t\t\t} else if (term=='+') {\r\n\t\t\t\tcollectedTerms.push(flipSign?'-':'+')\r\n\t\t\t} else if (term=='-') {\r\n\t\t\t\tcollectedTerms.push(flipSign?'+':'-')\r\n\t\t\t}\r\n\t\t}\r\n\t\tcollectedTerms.push('=','0')\r\n\t}\r\n\tconst lambdaPow=order=>{\r\n\t\tif (order==0) {\r\n\t\t\treturn 1\r\n\t\t} else if (order==1) {\r\n\t\t\treturn ``\r\n\t\t} else {\r\n\t\t\treturn `^{${order}}`\r\n\t\t}\r\n\t}\r\n\tconst mapTerms=(nt,terms,mapper)=>tex.blockSum(...(\r\n\t\tterms.map(term=>{\r\n\t\t\tif (Array.isArray(term)) {\r\n\t\t\t\tconst [order,factor]=term\r\n\t\t\t\treturn mapper(nt,order,factor)\r\n\t\t\t} else {\r\n\t\t\t\treturn term\r\n\t\t\t}\r\n\t\t})\r\n\t))\r\n\tconst step1=(nt,order,factor)=>[factor,nt.dd(nt.x,'t',order)]\r\n\tconst step2=(nt,order,factor)=>[factor,nt.dd('','t',order),'e^{ t}']\r\n\tconst step3=(nt,order,factor)=>[factor,lambdaPow(order),'e^{ t}']\r\n\tconst step4=(nt,order,factor)=>[factor,lambdaPow(order)]\r\n\treturn nt=>[\r\n\t\t{type:'derivation',content:[\r\n\t\t\tmapTerms(nt,terms,step1),\r\n\t\t\t`substitute \\\\( ${nt.x} = e^{ t} \\\\)`,\r\n\t\t\tmapTerms(nt,terms,step2),\r\n\t\t\tmapTerms(nt,terms,step3),\r\n\t\t\t`divide by \\\\( e^{\\\\lambda t} \\\\)`,\r\n\t\t\t...(needToCollect?[\r\n\t\t\t\tmapTerms(nt,terms,step4),\r\n\t\t\t]:[]),\r\n\t\t]},\r\n\t\tmapTerms(nt,collectedTerms,step4),\r\n\t]\r\n}\r\n","'use strict'\r\n\r\nconst traits=[\r\n\t['entity',[\r\n\t\t['associatedHomogeneousEquation'],\r\n\t\t['characteristicEquation'],\r\n\t\t['halfLife'],\r\n\t]],\r\n\t['property',[\r\n\t\t['isoclineProperty'],\r\n\t\t['solutionRelation',[\r\n\t\t\t['shiftSolutionRelation'],\r\n\t\t\t['linearitySolutionRelation',[ // linear and affine properties of solutions\r\n\t\t\t\t['solutionSpaceBasis'],\r\n\t\t\t\t['homogeneitySolutionRelation'],\r\n\t\t\t\t['additivitySolutionRelation'],\r\n\t\t\t\t['linearCombinationSolutionRelation'],\r\n\t\t\t\t['affineCombinationSolutionRelation'],\r\n\t\t\t\t['associatedSolutionRelation'],\r\n\t\t\t]]\r\n\t\t]],\r\n\t]],\r\n\t['transform',[\r\n\t\t['orderReduction'], // TODO remove\r\n\t]],\r\n\t['solutionMethod',[\r\n\t\t['generalSolutionMethod'],\r\n\t\t['phaseSolutionMethod'],\r\n\t\t['equilibriumSolutionMethod'],\r\n\t\t['testSolutionMethod'],\r\n\t]],\r\n\t['plot'],\r\n]\r\n\r\n// class entries:\r\n//\tforms = array of forms\r\n//\ttraits = dictionary of traits\r\n//\t...TODO complete...\r\n// obsolete class entries:\r\n//\tequation = tex equation of primary form\r\n//\tvectorEquation\r\n//\thasForm = use this value as form type instead of class id\r\n\r\n// form entries:\r\n//\tis = comma-separated list of form types (common types are t,x,xy,xi,X,resolved_*,system_*,vector_*)\r\n//\tequation\r\n//\tnotes = (nt => array)\r\n\r\n// trait entries:\r\n//\ttitle = redefine title\r\n//\tformType = preferred form type; defaults to last (most specific) form type of first form; this form type will be used when content is not available for requested form\r\n//\tcontent = contents for preferred form type; used to omit lengthier contents entry\r\n//\tcontents = dictionary of (form type : content)\r\n//\tclose = children don't need to inherit this trait; display it only if parents have it displayed\r\n//\tcompare = show only if other classes have this property without compare entry\r\n// obsolete trait entries:\r\n//\tform = have to present the equation in which this trait was defined\r\n//\t\tif true: form type is equal to class id\r\n//\t\totherwise: object: { formType1:true, formType2:true, ... }; usually lists children forms\r\n\r\nconst classes={}\r\nconst merge=(mergedClasses)=>{\r\n\tfor (let id in mergedClasses) {\r\n\t\tclasses[id]=mergedClasses[id]\r\n\t}\r\n}\r\nmerge(require('./data/equations-1st'))\r\nmerge(require('./data/equations-2nd'))\r\nmerge(require('./data/equations-nth'))\r\nmerge(require('./data/systems'))\r\n\r\n// preprocess data\r\nfor (let classId in classes) {\r\n\tconst classData=classes[classId]\r\n\tif (classData.htmlName===undefined) {\r\n\t\tclassData.htmlName=classData.name\r\n\t}\r\n\tif (classData.traits===undefined) {\r\n\t\tclassData.traits={}\r\n\t}\r\n\tfor (let traitId in classData.traits) {\r\n\t\tconst traitData=classData.traits[traitId]\r\n\t\tif (traitData.formType===undefined) {\r\n\t\t\ttraitData.formType=classData.forms[0].is.split(',').pop()\r\n\t\t}\r\n\t\tif (traitData.contents===undefined && traitData.content!==undefined) {\r\n\t\t\ttraitData.contents={}\r\n\t\t\ttraitData.contents[traitData.formType]=traitData.content\r\n\t\t\tdelete traitData.content\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports={traits,classes}\r\n","'use strict'\r\n\r\nconst characteristicEquationContent=require('../characteristic-equation-content')\r\n\r\nconst eqsol=(name)=>`<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>${name}</a>`\r\n\r\nconst o1_linear_generalSolutionMethod_content=isLinear=>{\r\n\tconst mvp1=isLinear?'+':'='\r\n\tconst mvp2=isLinear?'=':'+'\r\n\tconst mvp3=isLinear?'-':'+'\r\n\tconst mvpa=isLinear?'g':'a'\r\n\tconst mvpyh=nt=>(isLinear?`e^{-${nt.sint('g(t)')}}`:`e^{${nt.sint('a(t)')}}`)\r\n\treturn nt=>[\r\n\t\t{type:'case',title:\"method of <a href='https://en.wikipedia.org/wiki/Integrating_factor'>integrating factors</a>\",content:[\r\n\t\t\t{type:'derivation',content:[\r\n\t\t\t\t...(isLinear?[]:[\r\n\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\]`,\r\n\t\t\t\t\t`introduce a new function`,\r\n\t\t\t\t\t`\\\\[ g(t) = -a(t) \\\\]`,\r\n\t\t\t\t\t`rewrite the equation with \\\\( g(t) \\\\)`,\r\n\t\t\t\t]),\r\n\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = b(t) \\\\]`,\r\n\t\t\t\t`introduce the integrating factor`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) = e^{${nt.sint('g(t)')}} \\\\]`,\r\n\t\t\t\t`multiply the equation by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + \\\\mu(t) g(t) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + e^{${nt.sint('g(t)')}} g(t) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + ${nt.ddt}(e^{${nt.sint('g(t)')}}) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + ${nt.ddt}(\\\\mu(t)) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ ${nt.ddt}(\\\\mu(t) ${nt.x}) = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`integrate the equation multiplied by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.x} = ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t]},\r\n\t\t\t(isLinear\r\n\t\t\t\t?`\\\\[ \\\\mu(t) = e^{${nt.sint('g(t)')}} \\\\]`\r\n\t\t\t\t:`\\\\[ \\\\mu(t) = e^{-${nt.sint('a(t)')}} \\\\]`\r\n\t\t\t),\r\n\t\t\t`\\\\[ \\\\mu(t) ${nt.x} = ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t]},\r\n\t\t{type:'case',title:\"method of <a href='https://en.wikipedia.org/wiki/Variation_of_parameters'>variation of parameters</a>\",content:[\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`mathematically equivalent to the method of integrating factors`,\r\n\t\t\t]},\r\n\t\t\t`find the general solution \\\\( K ${nt.x}_h \\\\) of the associated homogeneous equation`,\r\n\t\t\t`\\\\[ ${nt.x}_h = ${mvpyh(nt)} \\\\]`,\r\n\t\t\t{type:'derivation',title:`find \\\\( ${nt.x} \\\\) as \\\\( ${nt.x}_h \\\\) multiplied by an unknown function`,content:[\r\n\t\t\t\t`\\\\[ ${nt.x} = u(t) ${nt.x}_h \\\\]`,\r\n\t\t\t\t`substitute \\\\( ${nt.x} \\\\) into the original equation`,\r\n\t\t\t\t`\\\\[ ${nt.ddt}(u(t) ${nt.x}_h) ${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h + u(t) ${nt.dd(`${nt.x}_h`)} ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h + u(t) ${nt.ddt}(${mvpyh(nt)}) ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h ${mvp3} u(t) ${mvpa}(t) ${mvpyh(nt)} ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h ${mvp3} u(t) ${mvpa}(t) ${nt.x}_h ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ ${nt.dd('u(t)')} ${nt.x}_h = b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ ${nt.dd('u(t)')} = \\\\frac{b(t)}{${nt.x}_h} \\\\]`,\r\n\t\t\t\t`\\\\[ u(t) = ${nt.int(`\\\\frac{b(t)}{${nt.x}_h}`)} + C \\\\]`,\r\n\t\t\t\t`substitute \\\\( u(t) \\\\) into the expression for \\\\( ${nt.x} \\\\)`,\r\n\t\t\t]},\r\n\t\t\t`\\\\[ ${nt.x} = ${nt.x}_h \\\\left( ${nt.int(`\\\\frac{b(t)}{${nt.x}_h}`)} + C \\\\right) \\\\]`,\r\n\t\t]},\r\n\t\t{type:'case',title:\"<a href='https://en.wikipedia.org/wiki/Method_of_undetermined_coefficients'>method of undetermined coefficients</a>\",content:[\r\n\t\t\t`find the general solution \\\\( K ${nt.x}_h \\\\) of the associated homogeneous equation`,\r\n\t\t\t`\\\\[ ${nt.x}_h = ${mvpyh(nt)} \\\\]`,\r\n\t\t\t{type:'derivation',title:`find a particular solution \\\\( ${nt.x}_p \\\\) of the original equation`,content:[\r\n\t\t\t\t`guess the solution form with coefficients to be solved for`,\r\n\t\t\t\t`solve for coefficients`,\r\n\t\t\t\t{type:'example',content:[\r\n\t\t\t\t\t...(isLinear?[]:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = -2 ${nt.x} + 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t\t`move all terms with \\\\( ${nt.x} \\\\) to one side`,\r\n\t\t\t\t\t]),\r\n\t\t\t\t\t`\\\\[ ${nt.dxdt} + 2 ${nt.x} = 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t`compare the terms and guess the particular solution form`,\r\n\t\t\t\t\t`\\\\[ ${nt.x}_p = \\\\alpha e^{-t/2} \\\\]`,\r\n\t\t\t\t\t`substitute \\\\( ${nt.x}_p \\\\) into the equation`,\r\n\t\t\t\t\t`\\\\[ - \\\\frac{\\\\alpha}{2} e^{-t/2} + 2 \\\\alpha e^{-t/2} = 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t`divide by \\\\( e^{-t/2} \\\\)`,\r\n\t\t\t\t\t`\\\\[ - \\\\frac{\\\\alpha}{2} + 2 \\\\alpha = 3 \\\\]`,\r\n\t\t\t\t\t`solve for \\\\( \\\\alpha \\\\)`,\r\n\t\t\t\t\t`\\\\[ \\\\alpha = 2 \\\\]`,\r\n\t\t\t\t\t`substitute \\\\( \\\\alpha \\\\) into \\\\( ${nt.x}_p \\\\)`,\r\n\t\t\t\t\t`\\\\[ ${nt.x}_p = 2 e^{-t/2} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t\t`\\\\[ ${nt.x} = K ${nt.x}_h + ${nt.x}_p \\\\]`,\r\n\t\t]},\r\n\t]\r\n}\r\n\r\nconst o1_linearHomogeneous_generalSolutionMethod_content=isLinear=>{\r\n\tconst s=isLinear?'-':''\r\n\tconst a=isLinear?'g':'a'\r\n\treturn nt=>[\r\n\t\t{type:'derivation',content:[\r\n\t\t\t`\\\\[ ${nt.dxdt} = ${s}${a}(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = ${s}${a}(t) \\\\]`,\r\n\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${s}${nt.int(`${a}(t)`)} + C \\\\]`,\r\n\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${s}${nt.int(`${a}(t)`)} + C \\\\]`,\r\n\t\t\t`\\\\[ \\\\ln|${nt.x}| = ${s}${nt.int(`${a}(t)`)} + C \\\\]`,\r\n\t\t]},\r\n\t\t`\\\\[ ${nt.x} = K \\\\cdot e^{${s}${nt.sint(`${a}(t)`)}} \\\\]`,\r\n\t\t{type:'note',content:[\r\n\t\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( K = 0 \\\\)`,\r\n\t\t]},\r\n\t]\r\n}\r\n\r\nconst o1_linearHomogeneous_equilibriumSolutionMethod_content=xMultiplier=>nt=>[\r\n\t{type:'switch',title:`\\\\( ${xMultiplier} \\\\) is`,content:[\r\n\t\t{type:'case',title:`\\\\( ${xMultiplier} = 0 \\\\)`,content:[\r\n\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t]},\r\n\t\t{type:'case',title:`\\\\( ${xMultiplier} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t]},\r\n\t]},\r\n]\r\n\r\nconst o1_linearHomogeneousConstant_generalSolutionMethod_content=(xMulSign,xMulValue)=>nt=>[\r\n\t{type:'derivation',content:[\r\n\t\t`\\\\[ ${nt.dxdt} = ${xMulSign}${xMulValue} \\\\cdot ${nt.x} \\\\]`,\r\n\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = ${xMulSign}${xMulValue} \\\\]`,\r\n\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${xMulSign}${nt.int(xMulValue)} + C \\\\]`,\r\n\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${xMulSign}${nt.int(xMulValue)} + C \\\\]`,\r\n\t\t`\\\\[ \\\\ln|${nt.x}| = ${xMulSign}${xMulValue} t + C \\\\]`,\r\n\t\t`\\\\[ ${nt.x}(t) = C_1 e^{${xMulSign}${xMulValue} t} \\\\]`,\r\n\t\t`\\\\[ ${nt.x}(0) = C_1 e^0 \\\\]`,\r\n\t\t`\\\\[ C_1 = ${nt.x}(0) \\\\]`,\r\n\t]},\r\n\t`\\\\[ ${nt.x}(t) = ${nt.x}(0) \\\\cdot e^{${xMulSign}${xMulValue} t} \\\\]`,\r\n\t{type:'note',content:[\r\n\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( ${nt.x}(0) = 0 \\\\)`,\r\n\t]},\r\n]\r\n\r\nmodule.exports={\r\n\to1: {\r\n\t\tparents: {\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"first-order\",\r\n\t\timportance: 0,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f(t,${nt.x})`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\to1_separable: {\r\n\t\tparents: {\r\n\t\t\to1: true,\r\n\t\t},\r\n\t\tname: \"first-order separable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_separable',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f_1(t) \\\\cdot f_2(${nt.x})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f_1(t) \\\\cdot f_2(${nt.x}) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{f_2(${nt.x})} \\\\cdot ${nt.dxdt} = f_1(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f_2(${nt.x})} ${nt.dxdt}`)} = ${nt.int('f_1(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f_2(${nt.x})}`,nt.x)} = ${nt.int('f_1(t)')} + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`solve \\\\( f_2(${nt.x}) = 0 \\\\) for constant \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t\t//`domain is not necessary \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)`\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_autonomous: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t},\r\n\t\tname: \"first-order autonomous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_autonomous',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f(${nt.x})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tisoclineProperty: {\r\n\t\t\t\tformType: 't',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`isoclines are horizontal`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tshiftSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p(t) \\\\) is a solution, then \\\\( ${nt.x}_p(t+C) \\\\) is a solution`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f(${nt.x}) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{f(${nt.x})} \\\\cdot ${nt.dxdt} = 1 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f(${nt.x})} ${nt.dxdt}`)} = ${nt.int(1)} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f(${nt.x})}`,nt.x)} = t + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`solve \\\\( f(${nt.x}) = 0 \\\\) for constant \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t\t//`domain is \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)` // only if f(y) is continuous\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_bernoulli: {\r\n\t\tparents: {\r\n\t\t\to1: true,\r\n\t\t},\r\n\t\tname: \"Bernoulli\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Bernoulli_differential_equation'>Bernoulli</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_bernoulli',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.x}^n`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( n \\\\neq 1 \\\\)`,\r\n\t\t\t\t\t`usually it's also defined that additionally \\\\( n \\\\neq 0 \\\\), but we ignore this requirement here`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.x}^n \\\\]`,\r\n\t\t\t\t\t\t`multiply the equation by \\\\( \\\\frac{1-n}{${nt.x}^n} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\begin{multline} `+\r\n\t\t\t\t\t\t\t`\\\\frac{1-n}{${nt.x}^n} ${nt.dxdt} = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`= \\\\frac{(1-n) a(t)}{${nt.x}^{n-1}} + (1-n) b(t) `+\r\n\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t`introduce a new variable`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.w} = \\\\frac{1}{${nt.x}^{n-1}} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.w)} = ${nt.dd(nt.w,nt.x)} ${nt.dxdt} = \\\\frac{1-n}{${nt.x}^n} ${nt.dxdt} \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.w} \\\\) and \\\\( ${nt.dd(nt.w)} \\\\) into the equation`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.w)} = (1-n) a(t) ${nt.w} + (1-n) b(t) \\\\]`,\r\n\t\t\t\t\t\t`solve this equation as a linear equation in \\\\( ${nt.w} \\\\), then return to the original variable \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.w} = (1-n) ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{(n-1)${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{\\\\mu(t)}{${nt.x}^{n-1}} = (1-n) ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`if \\\\( n>0 \\\\), there's an equilibrium solution \\\\( ${nt.x} = 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linear: {\r\n\t\tparents: {\r\n\t\t\to1_bernoulli: true,\r\n\t\t},\r\n\t\tname: \"first-order linear\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_linear',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} + g(t) \\\\cdot ${nt.x} = b(t)`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linear',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t)`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linear: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tresolved_o1_linear: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p \\\\) is a solution`,\r\n\t\t\t\t\t`and \\\\( ${nt.x}_h \\\\) is a nonzero solution of the associated homogeneous equation`,\r\n\t\t\t\t\t`then \\\\( K ${nt.x}_h + ${nt.x}_p \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thomogeneitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\) and \\\\( ${nt.x}_1 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + (1 - K_1) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\tadditivitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 + ${nt.x}_2 - ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\tlinearCombinationSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 + (1 - K_1 - K_2) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t\t{type:'extra',title:'generalizes to \\\\( m+1 \\\\) solutions',content:[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions,`,\r\n\t\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i + (1 - \\\\sum\\\\limits_{i=1}^m K_i) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\taffineCombinationSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\) are solutions`,\r\n\t\t\t\t\t`and \\\\( K_1 + K_2 = 1 \\\\)`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t\t{type:'extra',title:'generalizes to \\\\( m \\\\) solutions',content:[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions`,\r\n\t\t\t\t\t\t`and \\\\( \\\\sum\\\\limits_{i=1}^m K_i = 1 \\\\)`,\r\n\t\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i \\\\) is a solution.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 - ${nt.x}_2 \\\\) is a solution of the associated homogeneous equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linear:   o1_linear_generalSolutionMethod_content(true),\r\n\t\t\t\t\tresolved_o1_linear: o1_linear_generalSolutionMethod_content(false),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tformType: 'resolved_o1_linear',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`Can't find equilibrium solution like in Bernoulli equation because \\\\( n = 0 \\\\).`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t\to1_linear: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} + g(t) \\\\cdot ${nt.x} = 0`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = a(t) \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneous: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`The equation is associated with itself.`,\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tresolved_o1_linearHomogeneous: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`The equation is associated with itself.`,\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_h \\\\) is a nonzero solution,`,\r\n\t\t\t\t\t`then \\\\( K ${nt.x}_h \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thomogeneitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) is a solution,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tadditivitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 + ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tlinearCombinationSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t\t{type:'extra',title:'generalizes to \\\\( m \\\\) solutions',content:[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions,`,\r\n\t\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i \\\\) is a solution.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\taffineCombinationSolutionRelation: {\r\n\t\t\t\tformType: 't',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`This is a special case of a linear combination.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneous:   o1_linearHomogeneous_generalSolutionMethod_content(true),\r\n\t\t\t\t\tresolved_o1_linearHomogeneous: o1_linearHomogeneous_generalSolutionMethod_content(false),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneous:   o1_linearHomogeneous_equilibriumSolutionMethod_content('g(t)'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneous: o1_linearHomogeneous_equilibriumSolutionMethod_content('a(t)'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_separableInT: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t\to1_linear: true,\r\n\t\t},\r\n\t\tname: \"first-order separable in independent variable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a> in \\\\(t\\\\)\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_separableInT',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f(t)`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\( ${nt.dxdt} = 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tisoclineProperty: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`isoclines are vertical`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: { // also shiftSolutionRelation\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p \\\\) is a solution`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_p + C \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\( ${nt.x} = C \\\\) is a solution of the associated homogeneous equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(nt.dxdt)} = ${nt.int('f(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.x} = ${nt.int('f(t)')} + C \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`Can't find equilibrium solution like in separable equation because \\\\( f_2(${nt.x}) = 1 \\\\).`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ton_linearHomogeneousConstant: true,\r\n\t\t\to1_autonomous: true,\r\n\t\t\to1_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`a \\\\cdot ${nt.dxdt} + b \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( a \\\\ne 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = k \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneousConstant:   characteristicEquationContent([1,'a'],'+',[0,'b'],'=','0'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneousConstant: characteristicEquationContent([1,1],'=',[0,'k']),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneousConstant:   o1_linearHomogeneousConstant_generalSolutionMethod_content('-','\\\\frac ba'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneousConstant: o1_linearHomogeneousConstant_generalSolutionMethod_content('','k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneousConstant:   o1_linearHomogeneous_equilibriumSolutionMethod_content('b'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneousConstant: o1_linearHomogeneous_equilibriumSolutionMethod_content('k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_expGrowth: {\r\n\t\tparents: {\r\n\t\t\to1_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"exponential (natural) growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Exponential_growth#Differential_equation'>exponential (natural) growth</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_expGrowth',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} - k \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the growth constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linearHomogeneousConstant,resolved_o1_expGrowth',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = k \\\\cdot ${nt.x}`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the growth constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expGrowth:   characteristicEquationContent([1,1],'-',[0,'k'],'=','0'),\r\n\t\t\t\t\tresolved_o1_expGrowth: characteristicEquationContent([1,1],'=',[0,'k']),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expGrowth:   o1_linearHomogeneousConstant_generalSolutionMethod_content('','k'),\r\n\t\t\t\t\tresolved_o1_expGrowth: o1_linearHomogeneousConstant_generalSolutionMethod_content('','k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expGrowth:   o1_linearHomogeneous_equilibriumSolutionMethod_content('k'),\r\n\t\t\t\t\tresolved_o1_expGrowth: o1_linearHomogeneous_equilibriumSolutionMethod_content('k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_expDecay: {\r\n\t\tparents: {\r\n\t\t\to1_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"exponential (natural) decay\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Exponential_decay'>exponential (natural) decay</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o1_expDecay,linear_o1_expDecay',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} + k \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the decay constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o1_expDecay,resolved_o1_expDecay',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = -k \\\\cdot ${nt.x}`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the decay constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expDecay:   characteristicEquationContent([1,1],'+',[0,'k'],'=','0'),\r\n\t\t\t\t\tresolved_o1_expDecay: characteristicEquationContent([1,1],'=',[0,'-k']),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thalfLife: {\r\n\t\t\t\tformType: 'scalar_o1_expDecay',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(t_{1/2}) = \\\\frac 12 \\\\cdot ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t\t`substitute general solution \\\\( ${nt.x}(t) = ${nt.x}(0) e^{-kt} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(0) e^{-kt_{1/2}} = \\\\frac 12 \\\\cdot ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ e^{-kt_{1/2}} = \\\\frac 12 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ -kt_{1/2} = -\\\\ln 2 \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ t_{1/2} = \\\\frac{\\\\ln 2}{k} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expDecay:   o1_linearHomogeneousConstant_generalSolutionMethod_content('-','k'),\r\n\t\t\t\t\tresolved_o1_expDecay: o1_linearHomogeneousConstant_generalSolutionMethod_content('-','k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expDecay:   o1_linearHomogeneous_equilibriumSolutionMethod_content('-k'),\r\n\t\t\t\t\tresolved_o1_expDecay: o1_linearHomogeneous_equilibriumSolutionMethod_content('-k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_logisticGrowth: {\r\n\t\tparents: {\r\n\t\t\to1_autonomous: true,\r\n\t\t\to1_bernoulli: true,\r\n\t\t},\r\n\t\tname: \"logistic growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Logistic_function#In_ecology:_modeling_population_growth'>logistic growth</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,o1_logisticGrowth',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = r \\\\cdot ${nt.x} \\\\cdot \\\\left(1 - \\\\frac{${nt.x}}{k}\\\\right)`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k \\\\) is the <a href='https://en.wikipedia.org/wiki/Carrying_capacity'>carrying capacity</a>`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n}\r\n","'use strict'\r\n\r\nconst LhcParam=require('../lhc-param-classes')\r\nconst LhcContent=require('../lhc-content-classes')\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nconst harmonicOscillatorType=(type,discriminantRelation,contentMethodName)=>({\r\n\tparents: {\r\n\t\to2_harmonicOscillator: true,\r\n\t},\r\n\tname: `${type} harmonic oscillator`,\r\n\thtmlName: `${type} <a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator'>harmonic oscillator</a>`,\r\n\timportance: 4,\r\n\tforms: [\r\n\t\t{\r\n\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,scalar_o2_harmonicOscillator,linear_o2_harmonicOscillator',\r\n\t\t\tequation: nt=>`m \\\\cdot ${nt.dd(nt.x,'t',2)} + b \\\\cdot ${nt.dxdt} + k \\\\cdot ${nt.x} = 0`,\r\n\t\t\tnotes: nt=>[\r\n\t\t\t\t`\\\\[ b^2 - 4 m k ${discriminantRelation} 0 \\\\]`,\r\n\t\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t\t`\\\\( b \\\\ge 0 \\\\) is the viscous damping coefficient`,\r\n\t\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t\t],\r\n\t\t},\r\n\t\t// copypasted from harmonic oscillator\r\n\t\t{\r\n\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,scalar_o2_harmonicOscillator,resolved_o2_harmonicOscillator',\r\n\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = - \\\\frac bm \\\\cdot ${nt.dxdt} - \\\\frac km \\\\cdot ${nt.x}`,\r\n\t\t},\r\n\t\t{\r\n\t\t\tis: 't,xy,system_o2_simpleHarmonicOscillator,system_o2_harmonicOscillator',\r\n\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t`${nt.dd(nt.y)} &= - \\\\frac km \\\\cdot ${nt.x} - \\\\frac bm \\\\cdot ${nt.y} `+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t},\r\n\t\t{\r\n\t\t\tis: 't,X,vector_o2_simpleHarmonicOscillator,vector_o2_harmonicOscillator',\r\n\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\begin{bmatrix}`+\r\n\t\t\t\t`0 & 1 \\\\\\\\`+\r\n\t\t\t\t`- \\\\frac km & - \\\\frac bm`+\r\n\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t},\r\n\t],\r\n\ttraits: {\r\n\t\tgeneralSolutionMethod: {\r\n\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\tcontents: {\r\n\t\t\t\tlinear_o2_harmonicOscillator:   new LhcContent.Linear(new LhcParam.Linear('m','b','k'))[contentMethodName](),\r\n\t\t\t\tresolved_o2_harmonicOscillator: new LhcContent.Resolved(new LhcParam.Linear('m','b','k'))[contentMethodName](),\r\n\t\t\t\tsystem_o2_harmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m','b','k'))[contentMethodName](),\r\n\t\t\t\tvector_o2_harmonicOscillator:   new LhcContent.ReducedVector(new LhcParam.Linear('m','b','k'))[contentMethodName](),\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n})\r\n\r\nconst o2OrderReductionForms=(classId,resolvedFormFn)=>[ // resolvedFormFn: (x,y)=>`...`\r\n\t{\r\n\t\tis: `t,x,resolved_${classId}`,\r\n\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = `+resolvedFormFn(nt.x,nt.dxdt),\r\n\t},\r\n\t{\r\n\t\tis: 't,xy,system_${classId}',\r\n\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t`${nt.dd(nt.y)} &= `+resolvedFormFn(nt.x,nt.y)+` `+\r\n\t\t`\\\\end{aligned} \\\\right.`,\r\n\t},\r\n]\r\n\r\nmodule.exports={\r\n\to2: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"second-order\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o2',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = f(t,${nt.x},${nt.dxdt})`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= f(t,${nt.x},${nt.y}) `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\to2_autonomous: {\r\n\t\tparents: {\r\n\t\t\to2: true,\r\n\t\t\ts2_autonomous: true,\r\n\t\t},\r\n\t\tname: \"second-order autonomous\",\r\n\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o2_autonomous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = f(${nt.x},${nt.dxdt})`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_autonomous',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= f(${nt.x},${nt.y}) `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\to2_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ts2_linearHomogeneous: true,\r\n\t\t\to2: true,\r\n\t\t},\r\n\t\tname: \"second-order linear homogeneous\",\r\n\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} + p(t) \\\\cdot ${nt.dxdt} + q(t) \\\\cdot ${nt.x} = 0`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = a(t) \\\\cdot ${nt.dxdt} + b(t) \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= c(t) \\\\cdot ${nt.x} + d(t) \\\\cdot ${nt.y} `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_o2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\begin{bmatrix}`+\r\n\t\t\t\t\t`0 & 1 \\\\\\\\`+\r\n\t\t\t\t\t`c(t) & d(t)`+\r\n\t\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linearHomogeneous:   new LhcContent.Linear(new LhcParam.Linear(1,'p(t)','q(t)')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tresolved_o2_linearHomogeneous: new LhcContent.Resolved(new LhcParam.Resolved('a(t)','b(t)')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tsystem_o2_linearHomogeneous:   new LhcContent.ReducedSystem(new LhcParam.ReducedSystem('c(t)','d(t)')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tvector_o2_linearHomogeneous:   new LhcContent.ReducedVector(new LhcParam.ReducedSystem('c(t)','d(t)')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ts2_linearHomogeneousConstant: true,\r\n\t\t\ton_linearHomogeneousConstant: true,\r\n\t\t\to2_autonomous: true,\r\n\t\t\to2_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"second-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`a_2 \\\\cdot ${nt.dd(nt.x,'t',2)} + a_1 \\\\cdot ${nt.dxdt} + a_0 \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( a_2 \\\\ne 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = b_1 \\\\cdot ${nt.dxdt} + b_0 \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= c \\\\cdot ${nt.x} + d \\\\cdot ${nt.y} `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_o2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\begin{bmatrix}`+\r\n\t\t\t\t\t`0 & 1 \\\\\\\\`+\r\n\t\t\t\t\t`c & d`+\r\n\t\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linearHomogeneousConstant:   new LhcContent.Linear(new LhcParam.Linear('a_2','a_1','a_0')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tresolved_o2_linearHomogeneousConstant: new LhcContent.Resolved(new LhcParam.Resolved('b_1','b_0')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tsystem_o2_linearHomogeneousConstant:   new LhcContent.ReducedSystem(new LhcParam.ReducedSystem('c','d')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tvector_o2_linearHomogeneousConstant:   new LhcContent.ReducedVector(new LhcParam.ReducedSystem('c','d')).getContentFor_characteristicEquation(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linearHomogeneousConstant:   new LhcContent.Linear(new LhcParam.Linear('a_2','a_1','a_0')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tresolved_o2_linearHomogeneousConstant: new LhcContent.Resolved(new LhcParam.Resolved('b_1','b_0')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tsystem_o2_linearHomogeneousConstant:   new LhcContent.ReducedSystem(new LhcParam.ReducedSystem('c','d')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tvector_o2_linearHomogeneousConstant:   new LhcContent.ReducedVector(new LhcParam.ReducedSystem('c','d')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linearHomogeneousConstant:   new LhcContent.Linear(new LhcParam.Linear('a_2','a_1','a_0')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tresolved_o2_linearHomogeneousConstant: new LhcContent.Resolved(new LhcParam.Resolved('b_1','b_0')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tsystem_o2_linearHomogeneousConstant:   new LhcContent.ReducedSystem(new LhcParam.ReducedSystem('c','d')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tvector_o2_linearHomogeneousConstant:   new LhcContent.ReducedVector(new LhcParam.ReducedSystem('c','d')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_harmonicOscillator: {\r\n\t\tparents: {\r\n\t\t\to2_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"harmonic oscillator\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator'>harmonic oscillator</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,scalar_o2_harmonicOscillator,linear_o2_harmonicOscillator',\r\n\t\t\t\tequation: nt=>`m \\\\cdot ${nt.dd(nt.x,'t',2)} + b \\\\cdot ${nt.dxdt} + k \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[ // TODO all-forms notes\r\n\t\t\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t\t\t`\\\\( b \\\\ge 0 \\\\) is the viscous damping coefficient`,\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,scalar_o2_harmonicOscillator,resolved_o2_harmonicOscillator',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = - \\\\frac bm \\\\cdot ${nt.dxdt} - \\\\frac km \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_simpleHarmonicOscillator,system_o2_harmonicOscillator',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= - \\\\frac km \\\\cdot ${nt.x} - \\\\frac bm \\\\cdot ${nt.y} `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_o2_simpleHarmonicOscillator,vector_o2_harmonicOscillator',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\begin{bmatrix}`+\r\n\t\t\t\t\t`0 & 1 \\\\\\\\`+\r\n\t\t\t\t\t`- \\\\frac km & - \\\\frac bm`+\r\n\t\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_harmonicOscillator:   new LhcContent.Linear(new LhcParam.Linear('m','b','k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tresolved_o2_harmonicOscillator: new LhcContent.Resolved(new LhcParam.Linear('m','b','k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tsystem_o2_harmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m','b','k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tvector_o2_harmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m','b','k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_harmonicOscillator:   new LhcContent.Linear(new LhcParam.Linear('m','b','k')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tresolved_o2_harmonicOscillator: new LhcContent.Resolved(new LhcParam.Linear('m','b','k')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tsystem_o2_harmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m','b','k')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tvector_o2_harmonicOscillator:   new LhcContent.ReducedVector(new LhcParam.Linear('m','b','k')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tformType: 'scalar_o2_simpleHarmonicOscillator',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tscalar_o2_simpleHarmonicOscillator: new LhcContent.Linear(new LhcParam.Linear('m','b','k')).getContentFor_equilibriumSolutionMethod0(),\r\n\t\t\t\t\tsystem_o2_simpleHarmonicOscillator: new LhcContent.ReducedSystem(new LhcParam.Linear('m','b','k')).getContentFor_equilibriumSolutionMethod0(),\r\n\t\t\t\t\tvector_o2_simpleHarmonicOscillator: new LhcContent.ReducedVector(new LhcParam.Linear('m','b','k')).getContentFor_equilibriumSolutionMethod0(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_underdampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\"underdamped\",\r\n\t\t\"&lt;\",\r\n\t\t'getContentFor_generalSolutionMethod_Complex'\r\n\t),\r\n\to2_criticallyDampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\"critically damped\",\r\n\t\t\"=\",\r\n\t\t'getContentFor_generalSolutionMethod_Repeated'\r\n\t),\r\n\to2_overdampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\"overdamped\",\r\n\t\t\">\",\r\n\t\t'getContentFor_generalSolutionMethod_Real'\r\n\t),\r\n\to2_simpleHarmonicOscillator: {\r\n\t\tparents: {\r\n\t\t\to2_underdampedHarmonicOscillator: true,\r\n\t\t},\r\n\t\tname: \"simple (undamped) harmonic oscillator\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Simple_harmonic_oscillator'>simple (undamped) harmonic oscillator</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,linear_o2_simpleHarmonicOscillator',\r\n\t\t\t\tequation: nt=>`m \\\\cdot ${nt.dd(nt.x,'t',2)} + k \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,resolved_o2_simpleHarmonicOscillator',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = - \\\\frac km \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_simpleHarmonicOscillator',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= - \\\\frac km \\\\cdot ${nt.x} `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_o2_simpleHarmonicOscillator',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\begin{bmatrix}`+\r\n\t\t\t\t\t`0 & 1 \\\\\\\\`+\r\n\t\t\t\t\t`- \\\\frac km & 0`+\r\n\t\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_simpleHarmonicOscillator:   new LhcContent.Linear(new LhcParam.Linear('m',0,'k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tresolved_o2_simpleHarmonicOscillator: new LhcContent.Resolved(new LhcParam.Linear('m',0,'k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tsystem_o2_simpleHarmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m',0,'k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tvector_o2_simpleHarmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m',0,'k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_simpleHarmonicOscillator:   new LhcContent.Linear(new LhcParam.Linear('m',0,'k')).getContentFor_generalSolutionMethod_Imaginary(),\r\n\t\t\t\t\tresolved_o2_simpleHarmonicOscillator: new LhcContent.Resolved(new LhcParam.Linear('m',0,'k')).getContentFor_generalSolutionMethod_Imaginary(),\r\n\t\t\t\t\tsystem_o2_simpleHarmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m',0,'k')).getContentFor_generalSolutionMethod_Imaginary(),\r\n\t\t\t\t\tvector_o2_simpleHarmonicOscillator:   new LhcContent.ReducedVector(new LhcParam.Linear('m',0,'k')).getContentFor_generalSolutionMethod_Imaginary(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_vanDerPol: {\r\n\t\tparents: {\r\n\t\t\to2_autonomous: true,\r\n\t\t},\r\n\t\tname: \"Van der Pol\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Van_der_Pol_oscillator'>Van der Pol</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: o2OrderReductionForms('o2_vanDerPol',(x,y)=>`\\\\mu(1-${x}^2)${y} - ${x}`),\r\n\t},\r\n\to2_unforcedDuffing: {\r\n\t\tparents: {\r\n\t\t\to2_autonomous: true,\r\n\t\t},\r\n\t\tname: \"unforced Duffing\",\r\n\t\thtmlName: \"unforced <a href='https://en.wikipedia.org/wiki/Duffing_equation'>Duffing</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: o2OrderReductionForms('o2_unforcedDuffing',(x,y)=>`- \\\\delta ${y} - \\\\alpha ${x} - \\\\beta ${x}^3`),\r\n\t},\r\n}\r\n","'use strict'\r\n\r\nconst characteristicEquationContent=require('../characteristic-equation-content')\r\n\r\nconst on_linearHomogeneousConstant_generalSolutionMethod_content=(charEqn,isSystem,isVector)=>nt=>[\r\n\t`solve the characteristic equation for \\\\(  \\\\):`,\r\n\t`\\\\[ ${charEqn} \\\\]`,\r\n\t`\\\\(  \\\\) are:`,\r\n\t`\\\\( r \\\\) distinct real roots \\\\( _1, ..., _r \\\\) with multiplicities \\\\( p_1, ..., p_r \\\\)`,\r\n\t`\\\\( s \\\\) distinct complex conjugate root pairs \\\\( _1 \\\\pm i _1, ..., _s \\\\pm i _s \\\\) with multiplicities \\\\( q_1, ..., q_s \\\\)`,\r\n\t{type:'note',content:[\r\n\t\t`sum of multiplicities is equal to order of the equation:`,\r\n\t\t`\\\\[ \\\\sum_{i=1}^r p_i + 2 \\\\cdot \\\\sum_{i=1}^s q_i = n \\\\]`,\r\n\t]},\r\n\t((isSystem||isVector)?`first component of `:``)+`general solution (with arbitrary constants \\\\( K_{ij} \\\\), \\\\( A_{ij} \\\\), \\\\( B_{ij} \\\\)):`,\r\n\t`\\\\[ \\\\begin{aligned}`+\r\n\t\t`${nt.x}`+(isSystem?`_1`:``)+\r\n\t\t` = \\\\: & \\\\sum_{i=1}^r \\\\sum_{j=1}^{p_i} K_{ij} \\\\, t^{j-1} \\\\, e^{_i t} + \\\\\\\\`+\r\n\t\t` + \\\\: & \\\\sum_{i=1}^s \\\\sum_{j=1}^{q_i} A_{ij} \\\\, t^{j-1} \\\\, e^{_i t} \\\\, \\\\cos _i t \\\\\\\\`+\r\n\t\t` + \\\\: & \\\\sum_{i=1}^s \\\\sum_{j=1}^{q_i} B_{ij} \\\\, t^{j-1} \\\\, e^{_i t} \\\\, \\\\sin _i t`+\r\n\t`\\\\end{aligned} \\\\]`,\r\n\t...(isSystem?[\r\n\t\t`find other components by differentiating \\\\( ${nt.x}_1 \\\\):`,\r\n\t\t`\\\\[ \\\\begin{array}{rcl}`+\r\n\t\t\t`${nt.x}_2 &=& ${nt.dd(nt.x,'t',1)} \\\\\\\\`+\r\n\t\t\t`${nt.x}_3 &=& ${nt.dd(nt.x,'t',2)} \\\\\\\\`+\r\n\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t`${nt.x}_n &=& ${nt.dd(nt.x,'t','n-1')}`+\r\n\t\t`\\\\end{array} \\\\]`,\r\n\t]:[]),\r\n\t...(isVector?[\r\n\t\t`find other components by differentiating \\\\( ${nt.x} \\\\):`,\r\n\t\t`\\\\[ ${nt.X} = \\\\begin{bmatrix}`+\r\n\t\t\t`${nt.x} \\\\\\\\`+\r\n\t\t\t`${nt.dd(nt.x,'t',1)} \\\\\\\\`+\r\n\t\t\t`${nt.dd(nt.x,'t',2)} \\\\\\\\`+\r\n\t\t\t`\\\\vdots \\\\\\\\`+\r\n\t\t\t`${nt.dd(nt.x,'t','n-1')}`+\r\n\t\t`\\\\end{bmatrix} \\\\]`,\r\n\t]:[]),\r\n]\r\n\r\nmodule.exports={\r\n\ton: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"nth-order\",\r\n\t\thtmlName: \"<em>n</em>th-order\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_on',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t','n')} = f(t,${nt.x},${nt.dxdt},\\\\dotsc,${nt.dd(nt.x,'t','n-1')})`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xi,system_on',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_1`)} &=& ${nt.x}_2 \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_2`)} &=& ${nt.x}_3 \\\\\\\\`+\r\n\t\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_{n-1}`)} &=& ${nt.x}_n \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_n`)} &=& f_n(t,${nt.x}_1,\\\\dotsc,${nt.x}_n)`+\r\n\t\t\t\t`\\\\end{array} \\\\right.`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`Can test if \\\\( ${nt.x}_p \\\\) is a solution by substituting \\\\( ${nt.x} = ${nt.x}_p \\\\) into the equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\ton_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_on_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`\\\\sum_{i=0}^n a_i ${nt.dd(nt.x,'t','i')} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( a_n \\\\ne 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_on_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t','n')} = \\\\sum_{i=0}^{n-1} b_i ${nt.dd(nt.x,'t','i')}`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xi,system_on_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_1`)} &=& ${nt.x}_2 \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_2`)} &=& ${nt.x}_3 \\\\\\\\`+\r\n\t\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_{n-1}`)} &=& ${nt.x}_n \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_n`)} &=& \\\\sum_{i=1}^{n} c_i ${nt.x}_i`+\r\n\t\t\t\t`\\\\end{array} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_on_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} {=} \\\\begin{bmatrix}`+\r\n\t\t\t\t\t`0 & 1 & 0 & \\\\cdots & 0 \\\\\\\\`+\r\n\t\t\t\t\t`0 & 0 & 1 & \\\\cdots & 0 \\\\\\\\`+\r\n\t\t\t\t\t`\\\\vdots & \\\\vdots & \\\\vdots & \\\\ddots & \\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t`0 & 0 & 0 & \\\\cdots & 1 \\\\\\\\`+\r\n\t\t\t\t\t`c_1 & c_2 & c_3 & \\\\cdots & c_n`+\r\n\t\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linearHomogeneousConstant:   characteristicEquationContent(['i','\\\\sum_{i=0}^n a_i'],'=','0'),\r\n\t\t\t\t\tresolved_on_linearHomogeneousConstant: characteristicEquationContent(['n',1],'=',['i','\\\\sum_{i=0}^{n-1} b_i']),\r\n\t\t\t\t\tsystem_on_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ^n - \\\\sum_{i=0}^{n-1} c_{i+1} ^i = 0 \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tvector_on_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ^n - \\\\sum_{i=0}^{n-1} c_{i+1} ^i = 0 \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linearHomogeneousConstant:   on_linearHomogeneousConstant_generalSolutionMethod_content(`\\\\sum_{i=0}^n a_i ^i = 0`),\r\n\t\t\t\t\tresolved_on_linearHomogeneousConstant: on_linearHomogeneousConstant_generalSolutionMethod_content(`^n - \\\\sum_{i=0}^{n-1} b_i ^i = 0`),\r\n\t\t\t\t\tsystem_on_linearHomogeneousConstant:   on_linearHomogeneousConstant_generalSolutionMethod_content(`^n - \\\\sum_{i=0}^{n-1} c_{i+1} ^i = 0`,true),\r\n\t\t\t\t\tvector_on_linearHomogeneousConstant:   on_linearHomogeneousConstant_generalSolutionMethod_content(`^n - \\\\sum_{i=0}^{n-1} c_{i+1} ^i = 0`,false,true),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t{type:'switch',title:`\\\\( a_0 \\\\) is`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( a_0 = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( a_0 \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tresolved_on_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t{type:'switch',title:`\\\\( b_0 \\\\) is`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( b_0 = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( b_0 \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tsystem_on_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t{type:'switch',title:`\\\\( c_1 \\\\) is`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( c_1 = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x}_1 &=& K \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x}_2 &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x}_n &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`\\\\end{array} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( c_1 \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x}_1 &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x}_n &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`\\\\end{array} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tvector_on_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t{type:'switch',title:`\\\\( c_1 \\\\) is`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( c_1 = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\begin{bmatrix} K \\\\\\\\ 0 \\\\\\\\ \\\\vdots \\\\\\\\ 0 \\\\end{bmatrix} \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( c_1 \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\begin{bmatrix} 0 \\\\\\\\ \\\\vdots \\\\\\\\ 0 \\\\end{bmatrix} \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n}\r\n","'use strict'\r\n\r\nconst LhcPlot=require('../lhc-plot')\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nconst s2_partlyDecoupled=(i)=>{\r\n\tconst ith=[,\"1st\",\"2nd\"][i]\r\n\tconst choose=[,(x,y)=>[x,y],(x,y)=>[y,x]][i]\r\n\tconst f=(x,y)=>\"f(t,\"+[,x,x+','+y][i]+\")\"\r\n\tconst g=(x,y)=>\"g(t,\"+[,x+','+y,y][i]+\")\"\r\n\tconst generalSolutionMethodContents=(nt,x,y)=>{\r\n\t\tconst [dv,cv]=choose(x,y) // decoupled/coupled variable/function\r\n\t\tconst [df,cf]=choose('f','g')\r\n\t\tconst [ex1,ex2]=choose(dv,`2 ${dv} - ${cv}`)\r\n\t\tconst [dth,cth]=choose(\"first\",\"second\")\r\n\t\treturn [\r\n\t\t\t`Solve \\\\(${nt.dd(dv)} = ${df}(t,${dv}) \\\\).`,\r\n\t\t\t`Substitute \\\\( ${dv} \\\\) into \\\\( ${nt.dd(cv)} = ${cf}(t,${x},${y}) \\\\).`,\r\n\t\t\t{type:'example',content:[\r\n\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(x)} &= ${ex1} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(y)} &= ${ex2}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t`solve the ${dth} equation`,\r\n\t\t\t\t`\\\\[ ${dv} = ${nt.sub(dv,'0')} e^t \\\\]`,\r\n\t\t\t\t`substitute \\\\( ${dv} \\\\) into the ${cth} equation`,\r\n\t\t\t\t`\\\\[ ${nt.dd(cv)} = 2 ${nt.sub(dv,'0')} e^t - ${cv} \\\\]`,\r\n\t\t\t\t{type:'derivation',title:`solve the ${cth} equation`,content:[\r\n\t\t\t\t\t`solve the associated homogeneous equation \\\\( ${nt.dd(cv)} = - ${cv} \\\\)`,\r\n\t\t\t\t\t`\\\\[ ${nt.sub(cv,'h')} = K e^{-t} \\\\]`,\r\n\t\t\t\t\t{type:'derivation',title:`find a particular solution of \\\\( ${nt.dd(nt.sub(cv,'p'))} + ${nt.sub(cv,'p')} = 2 ${nt.sub(dv,'0')} e^t \\\\)`,content:[\r\n\t\t\t\t\t\t`guess a solution`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.sub(cv,'p')} = \\\\alpha e^t \\\\]`,\r\n\t\t\t\t\t\t`substitute the guess into the equation`,\r\n\t\t\t\t\t\t`\\\\[ \\\\alpha e^t + \\\\alpha e^t = 2 ${nt.sub(dv,'0')} e^t \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\alpha = ${nt.sub(dv,'0')} \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.sub(cv,'p')} = ${nt.sub(dv,'0')} e^t \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${cv} = ${nt.sub(cv,'p')} + ${nt.sub(cv,'h')} \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${cv} = ${nt.sub(dv,'0')} e^t + K e^{-t} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t`\\\\[ ${cv} = ${nt.sub(dv,'0')} e^t + (${nt.sub(cv,'0')} - ${nt.sub(dv,'0')}) e^{-t} \\\\]`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\treturn {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: `system of 2 first-order with ${ith} variable decoupled`, // partially decoupled\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: `t,xy,system_s2_partlyDecoupled${i}`,\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${f(nt.x,nt.y)} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= ${g(nt.x,nt.y)}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,X,vector_s2_partlyDecoupled${i}`,\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = ${nt.ddt}`+nt.vec2(`${nt.x}_1`,`${nt.x}_2`)+` = `+nt.vec2(f(`${nt.x}_1`,`${nt.x}_2`),g(`${nt.x}_1`,`${nt.x}_2`)),\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\t[`system_s2_partlyDecoupled${i}`]: nt=>generalSolutionMethodContents(nt,nt.x,nt.y),\r\n\t\t\t\t\t[`vector_s2_partlyDecoupled${i}`]: nt=>generalSolutionMethodContents(nt,`${nt.x}_1`,`${nt.x}_2`),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n}\r\n\r\nconst s2_linearHomogeneousConstant_characteristicEquation=scalar=>(scalar\r\n\t? `\\\\[ \\\\lambda^2 - (a+d)\\\\lambda + ad - bc = 0 \\\\]`\r\n\t: `\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]`\r\n)\r\nconst s2_linearHomogeneousConstant_generalSolutionMethod_content=scalar=>nt=>{\r\n\tconst none=s=>(s==1 ? '' : s)\r\n\tconst generalSolutionLeadX0=`general solution (with arbitrary `+(scalar?`constants \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.y}_0 \\\\)`:`constant \\\\( ${nt.X}_0 \\\\)`)+`):`\r\n\tconst specificSolutionLeadX0=(scalar?`constants`:`constant`)+` value for ${ivp} solution: `+(scalar?`\\\\( ${nt.x}_0 = ${nt.x}(0) \\\\), \\\\( ${nt.y}_0 = ${nt.y}(0) \\\\)`:`\\\\( ${nt.X}_0 = ${nt.X}(0) \\\\)`)\r\n\tconst generalAndSpecificSolutionLeadX0=`general and ${ivp} solution (with arbitrary `+(scalar?`constants \\\\( ${nt.x}(0) \\\\), \\\\( ${nt.y}(0) \\\\)`:`constant \\\\( ${nt.X}(0) \\\\)`)+`):`\r\n\tconst findRealEigenvector=i=>[\r\n\t\t`find eigenvector \\\\( ${nt.svec2(`${nt.x}_${i}`,`${nt.y}_${i}`)} \\\\) by solving:`,\r\n\t\t(scalar\r\n\t\t\t? `\\\\[ ${nt.mat2(`a-\\\\lambda_${i}`,`b`,`c`,`d-\\\\lambda_${i}`)} ${nt.vec2(`${nt.x}_${i}`,`${nt.y}_${i}`)} = \\\\mathbf{0} \\\\]`\r\n\t\t\t: `\\\\[ (\\\\mathbf{A} - \\\\lambda_${i} \\\\mathbf{I}) ${nt.vec2(`${nt.x}_${i}`,`${nt.y}_${i}`)} = \\\\mathbf{0} \\\\]`\r\n\t\t),\r\n\t]\r\n\tconst findComplexEigenvector=()=>[\r\n\t\t`find complex-valued eigenvector \\\\( ${nt.svec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} \\\\) by solving:`,\r\n\t\t(scalar\r\n\t\t\t? `\\\\[ ${nt.mat2(`a-\\\\lambda_1`,`b`,`c`,`d-\\\\lambda_1`)} ${nt.vec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} = 0 \\\\]`\r\n\t\t\t: `\\\\[ (\\\\mathbf{A} - \\\\lambda_1 \\\\mathbf{I}) ${nt.vec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} = 0 \\\\]`\r\n\t\t),\r\n\t]\r\n\tconst generalRealSolution=(eigx1,eigx2,eigy1,eigy2)=>[\r\n\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t(scalar\r\n\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.x} &= k_1 ${none(eigx1)} e^{\\\\lambda_1 t} + k_2 ${none(eigx2)} e^{\\\\lambda_2 t} \\\\\\\\`+\r\n\t\t\t\t`${nt.y} &= k_1 ${none(eigy1)} e^{\\\\lambda_1 t} + k_2 ${none(eigy2)} e^{\\\\lambda_2 t}`+\r\n\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t: `\\\\[ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.X} &= k_1 e^{\\\\lambda_1 t} ${nt.vec2(eigx1,eigy1)} + k_2 e^{\\\\lambda_2 t} ${nt.vec2(eigx2,eigy2)} \\\\\\\\`+\r\n\t\t\t\t       ` &= ${nt.mat2(eigx1,eigx2,eigy1,eigy2)} ${nt.vec2(`k_1 e^{\\\\lambda_1 t}`,`k_2 e^{\\\\lambda_2 t}`)}`+\r\n\t\t\t`\\\\end{aligned} \\\\]`\r\n\t\t),\r\n\t]\r\n\tconst specificSolution=(eigx1,eigx2,eigy1,eigy2)=>[\r\n\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t`\\\\[ ${nt.mat2(eigx1,eigx2,eigy1,eigy2)} ${nt.vec2('k_1','k_2')} = `+(scalar?`${nt.vec2(`${nt.x}(0)`,`${nt.y}(0)`)}`:`${nt.X}(0)`)+` \\\\]`,\r\n\t]\r\n\treturn [\r\n\t\t{type:'switch',title:(scalar?`coefficients satisfy conditions`:`matrix \\\\( \\\\mathbf{A} \\\\) has a form`),content:[\r\n\t\t\t{type:'case',title:(scalar?`\\\\( b = c = 0 \\\\)`:`\\\\( \\\\mathbf{A} = ${nt.mat2('*',0,0,'*')} \\\\)`),content:[\r\n\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t`this is a completely decoupled system`,\r\n\t\t\t\t]},\r\n\t\t\t\t`the `+(scalar?`equations have`:`equation has`)+` the form:`,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t`${nt.dd(nt.x)} &= \\\\lambda_1 ${nt.x} \\\\\\\\`+\r\n\t\t\t\t\t\t`${nt.dd(nt.y)} &= \\\\lambda_2 ${nt.y}`+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t: `\\\\[ ${nt.dd(nt.X)} = ${nt.mat2('\\\\lambda_1',0,0,'\\\\lambda_2')} ${nt.X} \\\\]`\r\n\t\t\t\t),\r\n\t\t\t\tgeneralAndSpecificSolutionLeadX0,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t`${nt.x} &= ${nt.x}(0) e^{\\\\lambda_1 t} \\\\\\\\`+\r\n\t\t\t\t\t\t`${nt.y} &= ${nt.y}(0) e^{\\\\lambda_2 t}`+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t: `\\\\[ ${nt.X} = ${nt.mat2('e^{\\\\lambda_1 t}',0,0,'e^{\\\\lambda_2 t}')} ${nt.X}(0) \\\\]`\r\n\t\t\t\t),\r\n\t\t\t]},\r\n\t\t\t{type:'case',title:(scalar?`\\\\( a = 0 \\\\) and \\\\( b = 1 \\\\)`:`\\\\( \\\\mathbf{A} = ${nt.mat2(0,1,'*','*')} \\\\)`)+` (optional)`,content:[\r\n\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t`this is an optional case, you can ignore it and use <em>`+(scalar?`\\\\( b \\\\ne 0 \\\\) or \\\\( c \\\\ne 0 \\\\)`:`\\\\( \\\\mathbf{A} \\\\ne ${nt.smat2('*',0,0,'*')} \\\\)`)+`</em> case below`,\r\n\t\t\t\t\t`this is a case of second-order linear homogeneous equation with constant coefficients`,\r\n\t\t\t\t]},\r\n\t\t\t\t`the `+(scalar?`equations have`:`equation has`)+` the form:`,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\`+\r\n\t\t\t\t\t\t`${nt.dd(nt.y)} &= c ${nt.x} + d ${nt.y}`+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t: `\\\\[ ${nt.dd(nt.X)} = ${nt.mat2(0,1,'c','d')} ${nt.X} \\\\]`\r\n\t\t\t\t),\r\n\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t`eigenvector for \\\\( \\\\lambda_1 \\\\) is:`,\r\n\t\t\t\t\t`\\\\[ ${nt.vec2(`${nt.x}_1`,`${nt.y}_1`)} = ${nt.vec2(1,'\\\\lambda_1')} \\\\]`,\r\n\t\t\t\t\t`eigenvector for \\\\( \\\\lambda_2 \\\\) is:`,\r\n\t\t\t\t\t`\\\\[ ${nt.vec2(`${nt.x}_2`,`${nt.y}_2`)} = ${nt.vec2(1,'\\\\lambda_2')} \\\\]`,\r\n\t\t\t\t\t`use these eigenvectors in <em>`+(scalar?`\\\\( b \\\\ne 0 \\\\) or \\\\( c \\\\ne 0 \\\\)`:`\\\\( \\\\mathbf{A} \\\\ne ${nt.smat2('*',0,0,'*')} \\\\)`)+`</em> case below`,\r\n\t\t\t\t]},\r\n\t\t\t\t`get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\lambda^2 - d \\\\lambda - c = 0 \\\\]`\r\n\t\t\t\t\t: s2_linearHomogeneousConstant_characteristicEquation(scalar)\r\n\t\t\t\t),\r\n\t\t\t\t{type:'switch',title:`eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are`,content:[\r\n\t\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t\tgeneralSolutionLeadX0,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= ${nt.x}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.y}_0 \\\\,{-}\\\\, ${nt.x}_0 \\\\lambda) t e^{\\\\lambda t} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= ${nt.y}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.y}_0 \\\\,{-}\\\\, ${nt.x}_0 \\\\lambda) \\\\lambda t e^{\\\\lambda t}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ ${nt.X} = e^{\\\\lambda t} ${nt.X}_0 + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ${nt.X}_0 \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tspecificSolutionLeadX0,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t\t...generalRealSolution(1,1,`\\\\lambda_1`,`\\\\lambda_2`),\r\n\t\t\t\t\t\t...specificSolution(1,1,`\\\\lambda_1`,`\\\\lambda_2`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} = \\\\: & k_1 e^{\\\\alpha t} \\\\cos \\\\beta t \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} \\\\sin \\\\beta t \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} = \\\\: & k_1 e^{\\\\alpha t} (\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} (\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t)`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2('\\\\cos \\\\beta t','\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t')} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2('\\\\sin \\\\beta t','\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t')} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`= \\\\: & e^{\\\\alpha t} ${nt.smat2(1,0,'\\\\alpha','\\\\beta')} ${nt.smat2('\\\\cos \\\\beta t','\\\\sin \\\\beta t','- \\\\sin \\\\beta t','\\\\cos \\\\beta t')} ${nt.svec2('k_1','k_2')}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t...specificSolution(1,0,`\\\\alpha`,`\\\\beta`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t\t{type:'case',title:(scalar?`\\\\( b \\\\ne 0 \\\\) or \\\\( c \\\\ne 0 \\\\)`:`\\\\( \\\\mathbf{A} \\\\ne ${nt.mat2('*',0,0,'*')} \\\\)`),content:[\r\n\t\t\t\t`get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\ts2_linearHomogeneousConstant_characteristicEquation(scalar),\r\n\t\t\t\t{type:'switch',title:`eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are`,content:[\r\n\t\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t\tgeneralSolutionLeadX0,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= ${nt.x}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.x}_0 (a \\\\,{-}\\\\, \\\\lambda) \\\\,{+}\\\\, ${nt.y}_0 b) t e^{\\\\lambda t} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= ${nt.y}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.x}_0 c \\\\,{+}\\\\, ${nt.y}_0 (d \\\\,{-}\\\\, \\\\lambda)) t e^{\\\\lambda t}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ ${nt.X} = e^{\\\\lambda t} ${nt.X}_0 + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ${nt.X}_0 \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tspecificSolutionLeadX0,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t\t...findRealEigenvector(1),\r\n\t\t\t\t\t\t...findRealEigenvector(2),\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`both of those systems are linearly dependent, it's enough to find each eigenvector up to a constant factor`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t...generalRealSolution(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`),\r\n\t\t\t\t\t\t...specificSolution(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t\t`select one of eigenvalues \\\\( \\\\lambda_1 = \\\\alpha + i \\\\beta \\\\)`,\r\n\t\t\t\t\t\t...findComplexEigenvector(),\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`this system is linearly dependent, it's enough to find the eigenvector up to a constant factor`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t\t`one of complex-valued solutions:`,\r\n\t\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x}_c &{=} e^{\\\\alpha t} (\\\\cos \\\\beta t {+} i \\\\sin \\\\beta t) (${nt.x}_1 {+} i ${nt.x}_2) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`${nt.y}_c &{=} e^{\\\\alpha t} (\\\\cos \\\\beta t {+} i \\\\sin \\\\beta t) (${nt.y}_1 {+} i ${nt.y}_2)`+\r\n\t\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t\t: `\\\\[ ${nt.X}_c = e^{\\\\alpha t} (\\\\cos \\\\beta t + i \\\\sin \\\\beta t) ${nt.svec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} \\\\]`\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t`find general solution by taking real and imaginary parts of a complex-valued solution:`,\r\n\t\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x} = k_1 \\\\operatorname{Re}(${nt.x}_c) + k_2 \\\\operatorname{Im}(${nt.x}_c) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`${nt.y} = k_1 \\\\operatorname{Re}(${nt.y}_c) + k_2 \\\\operatorname{Im}(${nt.y}_c)`+\r\n\t\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t\t: `\\\\[ ${nt.X} = k_1 \\\\operatorname{Re}(${nt.X}_c) + k_2 \\\\operatorname{Im}(${nt.X}_c) \\\\]`\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} = \\\\: & k_1 e^{\\\\alpha t} (${nt.x}_1 \\\\cos \\\\beta t - ${nt.x}_2 \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} (${nt.x}_1 \\\\sin \\\\beta t + ${nt.x}_2 \\\\cos \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} = \\\\: & k_1 e^{\\\\alpha t} (${nt.y}_1 \\\\cos \\\\beta t - ${nt.y}_2 \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} (${nt.y}_1 \\\\sin \\\\beta t + ${nt.y}_2 \\\\cos \\\\beta t)`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2(`${nt.x}_1 \\\\cos \\\\beta t - ${nt.x}_2 \\\\sin \\\\beta t`,`${nt.y}_1 \\\\cos \\\\beta t - ${nt.y}_2 \\\\sin \\\\beta t`)} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2(`${nt.x}_1 \\\\sin \\\\beta t + ${nt.x}_2 \\\\cos \\\\beta t`,`${nt.y}_1 \\\\sin \\\\beta t + ${nt.y}_2 \\\\cos \\\\beta t`)} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`= \\\\: & e^{\\\\alpha t} ${nt.smat2(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`)} ${nt.smat2(`\\\\cos \\\\beta t`,`\\\\sin \\\\beta t`,`- \\\\sin \\\\beta t`,`\\\\cos \\\\beta t`)} ${nt.svec2(`k_1`,`k_2`)}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t...specificSolution(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]},\r\n\t]\r\n}\r\n\r\nmodule.exports={\r\n\tsn: {\r\n\t\tparents: {},\r\n\t\tname: \"system of n first-order\",\r\n\t\thtmlName: \"system of <em>n</em> first-order\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xi,system_sn',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{array}{c}`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_1`)} = f_1(t,${nt.x}_1,\\\\dotsc,${nt.x}_n) \\\\\\\\`+\r\n\t\t\t\t\t`\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_n`)} = f_n(t,${nt.x}_1,\\\\dotsc,${nt.x}_n)`+\r\n\t\t\t\t`\\\\end{array} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_sn',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{F}(t,${nt.X})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tformType: 'xi',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\txi: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.x}_{1,p}, ..., ${nt.x}_{n,p} \\\\) is a solution by substituting \\\\( ${nt.x}_1 = ${nt.x}_{1,p}, ..., ${nt.x}_n = ${nt.x}_{n,p} \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tX: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.X}_p \\\\) is a solution by substituting \\\\( ${nt.X} = ${nt.X}_p \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= f(t,${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= g(t,${nt.x},${nt.y})`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{F}(t,${nt.X})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tformType: 'xy',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\txy: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.x}_p, ${nt.y}_p \\\\) is a solution by substituting \\\\( ${nt.x} = ${nt.x}_p, ${nt.y} = ${nt.y}_p \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tX: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.X}_p \\\\) is a solution by substituting \\\\( ${nt.X} = ${nt.X}_p \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_partlyDecoupled1: s2_partlyDecoupled(1),\r\n\ts2_partlyDecoupled2: s2_partlyDecoupled(2),\r\n\ts2_completelyDecoupled: {\r\n\t\tparents: {\r\n\t\t\ts2_partlyDecoupled1: true,\r\n\t\t\ts2_partlyDecoupled2: true,\r\n\t\t},\r\n\t\tname: \"completely decoupled system of 2 first-order\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2_completelyDecoupled',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= f(t,${nt.x}) \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= g(t,${nt.y})`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2_completelyDecoupled',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = ${nt.ddt}`+nt.vec2(`${nt.x}_1`,`${nt.x}_2`)+` = `+nt.vec2(`f(t,${nt.x}_1)`,`g(t,${nt.x}_2)`),\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tformType: 'xy',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`Solve each equation separately.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_autonomous: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order autonomous\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: `t,xy,system_s2_autonomous`,\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= f(${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= g(${nt.x},${nt.y})`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,X,vector_s2_autonomous`,\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{F}(${nt.X})`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\ts2_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order linear homogeneous\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.y} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= c(t) \\\\cdot ${nt.x} + d(t) \\\\cdot ${nt.y}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{A}(t) \\\\, ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tformType: 'xy',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\txy: nt=>[\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t`${nt.x} &= 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${nt.y} &= 0`+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`other equilibrium solutions may be possible, depending on the functions \\\\( a(t) \\\\), \\\\( b(t) \\\\), \\\\( c(t) \\\\) and \\\\( d(t) \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tX: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.vec2(0,0)} \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`other equilibrium solutions may be possible, depending on the function \\\\( \\\\mathbf{A}(t) \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ts2_autonomous: true,\r\n\t\t\ts2_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order linear homogeneous with constant coefficients\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= a \\\\cdot ${nt.x} + b \\\\cdot ${nt.y} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= c \\\\cdot ${nt.x} + d \\\\cdot ${nt.y}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{A} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tformType: 'vector_s2_linearHomogeneousConstant',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tsystem_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\ts2_linearHomogeneousConstant_characteristicEquation(true),\r\n\t\t\t\t\t],\r\n\t\t\t\t\tvector_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\ts2_linearHomogeneousConstant_characteristicEquation(false),\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`\\\\( \\\\lambda \\\\) is an eigenvalue of \\\\( \\\\mathbf{A} \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tsystem_s2_linearHomogeneousConstant: s2_linearHomogeneousConstant_generalSolutionMethod_content(true),\r\n\t\t\t\t\tvector_s2_linearHomogeneousConstant: s2_linearHomogeneousConstant_generalSolutionMethod_content(false),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tsystem_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t`${nt.x} &= 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${nt.y} &= 0`+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t{type:'case',title:`additional nonzero equilibrium solutions are possible when \\\\( ad-bc = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`any`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= k_${nt.x} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= k_${nt.y}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t\t`s.t.:`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`a \\\\cdot k_${nt.x} + b \\\\cdot k_${nt.y} &= 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`c \\\\cdot k_${nt.x} + d \\\\cdot k_${nt.y} &= 0`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t\t`is an equilibrium solution`,\r\n\t\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t\t`this is a linearly dependent system when \\\\( ad-bc = 0 \\\\)`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`any constant multiple of an equilibrium solution is also an equilibrium solution:`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= C \\\\cdot k_${nt.x} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= C \\\\cdot k_${nt.y}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tvector_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t\t\t\t{type:'case',title:`additional nonzero equilibrium solutions are possible when \\\\( \\\\det(\\\\mathbf{A}) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`any`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{K} \\\\]`,\r\n\t\t\t\t\t\t\t`s.t.:`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\mathbf{A} \\\\mathbf{K} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t\t\t\t\t`is an equilibrium solution`,\r\n\t\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t\t`this is a linearly dependent system when \\\\( \\\\det(\\\\mathbf{A}) = 0 \\\\)`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`any constant multiple of an equilibrium solution is also an equilibrium solution:`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = C \\\\cdot \\\\mathbf{K} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tplot: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t()=>{\r\n\t\t\t\t\t\tconst plot=new LhcPlot(nt.x,nt.y)\r\n\t\t\t\t\t\treturn plot.$output\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tsn_sir: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"SIR model\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/w/index.php?title=SIR_model'>SIR</a> model\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,system_sn_sir',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd('S')} &= -\\\\alpha S I \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd('I')} &= \\\\alpha S I - \\\\beta I \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd('R')} &= \\\\beta I`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( S = \\\\) number susceptible`,\r\n\t\t\t\t\t`\\\\( I = \\\\) number infectious`,\r\n\t\t\t\t\t`\\\\( R = \\\\) number recovered (immune)`,\r\n\t\t\t\t\t`\\\\( \\\\alpha = \\\\) contact rate`,\r\n\t\t\t\t\t`\\\\( \\\\beta = \\\\) recovery rate`,\r\n\t\t\t\t\t`all quantities are nonnegative`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tphaseSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`threshold value \\\\( \\\\rho = \\\\frac\\\\beta\\\\alpha \\\\):`,\r\n\t\t\t\t\t`\\\\( I \\\\) increases when \\\\( S &gt; \\\\rho \\\\)`,\r\n\t\t\t\t\t`\\\\( S \\\\) decreases`,\r\n\t\t\t\t\t`\\\\( I \\\\) attains its maximum when \\\\( S = \\\\rho \\\\)`,\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd('S')} + ${nt.dd('I')} + ${nt.dd('R')} = 0 \\\\]`,\r\n\t\t\t\t\t\t`total population \\\\( N \\\\) is constant`,\r\n\t\t\t\t\t\t`\\\\[ S + I + R = N \\\\]`,\r\n\t\t\t\t\t\t`eliminate \\\\( R \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`${nt.dd('S')} &= -\\\\alpha S I \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`${nt.dd('I')} &= \\\\alpha S I - \\\\beta I \\\\\\\\ `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd('I','S')} = \\\\frac{\\\\alpha S I - \\\\beta I}{-\\\\alpha S I} = -1 + \\\\frac{\\\\rho}{S} \\\\]`,\r\n\t\t\t\t\t\t`integrate by \\\\( S \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ I = -S + \\\\rho \\\\ln S + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`conserved quantities:`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`S(t) + I(t) + R(t) = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= S(0) + I(0) + R(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`I(t) + S(t) - \\\\rho \\\\ln S(t) = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= I(0) + S(0) - \\\\rho \\\\ln S(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t`maximum of \\\\( I \\\\):`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`I_{max} + \\\\rho - \\\\rho \\\\ln \\\\rho = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= I(0) + S(0) - \\\\rho \\\\ln S(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\[ I = 0 \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n}\r\n","'use strict'\r\n\r\n// produces array of <tr>'s in this.$trs\r\n// currently produces only one <tr> but this is going to change if alignment options are introduced\r\nclass FormRowsOutput {\r\n\tconstructor(i18n,orderedClassSubgraph,theadLayout,classData,notation,$classHighlightables,formSelectCallback) {\r\n\t\tconst writeEquations=(classId,iColumn)=>{\r\n\t\t\tconst $cell=$(\"<td>\")\r\n\t\t\tlet $classEquations=$()\r\n\t\t\tclassData[classId].forms.forEach((formData,i)=>{\r\n\t\t\t\tif (i>0) {\r\n\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\"<div class='alt-separator'>or</div>\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tconst $equation=$(\"<div class='equation'>\").append(\"\\\\[\"+formData.equation(notation)+\"\\\\]\")\r\n\t\t\t\t$classEquations=$classEquations.add($equation)\r\n\t\t\t\t$cell.append($equation)\r\n\t\t\t\tconst select=$e=>$e.addClass('selected').removeAttr('title')\r\n\t\t\t\tconst unselect=$e=>$e.removeClass('selected').attr('title','Rewrite equation properties in terms of this form')\r\n\t\t\t\tif (i==0) {\r\n\t\t\t\t\tselect($equation)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunselect($equation)\r\n\t\t\t\t}\r\n\t\t\t\t$equation.click(function(){\r\n\t\t\t\t\tif ($equation.hasClass('selected')) return\r\n\t\t\t\t\tunselect($classEquations)\r\n\t\t\t\t\tselect($equation)\r\n\t\t\t\t\tformSelectCallback(iColumn,formData.is)\r\n\t\t\t\t})\r\n\t\t\t\tif (formData.notes!==undefined) {\r\n\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t$(\"<ul>\").append(\r\n\t\t\t\t\t\t\tformData.notes(notation).map(\r\n\t\t\t\t\t\t\t\tnoteText=>`<li><div class='note'>${noteText}</div></li>`\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tconst columnParents=orderedClassSubgraph.visibleParents[classId] // TODO use thead-layout order\r\n\t\t\tif (columnParents.length>0) {\r\n\t\t\t\t$cell.append(\r\n\t\t\t\t\t$(\"<ul>\").append(\r\n\t\t\t\t\t\t$(\"<li>\").append(\r\n\t\t\t\t\t\t\t$(\"<div class='note'>\").append(\r\n\t\t\t\t\t\t\t\t\"can also be written as and has all properties of:\",\r\n\t\t\t\t\t\t\t\t$(\"<ul>\").append(columnParents.map(pid=>{\r\n\t\t\t\t\t\t\t\t\tconst $li=$(\"<li>\").append(\r\n\t\t\t\t\t\t\t\t\t\t$(\"<em>\"+classData[pid].htmlName+\"</em>\").hover(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$classHighlightables[pid].addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t$li.addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$li.removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t$classHighlightables[pid].removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn $li\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn $cell\r\n\t\t}\r\n\t\tthis.$trs=[\r\n\t\t\t$(\"<tr>\").append(\r\n\t\t\t\ttheadLayout.columns.map(writeEquations)\r\n\t\t\t),\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=FormRowsOutput\r\n","'use strict'\r\n\r\nconst tex=require('./tex')\r\nconst characteristicEquationContent=require('./characteristic-equation-content')\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nconst LhcContent={}\r\n\r\nLhcContent.Base = class {\r\n\tconstructor(param) {\r\n\t\tthis.param=param\r\n\t}\r\n\tgetGeneralSolutionConstantsEquation(nt,eigx1,eigx2,eigy1,eigy2) {\r\n\t\treturn `${nt.mat2(eigx1,eigx2,eigy1,eigy2)} ${nt.vec2('k_1','k_2')} = ${this.getX0(nt)}`\r\n\t}\r\n\tgetGeneralSolutionConstantsSolution(nt,kmatlead,kx1,ky1,kx2,ky2,eqn1,eqn2) {\r\n\t\tif (!(this instanceof LhcContent.ReducedVector)) {\r\n\t\t\treturn `\\\\begin{aligned} `+\r\n\t\t\t\t`k_1 &= ${eqn1} \\\\\\\\ `+\r\n\t\t\t\t`k_2 &= ${eqn2} `+\r\n\t\t\t`\\\\end{aligned}`\r\n\t\t} else {\r\n\t\t\treturn `${nt.vec2('k_1','k_2')} = ${kmatlead} ${nt.mat2(kx1,ky1,kx2,ky2)} ${this.getX0(nt)}`\r\n\t\t}\r\n\t}\r\n\tgetGeneralSolutionRepeatedCase(nt) {\r\n\t\tconst x0=this.getx0(nt)\r\n\t\tconst y0=this.gety0(nt)\r\n\t\treturn [\r\n\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t`\\\\[ ${this.getRepeatedGeneralSolution(nt)} \\\\]`,\r\n\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsEquation(nt,1,0,'\\\\lambda',1)} \\\\]`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsSolution(nt,'',1,0,'-\\\\lambda',1,x0,`${y0} - \\\\lambda \\\\cdot ${x0}`)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetGeneralSolutionRealCase(nt) {\r\n\t\tconst x0=this.getx0(nt)\r\n\t\tconst y0=this.gety0(nt)\r\n\t\treturn [\r\n\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t`\\\\[ ${this.getRealGeneralSolution(nt)} \\\\]`,\r\n\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsEquation(nt,1,1,'\\\\lambda_1','\\\\lambda_2')} \\\\]`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsSolution(nt,'\\\\frac1{_2{-}_1}','_2',-1,'-_1',1,`\\\\frac{_2 \\\\cdot ${x0} - ${y0}}{_2 - _1}`,`\\\\frac{_1 \\\\cdot ${x0} - ${y0}}{_1 - _2}`)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetGeneralSolutionComplexCase(nt) {\r\n\t\tconst x0=this.getx0(nt)\r\n\t\tconst y0=this.gety0(nt)\r\n\t\treturn [\r\n\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t`\\\\[ ${this.getComplexGeneralSolution(nt)} \\\\]`,\r\n\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsEquation(nt,1,0,'\\\\alpha','\\\\beta')} \\\\]`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsSolution(nt,'\\\\frac1{\\\\beta}','\\\\beta',0,'-\\\\alpha',1,x0,`\\\\frac{${y0} -  \\\\cdot ${x0}}{}`)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetGeneralSolutionImaginaryCase(nt) {\r\n\t\tconst x0=this.getx0(nt)\r\n\t\tconst y0=this.gety0(nt)\r\n\t\treturn [\r\n\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t`\\\\[ ${this.getImaginaryGeneralSolution(nt)} \\\\]`,\r\n\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsEquation(nt,1,0,0,'\\\\beta')} \\\\]`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsSolution(nt,'',1,0,0,'^{-1}',x0,`\\\\frac{${y0}}{}`)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetContentFor_generalSolutionMethod_Repeated() {\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t\t`roots \\\\( \\\\lambda \\\\) are going to be repeated:`,\r\n\t\t\t`\\\\[ \\\\lambda_1 = \\\\lambda_2 = \\\\lambda \\\\]`,\r\n\t\t\t...this.getGeneralSolutionRepeatedCase(nt),\r\n\t\t]\r\n\t}\r\n\tgetContentFor_generalSolutionMethod_Real() {\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t\t`roots \\\\( \\\\lambda \\\\) are going to be real distinct:`,\r\n\t\t\t`\\\\[ \\\\lambda_1 \\\\ne \\\\lambda_2 \\\\]`,\r\n\t\t\t`\\\\[ \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} \\\\]`,\r\n\t\t\t...this.getGeneralSolutionRealCase(nt),\r\n\t\t]\r\n\t}\r\n\tgetContentFor_generalSolutionMethod_Complex() {\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t\t`roots \\\\( \\\\lambda \\\\) are going to be complex conjugate:`,\r\n\t\t\t`\\\\[ \\\\lambda = \\\\alpha \\\\pm i \\\\beta \\\\]`,\r\n\t\t\t`\\\\[ \\\\beta \\\\ne 0 \\\\]`,\r\n\t\t\t...this.getGeneralSolutionComplexCase(nt),\r\n\t\t]\r\n\t}\r\n\tgetContentFor_generalSolutionMethod_Imaginary() {\r\n\t\tconst a=i=>this.param.linear(i)\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t\t`roots \\\\( \\\\lambda \\\\) are going to be complex conjugate:`,\r\n\t\t\t`\\\\[ \\\\lambda = \\\\pm i \\\\beta = \\\\pm \\\\sqrt{\\\\frac{${a(0)}}{${a(2)}}} \\\\]`,\r\n\t\t\t...this.getGeneralSolutionImaginaryCase(nt),\r\n\t\t]\r\n\t}\r\n\tgetContentFor_generalSolutionMethod() {\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t\t{type:'switch',title:`roots \\\\( \\\\lambda \\\\) are`,content:[\r\n\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,\r\n\t\t\t\t\tcontent:this.getGeneralSolutionRepeatedCase(nt)\r\n\t\t\t\t},\r\n\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,\r\n\t\t\t\t\tcontent:this.getGeneralSolutionRealCase(nt)\r\n\t\t\t\t},\r\n\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,\r\n\t\t\t\t\tcontent:this.getGeneralSolutionComplexCase(nt)\r\n\t\t\t\t},\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nLhcContent.Scalar = class extends LhcContent.Base {\r\n\tgetX0(nt) {\r\n\t\treturn nt.vec2(`${nt.x}(0)`,`${nt.x}'(0)`)\r\n\t}\r\n\tgetx0(nt) {\r\n\t\treturn `${nt.x}(0)`\r\n\t}\r\n\tgety0(nt) {\r\n\t\treturn `${nt.x}'(0)`\r\n\t}\r\n\tgetRepeatedGeneralSolution(nt) {\r\n\t\treturn `${nt.x} = k_1 e^{\\\\lambda t} + k_2 t e^{\\\\lambda t}`\r\n\t}\r\n\tgetRealGeneralSolution(nt) {\r\n\t\treturn `${nt.x} = k_1 e^{\\\\lambda_1 t} + k_2 e^{\\\\lambda_2 t}`\r\n\t}\r\n\tgetComplexGeneralSolution(nt) {\r\n\t\treturn `${nt.x} = k_1 e^{\\\\alpha t} \\\\cos \\\\beta t + k_2 e^{\\\\alpha t} \\\\sin \\\\beta t`\r\n\t}\r\n\tgetImaginaryGeneralSolution(nt) {\r\n\t\treturn `${nt.x} = k_1 \\\\cos \\\\beta t + k_2 \\\\sin \\\\beta t`\r\n\t}\r\n}\r\n\r\nLhcContent.Linear = class extends LhcContent.Scalar {\r\n\tgetCharacteristicEquation(nt) {\r\n\t\tconst a=i=>this.param.linear(i)\r\n\t\treturn tex.sum([a(2),`\\\\lambda^2`],'+',[a(1),`\\\\lambda`],'+',[a(0)],'=',[0])\r\n\t}\r\n\tgetContentFor_characteristicEquation() {\r\n\t\tconst a=i=>this.param.linear(i)\r\n\t\treturn characteristicEquationContent([2,a(2)],'+',[1,a(1)],'+',[0,a(0)],'=','0')\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod() {\r\n\t\tconst a=i=>this.param.linear(i)\r\n\t\treturn nt=>[\r\n\t\t\t{type:'switch',title:`\\\\( ${a(0)} \\\\) is`,content:[\r\n\t\t\t\t{type:'case',title:`\\\\( ${a(0)} = 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`\\\\( ${a(0)} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod0() {\r\n\t\tconst a=i=>this.param.linear(i)\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`no other equilibrium solution is possible because \\\\( ${a(0)} \\\\ne 0 \\\\)`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nLhcContent.Resolved = class extends LhcContent.Scalar {\r\n\tgetCharacteristicEquation(nt) {\r\n\t\tconst b=i=>this.param.resolved(i)\r\n\t\treturn tex.sum([`\\\\lambda^2`],'-',[b(1),`\\\\lambda`],'-',[b(0)],'=',[0])\r\n\t}\r\n\tgetContentFor_characteristicEquation() {\r\n\t\tconst b=i=>this.param.resolved(i)\r\n\t\treturn characteristicEquationContent([2,1],'=',[1,b(1)],'+',[0,b(0)])\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod() {\r\n\t\tconst b=i=>this.param.resolved(i)\r\n\t\treturn nt=>[\r\n\t\t\t{type:'switch',title:`\\\\( ${b(0)} \\\\) is`,content:[\r\n\t\t\t\t{type:'case',title:`\\\\( ${b(0)} = 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`\\\\( ${b(0)} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod0() {\r\n\t\tconst b=i=>this.param.resolved(i)\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`no other equilibrium solution is possible because \\\\( ${b(0)} \\\\ne 0 \\\\)`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nLhcContent.ReducedSystem = class extends LhcContent.Base {\r\n\tgetX0(nt) {\r\n\t\treturn nt.vec2(`${nt.x}(0)`,`${nt.y}(0)`)\r\n\t}\r\n\tgetx0(nt) {\r\n\t\treturn `${nt.x}(0)`\r\n\t}\r\n\tgety0(nt) {\r\n\t\treturn `${nt.y}(0)`\r\n\t}\r\n\tgetCharacteristicEquation(nt) {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\tconst d=this.param.system(2,2)\r\n\t\treturn tex.sum([`\\\\lambda^2`],'-',[d,`\\\\lambda`],'-',[c],'=',[0])\r\n\t}\r\n\tgetRepeatedGeneralSolution(nt) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t`${nt.x} &= k_1 e^{\\\\lambda t} + k_2 t e^{\\\\lambda t} \\\\\\\\`+\r\n\t\t\t`${nt.y} &= (k_1 \\\\lambda + k_2) e^{\\\\lambda t} + k_2 \\\\lambda t e^{\\\\lambda t}`+\r\n\t\t`\\\\end{aligned} \\\\right.`\r\n\t}\r\n\tgetRealGeneralSolution(nt) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t`${nt.x} &= k_1 e^{\\\\lambda_1 t} + k_2 e^{\\\\lambda_2 t} \\\\\\\\`+\r\n\t\t\t`${nt.y} &= k_1 \\\\lambda_1 e^{\\\\lambda_1 t} + k_2 \\\\lambda_2 e^{\\\\lambda_2 t}`+\r\n\t\t`\\\\end{aligned} \\\\right.`\r\n\t}\r\n\tgetComplexGeneralSolution(nt) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t`${nt.x} = \\\\: & k_1 e^{\\\\alpha t} \\\\cos \\\\beta t \\\\\\\\`+\r\n\t\t\t\t`+ \\\\: & k_2 e^{\\\\alpha t} \\\\sin \\\\beta t \\\\\\\\`+\r\n\t\t\t`${nt.y} = \\\\: & k_1 e^{\\\\alpha t} (\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t`+ \\\\: & k_2 e^{\\\\alpha t} (\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t)`+\r\n\t\t`\\\\end{aligned} \\\\right.`\r\n\t}\r\n\tgetImaginaryGeneralSolution(nt) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t`${nt.x} &= k_1 \\\\cos \\\\beta t + k_2 \\\\sin \\\\beta t \\\\\\\\`+\r\n\t\t\t`${nt.y} &= k_2 \\\\beta \\\\cos \\\\beta t - k_1 \\\\beta \\\\sin \\\\beta t`+\r\n\t\t`\\\\end{aligned} \\\\right.`\r\n\t}\r\n\tgetContentFor_characteristicEquation() {\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod() {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\treturn nt=>[\r\n\t\t\t{type:'switch',title:`\\\\( ${c} \\\\) is`,content:[\r\n\t\t\t\t{type:'case',title:`\\\\( ${c} = 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ `+nt.sys2(`${nt.x} &= K`,`${nt.y} &= 0`)+` \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`\\\\( ${c} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ `+nt.sys2(`${nt.x} &= 0`,`${nt.y} &= 0`)+` \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod0() {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${nt.sys2(`${nt.x} &= 0`,`${nt.y} &= 0`)} \\\\]`,\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`no other equilibrium solution is possible because \\\\( ${c} \\\\ne 0 \\\\)`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nLhcContent.ReducedVector = class extends LhcContent.Base {\r\n\tgetX0(nt) {\r\n\t\treturn `${nt.X}(0)`\r\n\t}\r\n\tgetx0(nt) {\r\n\t\treturn `${nt.X}_1(0)`\r\n\t}\r\n\tgety0(nt) {\r\n\t\treturn `${nt.X}_2(0)`\r\n\t}\r\n\tgetCharacteristicEquation(nt) {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\tconst d=this.param.system(2,2)\r\n\t\treturn `\\\\det\\\\left(${nt.mat2('-\\\\lambda',1,c,`${d}-\\\\lambda`)}\\\\right) = 0`\r\n\t}\r\n\tgetRepeatedGeneralSolution(nt) {\r\n\t\treturn `\\\\begin{aligned} `+\r\n\t\t\t`${nt.X} &= k_1 ${nt.vec2(1,'')} e^{t} + k_2 ${nt.vec2('t','1{+}t')} e^{t} \\\\\\\\`+\r\n\t\t\t        `&= ${nt.mat2(1,'t','','1{+}t')} ${nt.vec2('k_1','k_2')} e^{t}`+\r\n\t\t`\\\\end{aligned}`\r\n\t}\r\n\tgetRealGeneralSolution(nt) {\r\n\t\treturn `\\\\begin{aligned}`+\r\n\t\t\t`${nt.X} &= k_1 ${nt.vec2(1,'_1')} e^{_1 t} + k_2 ${nt.vec2(1,'_2')} e^{_2 t} \\\\\\\\`+\r\n\t\t\t        `&= ${nt.mat2(1,1,'_1','_2')} ${nt.vec2(`k_1 e^{_1 t}`,`k_2 e^{_2 t}`)}`+\r\n\t\t`\\\\end{aligned}`\r\n\t}\r\n\tgetComplexGeneralSolution(nt) {\r\n\t\treturn `\\\\begin{aligned} `+\r\n\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2('\\\\cos \\\\beta t','\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t')} \\\\\\\\`+\r\n\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2('\\\\sin \\\\beta t','\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t')} \\\\\\\\`+\r\n\t\t\t        `= \\\\: & e^{\\\\alpha t} ${nt.smat2(1,0,'\\\\alpha','\\\\beta')} ${nt.smat2('\\\\cos \\\\beta t','\\\\sin \\\\beta t','- \\\\sin \\\\beta t','\\\\cos \\\\beta t')} ${nt.svec2('k_1','k_2')}`+\r\n\t\t`\\\\end{aligned}`\r\n\t}\r\n\tgetImaginaryGeneralSolution(nt) {\r\n\t\treturn `\\\\begin{aligned} `+\r\n\t\t\t`${nt.X} = \\\\: & k_1 ${nt.vec2('\\\\cos \\\\beta t','-\\\\beta \\\\sin \\\\beta t')} \\\\\\\\`+\r\n\t\t\t        `+ \\\\: & k_2 ${nt.vec2('\\\\sin \\\\beta t', '\\\\beta \\\\cos \\\\beta t')} \\\\\\\\`+\r\n\t\t\t        `= \\\\: & ${nt.smat2(1,0,0,'\\\\beta')} ${nt.smat2('\\\\cos \\\\beta t','\\\\sin \\\\beta t','- \\\\sin \\\\beta t','\\\\cos \\\\beta t')} ${nt.svec2('k_1','k_2')}`+\r\n\t\t`\\\\end{aligned}`\r\n\t}\r\n\tgetContentFor_characteristicEquation() {\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod() {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\treturn nt=>[\r\n\t\t\t{type:'switch',title:`\\\\( ${c} \\\\) is`,content:[\r\n\t\t\t\t{type:'case',title:`\\\\( ${c} = 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.vec2('K',0)} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`\\\\( ${c} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod0() {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`no other equilibrium solution is possible because \\\\( ${c} \\\\ne 0 \\\\)`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=LhcContent\r\n","'use strict'\r\n\r\nconst LhcParam={}\r\n\r\nLhcParam.Linear = class {\r\n\tconstructor(a2,a1,a0) {\r\n\t\tthis.a=[a0,a1,a2]\r\n\t}\r\n\tlinear(i) {\r\n\t\treturn this.a[i]\r\n\t}\r\n\tresolved(i) {\r\n\t\tif (this.a[i]!=0) {\r\n\t\t\treturn `-\\\\frac{${this.a[i]}}{${this.a[2]}}`\r\n\t\t} else {\r\n\t\t\treturn 0\r\n\t\t}\r\n\t}\r\n\tsystem(i,j) {\r\n\t\tif (i==1) {\r\n\t\t\tif (j==1) {\r\n\t\t\t\treturn 0\r\n\t\t\t} else if (j==2) {\r\n\t\t\t\treturn 1\r\n\t\t\t}\r\n\t\t} else if (i==2) {\r\n\t\t\treturn this.resolved(j-1)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nLhcParam.Resolved = class {\r\n\tconstructor(b1,b0) {\r\n\t\tthis.b=[b0,b1]\r\n\t}\r\n\tresolved(i) {\r\n\t\treturn this.b[i]\r\n\t}\r\n}\r\n\r\nLhcParam.ReducedSystem = class {\r\n\tconstructor(c,d) {\r\n\t\tthis.A=[[0,1],[c,d]]\r\n\t}\r\n\tsystem(i,j) {\r\n\t\treturn this.A[i-1][j-1]\r\n\t}\r\n}\r\n\r\nmodule.exports=LhcParam\r\n","'use strict'\r\n\r\nconst detailsPolyfill=require('crnx-base/details-polyfill')\r\nconst Matrix=require('./lhc-plot/matrix')\r\nconst TrdetCanvas=require('./lhc-plot/trdet-canvas')\r\nconst PhaseCanvas=require('./lhc-plot/phase-canvas')\r\n\r\n// works like this: http://mathlets.org/mathlets/linear-phase-portraits-matrix-entry/\r\nclass LhcPlot {\r\n\tconstructor(xLabel,yLabel) {\r\n\t\tconst matrix=new Matrix\r\n\t\tconst $numberInputs={}\r\n\t\tconst $rangeInputs={}\r\n\t\tlet $equilibriumType\r\n\t\tconst trdetCanvas=new TrdetCanvas\r\n\t\tconst phaseCanvas=new PhaseCanvas\r\n\t\tconst updateDetails=()=>{\r\n\t\t\tconst updateEquilibriumType=()=>{\r\n\t\t\t\tconst getEquilibriumType=()=>{\r\n\t\t\t\t\t// names are based on\r\n\t\t\t\t\t// http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\r\n\t\t\t\t\tconst D=matrix.det\r\n\t\t\t\t\tconst T=matrix.tr\r\n\t\t\t\t\tconst ssc=(T==0)?\"center\":((T<0)?\"sink\":\"source\")\r\n\t\t\t\t\tif (D<0) {\r\n\t\t\t\t\t\treturn `saddle`\r\n\t\t\t\t\t} else if (D==0) {\r\n\t\t\t\t\t\tif (T==0) {\r\n\t\t\t\t\t\t\tif (matrix.b==0 && matrix.c==0) {\r\n\t\t\t\t\t\t\t\treturn `degenerate everywhere fixed`\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn `degenerate parallel lines`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `degenerate comb ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (4*D<T*T) {\r\n\t\t\t\t\t\treturn `nodal (real) ${ssc}`\r\n\t\t\t\t\t} else if (4*D==T*T) {\r\n\t\t\t\t\t\tif (matrix.b==0 && matrix.c==0) {\r\n\t\t\t\t\t\t\treturn `star ${ssc}`\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `defective nodal (real) ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (T==0) {\r\n\t\t\t\t\t\t\treturn ssc\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `spiral ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$equilibriumType.text(getEquilibriumType())\r\n\t\t\t}\r\n\t\t\tmatrix.forUpdated(cf=>{\r\n\t\t\t\t$numberInputs[cf].val(matrix[cf])\r\n\t\t\t\t$rangeInputs[cf].val(matrix[cf])\r\n\t\t\t})\r\n\t\t\tupdateEquilibriumType()\r\n\t\t\ttrdetCanvas.redraw(matrix)\r\n\t\t\tphaseCanvas.redraw(matrix,xLabel,yLabel)\r\n\t\t}\r\n\t\tconst getCoefInputs=coef=>{\r\n\t\t\tconst isMatrixElement=coef.length==1\r\n\t\t\tconst valueRange=matrix.getRange(coef)\r\n\t\t\tconst initCoefInput=(type,getValue,setValue)=>{\r\n\t\t\t\tconst $input=$(`<input type='${type}'>`).attr('step','any').val(matrix[coef])\r\n\t\t\t\tif (type=='range') {\r\n\t\t\t\t\t$input.attr('min',-valueRange).attr('max',valueRange)\r\n\t\t\t\t}\r\n\t\t\t\t$input.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\tconst value=getValue()\r\n\t\t\t\t\t\tsetValue(value)\r\n\t\t\t\t\t\tmatrix[coef]=Number(value)\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $input\r\n\t\t\t}\r\n\t\t\tconst $div=$(\"<div>\")\r\n\t\t\tif (!isMatrixElement) {\r\n\t\t\t\t$div.addClass(coef)\r\n\t\t\t}\r\n\t\t\tlet label=coef\r\n\t\t\tif (coef=='tr') {\r\n\t\t\t\tlabel=`\\\\operatorname{${coef}}(\\\\mathbf{A})`\r\n\t\t\t} else if (coef=='det') {\r\n\t\t\t\tlabel=`\\\\${coef}(\\\\mathbf{A})`\r\n\t\t\t} else if (coef.slice(0,2)=='re') {\r\n\t\t\t\t//label=`\\\\lambda_${coef.charAt(2)} =`\r\n\t\t\t\tlabel=`\\\\Re \\\\lambda_${coef.charAt(2)}`\r\n\t\t\t} else if (coef.slice(0,2)=='im') {\r\n\t\t\t\t//label=`+ i \\\\cdot`\r\n\t\t\t\tlabel=`\\\\Im \\\\lambda_${coef.charAt(2)}`\r\n\t\t\t}\r\n\t\t\tlet $number,$range\r\n\t\t\t$div.append(\r\n\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t`<span class='label'>\\\\( ${label} \\\\)</span>`,\r\n\t\t\t\t\t`<span class='space'> </span>`,\r\n\t\t\t\t\t$number=initCoefInput('number',()=>$number.val(),(v)=>$range.val(v))\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$range=initCoefInput('range',()=>Number($range.val()).toFixed(2),(v)=>$number.val(v))\r\n\t\t\t)\r\n\t\t\t$numberInputs[coef]=$number\r\n\t\t\t$rangeInputs[coef]=$range\r\n\t\t\treturn $div\r\n\t\t}\r\n\t\tthis.$output=$(\"<div class='matrix'>\").append(\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"equation coefficients\"),\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('a')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('b'))\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('c')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('d'))\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t\"Set matrix to \",\r\n\t\t\t\t\t$(\"<button>zero</button>\").click(function(){\r\n\t\t\t\t\t\tmatrix.setZero()\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\t$(\"<button>associated</button>\").click(function(){\r\n\t\t\t\t\t\tmatrix.setAssociated()\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"matrix parameters\"),\r\n\t\t\t\tgetCoefInputs('tr'),\r\n\t\t\t\tgetCoefInputs('det'),\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('re1')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('im1'))\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('re2')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('im2'))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"equilibrium point type\"),\r\n\t\t\t\t$equilibriumType=$(\"<div>\")\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary class='bordered'>\").append(\"<a href='https://en.wikipedia.org/wiki/Trace_(linear_algebra)'>tr</a>-<a href='https://en.wikipedia.org/wiki/Determinant'>det</a> plane\"),\r\n\t\t\t\ttrdetCanvas.$output.on('mousedown mousemove',function(ev){\r\n\t\t\t\t\tif (!ev.buttons&1) return\r\n\t\t\t\t\tconst $canvas=$(this)\r\n\t\t\t\t\tconst w=$canvas.width()\r\n\t\t\t\t\tconst h=$canvas.height()\r\n\t\t\t\t\tconst trim=(v)=>Number(v.toFixed(2))\r\n\t\t\t\t\tconst tRange=matrix.getRange('tr')\r\n\t\t\t\t\tconst dRange=matrix.getRange('det')\r\n\t\t\t\t\tconst tClose=2*tRange/(w/2)\r\n\t\t\t\t\tconst dClose=2*dRange/(h/2)\r\n\t\t\t\t\tlet t=trim(+(ev.offsetX-w/2+0.5)/(w/2)*tRange)\r\n\t\t\t\t\tlet d=trim(-(ev.offsetY-h/2+0.5)/(h/2)*dRange)\r\n\t\t\t\t\tconst p=t*t/4\r\n\t\t\t\t\tif (Math.abs(d)<=dClose && Math.abs(t)<=tClose) {\r\n\t\t\t\t\t\tt=0\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d>0 && Math.abs(t)<=tClose) {\r\n\t\t\t\t\t\tt=0\r\n\t\t\t\t\t} else if (d<0 && d>=-dClose) {\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d-p>0 && d-p<=dClose) {\r\n\t\t\t\t\t\td=p\r\n\t\t\t\t\t} else if (d>0 && d<=dClose) {\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d-p<0 && d-p>=-dClose) {\r\n\t\t\t\t\t\td=p\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmatrix.setTrdetExternally(t,d)\r\n\t\t\t\t\tupdateDetails()\r\n\t\t\t\t})\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary class='bordered'>\").append(\"<a href='https://en.wikipedia.org/wiki/Phase_space'>phase plane</a>\"),\r\n\t\t\t\tphaseCanvas.$output\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t)\r\n\t\tupdateDetails()\r\n\t}\r\n}\r\n\r\nmodule.exports=LhcPlot\r\n","'use strict'\r\n\r\nclass Canvas {\r\n\tconstructor() {\r\n\t\tthis.width=246\r\n\t\tthis.height=246\r\n\t\tthis.$output=$(`<canvas width='${this.width}' height='${this.height}'>`)\r\n\t\tthis.ctx=this.$output[0].getContext('2d')\r\n\t}\r\n\tdrawAxes(xLabel,yLabel) {\r\n\t\tconst xAxisSize=80\r\n\t\tconst yAxisSize=80\r\n\t\tconst arrowSize=15\r\n\t\tconst ctx=this.ctx\r\n\t\tconst drawAxis=()=>{\r\n\t\t\tctx.beginPath()\r\n\t\t\tctx.moveTo(-xAxisSize,0)\r\n\t\t\tctx.lineTo(+xAxisSize,0)\r\n\t\t\tctx.moveTo(xAxisSize-arrowSize,-arrowSize)\r\n\t\t\tctx.lineTo(xAxisSize,0)\r\n\t\t\tctx.lineTo(xAxisSize-arrowSize,+arrowSize)\r\n\t\t\tctx.stroke()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.lineWidth=6\r\n\t\tctx.strokeStyle=ctx.fillStyle='#DDD'\r\n\t\tctx.font='900 30px sans-serif'\r\n\t\tdrawAxis()\r\n\t\tctx.save()\r\n\t\tctx.rotate(-Math.PI/2)\r\n\t\tdrawAxis()\r\n\t\tctx.restore()\r\n\t\tctx.textBaseline='middle'\r\n\t\tctx.fillText(xLabel,xAxisSize+10,0)\r\n\t\tctx.textBaseline='alphabetic'\r\n\t\tctx.textAlign='center'\r\n\t\tctx.fillText(yLabel,0,-yAxisSize-10)\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=Canvas\r\n","'use strict'\r\n\r\n// returns coords [x,y] of a point on x*y=C closest to (x0,y0)\r\n// could have solved x^3*(x-x0)+C*y0*x-C^2=0, y=C/x\r\n\r\nconst getClosestPointOnPositiveHyperbolaIn1stQuadrant=(C,x0,y0)=>{\r\n\tlet x=Math.sqrt(C)\r\n\tlet y=x\r\n\tconst epsilon2=1e-12\r\n\tconst iterationLimit=20\r\n\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\tif (x<=0) return [C/y0,y0]\r\n\t\tif (y<=0) return [x0,C/x0]\r\n\t\tconst yx=y0/(2*x)\r\n\t\tconst xy=x0/(2*y)\r\n\t\tconst t=yx+xy-Math.sqrt((yx-xy)*(yx-xy)+C/(x*y))\r\n\t\tlet x1=x0-y*t\r\n\t\tlet y1=y0-x*t\r\n\t\tif ((x-x1)*(x-x1)+(y-y1)*(y-y1)<=epsilon2) break\r\n\t\tx=x1\r\n\t\ty=y1\r\n\t}\r\n\treturn [x,y]\r\n}\r\n\r\nconst getClosestPointOnPositiveHyperbola=(C,x0,y0)=>{\r\n\tif (y0>=-x0) { // top-right branch\r\n\t\treturn getClosestPointOnPositiveHyperbolaIn1stQuadrant(C,x0,y0)\r\n\t} else { // bottom-left branch\r\n\t\tconst xy=getClosestPointOnPositiveHyperbolaIn1stQuadrant(C,-x0,-y0)\r\n\t\treturn [-xy[0],-xy[1]]\r\n\t}\r\n}\r\n\r\nconst getClosestPointOnHyperbola=(C,x0,y0)=>{\r\n\tif (C==0) {\r\n\t\tif (Math.abs(x0)<Math.abs(y0)) {\r\n\t\t\treturn [0,y0]\r\n\t\t} else {\r\n\t\t\treturn [x0,0]\r\n\t\t}\r\n\t} else if (C>0) {\r\n\t\treturn getClosestPointOnPositiveHyperbola(C,x0,y0)\r\n\t} else { // flip y axis\r\n\t\tconst xy=getClosestPointOnPositiveHyperbola(-C,x0,-y0)\r\n\t\treturn [xy[0],-xy[1]]\r\n\t}\r\n}\r\n\r\nmodule.exports=getClosestPointOnHyperbola\r\n","'use strict'\r\n\r\nconst getClosestPointOnHyperbola=require('./closest-point-on-hyperbola')\r\n\r\nclass Matrix {\r\n\tconstructor() {\r\n\t\tthis._updated={}\r\n\t\tthis.setZero()\r\n\t\tthis._updated={}\r\n\t}\r\n\tforUpdated(fn) {\r\n\t\tfor (let coef in this._updated) {\r\n\t\t\tfn(coef)\r\n\t\t}\r\n\t\tthis._updated={}\r\n\t}\r\n\t_computeElementsFromTrdet() {\r\n\t\tif (this._original===null) {\r\n\t\t\tthis._original={\r\n\t\t\t\ta: this._a,\r\n\t\t\t\tb: this._b,\r\n\t\t\t\tc: this._c,\r\n\t\t\t\td: this._d,\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._a=(this._original.a+this._tr-this._original.d)/2\r\n\t\tthis._d=this._tr-this._a\r\n\t\tconst bc=getClosestPointOnHyperbola(this._a*this._d-this._det,this._original.b,this._original.c)\r\n\t\tthis._b=bc[0]\r\n\t\tthis._c=bc[1]\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t}\r\n\t_computeTrdetFromElements() {\r\n\t\tthis._tr=this._a+this._d\r\n\t\tthis._det=this._a*this._d-this._b*this._c\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t}\r\n\t_computeEigenvaluesFromTrdet() {\r\n\t\tconst discr=this._tr*this._tr-4*this._det\r\n\t\tif (discr>=0) {\r\n\t\t\tconst root=Math.sqrt(discr)\r\n\t\t\tif (this._re2>=this._re1) {\r\n\t\t\t\tthis._re1=(this._tr-root)/2\r\n\t\t\t\tthis._re2=(this._tr+root)/2\r\n\t\t\t} else {\r\n\t\t\t\tthis._re2=(this._tr-root)/2\r\n\t\t\t\tthis._re1=(this._tr+root)/2\r\n\t\t\t}\r\n\t\t\tthis._im1=this._im2=0\r\n\t\t} else {\r\n\t\t\tconst root=Math.sqrt(-discr)\r\n\t\t\tthis._re1=this._re2=this._tr/2\r\n\t\t\tif (this._im2>=this._im1) {\r\n\t\t\t\tthis._im1=-root/2\r\n\t\t\t\tthis._im2=+root/2\r\n\t\t\t} else {\r\n\t\t\t\tthis._im2=-root/2\r\n\t\t\t\tthis._im1=+root/2\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._updated.re1=this._updated.re2=this._updated.im1=this._updated.im2=true\r\n\t}\r\n\t_computeTrdetFromEigenvalues() {\r\n\t\tthis._tr=this._re1+this._re2\r\n\t\tthis._det=this._re1*this._re2-this._im1*this._im2\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t}\r\n\tget a() { return this._a }\r\n\tget b() { return this._b }\r\n\tget c() { return this._c }\r\n\tget d() { return this._d }\r\n\tget tr() { return this._tr }\r\n\tget det() { return this._det }\r\n\tget re1() { return this._re1 }\r\n\tget re2() { return this._re2 }\r\n\tget im1() { return this._im1 }\r\n\tget im2() { return this._im2 }\r\n\tgetEigenvector(lambda) {\r\n\t\tif (Math.abs(this._b)+Math.abs(lambda-this._a)>=Math.abs(lambda-this._d)+Math.abs(this._c)) {\r\n\t\t\treturn [this._b,lambda-this._a]\r\n\t\t} else {\r\n\t\t\treturn [lambda-this._d,this._c]\r\n\t\t}\r\n\t}\r\n\tgetComplexEigenvector(alpha,beta) {\r\n\t\tif (Math.abs(this._b)+Math.abs(alpha-this._a)>=Math.abs(alpha-this._d)+Math.abs(this._c)) {\r\n\t\t\treturn [this._b,0,alpha-this._a,beta]\r\n\t\t} else {\r\n\t\t\treturn [alpha-this._d,beta,this._c,0]\r\n\t\t}\r\n\t}\r\n\tgetRange(coef) {\r\n\t\tif (coef=='tr') {\r\n\t\t\treturn 10\r\n\t\t} else if (coef=='det') {\r\n\t\t\treturn 50\r\n\t\t} else if (coef=='a' || coef=='b' || coef=='c' || coef=='d') {\r\n\t\t\treturn 5\r\n\t\t} else {\r\n\t\t\treturn 10 // eigenvalues\r\n\t\t}\r\n\t}\r\n\tset a(v) {\r\n\t\tthis._a=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset b(v) {\r\n\t\tthis._b=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset c(v) {\r\n\t\tthis._c=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset d(v) {\r\n\t\tthis._d=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset tr(v) {\r\n\t\tthis._tr=v\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset det(v) {\r\n\t\tthis._det=v\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tsetTrdetExternally(T,D) { // for use with clicks on tr-det plane plot\r\n\t\tthis._tr=T\r\n\t\tthis._det=D\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\t_setRe(v,i,j) {\r\n\t\tthis['_re'+i]=v\r\n\t\tif (this._im1!=0 || this._im2!=0) {\r\n\t\t\tthis['_re'+j]=v\r\n\t\t\tthis._updated['re'+j]=true\r\n\t\t}\r\n\t\tthis._computeTrdetFromEigenvalues()\r\n\t\tthis._computeElementsFromTrdet()\r\n\t}\r\n\tset re1(v) {\r\n\t\tthis._setRe(v,1,2)\r\n\t}\r\n\tset re2(v) {\r\n\t\tthis._setRe(v,2,1)\r\n\t}\r\n\t_setIm(v,i,j) {\r\n\t\tthis['_im'+i]=v\r\n\t\tthis['_im'+j]=-v\r\n\t\tthis._updated['im'+j]=true\r\n\t\tif (v!=0) {\r\n\t\t\tthis['_re'+j]=this['_re'+i]\r\n\t\t\tthis._updated['re'+j]=true\r\n\t\t}\r\n\t\tthis._computeTrdetFromEigenvalues()\r\n\t\tthis._computeElementsFromTrdet()\r\n\t}\r\n\tset im1(v) {\r\n\t\tthis._setIm(v,1,2)\r\n\t}\r\n\tset im2(v) {\r\n\t\tthis._setIm(v,2,1)\r\n\t}\r\n\tsetZero() {\r\n\t\tthis._a=this._b=this._c=this._d=0\r\n\t\tthis._tr=this._det=0\r\n\t\tthis._re1=this._re2=this._im1=this._im2=0\r\n\t\tthis._original=null\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t\tthis._updated.re1=this._updated.re2=this._updated.im1=this._updated.im2=true\r\n\t}\r\n\tsetAssociated() { // \"associated matrix\" http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\r\n\t\tthis._a=0\r\n\t\tthis._b=1\r\n\t\tthis._c=-this._det\r\n\t\tthis._d=this._tr\r\n\t\tthis._original=null\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t}\r\n}\r\n\r\nmodule.exports=Matrix\r\n","'use strict'\r\n\r\nconst Canvas=require('./canvas')\r\n\r\nclass PhaseCanvas extends Canvas {\r\n\tredraw(matrix,xLabel,yLabel) {\r\n\t\tconst ctx=this.ctx\r\n\t\tconst xRange=this.width/2\r\n\t\tconst yRange=this.height/2\r\n\t\tconst drawDirectionField=()=>{\r\n\t\t\tconst arrowSpacing=27\r\n\t\t\tconst arrowLength=5\r\n\t\t\tconst arrowWidth=2\r\n\t\t\tconst drawArrow=(x,y)=>{\r\n\t\t\t\tconst dx=matrix.a*x+matrix.b*y\r\n\t\t\t\tconst dy=matrix.c*x+matrix.d*y\r\n\t\t\t\tconst dl=Math.sqrt(dx*dx+dy*dy)\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t+(x-dx/dl*arrowLength),\r\n\t\t\t\t\t-(y-dy/dl*arrowLength)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(+x,-y)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t+(x+dx/dl*arrowLength),\r\n\t\t\t\t\t-(y+dy/dl*arrowLength)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t+(x-dy/dl*arrowWidth),\r\n\t\t\t\t\t-(y+dx/dl*arrowWidth)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t+(x+dy/dl*arrowWidth),\r\n\t\t\t\t\t-(y-dx/dl*arrowWidth)\r\n\t\t\t\t)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tctx.save()\r\n\t\t\tctx.fillStyle=ctx.strokeStyle='#888'\r\n\t\t\tconst nx=Math.floor(xRange/arrowSpacing)\r\n\t\t\tconst ny=Math.floor(yRange/arrowSpacing)\r\n\t\t\tfor (let i=-nx;i<=nx;i++) {\r\n\t\t\t\tfor (let j=-ny;j<=ny;j++) {\r\n\t\t\t\t\tdrawArrow(\r\n\t\t\t\t\t\ti*arrowSpacing+0.5*Math.sign(i),\r\n\t\t\t\t\t\tj*arrowSpacing+0.5*Math.sign(j)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawEigenline=(lambda,otherLambda)=>{\r\n\t\t\tconst iconSize=5\r\n\t\t\tlet icon\r\n\t\t\tif (lambda<0) {\r\n\t\t\t\ticon=-1-(otherLambda<0 && lambda<otherLambda)\r\n\t\t\t} else if (lambda>0) {\r\n\t\t\t\ticon=+1+(otherLambda>0 && lambda>otherLambda)\r\n\t\t\t} else {\r\n\t\t\t\ticon=0\r\n\t\t\t}\r\n\t\t\tconst xy=matrix.getEigenvector(lambda)\r\n\t\t\tlet x=xy[0], y=xy[1]\r\n\t\t\tctx.save()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tif (x<0) {\r\n\t\t\t\tx=-x\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (y<0) {\r\n\t\t\t\tctx.scale(1,-1)\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (x<y) { // TODO this will work only for square canvases, should also swap xRange and yRange\r\n\t\t\t\tctx.transform(0,1,1,0,0,0) // swap x,y\r\n\t\t\t\t;[x,y]=[y,x]\r\n\t\t\t}\r\n\t\t\tif (x>0) {\r\n\t\t\t\tconst r=Math.sqrt(x*x+y*y)\r\n\t\t\t\tconst x0=x/r\r\n\t\t\t\tconst y0=y/r\r\n\t\t\t\tconst x1=xRange\r\n\t\t\t\tconst y1=yRange*y/x\r\n\t\t\t\tconst xic=xRange/2*x0\r\n\t\t\t\tconst yic=yRange/2*y0\r\n\t\t\t\tconst xis=iconSize*x0\r\n\t\t\t\tconst yis=iconSize*y0\r\n\t\t\t\tconst drawEigenlineIcon=()=>{\r\n\t\t\t\t\tconst dir=Math.sign(icon)\r\n\t\t\t\t\tconst drawDiamond=()=>{\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(xic-xis,-(yic-yis))\r\n\t\t\t\t\t\tctx.lineTo(xic+yis,-(yic-xis))\r\n\t\t\t\t\t\tctx.lineTo(xic+xis,-(yic+yis))\r\n\t\t\t\t\t\tctx.lineTo(xic-yis,-(yic+xis))\r\n\t\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\t\tctx.fill()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst drawTriangle=(ofs)=>{\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(xic+dir*(ofs*xis-xis-yis),-(yic+dir*(ofs*yis-yis+xis)))\r\n\t\t\t\t\t\tctx.lineTo(xic+dir*(ofs*xis-xis+yis),-(yic+dir*(ofs*yis-yis-xis)))\r\n\t\t\t\t\t\tctx.lineTo(xic+dir*(ofs*xis+xis    ),-(yic+dir*(ofs*yis+yis    )))\r\n\t\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\t\tctx.fill()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dir==0) {\r\n\t\t\t\t\t\tdrawDiamond()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrawTriangle(0)\r\n\t\t\t\t\t\tif (Math.abs(icon)>=2) {\r\n\t\t\t\t\t\t\tdrawTriangle(2)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(-x1,+y1)\r\n\t\t\t\tctx.lineTo(+x1,-y1)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.save()\r\n\t\t\t\tdrawEigenlineIcon()\r\n\t\t\t\tctx.scale(-1,-1)\r\n\t\t\t\tdrawEigenlineIcon()\r\n\t\t\t\tctx.restore()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawSolution=(x0,y0,color)=>{\r\n\t\t\tconst iterationLimit=100*Math.max(xRange,yRange)\r\n\t\t\tconst fnOnFractions=(fn,xNum,xDen,yNum,yDen)=>{\r\n\t\t\t\tif (xDen!=0 && yDen!=0) {\r\n\t\t\t\t\treturn fn(xNum/xDen,yNum/yDen)\r\n\t\t\t\t} else if (xDen==0 && yDen!=0) {\r\n\t\t\t\t\treturn yNum/yDen\r\n\t\t\t\t} else if (xDen!=0 && yDen==0) {\r\n\t\t\t\t\treturn xNum/xDen\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawFixedPoint=()=>{\r\n\t\t\t\tconst fixedPointSize=3\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.arc(x0,y0,fixedPointSize,0,2*Math.PI)\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tconst drawSaddleOrNodeSolution=()=>{\r\n\t\t\t\tlet lambda1,lambda2\r\n\t\t\t\tif (matrix.re1<=matrix.re2) {\r\n\t\t\t\t\tlambda1=matrix.re1\r\n\t\t\t\t\tlambda2=matrix.re2\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlambda1=matrix.re2\r\n\t\t\t\t\tlambda2=matrix.re1\r\n\t\t\t\t}\r\n\t\t\t\tconst xy1=matrix.getEigenvector(lambda1)\r\n\t\t\t\tlet x1=xy1[0], y1=xy1[1]\r\n\t\t\t\tconst xy2=matrix.getEigenvector(lambda2)\r\n\t\t\t\tlet x2=xy2[0], y2=xy2[1]\r\n\t\t\t\tif (lambda2<=0) {\r\n\t\t\t\t\t;[lambda1,lambda2]=[-lambda2,-lambda1]\r\n\t\t\t\t\t;[x1,x2]=[x2,x1]\r\n\t\t\t\t\t;[y1,y2]=[y2,y1]\r\n\t\t\t\t}\r\n\t\t\t\tlet k1=+(x2*y0-x0*y2)/(x2*y1-x1*y2)\r\n\t\t\t\tlet k2=-(x1*y0-x0*y1)/(x2*y1-x1*y2)\r\n\t\t\t\tif ((k1==0 && k2==0) || (lambda1==0 && k2==0)) {\r\n\t\t\t\t\tdrawFixedPoint()\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else if (k1==0 && lambda2!=0) {\r\n\t\t\t\t\tlambda1=0 // trigger comb case below\r\n\t\t\t\t} else if (k2==0 && lambda1!=0) {\r\n\t\t\t\t\tlambda2=Math.abs(lambda1)\r\n\t\t\t\t\tlambda1=0 // trigger comb case below\r\n\t\t\t\t\t;[x1,x2]=[x2,x1]\r\n\t\t\t\t\t;[y1,y2]=[y2,y1]\r\n\t\t\t\t\t;[k1,k2]=[k2,k1]\r\n\t\t\t\t}\r\n\t\t\t\tif (lambda1>0) { // node\r\n\t\t\t\t\tlet T1=0\r\n\t\t\t\t\tlet T2=0\r\n\t\t\t\t\tconst dT1=1/Math.max(Math.abs(k1*x1),Math.abs(k1*y1)) // step size is controlled by slow direction\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(0,0)\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tT1+=dT1\r\n\t\t\t\t\t\tT2=Math.pow(T1,lambda2/lambda1)\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+(k1*x1*T1+k2*x2*T2),\r\n\t\t\t\t\t\t\t-(k1*y1*T1+k2*y2*T2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(k1*x1*T1+k2*x2*T2)*Math.sign(k2*x2)>xRange ||\r\n\t\t\t\t\t\t\t(k1*y1*T1+k2*y2*T2)*Math.sign(k2*y2)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else if (lambda1<0 && lambda2>0) { // saddle\r\n\t\t\t\t\tlet t=0 // assumes starting point is in viewport\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst ke1=k1*Math.exp(lambda1*t)\r\n\t\t\t\t\t\tconst ke2=k2*Math.exp(lambda2*t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(x1*ke1+x2*ke2)*Math.sign(x1*k1)>xRange ||\r\n\t\t\t\t\t\t\t(y1*ke1+y2*ke2)*Math.sign(y1*k1)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t\tconst dt=Math.min(\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke2*lambda2),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke2*lambda2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt-=dt\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst ke1=k1*Math.exp(lambda1*t)\r\n\t\t\t\t\t\tconst ke2=k2*Math.exp(lambda2*t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+(x1*ke1+x2*ke2),\r\n\t\t\t\t\t\t\t-(y1*ke1+y2*ke2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (t>0 && (\r\n\t\t\t\t\t\t\t(x1*ke1+x2*ke2)*Math.sign(x1*k2)>xRange ||\r\n\t\t\t\t\t\t\t(y1*ke1+y2*ke2)*Math.sign(y1*k2)>yRange\r\n\t\t\t\t\t\t)) break\r\n\t\t\t\t\t\tconst dt=Math.min(\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke2*lambda2),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke2*lambda2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt+=dt\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else if (lambda1==0 && lambda2>0) { // comb\r\n\t\t\t\t\tconst t=fnOnFractions(Math.min,\r\n\t\t\t\t\t\tMath.sign(x2*k2)*xRange-x1*k1, x2*k2,\r\n\t\t\t\t\t\tMath.sign(y2*k2)*yRange-y1*k1, y2*k2\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (t>0) {\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t\t\t+(x1*k1),\r\n\t\t\t\t\t\t\t-(y1*k1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+(x1*k1+x2*k2*t),\r\n\t\t\t\t\t\t\t-(y1*k1+y2*k2*t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawSpiralSolution=()=>{\r\n\t\t\t\tlet alpha=matrix.re1\r\n\t\t\t\tlet beta=matrix.im1\r\n\t\t\t\tif (beta<0) {\r\n\t\t\t\t\tbeta=-beta\r\n\t\t\t\t}\r\n\t\t\t\tconst xxyy=matrix.getComplexEigenvector(alpha,beta)\r\n\t\t\t\tif (alpha<0) {\r\n\t\t\t\t\talpha=-alpha\r\n\t\t\t\t\tbeta=-beta\r\n\t\t\t\t}\r\n\t\t\t\tconst x1=xxyy[0], x2=xxyy[1]\r\n\t\t\t\tconst y1=xxyy[2], y2=xxyy[3]\r\n\t\t\t\tconst k1=+(x2*y0-x0*y2)/(x2*y1-x1*y2)\r\n\t\t\t\tconst k2=-(x1*y0-x0*y1)/(x2*y1-x1*y2)\r\n\t\t\t\tif (k1==0 && k2==0) return\r\n\t\t\t\tconst kxc=k1*x1+k2*x2\r\n\t\t\t\tconst kxs=k2*x1-k1*x2\r\n\t\t\t\tconst kyc=k1*y1+k2*y2\r\n\t\t\t\tconst kys=k2*y1-k1*y2\r\n\t\t\t\tif (alpha==0) { // center\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tconst dt=1/Math.max(kxc,kyc,kxs,kys)\r\n\t\t\t\t\tlet t=0\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst c=Math.cos(t)\r\n\t\t\t\t\t\tconst s=Math.sin(t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+(kxc*c+kxs*s),\r\n\t\t\t\t\t\t\t-(kyc*c+kys*s)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt+=dt\r\n\t\t\t\t\t\tif (t>=2*Math.PI) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else { // spiral\r\n\t\t\t\t\tconst calculateSemiaxes=()=>{ // https://en.wikipedia.org/wiki/Ellipse#Canonical_form\r\n\t\t\t\t\t\tconst A=kys*kys+kyc*kyc, B=-2*(kxs*kys+kxc*kyc), C=kxs*kxs+kxc*kxc\r\n\t\t\t\t\t\tconst f=kxc*kys-kxs*kyc\r\n\t\t\t\t\t\tconst F=-f*f\r\n\t\t\t\t\t\tconst DIS=B*B-4*A*C\r\n\t\t\t\t\t\tconst A2=2*DIS*F*(A+C-Math.sqrt((A-C)*(A-C)+B*B))/(DIS*DIS)\r\n\t\t\t\t\t\tconst B2=2*DIS*F*(A+C+Math.sqrt((A-C)*(A-C)+B*B))/(DIS*DIS)\r\n\t\t\t\t\t\treturn [A2,B2] // TODO relative axes lengths don't depend on initial conditions, this calculation should be simpler\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst A2B2=calculateSemiaxes()\r\n\t\t\t\t\tconst A2=A2B2[0]\r\n\t\t\t\t\tconst B2=A2B2[1]\r\n\t\t\t\t\tconst B=Math.sqrt(B2)\r\n\t\t\t\t\tconst R2=xRange*xRange+yRange*yRange\r\n\t\t\t\t\t//const t0=-(Math.log(B2)/2+Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\r\n\t\t\t\t\tconst lineWidth=2\r\n\t\t\t\t\tconst t0=(Math.log(lineWidth)-Math.log(B2)/2-Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\r\n\t\t\t\t\t//const t1=(Math.log(R2)-Math.log(A2))/(2*alpha)\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tconst e0=Math.exp(alpha*t0)\r\n\t\t\t\t\tconst nSegments=Math.ceil(B*e0*2*Math.PI)\r\n\t\t\t\t\tfor (let i=0;i<nSegments;i++) {\r\n\t\t\t\t\t\tconst t=2*Math.PI*i/nSegments\r\n\t\t\t\t\t\tconst c0=Math.cos(t)\r\n\t\t\t\t\t\tconst s0=Math.sin(t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+e0*(kxc*c0+kxs*s0),\r\n\t\t\t\t\t\t\t-e0*(kyc*c0+kys*s0)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\tctx.fill()\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tlet t=t0\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst e=Math.exp(alpha*t)\r\n\t\t\t\t\t\tconst c=Math.cos(beta*t)\r\n\t\t\t\t\t\tconst s=Math.sin(beta*t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+e*(kxc*c+kxs*s),\r\n\t\t\t\t\t\t\t-e*(kyc*c+kys*s)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t//const dtTan=1/Math.abs(beta*B*e)\r\n\t\t\t\t\t\tconst dtRad=Math.log(1/(B*e)+1)/alpha\r\n\t\t\t\t\t\t//t+=Math.min(Math.max(dtTan,1/Math.abs(40*beta)),dtRad)\r\n\t\t\t\t\t\tt+=Math.min(dtRad,1/Math.abs(16*beta))\r\n\t\t\t\t\t\tif (e*e*A2>R2) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawDefectiveSolution=()=>{\r\n\t\t\t\tlet lambda=matrix.re1\r\n\t\t\t\tlet x1=(matrix.a-lambda)*x0+matrix.b*y0\r\n\t\t\t\tlet y1=matrix.c*x0+(matrix.d-lambda)*y0\r\n\t\t\t\tif (lambda<0) {\r\n\t\t\t\t\tlambda=-lambda\r\n\t\t\t\t\tx1=-x1\r\n\t\t\t\t\ty1=-y1\r\n\t\t\t\t}\r\n\t\t\t\tif (lambda==0 && x1==0 && y1==0) { // everywhere fixed\r\n\t\t\t\t\tdrawFixedPoint()\r\n\t\t\t\t} if (lambda==0) { // parallel lines\r\n\t\t\t\t\tconst t0=fnOnFractions(Math.min,\r\n\t\t\t\t\t\t-Math.sign(x1)*xRange-x0, x1,\r\n\t\t\t\t\t\t-Math.sign(y1)*yRange-y0, y1\r\n\t\t\t\t\t)\r\n\t\t\t\t\tconst t1=fnOnFractions(Math.max,\r\n\t\t\t\t\t\t+Math.sign(x1)*xRange-x0, x1,\r\n\t\t\t\t\t\t+Math.sign(y1)*yRange-y0, y1\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t\t+(x0+t0*x1),\r\n\t\t\t\t\t\t-(y0+t0*y1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t+(x0+t1*x1),\r\n\t\t\t\t\t\t-(y0+t1*y1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else { // star or defective node\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(0,0)\r\n\t\t\t\t\tlet T=0\r\n\t\t\t\t\tconst dT=1/Math.max(Math.abs(x0),Math.abs(y0))\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tT+=dT\r\n\t\t\t\t\t\tconst t=Math.log(T)/lambda\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+T*(x0+t*x1),\r\n\t\t\t\t\t\t\t-T*(y0+t*y1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tT*(x0+t*x1)*Math.sign(x0)>xRange ||\r\n\t\t\t\t\t\t\tT*(y0+t*y1)*Math.sign(y0)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.save()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tctx.strokeStyle=ctx.fillStyle=color\r\n\t\t\tif (matrix.im1==0 && matrix.re1!=matrix.re2) {\r\n\t\t\t\tdrawSaddleOrNodeSolution()\r\n\t\t\t} else if (matrix.im1==0 && matrix.re1==matrix.re2) {\r\n\t\t\t\tdrawDefectiveSolution()\r\n\t\t\t} else if (matrix.im1!=0) {\r\n\t\t\t\tdrawSpiralSolution()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.fillStyle='#FFF'\r\n\t\tctx.fillRect(0,0,this.width,this.height)\r\n\t\tctx.restore()\r\n\t\tctx.save()\r\n\t\tctx.translate(xRange,yRange)\r\n\t\tthis.drawAxes(xLabel,yLabel)\r\n\t\tdrawDirectionField()\r\n\t\tif (matrix.im1==0) {\r\n\t\t\tdrawEigenline(matrix.re1,matrix.re2)\r\n\t\t\tif (matrix.re1!=matrix.re2) {\r\n\t\t\t\tdrawEigenline(matrix.re2,matrix.re1)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawSolution(+xRange/2,0,'#08F')\r\n\t\tdrawSolution(-xRange/2,0,'#28F')\r\n\t\tdrawSolution(0,+yRange/2,'#0AF')\r\n\t\tdrawSolution(0,-yRange/2,'#08D')\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=PhaseCanvas\r\n","'use strict'\r\n\r\nconst Canvas=require('./canvas')\r\n\r\nclass TrdetCanvas extends Canvas {\r\n\tredraw(matrix) {\r\n\t\tconst crosshairSize=10\r\n\t\tconst pointerSize=5\r\n\t\tconst pointerMargin=3\r\n\t\tconst trRange=matrix.getRange('tr')\r\n\t\tconst detRange=matrix.getRange('det')\r\n\t\tconst ctx=this.ctx\r\n\t\tconst xRange=this.width/2\r\n\t\tconst yRange=this.height/2\r\n\t\tconst D=matrix.det\r\n\t\tconst T=matrix.tr\r\n\t\tconst drawRegionAreas=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tctx.fillStyle='#FCC'\r\n\t\t\tif (D<0) {\r\n\t\t\t\tctx.fillRect(-xRange,0,xRange*2,yRange)\r\n\t\t\t} else if ((D>0 && 4*D<T*T) || (4*D>T*T) && T!=0) {\r\n\t\t\t\tif (T<0) {\r\n\t\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tif (4*D>T*T) {\r\n\t\t\t\t\tctx.moveTo(xRange,-yRange)\r\n\t\t\t\t\tctx.lineTo(0,-yRange)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.moveTo(xRange,0)\r\n\t\t\t\t}\r\n\t\t\t\tfor (let x=0;x<=xRange;x++) {\r\n\t\t\t\t\tconst t=x*trRange/xRange\r\n\t\t\t\t\tconst d=t*t/4\r\n\t\t\t\t\tconst y=-d*yRange/detRange\r\n\t\t\t\t\tctx.lineTo(x,y)\r\n\t\t\t\t}\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawRegionLines=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tconst drawRegionLinesOnce=(all)=>{\r\n\t\t\t\tconst drawParabola=()=>{\r\n\t\t\t\t\tfor (let x=0;x<=+xRange;x++) {\r\n\t\t\t\t\t\tconst t=x*trRange/xRange\r\n\t\t\t\t\t\tconst d=t*t/4\r\n\t\t\t\t\t\tconst y=-d*yRange/detRange\r\n\t\t\t\t\t\tctx[x?'lineTo':'moveTo'](x,y)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tif (all || (D==0 && T<0)) {\r\n\t\t\t\t\tctx.moveTo(-xRange,0)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D==0 && T>0)) {\r\n\t\t\t\t\tctx.moveTo(+xRange,0)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D>0 && T==0)) {\r\n\t\t\t\t\tctx.moveTo(0,-yRange)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (4*D==T*T && T<0)) {\r\n\t\t\t\t\tctx.save()\r\n\t\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\t\tdrawParabola()\r\n\t\t\t\t\tctx.restore()\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (4*D==T*T && T>0)) {\r\n\t\t\t\t\tdrawParabola()\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D==0 && T==0)) {\r\n\t\t\t\t\tctx.moveTo(-2,-2)\r\n\t\t\t\t\tctx.lineTo(-2,+2)\r\n\t\t\t\t\tctx.lineTo(+2,+2)\r\n\t\t\t\t\tctx.lineTo(+2,-2)\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke()\r\n\t\t\t}\r\n\t\t\tctx.lineCap='square'\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tdrawRegionLinesOnce(true)\r\n\t\t\tctx.lineWidth=4\r\n\t\t\tctx.strokeStyle='#F88'\r\n\t\t\tdrawRegionLinesOnce()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tctx.strokeStyle='#400'\r\n\t\t\tdrawRegionLinesOnce()\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawPosition=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tctx.strokeStyle=ctx.fillStyle='#F00'\r\n\t\t\tlet x=matrix.tr/trRange*xRange\r\n\t\t\tlet y=-matrix.det/detRange*yRange\r\n\t\t\tif (x<0) {\r\n\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\tx=-x\r\n\t\t\t}\r\n\t\t\tif (y<0) {\r\n\t\t\t\tctx.scale(1,-1)\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (x>xRange) {\r\n\t\t\t\tctx.transform(0,1,1,0,0,0)\r\n\t\t\t\t;[x,y]=[y,x]\r\n\t\t\t}\r\n\t\t\tif ((x>xRange && y>yRange-pointerMargin) || (x>xRange-pointerMargin && y>yRange)) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(xRange-pointerMargin,yRange-pointerMargin)\r\n\t\t\t\tctx.lineTo(xRange-pointerMargin,yRange-pointerMargin-pointerSize*Math.SQRT2)\r\n\t\t\t\tctx.lineTo(xRange-pointerMargin-pointerSize*Math.SQRT2,yRange-pointerMargin)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t} else if (y>xRange) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(x,yRange-pointerMargin)\r\n\t\t\t\tctx.lineTo(x+pointerSize,yRange-pointerMargin-pointerSize)\r\n\t\t\t\tctx.lineTo(x-pointerSize,yRange-pointerMargin-pointerSize)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t} else {\r\n\t\t\t\tconst s=crosshairSize\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(x-s,y)\r\n\t\t\t\tctx.lineTo(x+s,y)\r\n\t\t\t\tctx.moveTo(x,y-s)\r\n\t\t\t\tctx.lineTo(x,y+s)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.fillStyle='#FFF'\r\n\t\tctx.fillRect(0,0,this.width,this.height)\r\n\t\tctx.translate(xRange,yRange)\r\n\t\tdrawRegionAreas()\r\n\t\tthis.drawAxes('tr','det')\r\n\t\tdrawRegionLines()\r\n\t\tdrawPosition()\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=TrdetCanvas\r\n","'use strict'\r\n\r\nconst UnorderedClassSubgraph=require('./unordered-class-subgraph')\r\nconst OrderedClassSubgraph=require('./ordered-class-subgraph')\r\nconst TheadLayout=require('./thead-layout')\r\nconst TrLayout=require('./tr-layout')\r\nconst Notation=require('./notation')\r\nconst data=require('./data')\r\nconst FormRowsOutput=require('./form-rows-output')\r\nconst TraitRowsOutput=require('./trait-rows-output')\r\n\r\nconst i18n=(id)=>{\r\n\tconst strings={\r\n\t\t'trait.entity': \"Associated entities\",\r\n\t\t'trait.associatedHomogeneousEquation': \"Associated homogeneous equation\",\r\n\t\t'trait.characteristicEquation': \"<a href='https://en.wikipedia.org/wiki/Characteristic_equation_(calculus)'>Characteristic equation</a>\",\r\n\t\t'trait.halfLife': \"<a href='https://en.wikipedia.org/wiki/Half-life'>Half-life</a>\",\r\n\r\n\t\t'trait.property': \"Properties\",\r\n\t\t'trait.isoclineProperty': \"Property of <a href='https://en.wikipedia.org/wiki/Isocline'>isoclines</a>\",\r\n\t\t'trait.solutionRelation': \"Solution relation properties\",\r\n\t\t'trait.shiftSolutionRelation': \"Time/value shifts of solutions\",\r\n\t\t'trait.linearitySolutionRelation': \"Linear/affine properties of solutions\",\r\n\t\t'trait.solutionSpaceBasis': \"Basis of the solution space\",\r\n\t\t'trait.homogeneitySolutionRelation': \"Homogeneity of solutions\",\r\n\t\t'trait.additivitySolutionRelation': \"Additivity of solutions\",\r\n\t\t'trait.linearCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Linear_combination'>Linear combination</a> property of solutions\",\r\n\t\t'trait.affineCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Affine_combination'>Affine combination</a> property of solutions\",\r\n\t\t'trait.associatedSolutionRelation': \"Associated homogeneous equation solution\",\r\n\r\n\t\t// TODO remove\r\n\t\t'trait.transform': \"Transforms to different types\",\r\n\t\t'trait.orderReduction': \"Order reduction\",\r\n\r\n\t\t'trait.solutionMethod': \"Solutions\",\r\n\t\t'trait.generalSolutionMethod': \"General solution\",\r\n\t\t'trait.phaseSolutionMethod': \"<a href='https://en.wikipedia.org/wiki/Phase_space'>Phase space</a> trajectory\",\r\n\t\t'trait.equilibriumSolutionMethod': \"<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>Equilibrium solutions</a>\",\r\n\t\t'trait.testSolutionMethod': \"Solution testing\",\r\n\r\n\t\t'trait.plot': \"Plot\",\r\n\t}\r\n\treturn strings[id]\r\n}\r\n\r\n$(function(){\r\n\t$('.crnx-ode-properties').each(function(){\r\n\t\tconst $container=$(this).empty()\r\n\t\tconst selectedNodes={} // visible nodes // TODO rename to visibleNodes\r\n\r\n\t\t// options\r\n\t\tlet traitAlignmentLevel=1\r\n\t\tconst maxTraitAlignmentLevel=4\r\n\t\tlet dependentVariables='yvz'\r\n\t\tconst availableDependentVariables=['xyw','yvz']\r\n\t\tconst viewDependentVariables={\r\n\t\t\txyw: `\\\\( x \\\\), \\\\( y \\\\), \\\\( w \\\\)`,\r\n\t\t\tyvz: `\\\\( y \\\\), \\\\( v \\\\), \\\\( z \\\\)`,\r\n\t\t}\r\n\t\tlet notation=new Notation(dependentVariables)\r\n\r\n\t\tfor (let id in data.classes) {\r\n\t\t\tif (data.classes[id].importance<=1) {\r\n\t\t\t\tselectedNodes[id]=true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet unorderedClassSubgraph,theadLayout,orderedClassSubgraph,trLayout\r\n\t\tconst recomputeLayouts=()=>{\r\n\t\t\tunorderedClassSubgraph=new UnorderedClassSubgraph(data.classes,selectedNodes)\r\n\t\t\ttheadLayout=new TheadLayout(unorderedClassSubgraph)\r\n\t\t\torderedClassSubgraph=new OrderedClassSubgraph(unorderedClassSubgraph,theadLayout.columns)\r\n\t\t\ttrLayout=new TrLayout(unorderedClassSubgraph,data.classes,theadLayout.columns)\r\n\t\t}\r\n\t\trecomputeLayouts()\r\n\r\n\t\t// TODO put into classSubgraph\r\n\t\tconst breadthWalk=(graph,id)=>{\r\n\t\t\tconst result=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst queue=[id]\r\n\t\t\twhile (queue.length>0) {\r\n\t\t\t\tid=queue.shift()\r\n\t\t\t\tif (visited[id]) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tif (!selectedNodes[id]) {\r\n\t\t\t\t\tresult.push(id)\r\n\t\t\t\t}\r\n\t\t\t\tqueue.push(...Object.keys(graph[id]).sort())\r\n\t\t\t}\r\n\t\t\treturn result\r\n\t\t}\r\n\t\tconst writeButton=(text,tip)=>{\r\n\t\t\tconst $button=$(`<button type='button'><span>${text}</span></button>`)\r\n\t\t\tif (tip!==undefined) {\r\n\t\t\t\t$button.attr('title',tip)\r\n\t\t\t}\r\n\t\t\treturn $button\r\n\t\t}\r\n\r\n\t\tlet $tableContainer,$quickSelect,$quickSelectButton\r\n\t\tconst updateQuickSelectButton=()=>{\r\n\t\t\tconst id=$quickSelect.val()\r\n\t\t\t$quickSelectButton.text(selectedNodes[id]\r\n\t\t\t\t? \"Delete\"\r\n\t\t\t\t: \"Add\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tconst deleteNode=id=>{\r\n\t\t\tdelete selectedNodes[id]\r\n\t\t\t$quickSelect.children(`[value=\"${id}\"]`).removeClass('added')\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\trecomputeLayouts()\r\n\t\t\twriteTable()\r\n\t\t}\r\n\t\tconst addNode=id=>{\r\n\t\t\tselectedNodes[id]=true\r\n\t\t\t$quickSelect.children(`[value=\"${id}\"]`).addClass('added')\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\trecomputeLayouts()\r\n\t\t\twriteTable()\r\n\t\t}\r\n\t\tconst writeQuickSelectControls=()=>{\r\n\t\t\tconst $div=$(\"<div>\").append(\r\n\t\t\t\t$quickSelect=$(\"<select>\").append(\r\n\t\t\t\t\tObject.keys(data.classes).sort().map(id=>{\r\n\t\t\t\t\t\tconst $option=$(\"<option>\").val(id).text(data.classes[id].name)\r\n\t\t\t\t\t\tif (selectedNodes[id]) {\r\n\t\t\t\t\t\t\t$option.addClass('added')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $option\r\n\t\t\t\t\t})\r\n\t\t\t\t).change(function(){\r\n\t\t\t\t\tupdateQuickSelectButton()\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$quickSelectButton=$(\"<button>\").click(function(){\r\n\t\t\t\t\tconst id=$quickSelect.val()\r\n\t\t\t\t\tif (selectedNodes[id]) {\r\n\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button>Clear all</button>\").click(function(){\r\n\t\t\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\t\t\tdelete selectedNodes[id]\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$quickSelect.children().removeClass('added')\r\n\t\t\t\t\tupdateQuickSelectButton()\r\n\t\t\t\t\trecomputeLayouts()\r\n\t\t\t\t\twriteTable()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\treturn $div\r\n\t\t}\r\n\t\tconst writeTable=()=>{ // TODO rename (doesn't return object)\r\n\t\t\tconst visibleAncestors={} // including self\r\n\t\t\tconst computeVisibleAncestors=(id,aid)=>{\r\n\t\t\t\tvisibleAncestors[id][aid]=true\r\n\t\t\t\tfor (let naid in unorderedClassSubgraph.visibleParents[aid]) {\r\n\t\t\t\t\tcomputeVisibleAncestors(id,naid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\tvisibleAncestors[id]={}\r\n\t\t\t\tcomputeVisibleAncestors(id,id)\r\n\t\t\t}\r\n\t\t\tconst $classHighlightables={}\r\n\t\t\tlet $attachedMenu, $attachedToButton, attachedDirection, attachTimeoutId\r\n\t\t\tconst setCellClasses=($cell,cell)=>{\r\n\t\t\t\tfor (let dir of ['b','t','bt','rl','rt','bl']) {\r\n\t\t\t\t\tif (cell[dir]) {\r\n\t\t\t\t\t\t$cell.addClass(dir)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst writeTheadButton=($cell,text,tip,dir,nodes)=>{\r\n\t\t\t\tconst keyCodeEnter=13\r\n\t\t\t\tconst keyCodeSpace=32\r\n\t\t\t\tconst keyCodeUp=38\r\n\t\t\t\tconst keyCodeDown=40\r\n\t\t\t\tconst $button=writeButton(text,tip).addClass(dir).click(function(){\r\n\t\t\t\t\tconst removeAttachedMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton.removeClass('attached-t attached-b')\r\n\t\t\t\t\t\t$attachedMenu.remove()\r\n\t\t\t\t\t\tclearTimeout(attachTimeoutId)\r\n\t\t\t\t\t\t$attachedToButton=undefined\r\n\t\t\t\t\t\t$attachedMenu=undefined\r\n\t\t\t\t\t\tattachedDirection=undefined\r\n\t\t\t\t\t\tattachTimeoutId=undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst startAttachingMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton=$button\r\n\t\t\t\t\t\t$attachedMenu=$(\"<ul>\").append(nodes.map(\r\n\t\t\t\t\t\t\tid=>$(\"<li tabindex='0'>\"+data.classes[id].name+\"</li>\").click(function(){\r\n\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\t\t\t\tif (!attachedDirection) return // not yet decided on attach direction (this can't happen)\r\n\t\t\t\t\t\t\t\tif (ev.keyCode==keyCodeUp) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).prev()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='b') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).next()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='t') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace) {\r\n\t\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t\t$cell.append($attachedMenu)\r\n\t\t\t\t\t\tattachTimeoutId=setTimeout(()=>{ // can calculate height only after it's displayed\r\n\t\t\t\t\t\t\tconst mh=$attachedMenu.outerHeight()\r\n\t\t\t\t\t\t\tconst mo=$attachedMenu.offset()\r\n\t\t\t\t\t\t\tconst bh=$button.outerHeight()\r\n\t\t\t\t\t\t\tconst bo=$button.offset()\r\n\t\t\t\t\t\t\tlet t=bo.top-mh+1\r\n\t\t\t\t\t\t\tif (dir!='t' || t<0) { // want below or doesn't fit to screen above the button\r\n\t\t\t\t\t\t\t\tt=bo.top+bh-1\r\n\t\t\t\t\t\t\t\tattachedDirection='b'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$attachedMenu.insertBefore($button)\r\n\t\t\t\t\t\t\t\tattachedDirection='t'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$attachedMenu.offset({\r\n\t\t\t\t\t\t\t\ttop: t,\r\n\t\t\t\t\t\t\t\tleft: mo.left,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t$attachedMenu.addClass('attached')\r\n\t\t\t\t\t\t\t$button.addClass('attached-'+attachedDirection)\r\n\t\t\t\t\t\t},0)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!$button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif ($attachedToButton) {\r\n\t\t\t\t\t\t\tremoveAttachedMenu() // close menu opened elsewhere\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstartAttachingMenu()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tremoveAttachedMenu() // close menu here\r\n\t\t\t\t\t}\r\n\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\tif ($button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif (ev.keyCode==keyCodeUp && attachedDirection=='t') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().last().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown && attachedDirection=='b') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().first().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $button\r\n\t\t\t}\r\n\t\t\tconst writeTheadCell=cell=>{\r\n\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\tif (cell.node!==undefined) {\r\n\t\t\t\t\tconst id=cell.node\r\n\t\t\t\t\t$classHighlightables[id]=$cell\r\n\t\t\t\t\t$cell.append(data.classes[id].htmlName)\r\n\t\t\t\t\tconst ancestors=breadthWalk(unorderedClassSubgraph.allParents,id).reverse()\r\n\t\t\t\t\tif (ancestors.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add ancestor\",\"Add one of supertypes of this equation type\",'t',ancestors)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst descendants=breadthWalk(unorderedClassSubgraph.allChildren,id)\r\n\t\t\t\t\tif (descendants.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add descendant\",\"Add one of subtypes of this equation type\",'b',descendants)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$cell.hover(function(){\r\n\t\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t\t$classHighlightables[aid].addClass('highlight')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t\t$classHighlightables[aid].removeClass('highlight')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn $cell\r\n\t\t\t}\r\n\t\t\tconst writeThead=()=>{\r\n\t\t\t\tconst $thead=$(\"<thead>\")\r\n\t\t\t\tfor (let i=0;i<theadLayout.nodeLayers.length;i++) {\r\n\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t$(\"<tr class='nodes'>\").append(\r\n\t\t\t\t\t\t\ttheadLayout.nodeLayers[i].map(writeTheadCell)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (i<theadLayout.arcLayers.length) {\r\n\t\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t\ttheadLayout.arcLayers[i].map(row=>$(\"<tr class='arcs'>\").append(\r\n\t\t\t\t\t\t\t\trow.map(cell=>{\r\n\t\t\t\t\t\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\t\t\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\t\t\t\t\t\treturn $cell\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $thead\r\n\t\t\t}\r\n\t\t\tconst writeTfoot=()=>{\r\n\t\t\t\treturn $(\"<tfoot>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\ttheadLayout.columns.map(id=>$(\"<td>\").append(\r\n\t\t\t\t\t\t\twriteButton(\"Delete\",\"Delete this equation type\").click(function(){\r\n\t\t\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tconst writeTraitAlignmentControls=()=>{\r\n\t\t\t\tconst $container=$(\"<form>Trait alignment level:</form>\")\r\n\t\t\t\tfor (let i=0;i<=maxTraitAlignmentLevel;i++) {\r\n\t\t\t\t\t$container.append(\r\n\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t\t$(\"<input type='radio' name='trait-alignment-level'>\").prop('checked',i==traitAlignmentLevel).click(function(){\r\n\t\t\t\t\t\t\t\ttraitAlignmentLevel=i\r\n\t\t\t\t\t\t\t\twriteTable()\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\" \"+i\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn $container\r\n\t\t\t}\r\n\t\t\tconst writeDependentVariablesControls=()=>{\r\n\t\t\t\t// TODO text inputs with\r\n\t\t\t\t//\tsuggested names: u, v, w, x, y, z\r\n\t\t\t\t//\texamples: x,y,w; y,v,z\r\n\t\t\t\tconst $container=$(\"<form>Dependent variables notation (main variable, second variable in 2d system, substitution variable):</form>\")\r\n\t\t\t\tfor (let dvs of availableDependentVariables) {\r\n\t\t\t\t\t$container.append(\r\n\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t\t$(\"<input type='radio' name='dependent-variables'>\").prop('checked',dvs==dependentVariables).click(function(){\r\n\t\t\t\t\t\t\t\tdependentVariables=dvs\r\n\t\t\t\t\t\t\t\tnotation=new Notation(dependentVariables)\r\n\t\t\t\t\t\t\t\twriteTable()\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\" \"+viewDependentVariables[dvs]\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn $container\r\n\t\t\t}\r\n\t\t\tconst writeGeneralNotes=()=>{\r\n\t\t\t\tconst nt=notation\r\n\t\t\t\treturn $(\"<ul>\").append(\r\n\t\t\t\t\t`<li>how to read the diagram: <ul>`+\r\n\t\t\t\t\t\t`<li>equation type names are written among arrows that show the relationship between types</li>`+\r\n\t\t\t\t\t\t`<li>properties of an equation type are listed in the table column below its name</li>`+\r\n\t\t\t\t\t\t`<li>every property of the equation type on the tip of the arrow <span class='arrow'></span> is also true for the equation type on the other end of the arrow (like <a href='https://en.wikipedia.org/wiki/Class_diagram'>class diagram</a>)</li>`+\r\n\t\t\t\t\t`</ul></li>`,\r\n\t\t\t\t\t`<li>all functions have to be continuous on the interval of interest</li>`,\r\n\t\t\t\t\t`<li>\\\\( ${nt.x} \\\\), \\\\( ${nt.y} \\\\) or \\\\( ${nt.w} \\\\) possibly with a subscript is a function of \\\\( t \\\\); other functions are written with an argument like this: \\\\( f(t) \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( C \\\\), \\\\( K \\\\) and other uppercase letters are arbitrary constants</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t + C \\\\) is a family of antiderivatives of \\\\( f(t) \\\\) with parameter \\\\( C \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t \\\\) is any single antiderivative of \\\\( f(t) \\\\)`\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t$tableContainer.empty()\r\n\t\t\tconst traitRowsOutput=new TraitRowsOutput(\r\n\t\t\t\ti18n,theadLayout,trLayout,\r\n\t\t\t\tdata.traits,data.classes, // TODO pass data before layouts\r\n\t\t\t\ttraitAlignmentLevel,notation\r\n\t\t\t)\r\n\t\t\tconst formRowsOutput=new FormRowsOutput(\r\n\t\t\t\ti18n,orderedClassSubgraph,theadLayout,\r\n\t\t\t\tdata.classes,\r\n\t\t\t\tnotation,\r\n\t\t\t\t$classHighlightables,\r\n\t\t\t\t(classId,form)=>traitRowsOutput.updateForm(classId,form)\r\n\t\t\t)\r\n\t\t\tif (Object.keys(selectedNodes).length>0) $tableContainer.append(\r\n\t\t\t\t$(\"<table class='classes'>\").append(\r\n\t\t\t\t\twriteThead(),\r\n\t\t\t\t\twriteTfoot(),\r\n\t\t\t\t\t$(\"<tbody>\").append(\r\n\t\t\t\t\t\tformRowsOutput.$trs,\r\n\t\t\t\t\t\ttraitRowsOutput.$trs\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t$tableContainer.append(\r\n\t\t\t\twriteTraitAlignmentControls(),\r\n\t\t\t\twriteDependentVariablesControls(),\r\n\t\t\t\t\"<p>General notes:</p>\",\r\n\t\t\t\twriteGeneralNotes()\r\n\t\t\t)\r\n\t\t\tMathJax.Hub.Queue([\"Typeset\",MathJax.Hub]) // TODO pass table container\r\n\t\t}\r\n\t\t$container.append(\r\n\t\t\twriteQuickSelectControls(),\r\n\t\t\t$tableContainer=$(\"<div>\")\r\n\t\t)\r\n\t\twriteTable()\r\n\t})\r\n})\r\n","'use strict'\r\n\r\n// TODO replace with:\r\n//\tsymbols table\r\n//\ttex helpers\r\n\r\nclass Notation {\r\n\tconstructor(dependentVariables) {\r\n\t\tthis.dependentVariables=dependentVariables // main variable, second variable in 2d system, substitution variable\r\n\t}\r\n\r\n\t// variable names\r\n\tget x() { // main dependent variable\r\n\t\treturn this.dependentVariables.charAt(0)\r\n\t}\r\n\tget X() { // vector of dependent variables\r\n\t\treturn '\\\\mathbf{'+this.dependentVariables.charAt(0).toUpperCase()+'}'\r\n\t}\r\n\tget y() { // second dependent variable for systems of 2 equations\r\n\t\treturn this.dependentVariables.charAt(1)\r\n\t}\r\n\tget w() { // substituted variable\r\n\t\treturn this.dependentVariables.charAt(2)\r\n\t}\r\n\r\n\t// tex shortcuts\r\n\tdd(a,b,n) {\r\n\t\tif (a===undefined) a=''\r\n\t\tif (b===undefined) b='t'\r\n\t\tif (n===undefined) n=1\r\n\t\tif (n==0) {\r\n\t\t\treturn a\r\n\t\t} else if (n==1) {\r\n\t\t\treturn `\\\\frac{\\\\mathrm{d}${a}}{\\\\mathrm{d}${b}}`\r\n\t\t} else {\r\n\t\t\treturn `\\\\frac{\\\\mathrm{d}^{${n}}${a}}{\\\\mathrm{d}${b}^{${n}}}`\r\n\t\t}\r\n\t}\r\n\tget ddt() {\r\n\t\treturn this.dd()\r\n\t}\r\n\tget dxdt() {\r\n\t\treturn this.dd(this.x)\r\n\t}\r\n\tsint(f,t) { // short integral = with no spacing before dt\r\n\t\tif (t===undefined) t='t'\r\n\t\treturn `\\\\int\\\\!${f}\\\\mathrm{d}${t}`\r\n\t}\r\n\tint(f,t) {\r\n\t\treturn this.sint(f+'\\\\,',t)\r\n\t}\r\n\tsys2(a,b) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned} ${a} \\\\\\\\ ${b} \\\\end{aligned} \\\\right.`\r\n\t}\r\n\tvec2(a,b) {\r\n\t\treturn `\\\\begin{bmatrix} ${a} \\\\\\\\ ${b} \\\\end{bmatrix}`\r\n\t}\r\n\tsvec2(a,b) {\r\n\t\treturn `\\\\left[ \\\\begin{smallmatrix} ${a} \\\\\\\\ ${b} \\\\end{smallmatrix} \\\\right]`\r\n\t}\r\n\tmat2(a,b,c,d) {\r\n\t\treturn `\\\\begin{bmatrix} ${a} & ${b} \\\\\\\\ ${c} & ${d} \\\\end{bmatrix}`\r\n\t}\r\n\tsmat2(a,b,c,d) {\r\n\t\treturn `\\\\left[ \\\\begin{smallmatrix} ${a} & ${b} \\\\\\\\ ${c} & ${d} \\\\end{smallmatrix} \\\\right]`\r\n\t}\r\n\tsub(x,s) {\r\n\t\tconst i=x.indexOf('_')\r\n\t\tif (i<0) {\r\n\t\t\treturn x+'_'+s\r\n\t\t} else {\r\n\t\t\treturn x.slice(0,i)+'_{'+x.slice(i+1)+','+s+'}'\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Notation\r\n","'use strict'\r\n\r\n// TODO maybe don't need this class - use iterators on unordered subgraph instead?\r\nclass OrderedClassGraph {\r\n\tconstructor(unorderedClassGraph,orderedClasses) {\r\n\t\tconst ranks={}\r\n\t\torderedClasses.forEach((id,i)=>{\r\n\t\t\tranks[id]=i\r\n\t\t})\r\n\t\tthis.visibleParents={}\r\n\t\tfor (let id in unorderedClassGraph.visibleParents) {\r\n\t\t\tthis.visibleParents[id]=Object.keys(unorderedClassGraph.visibleParents[id]).sort((id1,id2)=>ranks[id1]-ranks[id2])\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=OrderedClassGraph\r\n","'use strict'\r\n\r\nconst sum=(...terms)=>{\r\n\tconst mergeSign=(sign,term)=>{\r\n\t\tif (sign=='-') {\r\n\t\t\tsign='+'\r\n\t\t\tif (term[0][0]=='-') {\r\n\t\t\t\tterm=[term[0].slice(1),...term.slice(1)]\r\n\t\t\t} else {\r\n\t\t\t\tterm=['-'+term[0],...term.slice(1)]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn [sign,term]\r\n\t}\r\n\tconst alterSign=(sign,term)=>{\r\n\t\tif (term[0][0]=='-') {\r\n\t\t\tterm=[term[0].slice(1),...term.slice(1)]\r\n\t\t\tif (sign=='+') {\r\n\t\t\t\tsign='-'\r\n\t\t\t} else if (sign=='-') {\r\n\t\t\t\tsign='+'\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn [sign,term]\r\n\t}\r\n\tlet result=''\r\n\tlet sign=''\r\n\tlet empty=true\r\n\tfor (let term of terms) {\r\n\t\tif (Array.isArray(term) && term[0]!=0) {\r\n\t\t\tterm=term.filter(factor=>factor!=1)\r\n\t\t\tif (term.length==0) term=[1]\r\n\t\t\tif (empty) {\r\n\t\t\t\t[sign,term]=mergeSign(sign,term)\r\n\t\t\t\tresult+=term.join(' ')\r\n\t\t\t\tempty=false\r\n\t\t\t} else {\r\n\t\t\t\t[sign,term]=alterSign(sign,term)\r\n\t\t\t\tresult+=' '+sign+' '+term.join(' ')\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (term=='=') {\r\n\t\t\t\tif (empty) {\r\n\t\t\t\t\tresult+='0'\r\n\t\t\t\t}\r\n\t\t\t\tresult+=' = '\r\n\t\t\t\tsign=''\r\n\t\t\t\tempty=true\r\n\t\t\t} else {\r\n\t\t\t\tsign=term\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (empty) {\r\n\t\tresult+='0'\r\n\t}\r\n\treturn result\r\n}\r\n\r\nconst blockSum=(...terms)=>`\\\\[ `+sum(...terms)+` \\\\]`\r\n\r\nmodule.exports={sum,blockSum}\r\n","'use strict'\r\n\r\nconst makeNodeLabelLayers=require('./thead-layout/node-layers')\r\nconst makeArcLocationLayers=require('./thead-layout/arc-layers')\r\nconst makeLayoutLayers=require('./thead-layout/cell-layers')\r\n\r\nclass TheadLayout {\r\n\tconstructor(unorderedClassGraph) {\r\n\t\tconst orderedVisibleDepthNodes=makeNodeLabelLayers(unorderedClassGraph.visibleParents,unorderedClassGraph.visibleDepthNodes)\r\n\t\tconst arcLocationLayers=makeArcLocationLayers(orderedVisibleDepthNodes,unorderedClassGraph.visibleParents)\r\n\t\tconst t=makeLayoutLayers(orderedVisibleDepthNodes,arcLocationLayers)\r\n\t\tthis.columns=[].concat(...orderedVisibleDepthNodes)\r\n\t\tthis.nodeLayers=t[0]\r\n\t\tthis.arcLayers=t[1]\r\n\t}\r\n}\r\n\r\nmodule.exports=TheadLayout\r\n","'use strict'\r\n\r\nmodule.exports=(depthList,parents)=>{ // TODO would prefer ordered parents list\r\n\tconst merge=(a,b)=>{ // can also use lodash union and sort\r\n\t\tconst c=[]\r\n\t\tlet i=0, j=0\r\n\t\twhile (i<a.length || j<b.length) {\r\n\t\t\tif (j>=b.length) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (i>=a.length) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else if (a[i]<b[j]) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (a[i]>b[j]) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t\tj++\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn c\r\n\t}\r\n\tconst arcRows=[]\r\n\tconst xs={}\r\n\tlet x=0\r\n\tfor (let i=0;i<depthList.length;i++) {\r\n\t\tfor (const node of depthList[i]) {\r\n\t\t\txs[node]=x++\r\n\t\t}\r\n\t\tif (i>0) {\r\n\t\t\tconst arcs=[]\r\n\t\t\tfor (let j=depthList[i].length-1;j>=0;j--) {\r\n\t\t\t\tconst node=depthList[i][j]\r\n\t\t\t\tconst parentXs=Object.keys(parents[node]).map(parentNode=>xs[parentNode]).sort((a,b)=>a-b)\r\n\t\t\t\tarcs.push([parentXs,[xs[node]]])\r\n\t\t\t}\r\n\t\t\tfor (let j=1;j<arcs.length;j++) {\r\n\t\t\t\tif (String(arcs[j-1][0])===String(arcs[j][0])) { // sloppy but should be ok for numbers\r\n\t\t\t\t\tarcs[j-1][1]=merge(arcs[j-1][1],arcs[j][1]) // merge children - parents already merged\r\n\t\t\t\t\tarcs.splice(j,1)\r\n\t\t\t\t\tj-=1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tarcRows.push(arcs)\r\n\t\t}\r\n\t}\r\n\treturn arcRows\r\n}\r\n","'use strict'\r\n\r\n// TODO fake lodash\r\nconst sum=arr=>arr.reduce((a,b)=>a+b,0)\r\n//const times=(n,fn)=>Array(n).map((v,i)=>fn(i))\r\nconst times=(n,fn)=>{\r\n\tvar arr=Array(n)\r\n\tfor (var i=0;i<n;i++) {\r\n\t\tarr[i]=fn(i)\r\n\t}\r\n\treturn arr\r\n}\r\nconst head=arr=>arr[0]\r\nconst last=arr=>arr[arr.length-1]\r\n\r\nmodule.exports=(nodeLabelLayers,arcLocationLayers)=>{\r\n\tconst layoutWidth=sum(nodeLabelLayers.map(x=>x.length))\r\n\tconst makeBlankRow=()=>times(layoutWidth,()=>({}))\r\n\tconst nodeLayoutLayers=[], arcLayoutLayers=[]\r\n\tconst drawArcUp=(i,j,k)=>{\r\n\t\tfor (;i>=0;i--) {\r\n\t\t\tfor (j-=1;j>=0;j--) {\r\n\t\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t\t}\r\n\t\t\tif (nodeLayoutLayers[i][k].node!==undefined) {\r\n\t\t\t\tnodeLayoutLayers[i][k].b=true\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tnodeLayoutLayers[i][k].bt=true\r\n\t\t\tif (i<=0) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tj=arcLayoutLayers[i-1].length\r\n\t\t}\r\n\t}\r\n\tconst drawArcDown=(i,j,k)=>{\r\n\t\tfor (j+=1;j<arcLayoutLayers[i].length;j++) {\r\n\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t}\r\n\t\tnodeLayoutLayers[i+1][k].t=true\r\n\t}\r\n\t// create empty cells\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tnodeLayoutLayers.push(makeBlankRow())\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tarcLayoutLayers.push(arcLocationLayers[i].map(makeBlankRow))\r\n\t}\r\n\t// fill cells\r\n\tlet x=0\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tfor (const node of nodeLabelLayers[i]) {\r\n\t\t\tnodeLayoutLayers[i][x++].node=node\r\n\t\t}\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tfor (let j=0;j<arcLocationLayers[i].length;j++) {\r\n\t\t\tconst parentLocations=arcLocationLayers[i][j][0]\r\n\t\t\tconst childLocations=arcLocationLayers[i][j][1]\r\n\t\t\tlet pi=0, ci=0\r\n\t\t\tfor (let k=0;k<layoutWidth;k++) {\r\n\t\t\t\tif (k>head(parentLocations) && k<last(childLocations)) {\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rl=true\r\n\t\t\t\t}\r\n\t\t\t\tif (k==parentLocations[pi]) {\r\n\t\t\t\t\tpi++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rt=true\r\n\t\t\t\t\tdrawArcUp(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t\tif (k==childLocations[ci]) {\r\n\t\t\t\t\tci++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].bl=true\r\n\t\t\t\t\tdrawArcDown(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn [nodeLayoutLayers,arcLayoutLayers]\r\n}\r\n","'use strict'\r\n\r\n// dag = {nodeLabel:{parentLabel:true,...},...}\r\n// nodes = {nodeLabel:true,...}\r\nmodule.exports=(visibleParents,visibleDepthNodes)=>{\r\n\t// sort nodes at each depth by\r\n\t//\tlexicographic parent order\r\n\t//\tlabel\r\n\tconst orderedVisibleDepthNodes=[]\r\n\tlet nextParentOrder=0\r\n\tconst parentOrder={}\r\n\tfor (let depth in visibleDepthNodes) {\r\n\t\torderedVisibleDepthNodes[depth]=Object.keys(visibleDepthNodes[depth])\r\n\t\tconst sortedParents={}\r\n\t\tfor (let node in visibleDepthNodes[depth]) {\r\n\t\t\tsortedParents[node]=Object.keys(visibleParents[node]).map(\r\n\t\t\t\tparentNode=>parentOrder[parentNode]\r\n\t\t\t).sort((a,b)=>a-b)\r\n\t\t}\r\n\t\torderedVisibleDepthNodes[depth].sort((node0,node1)=>{\r\n\t\t\tconst p0=sortedParents[node0]\r\n\t\t\tconst p1=sortedParents[node1]\r\n\t\t\tfor (let i=0;i<p0.length||i<p1.length;i++) {\r\n\t\t\t\tconst cmpLen=(i<p0.length)-(i<p1.length)\r\n\t\t\t\tif (cmpLen!=0) {\r\n\t\t\t\t\treturn cmpLen\r\n\t\t\t\t}\r\n\t\t\t\tconst cmpOrd=p0[i]-p1[i]\r\n\t\t\t\tif (cmpOrd!=0) {\r\n\t\t\t\t\treturn cmpOrd\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (node0<node1) {\r\n\t\t\t\treturn -1\r\n\t\t\t} else if (node0>node1) {\r\n\t\t\t\treturn +1\r\n\t\t\t} else {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t})\r\n\t\tfor (const node of orderedVisibleDepthNodes[depth]) {\r\n\t\t\tparentOrder[node]=nextParentOrder++\r\n\t\t}\r\n\t}\r\n\treturn orderedVisibleDepthNodes\r\n}\r\n","'use strict'\r\n\r\nclass TrLayout {\r\n\tconstructor(classSubgraph,classData,classColumns) {\r\n\t\tthis.classSubgraph=classSubgraph\r\n\t\tthis.classData=classData\r\n\t\tthis.classColumns=classColumns\r\n\t}\r\n\r\n\t// returns list of cells: list of (class id, trait id)\r\n\t// \tclass id = which class to take property from\r\n\t// returns null if row is to be skipped\r\n\tgetSubtreeLayout(traitSubtree) {\r\n\t\tconst ancestorsHaveIntegratedTrait=(classId,traitId)=>{\r\n\t\t\tconst visited={}\r\n\t\t\tconst walk=classId=>{\r\n\t\t\t\tif (visited[classId]) return false\r\n\t\t\t\tvisited[classId]=true\r\n\t\t\t\tif (getIntegratedClassesForTrait(classId,traitId).length>0) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\tfor (let vpid in this.classSubgraph.visibleParents[classId]) {\r\n\t\t\t\t\tif (walk(vpid)) {\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tfor (let vpid in this.classSubgraph.visibleParents[classId]) {\r\n\t\t\t\tif (walk(vpid)) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tconst getIntegratedClassesForTrait=(classId,traitId)=>{ // TODO memoize?\r\n\t\t\tconst integratedClassIds=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst walk=id=>{\r\n\t\t\t\tif (visited[id]) return\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tconst trait=this.classData[id].traits[traitId]\r\n\t\t\t\tif (trait) {\r\n\t\t\t\t\tif (!trait.close || ancestorsHaveIntegratedTrait(classId,traitId)) {\r\n\t\t\t\t\t\tintegratedClassIds.push(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tObject.keys(this.classSubgraph.integratedAncestors[classId][id]).sort().forEach(walk)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twalk(classId)\r\n\t\t\treturn integratedClassIds\r\n\t\t}\r\n\r\n\t\tconst cells=this.classColumns.map(classId=>{\r\n\t\t\tconst cell=[]\r\n\t\t\tconst walkTraits=(traitSubtree)=>{\r\n\t\t\t\tconst traitId=traitSubtree[0]\r\n\t\t\t\tconst traitChildren=traitSubtree[1]\r\n\t\t\t\tif (traitChildren) {\r\n\t\t\t\t\ttraitChildren.forEach(walkTraits)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (const id of getIntegratedClassesForTrait(classId,traitId)) {\r\n\t\t\t\t\t\tcell.push([id,traitId])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twalkTraits(traitSubtree)\r\n\t\t\treturn cell\r\n\t\t})\r\n\r\n\t\t// compared traits filtering\r\n\t\tconst keepTraits={}\r\n\t\tfor (const cell of cells) {\r\n\t\t\tfor (const classTraitId of cell) {\r\n\t\t\t\tconst classId=classTraitId[0]\r\n\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\tconst trait=this.classData[classId].traits[traitId]\r\n\t\t\t\tif (!trait.compare) {\r\n\t\t\t\t\tkeepTraits[traitId]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i=0;i<cells.length;i++) {\r\n\t\t\tcells[i]=cells[i].filter(classTraitId=>{\r\n\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\treturn keepTraits[traitId]\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// empty row detection\r\n\t\tif (cells.some(cell=>cell.length>0)) {\r\n\t\t\treturn cells\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TrLayout\r\n","'use strict'\r\n\r\nconst detailsPolyfill=require('crnx-base/details-polyfill')\r\n\r\nconst mathjaxDetailsFixAndPolyfill=function(){\r\n\tdetailsPolyfill.apply(this)\r\n\t$(this).on('toggle',function(){\r\n\t\t// mathjax common html renderer needs this to set correct font size\r\n\t\t// have to do it on every details opening, not just once b/c user can request redraw at any time\r\n\t\t// closed <details> behave like display:none; see http://stackoverflow.com/questions/36779037/mathjax-2-6-font-size-in-hidden-elements\r\n\t\tif ($(this).attr('open')) { // can't test for prop('open') when it's polyfilled\r\n\t\t\tMathJax.Hub.Queue([\"Rerender\",MathJax.Hub,this])\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// produces array of <tr>'s in this.$trs\r\nclass TraitRowsOutput {\r\n\tconstructor(i18n,theadLayout,trLayout,traitData,classData,traitAlignmentLevel,notation) {\r\n\t\tthis.columnTraitCells=theadLayout.columns.map(()=>[])\r\n\t\tconst writeTraitItem=(forClassId,fromClassId,traitId,selectedForm)=>{\r\n\t\t\tconst trait=classData[fromClassId].traits[traitId]\r\n\t\t\tif (!trait.contents) return // when trait is closed w/o contents\r\n\t\t\tconst getTitle=()=>{\r\n\t\t\t\tif (trait.title!==undefined) {\r\n\t\t\t\t\treturn trait.title\r\n\t\t\t\t} else if (trait.compare) {\r\n\t\t\t\t\treturn \"Property comparable to <em>\"+i18n('trait.'+traitId)+\"</em>\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn i18n('trait.'+traitId)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst $trait=$(\"<details class='trait'>\").append(\r\n\t\t\t\t$(\"<summary>\").append(getTitle())\r\n\t\t\t).each(mathjaxDetailsFixAndPolyfill)\r\n\t\t\tconst rec=(line)=>{\r\n\t\t\t\tif (typeof line == 'string') {\r\n\t\t\t\t\treturn $(\"<div class='line'>\").append(line)\r\n\t\t\t\t} else if (typeof line == 'function') {\r\n\t\t\t\t\treturn line()\r\n\t\t\t\t} else if (line.type=='derivation' || line.type=='proof' || line.type=='example' || line.type=='case' || line.type=='extra') {\r\n\t\t\t\t\treturn $(\"<details>\").append(\r\n\t\t\t\t\t\t$(\"<summary>\").append(line.title!==undefined ? line.title : line.type),\r\n\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t).each(mathjaxDetailsFixAndPolyfill)\r\n\t\t\t\t} else if (line.type=='switch') {\r\n\t\t\t\t\treturn $(\"<div class='\"+line.type+\"'>\").append(\r\n\t\t\t\t\t\t$(\"<div class='condition'>\").append(line.title!==undefined ? line.title : line.type,':'),\r\n\t\t\t\t\t\t$(\"<div class='cases'>\").append(\r\n\t\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn $(\"<div class='\"+line.type+\"'>\").append(\r\n\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet hasSelectedForm=false\r\n\t\t\tfor (let selectedFormType of selectedForm.split(',')) {\r\n\t\t\t\tif (trait.contents[selectedFormType]!==undefined) {\r\n\t\t\t\t\t$trait.append(trait.contents[selectedFormType](notation).map(rec))\r\n\t\t\t\t\thasSelectedForm=true\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!hasSelectedForm) {\r\n\t\t\t\tlet preferredForm\r\n\t\t\t\tfor (let form of classData[fromClassId].forms) {\r\n\t\t\t\t\tif (form.is.split(',')/*:Array*/.includes(trait.formType)) {\r\n\t\t\t\t\t\tpreferredForm=form\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$trait.append(\r\n\t\t\t\t\trec({type:'note',content:[\r\n\t\t\t\t\t\t\"when equation is written as\"+(forClassId!=fromClassId ? \" <em>\"+classData[fromClassId].htmlName+\"</em>:\" : \":\"),\r\n\t\t\t\t\t\t\"\\\\[\"+preferredForm.equation(notation)+\"\\\\]\",\r\n\t\t\t\t\t]}),\r\n\t\t\t\t\ttrait.contents[trait.formType](notation).map(rec)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn $trait\r\n\t\t}\r\n\t\tconst writeTraitCell=(forClassId,traitCell,selectedForm)=>{\r\n\t\t\tconst $cell=$(\"<td>\")\r\n\t\t\tif (traitCell.length>0) {\r\n\t\t\t\t// TODO put trait+form logic into TrLayout\r\n\t\t\t\t// ..or not - not sure if it's useful\r\n\t\t\t\t//const selectedFormTypes=selectedForm.split(',')\r\n\t\t\t\t//let traitCellFitting=traitCell.filter(([fromClassId,traitId])=>{\r\n\t\t\t\t//\tconst trait=classData[fromClassId].traits[traitId]\r\n\t\t\t\t//\treturn selectedFormTypes.some(selectedFormType=>trait.contents[selectedFormType]!==undefined)\r\n\t\t\t\t//})\r\n\t\t\t\t//if (traitCellFitting.length==0) { // TODO wrong! need to have at least one of each trait\r\n\t\t\t\t//\ttraitCellFitting=traitCell\r\n\t\t\t\t//}\r\n\t\t\t\t//$cell.append(traitCellFitting.map(([fromClassId,traitId])=>{\r\n\t\t\t\t//\treturn writeTraitItem(forClassId,fromClassId,traitId,selectedForm)\r\n\t\t\t\t//}))\r\n\t\t\t\t$cell.append(traitCell.map(([fromClassId,traitId])=>{\r\n\t\t\t\t\treturn writeTraitItem(forClassId,fromClassId,traitId,selectedForm)\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t\treturn $cell\r\n\t\t}\r\n\t\tconst writeTraitRow=(traitSubtree)=>{\r\n\t\t\tconst traitCells=trLayout.getSubtreeLayout(traitSubtree)\r\n\t\t\tif (!traitCells) return null\r\n\t\t\treturn $(\"<tr>\").append(traitCells.map(\r\n\t\t\t\t(traitCell,iColumn)=>{\r\n\t\t\t\t\tconst forClassId=theadLayout.columns[iColumn]\r\n\t\t\t\t\tconst selectedForm=classData[forClassId].forms[0].is\r\n\t\t\t\t\tconst cellWriterForForm=form=>writeTraitCell(forClassId,traitCell,form)\r\n\t\t\t\t\tconst $cell=cellWriterForForm(selectedForm)\r\n\t\t\t\t\tthis.columnTraitCells[iColumn].push([$cell,cellWriterForForm])\r\n\t\t\t\t\treturn $cell\r\n\t\t\t\t}\r\n\t\t\t))\r\n\t\t}\r\n\t\tthis.$trs=[]\r\n\t\tconst rec=(traitSubtree,depth)=>{\r\n\t\t\tconst traitId=traitSubtree[0]\r\n\t\t\tconst traitChildren=traitSubtree[1]\r\n\t\t\tif (depth>=traitAlignmentLevel || !traitChildren) {\r\n\t\t\t\tthis.$trs.push(writeTraitRow(traitSubtree))\r\n\t\t\t} else {\r\n\t\t\t\ttraitChildren.forEach(traitChild=>rec(traitChild,depth+1))\r\n\t\t\t}\r\n\t\t}\r\n\t\trec(['root',traitData],0)\r\n\t}\r\n\tupdateForm(iColumn,form) {\r\n\t\tfor (let i=0;i<this.columnTraitCells[iColumn].length;i++) {\r\n\t\t\tconst [$oldCell,cellWriterForForm]=this.columnTraitCells[iColumn][i]\r\n\t\t\tconst $newCell=cellWriterForForm(form)\r\n\t\t\t$oldCell.replaceWith($newCell)\r\n\t\t\tthis.columnTraitCells[iColumn][i][0]=$newCell\r\n\t\t\tMathJax.Hub.Queue([\"Typeset\",MathJax.Hub,$newCell[0]])\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TraitRowsOutput\r\n","'use strict'\r\n\r\nclass UnorderedClassGraph {\r\n\tconstructor(classData,visibleClasses) {\r\n\t\tconst invertGraph=(graph)=>{\r\n\t\t\tconst igraph={}\r\n\t\t\tfor (let id in graph) {\r\n\t\t\t\tigraph[id]={}\r\n\t\t\t}\r\n\t\t\tfor (let id in graph) {\r\n\t\t\t\tfor (let pid in graph[id]) {\r\n\t\t\t\t\tigraph[pid][id]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn igraph\r\n\t\t}\r\n\r\n\t\t// this.allParents and this.allChildren\r\n\t\tthis.allParents={}\r\n\t\tfor (let id in classData) {\r\n\t\t\tthis.allParents[id]=classData[id].parents\r\n\t\t}\r\n\t\tthis.allChildren=invertGraph(this.allParents)\r\n\r\n\t\t// this.visibleParents, this.visibleChildren, this.visibleDepthNodes\r\n\t\tconst ancestorDistances={} // {node:{ancestorNode:distance,...},...}; node is any node, ancestorNode is one of selectedNodes\r\n\t\tconst addAncestorDistance=(fromNode,toNode,distance)=>{\r\n\t\t\tconst oldDistance=ancestorDistances[fromNode][toNode]\r\n\t\t\tconst newDistance=(oldDistance===undefined\r\n\t\t\t\t? distance\r\n\t\t\t\t: Math.max(distance,oldDistance)\r\n\t\t\t)\r\n\t\t\tancestorDistances[fromNode][toNode]=newDistance\r\n\t\t}\r\n\t\tconst traverseNode=node=>{\r\n\t\t\tif (ancestorDistances[node]) {\r\n\t\t\t\treturn // already visited\r\n\t\t\t}\r\n\t\t\tancestorDistances[node]={}\r\n\t\t\tfor (let parentNode in this.allParents[node]) {\r\n\t\t\t\ttraverseNode(parentNode)\r\n\t\t\t\tif (visibleClasses[parentNode]) {\r\n\t\t\t\t\taddAncestorDistance(node,parentNode,1)\r\n\t\t\t\t}\r\n\t\t\t\tfor (let ancestorNode in ancestorDistances[parentNode]) {\r\n\t\t\t\t\tconst parentDistance=ancestorDistances[parentNode][ancestorNode]\r\n\t\t\t\t\taddAncestorDistance(node,ancestorNode,parentDistance+!!visibleClasses[parentNode])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.visibleDepthNodes=[]\r\n\t\tthis.visibleParents={}\r\n\t\tfor (let node in visibleClasses) {\r\n\t\t\ttraverseNode(node)\r\n\t\t\tlet depth=0\r\n\t\t\tthis.visibleParents[node]={}\r\n\t\t\tfor (let ancestorNode in ancestorDistances[node]) {\r\n\t\t\t\tconst distance=ancestorDistances[node][ancestorNode]\r\n\t\t\t\tif (distance>depth) {\r\n\t\t\t\t\tdepth=distance\r\n\t\t\t\t}\r\n\t\t\t\tif (distance==1) {\r\n\t\t\t\t\tthis.visibleParents[node][ancestorNode]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.visibleDepthNodes[depth]===undefined) {\r\n\t\t\t\tthis.visibleDepthNodes[depth]={}\r\n\t\t\t}\r\n\t\t\tthis.visibleDepthNodes[depth][node]=true\r\n\t\t}\r\n\t\tthis.visibleChildren=invertGraph(this.visibleParents)\r\n\r\n\t\t// this.integratedAncestors = ancestors that are not (visible parents and/or ancestors of visible parents)\r\n\t\tthis.integratedAncestors={}\r\n\t\tfor (let cid in visibleClasses) {\r\n\t\t\tconst masked={}\r\n\t\t\tconst maskAncestors=id=>{\r\n\t\t\t\tif (masked[id]) return\r\n\t\t\t\tmasked[id]=true\r\n\t\t\t\tfor (let pid in this.allParents[id]) {\r\n\t\t\t\t\tmaskAncestors(pid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let pid in this.visibleParents[cid]) {\r\n\t\t\t\tmaskAncestors(pid)\r\n\t\t\t}\r\n\t\t\tthis.integratedAncestors[cid]={}\r\n\t\t\tconst integrateAncestors=id=>{\r\n\t\t\t\tif (this.integratedAncestors[cid][id]) return\r\n\t\t\t\tthis.integratedAncestors[cid][id]={}\r\n\t\t\t\tfor (let pid in this.allParents[id]) {\r\n\t\t\t\t\tif (!masked[pid]) {\r\n\t\t\t\t\t\tthis.integratedAncestors[cid][id][pid]=true\r\n\t\t\t\t\t\tintegrateAncestors(pid)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tintegrateAncestors(cid)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=UnorderedClassGraph\r\n"],"sourceRoot":"."}