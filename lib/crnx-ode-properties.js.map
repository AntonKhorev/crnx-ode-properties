{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/crnx-base/details-polyfill.js","crnx-ode-properties.js","node_modules/crnx-build/babel-helpers/math-sign.es5","src/data.js","src/data/equations-1st.js","src/data/equations-2nd.js","src/data/equations-nth.js","src/data/systems.js","src/lhc-plot.js","src/lhc-plot/canvas.js","src/lhc-plot/closest-point-on-hyperbola.js","src/lhc-plot/matrix.js","src/lhc-plot/phase-canvas.js","src/lhc-plot/trdet-canvas.js","src/main.js","src/notation.js","src/ordered-class-subgraph.js","src/thead-layout.js","src/thead-layout/arc-layers.js","src/thead-layout/cell-layers.js","src/thead-layout/node-layers.js","src/tr-layout.js","src/unordered-class-subgraph.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","detailsSupported","document","createElement","$details","$","this","on","ev","preventDefault","toggleOpen","attr","removeAttr","trigger","keyCodeEnter","keyCodeSpace","handleEvent","target","closest","is","addClass","children","click","keydown","keyCode",2,"Math","sign","x","isNaN",3,"traits","nt","classes","merge","mergedClassesGenerator","mergedClasses","id","4","5","6","7","eqsol","name","o1","parents","sn","importance","equation","dxdt","testSolutionMethod","content","o1_separable","htmlName","generalSolutionMethod","form","type","int","equilibriumSolutionMethod","o1_autonomous","isoclineProperty","shiftSolutionRelation","o1_bernoulli","equationNotes","w","dd","sint","o1_linear","associatedHomogeneousEquation","solutionSpaceBasis","homogeneitySolutionRelation","compare","additivitySolutionRelation","twoLinearCombinationSolutionRelation","nLinearCombinationSolutionRelation","twoAffineCombinationSolutionRelation","nAffineCombinationSolutionRelation","associatedSolutionRelation","title","ddt","close","o1_linearHomogeneous","o1_separableInT","o1_linearHomogeneousConstant","on_linearHomogeneousConstant","characteristicEquation","o1_expGrowth","o1_expDecay","halfLife","o1_logisticGrowth","ivp","lhc_characteristicEquation","b","c","lhc_orderReduction","y","lhc_generalSolutionMethod","mat2","vec2","harmonicOscillatorType","wiki","discriminantRelation","o2_harmonicOscillator","hasForm","o2","orderReduction","o2_autonomous","o2_linearHomogeneous","o2_linearHomogeneousConstant","o2_simpleHarmonicOscillator","o2_underdampedHarmonicOscillator","o2_criticallyDampedHarmonicOscillator","o2_overdampedHarmonicOscillator","o2_vanDerPol","o2_unforcedDuffing","LhcPlot","vectorEquation","X","s2","s2_partlyDecoupled","s2_autonomous","s2_linearHomogeneous","s2_linearHomogeneousConstant","svec2","plot","$output","sn_sir","phaseSolutionMethod","8","detailsPolyfill","Matrix","TrdetCanvas","PhaseCanvas","xLabel","yLabel","___babelHelper___classCallCheck","matrix","$numberInputs","$rangeInputs","$equilibriumType","trdetCanvas","phaseCanvas","updateDetails","updateEquilibriumType","getEquilibriumType","D","det","T","tr","ssc","text","forUpdated","cf","val","redraw","getCoefInputs","coef","isMatrixElement","valueRange","getRange","initCoefInput","getValue","setValue","$input","checkValidity","value","Number","$div","label","slice","charAt","$number","$range","append","v","toFixed","setZero","setAssociated","each","buttons","$canvas","width","h","height","trim","tRange","dRange","tClose","dClose","offsetX","d","offsetY","p","abs","setTrdetExternally","11","12","13",9,"Canvas","ctx","getContext","prototype","drawAxes","xAxisSize","yAxisSize","arrowSize","drawAxis","beginPath","moveTo","lineTo","stroke","save","lineWidth","strokeStyle","fillStyle","font","rotate","PI","restore","textBaseline","fillText","textAlign",10,"getClosestPointOnPositiveHyperbolaIn1stQuadrant","C","x0","y0","sqrt","epsilon2","iterationLimit","yx","xy","x1","y1","getClosestPointOnPositiveHyperbola","getClosestPointOnHyperbola","_updated","fn","_computeElementsFromTrdet","_original","_a","_b","_c","_d","_tr","bc","_det","_computeTrdetFromElements","_computeEigenvaluesFromTrdet","discr","root","_re2","_re1","_im1","_im2","_root","re1","re2","im1","im2","_computeTrdetFromEigenvalues","getEigenvector","lambda","getComplexEigenvector","alpha","beta","_setRe","j","_setIm","___babelHelper___createClass","key","get","set","_Canvas","___babelHelper___possibleConstructorReturn","apply","arguments","___babelHelper___inherits","xRange","yRange","drawDirectionField","arrowSpacing","arrowLength","arrowWidth","drawArrow","dx","dy","dl","closePath","fill","nx","floor","ny","drawEigenline","otherLambda","iconSize","icon","scale","transform","_ref","xic","yic","xis","yis","drawEigenlineIcon","dir","drawDiamond","drawTriangle","ofs","drawSolution","color","max","fnOnFractions","xNum","xDen","yNum","yDen","drawFixedPoint","fixedPointSize","arc","drawSaddleOrNodeSolution","lambda1","lambda2","xy1","xy2","x2","y2","_ref2","_ref3","_ref4","k1","k2","_ref5","_ref6","_ref7","T1","T2","dT1","pow","_i","ke1","exp","ke2","dt","min","_i2","_ke","_ke2","_dt","_t","drawSpiralSolution","xxyy","kxc","kxs","kyc","kys","cos","sin","calculateSemiaxes","A","B","F","DIS","A2","B2","A2B2","R2","t0","log","e0","nSegments","ceil","_i3","_t3","c0","s0","_t2","_i4","_s","dtRad","drawDefectiveSolution","t1","dT","fillRect","translate","crosshairSize","pointerSize","pointerMargin","trRange","detRange","drawRegionAreas","drawRegionLines","drawRegionLinesOnce","all","drawParabola","lineCap","drawPosition","SQRT2",14,"UnorderedClassSubgraph","OrderedClassSubgraph","TheadLayout","TrLayout","Notation","dataGenerator","i18n","strings","trait.entity","trait.associatedHomogeneousEquation","trait.characteristicEquation","trait.halfLife","trait.property","trait.isoclineProperty","trait.solutionRelation","trait.shiftSolutionRelation","trait.linearitySolutionRelation","trait.solutionSpaceBasis","trait.homogeneitySolutionRelation","trait.additivitySolutionRelation","trait.twoLinearCombinationSolutionRelation","trait.nLinearCombinationSolutionRelation","trait.twoAffineCombinationSolutionRelation","trait.nAffineCombinationSolutionRelation","trait.associatedSolutionRelation","trait.transform","trait.orderReduction","trait.solutionMethod","trait.generalSolutionMethod","trait.phaseSolutionMethod","trait.equilibriumSolutionMethod","trait.testSolutionMethod","trait.plot","mathjaxDetailsFixAndPolyfill","MathJax","Hub","Queue","$container","empty","selectedNodes","traitAlignmentLevel","maxTraitAlignmentLevel","dependentVariables","availableDependentVariables","viewDependentVariables","xyw","yvz","notation","data","regenerateData","getHtmlName","undefined","unorderedClassSubgraph","theadLayout","orderedClassSubgraph","trLayout","recomputeLayouts","columns","breadthWalk","graph","result","visited","queue","shift","push","Object","keys","sort","writeButton","tip","$button","writeTraitItem","forClassId","fromClassId","traitId","item","getTitle","$item","rec","line","map","_fromForms","forClass","forForm","fromForms","writeTraitCell","traitCell","$cell","classTraitId","classId","writeTraitRow","traitSubtree","traitCells","getSubtreeLayout","$tableContainer","$quickSelect","$quickSelectButton","updateQuickSelectButton","deleteNode","removeClass","writeTable","addNode","writeQuickSelectControls","$option","change","_id","visibleAncestors","computeVisibleAncestors","aid","naid","visibleParents","_id2","$equations","$attachedMenu","$attachedToButton","attachedDirection","attachTimeoutId","setCellClasses","cell","_arr","writeTheadButton","nodes","keyCodeUp","keyCodeDown","removeAttachedMenu","remove","clearTimeout","startAttachingMenu","$toFocus","prev","focus","_$toFocus","next","setTimeout","mh","outerHeight","mo","offset","bh","bo","top","insertBefore","left","last","first","writeTheadCell","node","ancestors","allParents","reverse","descendants","allChildren","writeThead","$thead","nodeLayers","arcLayers","row","writeTfoot","writeTraitRows","output","depth","traitChildren","forEach","traitChild","writeTraitAlignmentControls","_loop","prop","writeDependentVariablesControls","_loop2","dvs","writeEquation","hover","writeGeneralNotes","$td","notes","noteText","columnParents","pid","$li","note","15","16","17","21","22","toUpperCase","OrderedClassGraph","unorderedClassGraph","orderedClasses","ranks","id1","id2","makeNodeLabelLayers","makeArcLocationLayers","makeLayoutLayers","orderedVisibleDepthNodes","visibleDepthNodes","arcLocationLayers","concat","18","19","20","depthList","arcRows","xs","_node","arcs","parentXs","parentNode","_j","String","splice","sum","arr","reduce","times","Array","head","nodeLabelLayers","layoutWidth","makeBlankRow","nodeLayoutLayers","arcLayoutLayers","drawArcUp","k","bt","drawArcDown","parentLocations","childLocations","pi","ci","rl","rt","bl","nextParentOrder","parentOrder","sortedParents","node0","node1","p0","p1","cmpLen","cmpOrd","classSubgraph","classData","classColumns","_this","ancestorsHaveIntegratedTrait","walk","getIntegratedClassesForTrait","vpid","integratedClassIds","trait","integratedAncestors","cells","walkTraits","keepTraits","filter","some","UnorderedClassGraph","visibleClasses","invertGraph","igraph","ancestorDistances","addAncestorDistance","fromNode","toNode","distance","oldDistance","newDistance","traverseNode","ancestorNode","parentDistance","visibleChildren","cid","masked","maskAncestors","integrateAncestors","_pid"],"mappings":"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","file":"crnx-ode-properties.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nconst detailsSupported=('open' in document.createElement('details')) // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\r\n\r\nmodule.exports=function(){ // to be called in .each()\r\n\tconst $details=$(this)\r\n\t$details.on('click','summary :input, summary a[href]',function(ev){ // firefox lets those events through\r\n\t\tev.preventDefault()\r\n\t})\r\n\tif (detailsSupported) return\r\n\tconst toggleOpen=()=>{\r\n\t\tif (!$details.attr('open')) {\r\n\t\t\t$details.attr('open','')\r\n\t\t} else {\r\n\t\t\t$details.removeAttr('open')\r\n\t\t}\r\n\t\t$details.trigger('toggle') // TODO coalesce toggle events\r\n\t}\r\n\tconst keyCodeEnter=13\r\n\tconst keyCodeSpace=32\r\n\tconst handleEvent=ev=>$(ev.target).closest('summary, :input, a[href]').is('summary') // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\r\n\t$details.addClass('polyfill').children('summary').attr('tabindex',0).click(function(ev){\r\n\t\tif (handleEvent(ev)) {\r\n\t\t\ttoggleOpen()\r\n\t\t}\r\n\t}).keydown(function(ev){\r\n\t\tif (handleEvent(ev) && (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace)) {\r\n\t\t\ttoggleOpen()\r\n\t\t\treturn false\r\n\t\t}\r\n\t})\r\n}\r\n",null,"// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\nmodule.exports = Math.sign || function(x){\r\n\tx=+x // convert to a number\r\n\tif (x===0 || isNaN(x)) {\r\n\t\treturn x\r\n\t}\r\n\treturn x>0 ? 1 : -1\r\n}\r\n","'use strict'\r\n\r\nconst traits=[\r\n\t['entity',[\r\n\t\t['associatedHomogeneousEquation'],\r\n\t\t['characteristicEquation'],\r\n\t\t['halfLife'],\r\n\t]],\r\n\t['property',[\r\n\t\t['isoclineProperty'],\r\n\t\t['solutionRelation',[\r\n\t\t\t['shiftSolutionRelation'],\r\n\t\t\t['linearitySolutionRelation',[ // linear and affine properties of solutions\r\n\t\t\t\t['solutionSpaceBasis'],\r\n\t\t\t\t['homogeneitySolutionRelation'],\r\n\t\t\t\t['additivitySolutionRelation'],\r\n\t\t\t\t['twoLinearCombinationSolutionRelation'],\r\n\t\t\t\t['nLinearCombinationSolutionRelation'],\r\n\t\t\t\t['twoAffineCombinationSolutionRelation'],\r\n\t\t\t\t['nAffineCombinationSolutionRelation'],\r\n\t\t\t\t['associatedSolutionRelation'],\r\n\t\t\t]]\r\n\t\t]],\r\n\t]],\r\n\t['transform',[\r\n\t\t['orderReduction'],\r\n\t]],\r\n\t['solutionMethod',[\r\n\t\t['generalSolutionMethod'],\r\n\t\t['phaseSolutionMethod'],\r\n\t\t['equilibriumSolutionMethod'],\r\n\t\t['testSolutionMethod'],\r\n\t]],\r\n\t['plot'],\r\n]\r\n\r\n// class entries:\r\n//\thasForm = use this value as form type instead of class id\r\n//\t...TODO...\r\n\r\n// trait entries:\r\n//\ttitle = redefine title\r\n//\tcontent\r\n//\tform = have to present the equation in which this trait was defined\r\n//\t\tif true: form type is equal to class id\r\n//\t\totherwise: object: { formType1:true, formType2:true, ... }; usually lists children forms\r\n//\tclose = children don't need to inherit this trait; display it only if parents have it displayed\r\n//\tcompare = show only if other classes have this property without compare entry\r\nmodule.exports=(nt)=>{\r\n\tconst classes={}\r\n\tconst merge=(mergedClassesGenerator)=>{\r\n\t\tconst mergedClasses=mergedClassesGenerator(nt)\r\n\t\tfor (let id in mergedClasses) {\r\n\t\t\tclasses[id]=mergedClasses[id]\r\n\t\t}\r\n\t}\r\n\tmerge(require('./data/equations-1st'))\r\n\tmerge(require('./data/equations-2nd'))\r\n\tmerge(require('./data/equations-nth'))\r\n\tmerge(require('./data/systems'))\r\n\treturn {traits,classes}\r\n}\r\n","'use strict'\r\n\r\nconst eqsol=(name)=>`<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>${name}</a>`\r\n\r\nmodule.exports=(nt)=>({\r\n\to1: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"first-order\",\r\n\t\timportance: 0,\r\n\t\tequation: `${nt.dxdt} = f(t,${nt.x})`,\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: { // same as in 'on', done to mask 'sn's trait\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`Can test if \\\\( ${nt.x}_p \\\\) is a solution by substituting \\\\( ${nt.x} = ${nt.x}_p \\\\) into the equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_separable: {\r\n\t\tparents: {\r\n\t\t\to1: true,\r\n\t\t},\r\n\t\tname: \"first-order separable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${nt.dxdt} = f_1(t) \\\\cdot f_2(${nt.x})`,\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f_1(t) \\\\cdot f_2(${nt.x}) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{f_2(${nt.x})} \\\\cdot ${nt.dxdt} = f_1(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f_2(${nt.x})} ${nt.dxdt}`)} = ${nt.int('f_1(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f_2(${nt.x})}`,nt.x)} = ${nt.int('f_1(t)')} + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`solve \\\\( f_2(${nt.x}) = 0 \\\\) for constant \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t\t//`domain is not necessary \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)`\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_autonomous: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t},\r\n\t\tname: \"first-order autonomous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${nt.dxdt} = f(${nt.x})`,\r\n\t\ttraits: {\r\n\t\t\tisoclineProperty: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`isoclines are horizontal`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tshiftSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p(t) \\\\) is a solution, then \\\\( ${nt.x}_p(t+C) \\\\) is a solution`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f(${nt.x}) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{f(${nt.x})} \\\\cdot ${nt.dxdt} = 1 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f(${nt.x})} ${nt.dxdt}`)} = ${nt.int(1)} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f(${nt.x})}`,nt.x)} = t + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`solve \\\\( f(${nt.x}) = 0 \\\\) for constant \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t\t//`domain is \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)` // only if f(y) is continuous\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_bernoulli: {\r\n\t\tparents: {\r\n\t\t\to1: true,\r\n\t\t},\r\n\t\tname: \"Bernoulli\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Bernoulli_differential_equation'>Bernoulli</a>\",\r\n\t\timportance: 2,\r\n\t\tequation: `${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.x}^n`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\( n \\\\neq 1 \\\\)`,\r\n\t\t\t`usually it's also defined that additionally \\\\( n \\\\neq 0 \\\\), but we ignore this requirement here`,\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.x}^n \\\\]`,\r\n\t\t\t\t\t\t`multiply the equation by \\\\( \\\\frac{1-n}{${nt.x}^n} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\begin{multline} `+\r\n\t\t\t\t\t\t\t`\\\\frac{1-n}{${nt.x}^n} ${nt.dxdt} = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`= \\\\frac{(1-n) a(t)}{${nt.x}^{n-1}} + (1-n) b(t) `+\r\n\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t`introduce a new variable`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.w} = \\\\frac{1}{${nt.x}^{n-1}} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.w)} = ${nt.dd(nt.w,nt.x)} ${nt.dxdt} = \\\\frac{1-n}{${nt.x}^n} ${nt.dxdt} \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.w} \\\\) and \\\\( ${nt.dd(nt.w)} \\\\) into the equation`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.w)} = (1-n) a(t) ${nt.w} + (1-n) b(t) \\\\]`,\r\n\t\t\t\t\t\t`solve this equation as a linear equation in \\\\( ${nt.w} \\\\), then return to the original variable \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.w} = (1-n) ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{(n-1)${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{\\\\mu(t)}{${nt.x}^{n-1}} = (1-n) ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`if \\\\( n>0 \\\\), there's an equilibrium solution \\\\( ${nt.x} = 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linear: {\r\n\t\tparents: {\r\n\t\t\to1_bernoulli: true,\r\n\t\t},\r\n\t\tname: \"first-order linear\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t)`,\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p \\\\) is a solution`,\r\n\t\t\t\t\t`and \\\\( ${nt.x}_h \\\\) is a nonzero solution of the associated homogeneous equation`,\r\n\t\t\t\t\t`then \\\\( K ${nt.x}_h + ${nt.x}_p \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thomogeneitySolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\) and \\\\( ${nt.x}_1 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + (1 - K_1) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\tadditivitySolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 + ${nt.x}_2 - ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\ttwoLinearCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 + (1 - K_1 - K_2) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\tnLinearCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i + (1 - \\\\sum\\\\limits_{i=1}^m K_i) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\ttwoAffineCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\) are solutions`,\r\n\t\t\t\t\t`and \\\\( K_1 + K_2 = 1 \\\\)`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tnAffineCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions`,\r\n\t\t\t\t\t`and \\\\( \\\\sum\\\\limits_{i=1}^m K_i = 1 \\\\)`,\r\n\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 - ${nt.x}_2 \\\\) is a solution of the associated homogeneous equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'case',title:\"method of <a href='https://en.wikipedia.org/wiki/Integrating_factor'>integrating factors</a>\",content:[\r\n\t\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\]`,\r\n\t\t\t\t\t\t\t`introduce a new function`,\r\n\t\t\t\t\t\t\t`\\\\[ g(t) = -a(t) \\\\]`,\r\n\t\t\t\t\t\t\t`rewrite the equation with \\\\( g(t) \\\\)`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = b(t) \\\\]`,\r\n\t\t\t\t\t\t\t`introduce the integrating factor`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{${nt.sint('g(t)')}} \\\\]`,\r\n\t\t\t\t\t\t\t`multiply the equation by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + \\\\mu(t) g(t) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + e^{${nt.sint('g(t)')}} g(t) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + ${nt.ddt}(e^{${nt.sint('g(t)')}}) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + ${nt.ddt}(\\\\mu(t)) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.ddt}(\\\\mu(t) ${nt.x}) = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t\t\t`integrate the equation multiplied by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.x} = ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{-${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.x} = ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:\"method of <a href='https://en.wikipedia.org/wiki/Variation_of_parameters'>variation of parameters</a>\",content:[\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`mathematically equivalent to the method of integrating factors`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t`find the general solution \\\\( K ${nt.x}_h \\\\) of the associated homogeneous equation`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}_h = e^{${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t\t{type:'derivation',title:`find \\\\( ${nt.x} \\\\) as \\\\( ${nt.x}_h \\\\) multiplied by an unknown function`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = u(t) ${nt.x}_h \\\\]`,\r\n\t\t\t\t\t\t\t`substitute \\\\( ${nt.x} \\\\) into the original equation`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.ddt}(u(t) ${nt.x}_h) = a(t) u(t) ${nt.x}_h + b(t) \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h + u(t) ${nt.dd(`${nt.x}_h`)} = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`= a(t) u(t) ${nt.x}_h + b(t) `+\r\n\t\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h + u(t) ${nt.ddt}(e^{${nt.sint('a(t)')}}) = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`= a(t) u(t) ${nt.x}_h + b(t) `+\r\n\t\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h + u(t) a(t) e^{${nt.sint('a(t)')}} = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`= a(t) u(t) ${nt.x}_h + b(t) `+\r\n\t\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h + u(t) a(t) ${nt.x}_h = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`= a(t) u(t) ${nt.x}_h + b(t) `+\r\n\t\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.dd('u(t)')} ${nt.x}_h = b(t) \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.dd('u(t)')} = \\\\frac{b(t)}{${nt.x}_h} \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ u(t) = ${nt.int(`\\\\frac{b(t)}{${nt.x}_h}`)} + C \\\\]`,\r\n\t\t\t\t\t\t\t`substitute \\\\( u(t) \\\\) into the expression for \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = ${nt.x}_h \\\\left( ${nt.int(`\\\\frac{b(t)}{${nt.x}_h}`)} + C \\\\right) \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:\"<a href='https://en.wikipedia.org/wiki/Method_of_undetermined_coefficients'>method of undetermined coefficients</a>\",content:[\r\n\t\t\t\t\t\t`find the general solution \\\\( K ${nt.x}_h \\\\) of the associated homogeneous equation`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}_h = e^{${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t\t{type:'derivation',title:`find a particular solution \\\\( ${nt.x}_p \\\\) of the original equation`,content:[\r\n\t\t\t\t\t\t\t`guess the solution form with coefficients to be solved for`,\r\n\t\t\t\t\t\t\t`solve for coefficients`,\r\n\t\t\t\t\t\t\t{type:'example',content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = -2 ${nt.x} + 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t\t\t\t`move all terms with \\\\( ${nt.x} \\\\) to one side`,\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.dxdt} + 2 ${nt.x} = 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t\t\t\t`compare the terms and guess the particular solution form`,\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x}_p = \\\\alpha e^{-t/2} \\\\]`,\r\n\t\t\t\t\t\t\t\t`substitute \\\\( ${nt.x}_p \\\\) into the equation`,\r\n\t\t\t\t\t\t\t\t`\\\\[ - \\\\frac{\\\\alpha}{2} e^{-t/2} + 2 \\\\alpha e^{-t/2} = 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t\t\t\t`divide by \\\\( e^{-t/2} \\\\)`,\r\n\t\t\t\t\t\t\t\t`\\\\[ - \\\\frac{\\\\alpha}{2} + 2 \\\\alpha = 3 \\\\]`,\r\n\t\t\t\t\t\t\t\t`solve for \\\\( \\\\alpha \\\\)`,\r\n\t\t\t\t\t\t\t\t`\\\\[ \\\\alpha = 2 \\\\]`,\r\n\t\t\t\t\t\t\t\t`substitute \\\\( \\\\alpha \\\\) into \\\\( ${nt.x}_p \\\\)`,\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x}_p = 2 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = K ${nt.x}_h + ${nt.x}_p \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`Can't find equilibrium solution like in Bernoulli equation because \\\\( n = 0 \\\\).`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t\to1_linear: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${nt.dxdt} = a(t) \\\\cdot ${nt.x}`,\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`The equation is associated with itself.`,\r\n\t\t\t\t\t]}\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_h \\\\) is a nonzero solution,`,\r\n\t\t\t\t\t`then \\\\( K ${nt.x}_h \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thomogeneitySolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) is a solution,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tadditivitySolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 + ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\ttwoLinearCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tnLinearCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\ttwoAffineCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`This is a special case of a linear combination.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tnAffineCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`This is a special case of a linear combination.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = a(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${nt.int('a(t)')} + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${nt.int('a(t)')} + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\ln|${nt.x}| = ${nt.int('a(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\cdot e^{${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( K = 0 \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_separableInT: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t\to1_linear: true,\r\n\t\t},\r\n\t\tname: \"first-order separable in independent variable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a> in \\\\(t\\\\)\",\r\n\t\timportance: 2,\r\n\t\tequation: `${nt.dxdt} = f(t)`,\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\( ${nt.dxdt} = 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tisoclineProperty: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`isoclines are vertical`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: { // also shiftSolutionRelation\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p \\\\) is a solution`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_p + C \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\( ${nt.x} = C \\\\) is a solution of the associated homogeneous equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(nt.dxdt)} = ${nt.int('f(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.x} = ${nt.int('f(t)')} + C \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`Can't find equilibrium solution like in separable equation because \\\\( f_2(${nt.x}) = 1 \\\\).`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ton_linearHomogeneousConstant: true,\r\n\t\t\to1_autonomous: true,\r\n\t\t\to1_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tequation: `${nt.dxdt} = k \\\\cdot ${nt.x}`,\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tform: {\r\n\t\t\t\t\to1_linearHomogeneousConstant: true,\r\n\t\t\t\t\to1_expGrowth: true,\r\n\t\t\t\t},\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = k \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.x} = e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.ddt} e^{\\\\lambda t} = k \\\\cdot e^{\\\\lambda t} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\lambda \\\\cdot e^{\\\\lambda t} = k \\\\cdot e^{\\\\lambda t} \\\\]`,\r\n\t\t\t\t\t\t`divide by \\\\( e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\lambda = k \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: {\r\n\t\t\t\t\to1_linearHomogeneousConstant: true,\r\n\t\t\t\t\to1_expGrowth: true,\r\n\t\t\t\t},\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = k \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = k \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${nt.int('k')} + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${nt.int('k')} + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\ln|${nt.x}| = k t + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(t) = C_1 e^{k t} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(0) = C_1 e^0 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ C_1 = ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.x}(t) = ${nt.x}(0) e^{kt} \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( ${nt.x}(0) = 0 \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: { // TODO could have inherited from linear homogeneous, but have to override autonomous\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_expGrowth: {\r\n\t\tparents: {\r\n\t\t\to1_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"exponential (natural) growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Exponential_growth#Differential_equation'>exponential (natural) growth</a>\",\r\n\t\timportance: 3,\r\n\t\tequation: `${nt.dxdt} = k \\\\cdot ${nt.x}`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\( k > 0 \\\\) is the growth constant`,\r\n\t\t],\r\n\t\ttraits: {},\r\n\t},\r\n\to1_expDecay: {\r\n\t\tparents: {\r\n\t\t\to1_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"exponential (natural) decay\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Exponential_decay'>exponential (natural) decay</a>\",\r\n\t\timportance: 3,\r\n\t\tequation: `${nt.dxdt} = -k \\\\cdot ${nt.x}`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\( k > 0 \\\\) is the decay constant`,\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = -k \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.x} = e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.ddt} e^{\\\\lambda t} = -k \\\\cdot e^{\\\\lambda t} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\lambda \\\\cdot e^{\\\\lambda t} = -k \\\\cdot e^{\\\\lambda t} \\\\]`,\r\n\t\t\t\t\t\t`divide by \\\\( e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\lambda = -k \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thalfLife: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(t_{1/2}) = \\\\frac 12 \\\\cdot ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t\t`substitute general solution \\\\( ${nt.x}(t) = ${nt.x}(0) e^{-kt} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(0) e^{-kt_{1/2}} = \\\\frac 12 \\\\cdot ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ e^{-kt_{1/2}} = \\\\frac 12 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ -kt_{1/2} = -\\\\ln 2 \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ t_{1/2} = \\\\frac{\\\\ln 2}{k} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = -k \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = -k \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${nt.int('-k')} + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${nt.int('-k')} + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\ln|${nt.x}| = -k t + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(t) = C_1 e^{-k t} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(0) = C_1 e^0 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ C_1 = ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.x}(t) = ${nt.x}(0) e^{-kt} \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( ${nt.x}(0) = 0 \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_logisticGrowth: {\r\n\t\tparents: {\r\n\t\t\to1_autonomous: true,\r\n\t\t\to1_bernoulli: true,\r\n\t\t},\r\n\t\tname: \"logistic growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Logistic_function#In_ecology:_modeling_population_growth'>logistic growth</a>\",\r\n\t\timportance: 2,\r\n\t\tequation: `${nt.dxdt} = r \\\\cdot ${nt.x} \\\\cdot \\\\left(1 - \\\\frac{${nt.x}}{k}\\\\right)`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\( k \\\\) is the <a href='https://en.wikipedia.org/wiki/Carrying_capacity'>carrying capacity</a>`,\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n})\r\n","'use strict'\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nmodule.exports=(nt)=>{\r\n\tconst lhc_characteristicEquation=(a,b,c)=>({\r\n\t\tform: true,\r\n\t\tcontent: [\r\n\t\t\t{type:'derivation',content:[\r\n\t\t\t\t`\\\\[ ${a} ${nt.dd(nt.x,'t',2)} `+(b?`+ ${b} ${nt.dxdt} `:``)+`+ ${c} ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t`substitute \\\\( ${nt.x} = e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t`\\\\[ ${a} ${nt.dd('','t',2)} e^{\\\\lambda t} `+(b?`+ ${b} ${nt.ddt} e^{\\\\lambda t} `:``)+`+ ${c} e^{\\\\lambda t} = 0 \\\\]`,\r\n\t\t\t\t`\\\\[ ${a} \\\\lambda^2 e^{\\\\lambda t} `+(b?`+ ${b} \\\\lambda e^{\\\\lambda t} `:``)+`+ ${c} e^{\\\\lambda t} = 0 \\\\]`,\r\n\t\t\t\t`divide by \\\\( e^{\\\\lambda t} \\\\)`,\r\n\t\t\t]},\r\n\t\t\t`\\\\[ ${a} \\\\lambda^2 `+(b?`+ ${b} \\\\lambda `:``)+`+ ${c} = 0 \\\\]`,\r\n\t\t],\r\n\t})\r\n\tconst lhc_orderReduction=(a,b,c)=>({\r\n\t\ttitle: \"Order reduction to a system of 2 first-order linear homogeneous equations with constant coefficients\",\r\n\t\tform: true,\r\n\t\tcontent: [\r\n\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t`${nt.dd(nt.y)} &= - \\\\frac ${c} ${a} ${nt.x} `+(b?`- \\\\frac ${b} ${a} ${nt.y} `:``)+\r\n\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t],\r\n\t})\r\n\tconst lhc_generalSolutionMethod=(a,b,c)=>({\r\n\t\ttitle: `General and ${ivp} solution`,\r\n\t\tform: true,\r\n\t\tcontent: [\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${a} \\\\lambda^2 + ${b} \\\\lambda + ${c} = 0 \\\\]`,\r\n\t\t\t{type:'switch',title:`roots \\\\( \\\\lambda \\\\) are`,content:[\r\n\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k_1 e^{\\\\lambda t} + k_2 t e^{\\\\lambda t} \\\\]`,\r\n\t\t\t\t\t`constants for ${ivp} solution:`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t`k_1 &= ${nt.x}(0) \\\\\\\\ `+\r\n\t\t\t\t\t\t`k_2 &= ${nt.x}'(0) - \\\\lambda ${nt.x}(0) `+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k_1 e^{\\\\lambda_1 t} + k_2 e^{\\\\lambda_2 t} \\\\]`,\r\n\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t`\\\\[ ${nt.mat2(1,1,'\\\\lambda_1','\\\\lambda_2')} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}(0)`,`${nt.x}'(0)`)} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k_1 e^{\\\\alpha t} \\\\cos \\\\beta t + k_2 e^{\\\\alpha t} \\\\sin \\\\beta t \\\\]`,\r\n\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t`\\\\[ ${nt.mat2(1,0,'\\\\alpha','\\\\beta')} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}(0)`,`${nt.x}'(0)`)} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t],\r\n\t})\r\n\tconst harmonicOscillatorType=(type,wiki,discriminantRelation)=>({\r\n\t\tparents: {\r\n\t\t\to2_harmonicOscillator: true,\r\n\t\t},\r\n\t\tname: `${type} harmonic oscillator`,\r\n\t\thtmlName: `<a href='${wiki}'>${type}</a> harmonic oscillator`,\r\n\t\timportance: 4,\r\n\t\tequation: `${nt.dd(nt.x,'t',2)} = - \\\\frac bm ${nt.dxdt} - \\\\frac km ${nt.x}`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\[ b^2 - 4 m k ${discriminantRelation} 0 \\\\]`,\r\n\t\t\t`usually written as \\\\( m ${nt.dd(nt.x,'t',2)} + b ${nt.dxdt} + k ${nt.x} = 0 \\\\)`,\r\n\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t`\\\\( b \\\\ge 0 \\\\) is the viscous damping coefficient`,\r\n\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t],\r\n\t\thasForm: 'o2_harmonicOscillator',\r\n\t\ttraits: {},\r\n\t})\r\n\treturn {\r\n\t\to2: {\r\n\t\t\tparents: {\r\n\t\t\t\ton: true,\r\n\t\t\t},\r\n\t\t\tname: \"second-order\",\r\n\t\t\timportance: 2,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = f(t,${nt.x},${nt.dxdt})`,\r\n\t\t\ttraits: {\r\n\t\t\t\torderReduction: {\r\n\t\t\t\t\ttitle: \"Order reduction to a system of 2 first-order equations\",\r\n\t\t\t\t\tform: true,\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t`transform to a system of 2 first-order equations`,\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`${nt.dd(nt.y)} &= f(t,${nt.x},${nt.y}) `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_autonomous: {\r\n\t\t\tparents: {\r\n\t\t\t\to2: true,\r\n\t\t\t},\r\n\t\t\tname: \"second-order autonomous\",\r\n\t\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\t\timportance: 2,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = f(${nt.x},${nt.dxdt})`,\r\n\t\t\ttraits: {\r\n\t\t\t\torderReduction: {\r\n\t\t\t\t\ttitle: \"Order reduction to a system of 2 first-order autonomous equations\",\r\n\t\t\t\t\tform: true,\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`${nt.dd(nt.y)} &= f(${nt.x},${nt.y}) `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_linearHomogeneous: {\r\n\t\t\tparents: {\r\n\t\t\t\to2: true,\r\n\t\t\t},\r\n\t\t\tname: \"second-order linear homogeneous\",\r\n\t\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\t\timportance: 2,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = a(t) \\\\cdot ${nt.dxdt} + b(t) \\\\cdot ${nt.x}`,\r\n\t\t\ttraits: {\r\n\t\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\t\tform: true,\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t{type:'switch',title:`\\\\( b(t) \\\\) is`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( b(t) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( b(t) \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_linearHomogeneousConstant: {\r\n\t\t\tparents: {\r\n\t\t\t\ton_linearHomogeneousConstant: true,\r\n\t\t\t\to2_autonomous: true,\r\n\t\t\t\to2_linearHomogeneous: true,\r\n\t\t\t},\r\n\t\t\tname: \"second-order linear homogeneous with constant coefficients\",\r\n\t\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\t\timportance: 2,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = - \\\\frac ba ${nt.dxdt} - \\\\frac ca ${nt.x}`,\r\n\t\t\tequationNotes: [\r\n\t\t\t\t`usually written as \\\\( a ${nt.dd(nt.x,'t',2)} + b ${nt.dxdt} + c ${nt.x} = 0 \\\\)`,\r\n\t\t\t],\r\n\t\t\ttraits: {\r\n\t\t\t\tcharacteristicEquation: lhc_characteristicEquation('a','b','c'),\r\n\t\t\t\torderReduction: lhc_orderReduction('a','b','c'),\r\n\t\t\t\tgeneralSolutionMethod: lhc_generalSolutionMethod('a','b','c'),\r\n\t\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\t\tform: true,\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t{type:'switch',title:`\\\\( c \\\\) is`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( c = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( c \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_harmonicOscillator: {\r\n\t\t\tparents: {\r\n\t\t\t\to2_linearHomogeneousConstant: true,\r\n\t\t\t},\r\n\t\t\tname: \"harmonic oscillator\",\r\n\t\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator'>harmonic oscillator</a>\",\r\n\t\t\timportance: 3,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = - \\\\frac bm ${nt.dxdt} - \\\\frac km ${nt.x}`,\r\n\t\t\tequationNotes: [\r\n\t\t\t\t`usually written as \\\\( m ${nt.dd(nt.x,'t',2)} + b ${nt.dxdt} + k ${nt.x} = 0 \\\\)`,\r\n\t\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t\t`\\\\( b \\\\ge 0 \\\\) is the viscous damping coefficient`,\r\n\t\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t\t],\r\n\t\t\ttraits: {\r\n\t\t\t\tcharacteristicEquation: lhc_characteristicEquation('m','b','k'),\r\n\t\t\t\torderReduction: lhc_orderReduction('m','b','k'),\r\n\t\t\t\tgeneralSolutionMethod: lhc_generalSolutionMethod('m','b','k'),\r\n\t\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\t\tform: {\r\n\t\t\t\t\t\to2_harmonicOscillator: true,\r\n\t\t\t\t\t\to2_simpleHarmonicOscillator: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`no other equilibrium solution is possible because \\\\( k > 0 \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_underdampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\t\"underdamped\",\r\n\t\t\t\"https://en.wikipedia.org/wiki/Damping#Under-damping_.280_.E2.89.A4_.CE.B6_.3C_1.29\",\r\n\t\t\t\"&lt;\"\r\n\t\t),\r\n\t\to2_criticallyDampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\t\"critically damped\",\r\n\t\t\t\"https://en.wikipedia.org/wiki/Damping#Critical_damping_.28.CE.B6_.3D_1.29\",\r\n\t\t\t\"=\"\r\n\t\t),\r\n\t\to2_overdampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\t\"overdamped\",\r\n\t\t\t\"https://en.wikipedia.org/wiki/Damping#Over-damping_.28.CE.B6_.3E_1.29\",\r\n\t\t\t\">\"\r\n\t\t),\r\n\t\to2_simpleHarmonicOscillator: {\r\n\t\t\tparents: {\r\n\t\t\t\to2_underdampedHarmonicOscillator: true,\r\n\t\t\t},\r\n\t\t\tname: \"simple (undamped) harmonic oscillator\",\r\n\t\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Simple_harmonic_oscillator'>simple (undamped) harmonic oscillator</a>\",\r\n\t\t\timportance: 3,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = - \\\\frac km ${nt.x}`,\r\n\t\t\tequationNotes: [\r\n\t\t\t\t`usually written as \\\\( m ${nt.dd(nt.x,'t',2)} + k ${nt.x} = 0 \\\\)`,\r\n\t\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t\t],\r\n\t\t\ttraits: {\r\n\t\t\t\tcharacteristicEquation: lhc_characteristicEquation('m',0,'k'),\r\n\t\t\t\torderReduction: lhc_orderReduction('m',0,'k'),\r\n\t\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\t\tform: true,\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\t\t\t\t`\\\\[ m \\\\lambda^2 + k = 0 \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\lambda = \\\\pm i \\\\sqrt{\\\\frac km} \\\\]`,\r\n\t\t\t\t\t\t\t`see harmonic oscillator - general solution - <em>complex conjugate pair</em> case`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = k_1 \\\\cos \\\\sqrt{\\\\frac km} t + k_2 \\\\sin \\\\sqrt{\\\\frac km} t \\\\]`,\r\n\t\t\t\t\t\t`constants for ${ivp} solution:`,\r\n\t\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`k_1 &= ${nt.x}(0) \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`k_2 &= \\\\sqrt{\\\\frac mk} ${nt.x}'(0) `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_vanDerPol: {\r\n\t\t\tparents: {\r\n\t\t\t\to2_autonomous: true,\r\n\t\t\t},\r\n\t\t\tname: \"Van der Pol\",\r\n\t\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Van_der_Pol_oscillator'>Van der Pol</a>\",\r\n\t\t\timportance: 3,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = \\\\mu(1-${nt.x}^2)${nt.dxdt} - ${nt.x}`,\r\n\t\t\ttraits: {},\r\n\t\t},\r\n\t\to2_unforcedDuffing: {\r\n\t\t\tparents: {\r\n\t\t\t\to2_autonomous: true,\r\n\t\t\t},\r\n\t\t\tname: \"unforced Duffing\",\r\n\t\t\thtmlName: \"unforced <a href='https://en.wikipedia.org/wiki/Duffing_equation'>Duffing</a>\",\r\n\t\t\timportance: 3,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = - \\\\delta ${nt.dxdt} - \\\\alpha ${nt.x} - \\\\beta ${nt.x}^3`,\r\n\t\t\ttraits: {},\r\n\t\t},\r\n\t}\r\n}\r\n","'use strict'\r\n\r\nmodule.exports=(nt)=>({\r\n\ton: {\r\n\t\tparents: {},\r\n\t\tname: \"nth-order\",\r\n\t\thtmlName: \"<em>n</em>th-order\",\r\n\t\timportance: 2,\r\n\t\tequation: `${nt.dd(nt.x,'t','n')} = f(t,${nt.x},${nt.dxdt},\\\\dotsc,${nt.dd(nt.x,'t','n-1')})`,\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`Can test if \\\\( ${nt.x}_p \\\\) is a solution by substituting \\\\( ${nt.x} = ${nt.x}_p \\\\) into the equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\ton_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\t//equation: `y^{(n)} = - \\\\tfrac{a_{n-1}}{a_n} y^{(n-1)} - \\\\cdots - \\\\tfrac{a_1}{a_n} y' - \\\\tfrac{a_0}{a_n} y`,\r\n\t\tequation: `${nt.dd(nt.x,'t','n')} = - \\\\sum_{i=0}^{n-1} \\\\frac{a_i}{a_n} ${nt.dd(nt.x,'t','i')}`,\r\n\t\tequationNotes: [\r\n\t\t\t`usually written as \\\\( \\\\sum_{i=0}^n a_i ${nt.dd(nt.x,'t','i')} = 0 \\\\)`,\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ \\\\sum_{i=0}^n a_i ${nt.dd(nt.x,'t','i')} = 0 \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.x} = e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\sum_{i=0}^n a_i ${nt.dd('','t','i')} e^{\\\\lambda t} = 0 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\sum_{i=0}^n a_i \\\\lambda^i e^{\\\\lambda t} = 0 \\\\]`,\r\n\t\t\t\t\t\t`divide by \\\\( e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\sum_{i=0}^n a_i \\\\lambda^i = 0 \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n})\r\n","'use strict'\r\n\r\nconst LhcPlot=require('../lhc-plot')\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nmodule.exports=(nt)=>({\r\n\tsn: {\r\n\t\tparents: {},\r\n\t\tname: \"system of n first-order\",\r\n\t\thtmlName: \"system of <em>n</em> first-order\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{array}{c}`+\r\n\t\t\t\t`${nt.dd(`${nt.x}_1`)} = f_1(t,${nt.x}_1,\\\\dotsc,${nt.x}_n) \\\\\\\\`+\r\n\t\t\t\t`\\\\vdots \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(`${nt.x}_n`)} = f_n(t,${nt.x}_1,\\\\dotsc,${nt.x}_n)`+\r\n\t\t\t`\\\\end{array} \\\\right.`,\r\n\t\tvectorEquation: `${nt.dd(nt.X)} = \\\\mathbf{F}(t,${nt.X})`,\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`Can test if \\\\( ${nt.X}_p \\\\) is a solution by substituting \\\\( ${nt.X} = ${nt.X}_p \\\\) into the equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd(nt.x)} &= f(t,${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(nt.y)} &= g(t,${nt.x},${nt.y})`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\tvectorEquation: `${nt.dd(nt.X)} = \\\\mathbf{F}(t,${nt.X})`,\r\n\t\ttraits: {},\r\n\t},\r\n\ts2_partlyDecoupled: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"partly decoupled system of 2 first-order\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd(nt.x)} &= f(t,${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(nt.y)} &= g(t,${nt.y})`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`Solve \\\\(${nt.dd(nt.y)} = g(t,${nt.y}) \\\\).`,\r\n\t\t\t\t\t`Substitute \\\\( ${nt.y} \\\\) into \\\\( ${nt.dd(nt.x)} = f(t,${nt.x},${nt.y}) \\\\).`,\r\n\t\t\t\t\t{type:'example',content:[\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t`${nt.dd(nt.x)} &= 2 ${nt.y} - ${nt.x} \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${nt.dd(nt.y)} &= ${nt.y}`+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t`solve the second equation`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.y} = ${nt.y}_0 e^t \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.y} \\\\) into the first equation`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.x)} = 2 ${nt.y}_0 e^t - ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t{type:'derivation',title:`solve the first equation`,content:[\r\n\t\t\t\t\t\t\t`solve the associated homogeneous equation \\\\( ${nt.dd(nt.x)} = - ${nt.x} \\\\)`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x}_h = K e^{-t} \\\\]`,\r\n\t\t\t\t\t\t\t{type:'derivation',title:`find a particular solution of \\\\( ${nt.dd(nt.x+'_p')} + ${nt.x}_p = 2 ${nt.y}_0 e^t \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`guess a solution`,\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x}_p = \\\\alpha e^t \\\\]`,\r\n\t\t\t\t\t\t\t\t`substitute the guess into the equation`,\r\n\t\t\t\t\t\t\t\t`\\\\[ \\\\alpha e^t + \\\\alpha e^t = 2 ${nt.y}_0 e^t \\\\]`,\r\n\t\t\t\t\t\t\t\t`\\\\[ \\\\alpha = ${nt.y}_0 \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x}_p = ${nt.y}_0 e^t \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = ${nt.x}_p + ${nt.x}_h \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = ${nt.y}_0 e^t + K e^{-t} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = ${nt.y}_0 e^t + (${nt.x}_0 - ${nt.y}_0) e^{-t} \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_autonomous: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order autonomous\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd(nt.x)} &= f(${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(nt.y)} &= g(${nt.x},${nt.y})`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\tvectorEquation: `${nt.dd(nt.X)} = \\\\mathbf{F}(${nt.X})`,\r\n\t\ttraits: {},\r\n\t},\r\n\ts2_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order linear homogeneous equations\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd(nt.x)} &= a(t) \\\\, ${nt.x} + b(t) \\\\, ${nt.y} \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(nt.y)} &= c(t) \\\\, ${nt.x} + d(t) \\\\, ${nt.y}`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\tvectorEquation: `${nt.dd(nt.X)} = \\\\mathbf{A}(t) \\\\, ${nt.X}`,\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.vec2(0,0)} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ts2_autonomous: true,\r\n\t\t\ts2_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order linear homogeneous equations with constant coefficients\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd(nt.x)} &= a ${nt.x} + b ${nt.y} \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(nt.y)} &= c ${nt.x} + d ${nt.y}`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\tvectorEquation: `${nt.dd(nt.X)} = \\\\mathbf{A} ${nt.X}`,\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`\\\\( \\\\lambda \\\\) is an eigenvalue of \\\\( \\\\mathbf{A} \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`${ivp} initial conditions are: \\\\( ${nt.x}_0 = ${nt.x}(0) \\\\), \\\\( ${nt.y}_0 = ${nt.y}(0) \\\\)`,\r\n\t\t\t\t\t{type:'switch',title:`coefficients satisfy conditions`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( b = c = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`the equation has the form:`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.ddt} ${nt.vec2(nt.x,nt.y)} = ${nt.mat2('\\\\lambda_1',0,0,'\\\\lambda_2')} ${nt.vec2(nt.x,nt.y)} \\\\]`,\r\n\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.y}_0 \\\\)) and ${ivp} solution:`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.x}_0 e^{\\\\lambda_1 t} ${nt.vec2(1,0)} + ${nt.y}_0 e^{\\\\lambda_2 t} ${nt.vec2(0,1)} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( a = 0 \\\\) and \\\\( b = 1 \\\\) (optional)`,content:[\r\n\t\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t\t`this is an optional case, you can use <em>\\\\( b \\\\neq 0 \\\\) or \\\\( c \\\\neq 0 \\\\)</em> case below`,\r\n\t\t\t\t\t\t\t\t`this case will happen after order reduction of second-order equation`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`the equation has the form:`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.ddt} ${nt.vec2(nt.x,nt.y)} = ${nt.mat2(0,1,`c`,`d`)} ${nt.vec2(nt.x,nt.y)} \\\\]`,\r\n\t\t\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t\t\t\t`eigenvector for \\\\( \\\\lambda_1 \\\\) is:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.vec2(`${nt.x}_1`,`${nt.y}_1`)} = ${nt.vec2(1,'\\\\lambda_1')} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`eigenvector for \\\\( \\\\lambda_2 \\\\) is:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.vec2(`${nt.x}_2`,`${nt.y}_2`)} = ${nt.vec2(1,'\\\\lambda_2')} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`use these eigenvectors in <em>\\\\( b \\\\neq 0 \\\\) or \\\\( c \\\\neq 0 \\\\)</em> case below`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]`,\r\n\t\t\t\t\t\t\t{type:'switch',title:`eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are`,content:[\r\n\t\t\t\t\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.y}_0 \\\\)) and ${ivp} solution:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = e^{\\\\lambda t} ${nt.vec2(nt.x+'_0',nt.y+'_0')} + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ${nt.vec2(nt.x+'_0',nt.y+'_0')} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = k_1 e^{\\\\lambda_1 t} ${nt.vec2(1,'\\\\lambda_1')} + k_2 e^{\\\\lambda_2 t} ${nt.vec2(1,'\\\\lambda_2')} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.mat2(1,1,'\\\\lambda_1','\\\\lambda_2')} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}_0`,`${nt.y}_0`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2('\\\\cos \\\\beta t','\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t')} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2('\\\\sin \\\\beta t','\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t')} `+\r\n\t\t\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.mat2(1,0,'\\\\alpha','\\\\beta')} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}_0`,`${nt.y}_0`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( b \\\\neq 0 \\\\) or \\\\( c \\\\neq 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]`,\r\n\t\t\t\t\t\t\t{type:'switch',title:`eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are`,content:[\r\n\t\t\t\t\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.y}_0 \\\\)) and ${ivp} solution:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = e^{\\\\lambda t} ${nt.vec2(nt.x+'_0',nt.y+'_0')} + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ${nt.vec2(nt.x+'_0',nt.y+'_0')} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`find eigenvector \\\\( ${nt.svec2(`${nt.x}_1`,`${nt.y}_1`)} \\\\) by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ (\\\\mathbf{A} - \\\\lambda_1 \\\\mathbf{I}) ${nt.vec2(`${nt.x}_1`,`${nt.y}_1`)} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`find eigenvector \\\\( ${nt.svec2(`${nt.x}_2`,`${nt.y}_2`)} \\\\) by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ (\\\\mathbf{A} - \\\\lambda_2 \\\\mathbf{I}) ${nt.vec2(`${nt.x}_2`,`${nt.y}_2`)} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = k_1 e^{\\\\lambda_1 t} ${nt.vec2(`${nt.x}_1`,`${nt.y}_1`)} + k_2 e^{\\\\lambda_2 t} ${nt.vec2(`${nt.x}_2`,`${nt.y}_2`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.mat2(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`)} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}_0`,`${nt.y}_0`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`select one of eigenvalues \\\\( \\\\lambda_1 = \\\\alpha + i \\\\beta \\\\)`,\r\n\t\t\t\t\t\t\t\t\t`find complex-valued eigenvector \\\\( ${nt.svec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} \\\\) by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ (\\\\mathbf{A} - \\\\lambda_1 \\\\mathbf{I}) ${nt.vec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t\t\t\t\t`one of complex-valued solutions:`,\r\n\t\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X}_c = e^{\\\\alpha t} (\\\\cos \\\\beta t + i \\\\sin \\\\beta t) ${nt.svec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t\t`find general solution by taking real and imaginary parts of a complex-valued solution:`,\r\n\t\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = k_1 \\\\operatorname{Re}(${nt.X}_c) + k_2 \\\\operatorname{Im}(${nt.X}_c) \\\\]`,\r\n\t\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2(`${nt.x}_1 \\\\cos \\\\beta t - ${nt.x}_2 \\\\sin \\\\beta t`,`${nt.y}_1 \\\\cos \\\\beta t - ${nt.y}_2 \\\\sin \\\\beta t`)} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2(`${nt.x}_1 \\\\sin \\\\beta t + ${nt.x}_2 \\\\cos \\\\beta t`,`${nt.y}_1 \\\\sin \\\\beta t + ${nt.y}_2 \\\\cos \\\\beta t`)} `+\r\n\t\t\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.mat2(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`)} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}_0`,`${nt.y}_0`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'switch',title:`\\\\( \\\\det(\\\\mathbf{A}) \\\\) is`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( \\\\det(\\\\mathbf{A}) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = K ${nt.vec2('b','-a')} \\\\]`,\r\n\t\t\t\t\t\t\t{type:'proof',content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.X)} = K ${nt.mat2('a','b','c','d')} ${nt.vec2('b','-a')} \\\\]`,\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.X)} = K ${nt.vec2('a b - b a','c b - d a')} \\\\]`,\r\n\t\t\t\t\t\t\t\t`\\\\[ a d = b c \\\\]`,\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.X)} = ${nt.vec2(0,0)} \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( \\\\det(\\\\mathbf{A}) \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.vec2(0,0)} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tplot: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t()=>{\r\n\t\t\t\t\t\tconst plot=new LhcPlot(nt.x,nt.y)\r\n\t\t\t\t\t\treturn plot.$output\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tsn_sir: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"SIR model\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/w/index.php?title=SIR_model'>SIR</a> model\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd('S')} &= -\\\\alpha S I \\\\\\\\`+\r\n\t\t\t\t`${nt.dd('I')} &= \\\\alpha S I - \\\\beta I \\\\\\\\ `+\r\n\t\t\t\t`${nt.dd('R')} &= \\\\beta I`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\( S = \\\\) number susceptible`,\r\n\t\t\t`\\\\( I = \\\\) number infectious`,\r\n\t\t\t`\\\\( R = \\\\) number recovered (immune)`,\r\n\t\t\t`\\\\( \\\\alpha = \\\\) contact rate`,\r\n\t\t\t`\\\\( \\\\beta = \\\\) recovery rate`,\r\n\t\t\t`all quantities are nonnegative`,\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tphaseSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`threshold value \\\\( \\\\rho = \\\\frac\\\\beta\\\\alpha \\\\):`,\r\n\t\t\t\t\t`\\\\( I \\\\) increases when \\\\( S &gt; \\\\rho \\\\)`,\r\n\t\t\t\t\t`\\\\( S \\\\) decreases`,\r\n\t\t\t\t\t`\\\\( I \\\\) attains its maximum when \\\\( S = \\\\rho \\\\)`,\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd('S')} + ${nt.dd('I')} + ${nt.dd('R')} = 0 \\\\]`,\r\n\t\t\t\t\t\t`total population \\\\( N \\\\) is constant`,\r\n\t\t\t\t\t\t`\\\\[ S + I + R = N \\\\]`,\r\n\t\t\t\t\t\t`eliminate \\\\( R \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`${nt.dd('S')} &= -\\\\alpha S I \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`${nt.dd('I')} &= \\\\alpha S I - \\\\beta I \\\\\\\\ `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd('I','S')} = \\\\frac{\\\\alpha S I - \\\\beta I}{-\\\\alpha S I} = -1 + \\\\frac{\\\\rho}{S} \\\\]`,\r\n\t\t\t\t\t\t`integrate by \\\\( S \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ I = -S + \\\\rho \\\\ln S + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`conserved quantities:`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`S(t) + I(t) + R(t) = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= S(0) + I(0) + R(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`I(t) + S(t) - \\\\rho \\\\ln S(t) = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= I(0) + S(0) - \\\\rho \\\\ln S(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t`maximum of \\\\( I \\\\):`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`I_{max} + \\\\rho - \\\\rho \\\\ln \\\\rho = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= I(0) + S(0) - \\\\rho \\\\ln S(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ I = 0 \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n})\r\n","'use strict'\r\n\r\nconst detailsPolyfill=require('crnx-base/details-polyfill')\r\nconst Matrix=require('./lhc-plot/matrix')\r\nconst TrdetCanvas=require('./lhc-plot/trdet-canvas')\r\nconst PhaseCanvas=require('./lhc-plot/phase-canvas')\r\n\r\n// works like this: http://mathlets.org/mathlets/linear-phase-portraits-matrix-entry/\r\nclass LhcPlot {\r\n\tconstructor(xLabel,yLabel) {\r\n\t\tconst matrix=new Matrix\r\n\t\tconst $numberInputs={}\r\n\t\tconst $rangeInputs={}\r\n\t\tlet $equilibriumType\r\n\t\tconst trdetCanvas=new TrdetCanvas\r\n\t\tconst phaseCanvas=new PhaseCanvas\r\n\t\tconst updateDetails=()=>{\r\n\t\t\tconst updateEquilibriumType=()=>{\r\n\t\t\t\tconst getEquilibriumType=()=>{\r\n\t\t\t\t\t// names are based on\r\n\t\t\t\t\t// http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\r\n\t\t\t\t\tconst D=matrix.det\r\n\t\t\t\t\tconst T=matrix.tr\r\n\t\t\t\t\tconst ssc=(T==0)?\"center\":((T<0)?\"sink\":\"source\")\r\n\t\t\t\t\tif (D<0) {\r\n\t\t\t\t\t\treturn `saddle`\r\n\t\t\t\t\t} else if (D==0) {\r\n\t\t\t\t\t\tif (T==0) {\r\n\t\t\t\t\t\t\tif (matrix.b==0 && matrix.c==0) {\r\n\t\t\t\t\t\t\t\treturn `degenerate everywhere fixed`\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn `degenerate parallel lines`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `degenerate comb ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (4*D<T*T) {\r\n\t\t\t\t\t\treturn `nodal (real) ${ssc}`\r\n\t\t\t\t\t} else if (4*D==T*T) {\r\n\t\t\t\t\t\tif (matrix.b==0 && matrix.c==0) {\r\n\t\t\t\t\t\t\treturn `star ${ssc}`\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `defective nodal (real) ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (T==0) {\r\n\t\t\t\t\t\t\treturn ssc\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `spiral ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$equilibriumType.text(getEquilibriumType())\r\n\t\t\t}\r\n\t\t\tmatrix.forUpdated(cf=>{\r\n\t\t\t\t$numberInputs[cf].val(matrix[cf])\r\n\t\t\t\t$rangeInputs[cf].val(matrix[cf])\r\n\t\t\t})\r\n\t\t\tupdateEquilibriumType()\r\n\t\t\ttrdetCanvas.redraw(matrix)\r\n\t\t\tphaseCanvas.redraw(matrix,xLabel,yLabel)\r\n\t\t}\r\n\t\tconst getCoefInputs=coef=>{\r\n\t\t\tconst isMatrixElement=coef.length==1\r\n\t\t\tconst valueRange=matrix.getRange(coef)\r\n\t\t\tconst initCoefInput=(type,getValue,setValue)=>{\r\n\t\t\t\tconst $input=$(`<input type='${type}'>`).attr('step','any').val(matrix[coef])\r\n\t\t\t\tif (type=='range') {\r\n\t\t\t\t\t$input.attr('min',-valueRange).attr('max',valueRange)\r\n\t\t\t\t}\r\n\t\t\t\t$input.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\tconst value=getValue()\r\n\t\t\t\t\t\tsetValue(value)\r\n\t\t\t\t\t\tmatrix[coef]=Number(value)\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $input\r\n\t\t\t}\r\n\t\t\tconst $div=$(\"<div>\")\r\n\t\t\tif (!isMatrixElement) {\r\n\t\t\t\t$div.addClass(coef)\r\n\t\t\t}\r\n\t\t\tlet label=coef\r\n\t\t\tif (coef=='tr') {\r\n\t\t\t\tlabel=`\\\\operatorname{${coef}}(\\\\mathbf{A})`\r\n\t\t\t} else if (coef=='det') {\r\n\t\t\t\tlabel=`\\\\${coef}(\\\\mathbf{A})`\r\n\t\t\t} else if (coef.slice(0,2)=='re') {\r\n\t\t\t\t//label=`\\\\lambda_${coef.charAt(2)} =`\r\n\t\t\t\tlabel=`\\\\Re \\\\lambda_${coef.charAt(2)}`\r\n\t\t\t} else if (coef.slice(0,2)=='im') {\r\n\t\t\t\t//label=`+ i \\\\cdot`\r\n\t\t\t\tlabel=`\\\\Im \\\\lambda_${coef.charAt(2)}`\r\n\t\t\t}\r\n\t\t\tlet $number,$range\r\n\t\t\t$div.append(\r\n\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t`<span class='label'>\\\\( ${label} \\\\)</span>`,\r\n\t\t\t\t\t`<span class='space'> </span>`,\r\n\t\t\t\t\t$number=initCoefInput('number',()=>$number.val(),(v)=>$range.val(v))\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$range=initCoefInput('range',()=>Number($range.val()).toFixed(2),(v)=>$number.val(v))\r\n\t\t\t)\r\n\t\t\t$numberInputs[coef]=$number\r\n\t\t\t$rangeInputs[coef]=$range\r\n\t\t\treturn $div\r\n\t\t}\r\n\t\tthis.$output=$(\"<div class='matrix'>\").append(\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"equation coefficients\"),\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('a')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('b'))\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('c')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('d'))\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t\"Set matrix to \",\r\n\t\t\t\t\t$(\"<button>zero</button>\").click(function(){\r\n\t\t\t\t\t\tmatrix.setZero()\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\t$(\"<button>associated</button>\").click(function(){\r\n\t\t\t\t\t\tmatrix.setAssociated()\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"matrix parameters\"),\r\n\t\t\t\tgetCoefInputs('tr'),\r\n\t\t\t\tgetCoefInputs('det'),\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('re1')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('im1'))\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('re2')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('im2'))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"equilibrium point type\"),\r\n\t\t\t\t$equilibriumType=$(\"<div>\")\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary class='bordered'>\").append(\"<a href='https://en.wikipedia.org/wiki/Trace_(linear_algebra)'>tr</a>-<a href='https://en.wikipedia.org/wiki/Determinant'>det</a> plane\"),\r\n\t\t\t\ttrdetCanvas.$output.on('mousedown mousemove',function(ev){\r\n\t\t\t\t\tif (!ev.buttons&1) return\r\n\t\t\t\t\tconst $canvas=$(this)\r\n\t\t\t\t\tconst w=$canvas.width()\r\n\t\t\t\t\tconst h=$canvas.height()\r\n\t\t\t\t\tconst trim=(v)=>Number(v.toFixed(2))\r\n\t\t\t\t\tconst tRange=matrix.getRange('tr')\r\n\t\t\t\t\tconst dRange=matrix.getRange('det')\r\n\t\t\t\t\tconst tClose=2*tRange/(w/2)\r\n\t\t\t\t\tconst dClose=2*dRange/(h/2)\r\n\t\t\t\t\tlet t=trim(+(ev.offsetX-w/2+0.5)/(w/2)*tRange)\r\n\t\t\t\t\tlet d=trim(-(ev.offsetY-h/2+0.5)/(h/2)*dRange)\r\n\t\t\t\t\tconst p=t*t/4\r\n\t\t\t\t\tif (Math.abs(d)<=dClose && Math.abs(t)<=tClose) {\r\n\t\t\t\t\t\tt=0\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d>0 && Math.abs(t)<=tClose) {\r\n\t\t\t\t\t\tt=0\r\n\t\t\t\t\t} else if (d<0 && d>=-dClose) {\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d-p>0 && d-p<=dClose) {\r\n\t\t\t\t\t\td=p\r\n\t\t\t\t\t} else if (d>0 && d<=dClose) {\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d-p<0 && d-p>=-dClose) {\r\n\t\t\t\t\t\td=p\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmatrix.setTrdetExternally(t,d)\r\n\t\t\t\t\tupdateDetails()\r\n\t\t\t\t})\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary class='bordered'>\").append(\"<a href='https://en.wikipedia.org/wiki/Phase_space'>phase plane</a>\"),\r\n\t\t\t\tphaseCanvas.$output\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t)\r\n\t\tupdateDetails()\r\n\t}\r\n}\r\n\r\nmodule.exports=LhcPlot\r\n","'use strict'\r\n\r\nclass Canvas {\r\n\tconstructor() {\r\n\t\tthis.width=246\r\n\t\tthis.height=246\r\n\t\tthis.$output=$(`<canvas width='${this.width}' height='${this.height}'>`)\r\n\t\tthis.ctx=this.$output[0].getContext('2d')\r\n\t}\r\n\tdrawAxes(xLabel,yLabel) {\r\n\t\tconst xAxisSize=80\r\n\t\tconst yAxisSize=80\r\n\t\tconst arrowSize=15\r\n\t\tconst ctx=this.ctx\r\n\t\tconst drawAxis=()=>{\r\n\t\t\tctx.beginPath()\r\n\t\t\tctx.moveTo(-xAxisSize,0)\r\n\t\t\tctx.lineTo(+xAxisSize,0)\r\n\t\t\tctx.moveTo(xAxisSize-arrowSize,-arrowSize)\r\n\t\t\tctx.lineTo(xAxisSize,0)\r\n\t\t\tctx.lineTo(xAxisSize-arrowSize,+arrowSize)\r\n\t\t\tctx.stroke()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.lineWidth=6\r\n\t\tctx.strokeStyle=ctx.fillStyle='#DDD'\r\n\t\tctx.font='900 30px sans-serif'\r\n\t\tdrawAxis()\r\n\t\tctx.save()\r\n\t\tctx.rotate(-Math.PI/2)\r\n\t\tdrawAxis()\r\n\t\tctx.restore()\r\n\t\tctx.textBaseline='middle'\r\n\t\tctx.fillText(xLabel,xAxisSize+10,0)\r\n\t\tctx.textBaseline='alphabetic'\r\n\t\tctx.textAlign='center'\r\n\t\tctx.fillText(yLabel,0,-yAxisSize-10)\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=Canvas\r\n","'use strict'\r\n\r\n// returns coords [x,y] of a point on x*y=C closest to (x0,y0)\r\n// could have solved x^3*(x-x0)+C*y0*x-C^2=0, y=C/x\r\n\r\nconst getClosestPointOnPositiveHyperbolaIn1stQuadrant=(C,x0,y0)=>{\r\n\tlet x=Math.sqrt(C)\r\n\tlet y=x\r\n\tconst epsilon2=1e-12\r\n\tconst iterationLimit=20\r\n\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\tif (x<=0) return [C/y0,y0]\r\n\t\tif (y<=0) return [x0,C/x0]\r\n\t\tconst yx=y0/(2*x)\r\n\t\tconst xy=x0/(2*y)\r\n\t\tconst t=yx+xy-Math.sqrt((yx-xy)*(yx-xy)+C/(x*y))\r\n\t\tlet x1=x0-y*t\r\n\t\tlet y1=y0-x*t\r\n\t\tif ((x-x1)*(x-x1)+(y-y1)*(y-y1)<=epsilon2) break\r\n\t\tx=x1\r\n\t\ty=y1\r\n\t}\r\n\treturn [x,y]\r\n}\r\n\r\nconst getClosestPointOnPositiveHyperbola=(C,x0,y0)=>{\r\n\tif (y0>=-x0) { // top-right branch\r\n\t\treturn getClosestPointOnPositiveHyperbolaIn1stQuadrant(C,x0,y0)\r\n\t} else { // bottom-left branch\r\n\t\tconst xy=getClosestPointOnPositiveHyperbolaIn1stQuadrant(C,-x0,-y0)\r\n\t\treturn [-xy[0],-xy[1]]\r\n\t}\r\n}\r\n\r\nconst getClosestPointOnHyperbola=(C,x0,y0)=>{\r\n\tif (C==0) {\r\n\t\tif (Math.abs(x0)<Math.abs(y0)) {\r\n\t\t\treturn [0,y0]\r\n\t\t} else {\r\n\t\t\treturn [x0,0]\r\n\t\t}\r\n\t} else if (C>0) {\r\n\t\treturn getClosestPointOnPositiveHyperbola(C,x0,y0)\r\n\t} else { // flip y axis\r\n\t\tconst xy=getClosestPointOnPositiveHyperbola(-C,x0,-y0)\r\n\t\treturn [xy[0],-xy[1]]\r\n\t}\r\n}\r\n\r\nmodule.exports=getClosestPointOnHyperbola\r\n","'use strict'\r\n\r\nconst getClosestPointOnHyperbola=require('./closest-point-on-hyperbola')\r\n\r\nclass Matrix {\r\n\tconstructor() {\r\n\t\tthis._updated={}\r\n\t\tthis.setZero()\r\n\t\tthis._updated={}\r\n\t}\r\n\tforUpdated(fn) {\r\n\t\tfor (let coef in this._updated) {\r\n\t\t\tfn(coef)\r\n\t\t}\r\n\t\tthis._updated={}\r\n\t}\r\n\t_computeElementsFromTrdet() {\r\n\t\tif (this._original===null) {\r\n\t\t\tthis._original={\r\n\t\t\t\ta: this._a,\r\n\t\t\t\tb: this._b,\r\n\t\t\t\tc: this._c,\r\n\t\t\t\td: this._d,\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._a=(this._original.a+this._tr-this._original.d)/2\r\n\t\tthis._d=this._tr-this._a\r\n\t\tconst bc=getClosestPointOnHyperbola(this._a*this._d-this._det,this._original.b,this._original.c)\r\n\t\tthis._b=bc[0]\r\n\t\tthis._c=bc[1]\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t}\r\n\t_computeTrdetFromElements() {\r\n\t\tthis._tr=this._a+this._d\r\n\t\tthis._det=this._a*this._d-this._b*this._c\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t}\r\n\t_computeEigenvaluesFromTrdet() {\r\n\t\tconst discr=this._tr*this._tr-4*this._det\r\n\t\tif (discr>=0) {\r\n\t\t\tconst root=Math.sqrt(discr)\r\n\t\t\tif (this._re2>=this._re1) {\r\n\t\t\t\tthis._re1=(this._tr-root)/2\r\n\t\t\t\tthis._re2=(this._tr+root)/2\r\n\t\t\t} else {\r\n\t\t\t\tthis._re2=(this._tr-root)/2\r\n\t\t\t\tthis._re1=(this._tr+root)/2\r\n\t\t\t}\r\n\t\t\tthis._im1=this._im2=0\r\n\t\t} else {\r\n\t\t\tconst root=Math.sqrt(-discr)\r\n\t\t\tthis._re1=this._re2=this._tr/2\r\n\t\t\tif (this._im2>=this._im1) {\r\n\t\t\t\tthis._im1=-root/2\r\n\t\t\t\tthis._im2=+root/2\r\n\t\t\t} else {\r\n\t\t\t\tthis._im2=-root/2\r\n\t\t\t\tthis._im1=+root/2\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._updated.re1=this._updated.re2=this._updated.im1=this._updated.im2=true\r\n\t}\r\n\t_computeTrdetFromEigenvalues() {\r\n\t\tthis._tr=this._re1+this._re2\r\n\t\tthis._det=this._re1*this._re2-this._im1*this._im2\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t}\r\n\tget a() { return this._a }\r\n\tget b() { return this._b }\r\n\tget c() { return this._c }\r\n\tget d() { return this._d }\r\n\tget tr() { return this._tr }\r\n\tget det() { return this._det }\r\n\tget re1() { return this._re1 }\r\n\tget re2() { return this._re2 }\r\n\tget im1() { return this._im1 }\r\n\tget im2() { return this._im2 }\r\n\tgetEigenvector(lambda) {\r\n\t\tif (Math.abs(this._b)+Math.abs(lambda-this._a)>=Math.abs(lambda-this._d)+Math.abs(this._c)) {\r\n\t\t\treturn [this._b,lambda-this._a]\r\n\t\t} else {\r\n\t\t\treturn [lambda-this._d,this._c]\r\n\t\t}\r\n\t}\r\n\tgetComplexEigenvector(alpha,beta) {\r\n\t\tif (Math.abs(this._b)+Math.abs(alpha-this._a)>=Math.abs(alpha-this._d)+Math.abs(this._c)) {\r\n\t\t\treturn [this._b,0,alpha-this._a,beta]\r\n\t\t} else {\r\n\t\t\treturn [alpha-this._d,beta,this._c,0]\r\n\t\t}\r\n\t}\r\n\tgetRange(coef) {\r\n\t\tif (coef=='tr') {\r\n\t\t\treturn 10\r\n\t\t} else if (coef=='det') {\r\n\t\t\treturn 50\r\n\t\t} else if (coef=='a' || coef=='b' || coef=='c' || coef=='d') {\r\n\t\t\treturn 5\r\n\t\t} else {\r\n\t\t\treturn 10 // eigenvalues\r\n\t\t}\r\n\t}\r\n\tset a(v) {\r\n\t\tthis._a=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset b(v) {\r\n\t\tthis._b=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset c(v) {\r\n\t\tthis._c=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset d(v) {\r\n\t\tthis._d=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset tr(v) {\r\n\t\tthis._tr=v\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset det(v) {\r\n\t\tthis._det=v\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tsetTrdetExternally(T,D) { // for use with clicks on tr-det plane plot\r\n\t\tthis._tr=T\r\n\t\tthis._det=D\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\t_setRe(v,i,j) {\r\n\t\tthis['_re'+i]=v\r\n\t\tif (this._im1!=0 || this._im2!=0) {\r\n\t\t\tthis['_re'+j]=v\r\n\t\t\tthis._updated['re'+j]=true\r\n\t\t}\r\n\t\tthis._computeTrdetFromEigenvalues()\r\n\t\tthis._computeElementsFromTrdet()\r\n\t}\r\n\tset re1(v) {\r\n\t\tthis._setRe(v,1,2)\r\n\t}\r\n\tset re2(v) {\r\n\t\tthis._setRe(v,2,1)\r\n\t}\r\n\t_setIm(v,i,j) {\r\n\t\tthis['_im'+i]=v\r\n\t\tthis['_im'+j]=-v\r\n\t\tthis._updated['im'+j]=true\r\n\t\tif (v!=0) {\r\n\t\t\tthis['_re'+j]=this['_re'+i]\r\n\t\t\tthis._updated['re'+j]=true\r\n\t\t}\r\n\t\tthis._computeTrdetFromEigenvalues()\r\n\t\tthis._computeElementsFromTrdet()\r\n\t}\r\n\tset im1(v) {\r\n\t\tthis._setIm(v,1,2)\r\n\t}\r\n\tset im2(v) {\r\n\t\tthis._setIm(v,2,1)\r\n\t}\r\n\tsetZero() {\r\n\t\tthis._a=this._b=this._c=this._d=0\r\n\t\tthis._tr=this._det=0\r\n\t\tthis._re1=this._re2=this._im1=this._im2=0\r\n\t\tthis._original=null\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t\tthis._updated.re1=this._updated.re2=this._updated.im1=this._updated.im2=true\r\n\t}\r\n\tsetAssociated() { // \"associated matrix\" http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\r\n\t\tthis._a=0\r\n\t\tthis._b=1\r\n\t\tthis._c=-this._det\r\n\t\tthis._d=this._tr\r\n\t\tthis._original=null\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t}\r\n}\r\n\r\nmodule.exports=Matrix\r\n","'use strict'\r\n\r\nconst Canvas=require('./canvas')\r\n\r\nclass PhaseCanvas extends Canvas {\r\n\tredraw(matrix,xLabel,yLabel) {\r\n\t\tconst ctx=this.ctx\r\n\t\tconst xRange=this.width/2\r\n\t\tconst yRange=this.height/2\r\n\t\tconst drawDirectionField=()=>{\r\n\t\t\tconst arrowSpacing=27\r\n\t\t\tconst arrowLength=5\r\n\t\t\tconst arrowWidth=2\r\n\t\t\tconst drawArrow=(x,y)=>{\r\n\t\t\t\tconst dx=matrix.a*x+matrix.b*y\r\n\t\t\t\tconst dy=matrix.c*x+matrix.d*y\r\n\t\t\t\tconst dl=Math.sqrt(dx*dx+dy*dy)\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t+(x-dx/dl*arrowLength),\r\n\t\t\t\t\t-(y-dy/dl*arrowLength)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(+x,-y)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t+(x+dx/dl*arrowLength),\r\n\t\t\t\t\t-(y+dy/dl*arrowLength)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t+(x-dy/dl*arrowWidth),\r\n\t\t\t\t\t-(y+dx/dl*arrowWidth)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t+(x+dy/dl*arrowWidth),\r\n\t\t\t\t\t-(y-dx/dl*arrowWidth)\r\n\t\t\t\t)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tctx.save()\r\n\t\t\tctx.fillStyle=ctx.strokeStyle='#888'\r\n\t\t\tconst nx=Math.floor(xRange/arrowSpacing)\r\n\t\t\tconst ny=Math.floor(yRange/arrowSpacing)\r\n\t\t\tfor (let i=-nx;i<=nx;i++) {\r\n\t\t\t\tfor (let j=-ny;j<=ny;j++) {\r\n\t\t\t\t\tdrawArrow(\r\n\t\t\t\t\t\ti*arrowSpacing+0.5*Math.sign(i),\r\n\t\t\t\t\t\tj*arrowSpacing+0.5*Math.sign(j)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawEigenline=(lambda,otherLambda)=>{\r\n\t\t\tconst iconSize=5\r\n\t\t\tlet icon\r\n\t\t\tif (lambda<0) {\r\n\t\t\t\ticon=-1-(otherLambda<0 && lambda<otherLambda)\r\n\t\t\t} else if (lambda>0) {\r\n\t\t\t\ticon=+1+(otherLambda>0 && lambda>otherLambda)\r\n\t\t\t} else {\r\n\t\t\t\ticon=0\r\n\t\t\t}\r\n\t\t\tconst xy=matrix.getEigenvector(lambda)\r\n\t\t\tlet x=xy[0], y=xy[1]\r\n\t\t\tctx.save()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tif (x<0) {\r\n\t\t\t\tx=-x\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (y<0) {\r\n\t\t\t\tctx.scale(1,-1)\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (x<y) { // TODO this will work only for square canvases, should also swap xRange and yRange\r\n\t\t\t\tctx.transform(0,1,1,0,0,0) // swap x,y\r\n\t\t\t\t;[x,y]=[y,x]\r\n\t\t\t}\r\n\t\t\tif (x>0) {\r\n\t\t\t\tconst r=Math.sqrt(x*x+y*y)\r\n\t\t\t\tconst x0=x/r\r\n\t\t\t\tconst y0=y/r\r\n\t\t\t\tconst x1=xRange\r\n\t\t\t\tconst y1=yRange*y/x\r\n\t\t\t\tconst xic=xRange/2*x0\r\n\t\t\t\tconst yic=yRange/2*y0\r\n\t\t\t\tconst xis=iconSize*x0\r\n\t\t\t\tconst yis=iconSize*y0\r\n\t\t\t\tconst drawEigenlineIcon=()=>{\r\n\t\t\t\t\tconst dir=Math.sign(icon)\r\n\t\t\t\t\tconst drawDiamond=()=>{\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(xic-xis,-(yic-yis))\r\n\t\t\t\t\t\tctx.lineTo(xic+yis,-(yic-xis))\r\n\t\t\t\t\t\tctx.lineTo(xic+xis,-(yic+yis))\r\n\t\t\t\t\t\tctx.lineTo(xic-yis,-(yic+xis))\r\n\t\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\t\tctx.fill()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst drawTriangle=(ofs)=>{\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(xic+dir*(ofs*xis-xis-yis),-(yic+dir*(ofs*yis-yis+xis)))\r\n\t\t\t\t\t\tctx.lineTo(xic+dir*(ofs*xis-xis+yis),-(yic+dir*(ofs*yis-yis-xis)))\r\n\t\t\t\t\t\tctx.lineTo(xic+dir*(ofs*xis+xis    ),-(yic+dir*(ofs*yis+yis    )))\r\n\t\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\t\tctx.fill()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dir==0) {\r\n\t\t\t\t\t\tdrawDiamond()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrawTriangle(0)\r\n\t\t\t\t\t\tif (Math.abs(icon)>=2) {\r\n\t\t\t\t\t\t\tdrawTriangle(2)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(-x1,+y1)\r\n\t\t\t\tctx.lineTo(+x1,-y1)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.save()\r\n\t\t\t\tdrawEigenlineIcon()\r\n\t\t\t\tctx.scale(-1,-1)\r\n\t\t\t\tdrawEigenlineIcon()\r\n\t\t\t\tctx.restore()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawSolution=(x0,y0,color)=>{\r\n\t\t\tconst iterationLimit=100*Math.max(xRange,yRange)\r\n\t\t\tconst fnOnFractions=(fn,xNum,xDen,yNum,yDen)=>{\r\n\t\t\t\tif (xDen!=0 && yDen!=0) {\r\n\t\t\t\t\treturn fn(xNum/xDen,yNum/yDen)\r\n\t\t\t\t} else if (xDen==0 && yDen!=0) {\r\n\t\t\t\t\treturn yNum/yDen\r\n\t\t\t\t} else if (xDen!=0 && yDen==0) {\r\n\t\t\t\t\treturn xNum/xDen\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawFixedPoint=()=>{\r\n\t\t\t\tconst fixedPointSize=3\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.arc(x0,y0,fixedPointSize,0,2*Math.PI)\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tconst drawSaddleOrNodeSolution=()=>{\r\n\t\t\t\tlet lambda1,lambda2\r\n\t\t\t\tif (matrix.re1<=matrix.re2) {\r\n\t\t\t\t\tlambda1=matrix.re1\r\n\t\t\t\t\tlambda2=matrix.re2\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlambda1=matrix.re2\r\n\t\t\t\t\tlambda2=matrix.re1\r\n\t\t\t\t}\r\n\t\t\t\tconst xy1=matrix.getEigenvector(lambda1)\r\n\t\t\t\tlet x1=xy1[0], y1=xy1[1]\r\n\t\t\t\tconst xy2=matrix.getEigenvector(lambda2)\r\n\t\t\t\tlet x2=xy2[0], y2=xy2[1]\r\n\t\t\t\tif (lambda2<=0) {\r\n\t\t\t\t\t;[lambda1,lambda2]=[-lambda2,-lambda1]\r\n\t\t\t\t\t;[x1,x2]=[x2,x1]\r\n\t\t\t\t\t;[y1,y2]=[y2,y1]\r\n\t\t\t\t}\r\n\t\t\t\tlet k1=+(x2*y0-x0*y2)/(x2*y1-x1*y2)\r\n\t\t\t\tlet k2=-(x1*y0-x0*y1)/(x2*y1-x1*y2)\r\n\t\t\t\tif ((k1==0 && k2==0) || (lambda1==0 && k2==0)) {\r\n\t\t\t\t\tdrawFixedPoint()\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else if (k1==0 && lambda2!=0) {\r\n\t\t\t\t\tlambda1=0 // trigger comb case below\r\n\t\t\t\t} else if (k2==0 && lambda1!=0) {\r\n\t\t\t\t\tlambda2=Math.abs(lambda1)\r\n\t\t\t\t\tlambda1=0 // trigger comb case below\r\n\t\t\t\t\t;[x1,x2]=[x2,x1]\r\n\t\t\t\t\t;[y1,y2]=[y2,y1]\r\n\t\t\t\t\t;[k1,k2]=[k2,k1]\r\n\t\t\t\t}\r\n\t\t\t\tif (lambda1>0) { // node\r\n\t\t\t\t\tlet T1=0\r\n\t\t\t\t\tlet T2=0\r\n\t\t\t\t\tconst dT1=1/Math.max(Math.abs(k1*x1),Math.abs(k1*y1)) // step size is controlled by slow direction\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(0,0)\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tT1+=dT1\r\n\t\t\t\t\t\tT2=Math.pow(T1,lambda2/lambda1)\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+(k1*x1*T1+k2*x2*T2),\r\n\t\t\t\t\t\t\t-(k1*y1*T1+k2*y2*T2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(k1*x1*T1+k2*x2*T2)*Math.sign(k2*x2)>xRange ||\r\n\t\t\t\t\t\t\t(k1*y1*T1+k2*y2*T2)*Math.sign(k2*y2)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else if (lambda1<0 && lambda2>0) { // saddle\r\n\t\t\t\t\tlet t=0 // assumes starting point is in viewport\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst ke1=k1*Math.exp(lambda1*t)\r\n\t\t\t\t\t\tconst ke2=k2*Math.exp(lambda2*t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(x1*ke1+x2*ke2)*Math.sign(x1*k1)>xRange ||\r\n\t\t\t\t\t\t\t(y1*ke1+y2*ke2)*Math.sign(y1*k1)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t\tconst dt=Math.min(\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke2*lambda2),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke2*lambda2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt-=dt\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst ke1=k1*Math.exp(lambda1*t)\r\n\t\t\t\t\t\tconst ke2=k2*Math.exp(lambda2*t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+(x1*ke1+x2*ke2),\r\n\t\t\t\t\t\t\t-(y1*ke1+y2*ke2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (t>0 && (\r\n\t\t\t\t\t\t\t(x1*ke1+x2*ke2)*Math.sign(x1*k2)>xRange ||\r\n\t\t\t\t\t\t\t(y1*ke1+y2*ke2)*Math.sign(y1*k2)>yRange\r\n\t\t\t\t\t\t)) break\r\n\t\t\t\t\t\tconst dt=Math.min(\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke2*lambda2),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke2*lambda2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt+=dt\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else if (lambda1==0 && lambda2>0) { // comb\r\n\t\t\t\t\tconst t=fnOnFractions(Math.min,\r\n\t\t\t\t\t\tMath.sign(x2*k2)*xRange-x1*k1, x2*k2,\r\n\t\t\t\t\t\tMath.sign(y2*k2)*yRange-y1*k1, y2*k2\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (t>0) {\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t\t\t+(x1*k1),\r\n\t\t\t\t\t\t\t-(y1*k1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+(x1*k1+x2*k2*t),\r\n\t\t\t\t\t\t\t-(y1*k1+y2*k2*t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawSpiralSolution=()=>{\r\n\t\t\t\tlet alpha=matrix.re1\r\n\t\t\t\tlet beta=matrix.im1\r\n\t\t\t\tif (beta<0) {\r\n\t\t\t\t\tbeta=-beta\r\n\t\t\t\t}\r\n\t\t\t\tconst xxyy=matrix.getComplexEigenvector(alpha,beta)\r\n\t\t\t\tif (alpha<0) {\r\n\t\t\t\t\talpha=-alpha\r\n\t\t\t\t\tbeta=-beta\r\n\t\t\t\t}\r\n\t\t\t\tconst x1=xxyy[0], x2=xxyy[1]\r\n\t\t\t\tconst y1=xxyy[2], y2=xxyy[3]\r\n\t\t\t\tconst k1=+(x2*y0-x0*y2)/(x2*y1-x1*y2)\r\n\t\t\t\tconst k2=-(x1*y0-x0*y1)/(x2*y1-x1*y2)\r\n\t\t\t\tif (k1==0 && k2==0) return\r\n\t\t\t\tconst kxc=k1*x1+k2*x2\r\n\t\t\t\tconst kxs=k2*x1-k1*x2\r\n\t\t\t\tconst kyc=k1*y1+k2*y2\r\n\t\t\t\tconst kys=k2*y1-k1*y2\r\n\t\t\t\tif (alpha==0) { // center\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tconst dt=1/Math.max(kxc,kyc,kxs,kys)\r\n\t\t\t\t\tlet t=0\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst c=Math.cos(t)\r\n\t\t\t\t\t\tconst s=Math.sin(t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+(kxc*c+kxs*s),\r\n\t\t\t\t\t\t\t-(kyc*c+kys*s)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt+=dt\r\n\t\t\t\t\t\tif (t>=2*Math.PI) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else { // spiral\r\n\t\t\t\t\tconst calculateSemiaxes=()=>{ // https://en.wikipedia.org/wiki/Ellipse#Canonical_form\r\n\t\t\t\t\t\tconst A=kys*kys+kyc*kyc, B=-2*(kxs*kys+kxc*kyc), C=kxs*kxs+kxc*kxc\r\n\t\t\t\t\t\tconst f=kxc*kys-kxs*kyc\r\n\t\t\t\t\t\tconst F=-f*f\r\n\t\t\t\t\t\tconst DIS=B*B-4*A*C\r\n\t\t\t\t\t\tconst A2=2*DIS*F*(A+C-Math.sqrt((A-C)*(A-C)+B*B))/(DIS*DIS)\r\n\t\t\t\t\t\tconst B2=2*DIS*F*(A+C+Math.sqrt((A-C)*(A-C)+B*B))/(DIS*DIS)\r\n\t\t\t\t\t\treturn [A2,B2] // TODO relative axes lengths don't depend on initial conditions, this calculation should be simpler\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst A2B2=calculateSemiaxes()\r\n\t\t\t\t\tconst A2=A2B2[0]\r\n\t\t\t\t\tconst B2=A2B2[1]\r\n\t\t\t\t\tconst B=Math.sqrt(B2)\r\n\t\t\t\t\tconst R2=xRange*xRange+yRange*yRange\r\n\t\t\t\t\t//const t0=-(Math.log(B2)/2+Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\r\n\t\t\t\t\tconst lineWidth=2\r\n\t\t\t\t\tconst t0=(Math.log(lineWidth)-Math.log(B2)/2-Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\r\n\t\t\t\t\t//const t1=(Math.log(R2)-Math.log(A2))/(2*alpha)\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tconst e0=Math.exp(alpha*t0)\r\n\t\t\t\t\tconst nSegments=Math.ceil(B*e0*2*Math.PI)\r\n\t\t\t\t\tfor (let i=0;i<nSegments;i++) {\r\n\t\t\t\t\t\tconst t=2*Math.PI*i/nSegments\r\n\t\t\t\t\t\tconst c0=Math.cos(t)\r\n\t\t\t\t\t\tconst s0=Math.sin(t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+e0*(kxc*c0+kxs*s0),\r\n\t\t\t\t\t\t\t-e0*(kyc*c0+kys*s0)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\tctx.fill()\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tlet t=t0\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst e=Math.exp(alpha*t)\r\n\t\t\t\t\t\tconst c=Math.cos(beta*t)\r\n\t\t\t\t\t\tconst s=Math.sin(beta*t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+e*(kxc*c+kxs*s),\r\n\t\t\t\t\t\t\t-e*(kyc*c+kys*s)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t//const dtTan=1/Math.abs(beta*B*e)\r\n\t\t\t\t\t\tconst dtRad=Math.log(1/(B*e)+1)/alpha\r\n\t\t\t\t\t\t//t+=Math.min(Math.max(dtTan,1/Math.abs(40*beta)),dtRad)\r\n\t\t\t\t\t\tt+=Math.min(dtRad,1/Math.abs(16*beta))\r\n\t\t\t\t\t\tif (e*e*A2>R2) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawDefectiveSolution=()=>{\r\n\t\t\t\tlet lambda=matrix.re1\r\n\t\t\t\tlet x1=(matrix.a-lambda)*x0+matrix.b*y0\r\n\t\t\t\tlet y1=matrix.c*x0+(matrix.d-lambda)*y0\r\n\t\t\t\tif (lambda<0) {\r\n\t\t\t\t\tlambda=-lambda\r\n\t\t\t\t\tx1=-x1\r\n\t\t\t\t\ty1=-y1\r\n\t\t\t\t}\r\n\t\t\t\tif (lambda==0 && x1==0 && y1==0) { // everywhere fixed\r\n\t\t\t\t\tdrawFixedPoint()\r\n\t\t\t\t} if (lambda==0) { // parallel lines\r\n\t\t\t\t\tconst t0=fnOnFractions(Math.min,\r\n\t\t\t\t\t\t-Math.sign(x1)*xRange-x0, x1,\r\n\t\t\t\t\t\t-Math.sign(y1)*yRange-y0, y1\r\n\t\t\t\t\t)\r\n\t\t\t\t\tconst t1=fnOnFractions(Math.max,\r\n\t\t\t\t\t\t+Math.sign(x1)*xRange-x0, x1,\r\n\t\t\t\t\t\t+Math.sign(y1)*yRange-y0, y1\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t\t+(x0+t0*x1),\r\n\t\t\t\t\t\t-(y0+t0*y1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t+(x0+t1*x1),\r\n\t\t\t\t\t\t-(y0+t1*y1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else { // star or defective node\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(0,0)\r\n\t\t\t\t\tlet T=0\r\n\t\t\t\t\tconst dT=1/Math.max(Math.abs(x0),Math.abs(y0))\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tT+=dT\r\n\t\t\t\t\t\tconst t=Math.log(T)/lambda\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+T*(x0+t*x1),\r\n\t\t\t\t\t\t\t-T*(y0+t*y1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tT*(x0+t*x1)*Math.sign(x0)>xRange ||\r\n\t\t\t\t\t\t\tT*(y0+t*y1)*Math.sign(y0)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.save()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tctx.strokeStyle=ctx.fillStyle=color\r\n\t\t\tif (matrix.im1==0 && matrix.re1!=matrix.re2) {\r\n\t\t\t\tdrawSaddleOrNodeSolution()\r\n\t\t\t} else if (matrix.im1==0 && matrix.re1==matrix.re2) {\r\n\t\t\t\tdrawDefectiveSolution()\r\n\t\t\t} else if (matrix.im1!=0) {\r\n\t\t\t\tdrawSpiralSolution()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.fillStyle='#FFF'\r\n\t\tctx.fillRect(0,0,this.width,this.height)\r\n\t\tctx.restore()\r\n\t\tctx.save()\r\n\t\tctx.translate(xRange,yRange)\r\n\t\tthis.drawAxes(xLabel,yLabel)\r\n\t\tdrawDirectionField()\r\n\t\tif (matrix.im1==0) {\r\n\t\t\tdrawEigenline(matrix.re1,matrix.re2)\r\n\t\t\tif (matrix.re1!=matrix.re2) {\r\n\t\t\t\tdrawEigenline(matrix.re2,matrix.re1)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawSolution(+xRange/2,0,'#08F')\r\n\t\tdrawSolution(-xRange/2,0,'#28F')\r\n\t\tdrawSolution(0,+yRange/2,'#0AF')\r\n\t\tdrawSolution(0,-yRange/2,'#08D')\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=PhaseCanvas\r\n","'use strict'\r\n\r\nconst Canvas=require('./canvas')\r\n\r\nclass TrdetCanvas extends Canvas {\r\n\tredraw(matrix) {\r\n\t\tconst crosshairSize=10\r\n\t\tconst pointerSize=5\r\n\t\tconst pointerMargin=3\r\n\t\tconst trRange=matrix.getRange('tr')\r\n\t\tconst detRange=matrix.getRange('det')\r\n\t\tconst ctx=this.ctx\r\n\t\tconst xRange=this.width/2\r\n\t\tconst yRange=this.height/2\r\n\t\tconst D=matrix.det\r\n\t\tconst T=matrix.tr\r\n\t\tconst drawRegionAreas=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tctx.fillStyle='#FCC'\r\n\t\t\tif (D<0) {\r\n\t\t\t\tctx.fillRect(-xRange,0,xRange*2,yRange)\r\n\t\t\t} else if ((D>0 && 4*D<T*T) || (4*D>T*T) && T!=0) {\r\n\t\t\t\tif (T<0) {\r\n\t\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tif (4*D>T*T) {\r\n\t\t\t\t\tctx.moveTo(xRange,-yRange)\r\n\t\t\t\t\tctx.lineTo(0,-yRange)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.moveTo(xRange,0)\r\n\t\t\t\t}\r\n\t\t\t\tfor (let x=0;x<=xRange;x++) {\r\n\t\t\t\t\tconst t=x*trRange/xRange\r\n\t\t\t\t\tconst d=t*t/4\r\n\t\t\t\t\tconst y=-d*yRange/detRange\r\n\t\t\t\t\tctx.lineTo(x,y)\r\n\t\t\t\t}\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawRegionLines=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tconst drawRegionLinesOnce=(all)=>{\r\n\t\t\t\tconst drawParabola=()=>{\r\n\t\t\t\t\tfor (let x=0;x<=+xRange;x++) {\r\n\t\t\t\t\t\tconst t=x*trRange/xRange\r\n\t\t\t\t\t\tconst d=t*t/4\r\n\t\t\t\t\t\tconst y=-d*yRange/detRange\r\n\t\t\t\t\t\tctx[x?'lineTo':'moveTo'](x,y)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tif (all || (D==0 && T<0)) {\r\n\t\t\t\t\tctx.moveTo(-xRange,0)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D==0 && T>0)) {\r\n\t\t\t\t\tctx.moveTo(+xRange,0)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D>0 && T==0)) {\r\n\t\t\t\t\tctx.moveTo(0,-yRange)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (4*D==T*T && T<0)) {\r\n\t\t\t\t\tctx.save()\r\n\t\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\t\tdrawParabola()\r\n\t\t\t\t\tctx.restore()\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (4*D==T*T && T>0)) {\r\n\t\t\t\t\tdrawParabola()\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D==0 && T==0)) {\r\n\t\t\t\t\tctx.moveTo(-2,-2)\r\n\t\t\t\t\tctx.lineTo(-2,+2)\r\n\t\t\t\t\tctx.lineTo(+2,+2)\r\n\t\t\t\t\tctx.lineTo(+2,-2)\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke()\r\n\t\t\t}\r\n\t\t\tctx.lineCap='square'\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tdrawRegionLinesOnce(true)\r\n\t\t\tctx.lineWidth=4\r\n\t\t\tctx.strokeStyle='#F88'\r\n\t\t\tdrawRegionLinesOnce()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tctx.strokeStyle='#400'\r\n\t\t\tdrawRegionLinesOnce()\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawPosition=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tctx.strokeStyle=ctx.fillStyle='#F00'\r\n\t\t\tlet x=matrix.tr/trRange*xRange\r\n\t\t\tlet y=-matrix.det/detRange*yRange\r\n\t\t\tif (x<0) {\r\n\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\tx=-x\r\n\t\t\t}\r\n\t\t\tif (y<0) {\r\n\t\t\t\tctx.scale(1,-1)\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (x>xRange) {\r\n\t\t\t\tctx.transform(0,1,1,0,0,0)\r\n\t\t\t\t;[x,y]=[y,x]\r\n\t\t\t}\r\n\t\t\tif ((x>xRange && y>yRange-pointerMargin) || (x>xRange-pointerMargin && y>yRange)) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(xRange-pointerMargin,yRange-pointerMargin)\r\n\t\t\t\tctx.lineTo(xRange-pointerMargin,yRange-pointerMargin-pointerSize*Math.SQRT2)\r\n\t\t\t\tctx.lineTo(xRange-pointerMargin-pointerSize*Math.SQRT2,yRange-pointerMargin)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t} else if (y>xRange) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(x,yRange-pointerMargin)\r\n\t\t\t\tctx.lineTo(x+pointerSize,yRange-pointerMargin-pointerSize)\r\n\t\t\t\tctx.lineTo(x-pointerSize,yRange-pointerMargin-pointerSize)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t} else {\r\n\t\t\t\tconst s=crosshairSize\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(x-s,y)\r\n\t\t\t\tctx.lineTo(x+s,y)\r\n\t\t\t\tctx.moveTo(x,y-s)\r\n\t\t\t\tctx.lineTo(x,y+s)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.fillStyle='#FFF'\r\n\t\tctx.fillRect(0,0,this.width,this.height)\r\n\t\tctx.translate(xRange,yRange)\r\n\t\tdrawRegionAreas()\r\n\t\tthis.drawAxes('tr','det')\r\n\t\tdrawRegionLines()\r\n\t\tdrawPosition()\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=TrdetCanvas\r\n","'use strict'\r\n\r\nconst detailsPolyfill=require('crnx-base/details-polyfill')\r\nconst UnorderedClassSubgraph=require('./unordered-class-subgraph')\r\nconst OrderedClassSubgraph=require('./ordered-class-subgraph')\r\nconst TheadLayout=require('./thead-layout')\r\nconst TrLayout=require('./tr-layout')\r\nconst Notation=require('./notation')\r\nconst dataGenerator=require('./data')\r\n\r\nconst i18n=(id)=>{\r\n\tconst strings={\r\n\t\t'trait.entity': \"Associated entities\",\r\n\t\t'trait.associatedHomogeneousEquation': \"Associated homogeneous equation\",\r\n\t\t'trait.characteristicEquation': \"<a href='https://en.wikipedia.org/wiki/Characteristic_equation_(calculus)'>Characteristic equation</a>\",\r\n\t\t'trait.halfLife': \"<a href='https://en.wikipedia.org/wiki/Half-life'>Half-life</a>\",\r\n\r\n\t\t'trait.property': \"Properties\",\r\n\t\t'trait.isoclineProperty': \"Property of <a href='https://en.wikipedia.org/wiki/Isocline'>isoclines</a>\",\r\n\t\t'trait.solutionRelation': \"Solution relation properties\",\r\n\t\t'trait.shiftSolutionRelation': \"Time/value shifts of solutions\",\r\n\t\t'trait.linearitySolutionRelation': \"Linear/affine properties of solutions\",\r\n\t\t'trait.solutionSpaceBasis': \"Basis of the solution space\",\r\n\t\t'trait.homogeneitySolutionRelation': \"Homogeneity of solutions\",\r\n\t\t'trait.additivitySolutionRelation': \"Additivity of solutions\",\r\n\t\t'trait.twoLinearCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Linear_combination'>Linear combination</a> property of solutions\",\r\n\t\t'trait.nLinearCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Linear_combination'>Linear combination</a> property of solutions\",\r\n\t\t'trait.twoAffineCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Affine_combination'>Affine combination</a> property of solutions\",\r\n\t\t'trait.nAffineCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Affine_combination'>Affine combination</a> property of solutions\",\r\n\t\t'trait.associatedSolutionRelation': \"Associated homogeneous equation solution\",\r\n\r\n\t\t'trait.transform': \"Transforms to different types\",\r\n\t\t'trait.orderReduction': \"Order reduction\",\r\n\r\n\t\t'trait.solutionMethod': \"Solutions\",\r\n\t\t'trait.generalSolutionMethod': \"General solution\",\r\n\t\t'trait.phaseSolutionMethod': \"<a href='https://en.wikipedia.org/wiki/Phase_space'>Phase space</a> trajectory\",\r\n\t\t'trait.equilibriumSolutionMethod': \"<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>Equilibrium solutions</a>\",\r\n\t\t'trait.testSolutionMethod': \"Solution testing\",\r\n\r\n\t\t'trait.plot': \"Plot\",\r\n\t}\r\n\treturn strings[id]\r\n}\r\n\r\nconst mathjaxDetailsFixAndPolyfill=function(){\r\n\tdetailsPolyfill.apply(this)\r\n\t$(this).on('toggle',function(){\r\n\t\t// mathjax common html renderer needs this to set correct font size\r\n\t\t// have to do it on every details opening, not just once b/c user can request redraw at any time\r\n\t\t// closed <details> behave like display:none; see http://stackoverflow.com/questions/36779037/mathjax-2-6-font-size-in-hidden-elements\r\n\t\tif ($(this).attr('open')) { // can't test for prop('open') when it's polyfilled\r\n\t\t\tMathJax.Hub.Queue([\"Rerender\",MathJax.Hub,this])\r\n\t\t}\r\n\t})\r\n}\r\n\r\n$(function(){\r\n\t$('.crnx-ode-properties').each(function(){\r\n\t\tconst $container=$(this).empty()\r\n\t\tconst selectedNodes={} // visible nodes // TODO rename to visibleNodes\r\n\r\n\t\t// options\r\n\t\tlet traitAlignmentLevel=1\r\n\t\tconst maxTraitAlignmentLevel=4\r\n\t\tlet dependentVariables='yvz'\r\n\t\tconst availableDependentVariables=['xyw','yvz']\r\n\t\tconst viewDependentVariables={\r\n\t\t\txyw: `\\\\( x \\\\), \\\\( y \\\\), \\\\( w \\\\)`,\r\n\t\t\tyvz: `\\\\( y \\\\), \\\\( v \\\\), \\\\( z \\\\)`,\r\n\t\t}\r\n\r\n\t\tlet notation,data\r\n\t\tconst regenerateData=()=>{\r\n\t\t\tnotation=new Notation(dependentVariables)\r\n\t\t\tdata=dataGenerator(notation)\r\n\t\t}\r\n\t\tregenerateData()\r\n\r\n\t\tfor (let id in data.classes) {\r\n\t\t\tif (data.classes[id].importance<=1) {\r\n\t\t\t\tselectedNodes[id]=true\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getHtmlName=id=>(data.classes[id].htmlName!==undefined\r\n\t\t\t? data.classes[id].htmlName\r\n\t\t\t: data.classes[id].name\r\n\t\t)\r\n\r\n\t\tlet unorderedClassSubgraph,theadLayout,orderedClassSubgraph,trLayout\r\n\t\tconst recomputeLayouts=()=>{\r\n\t\t\tunorderedClassSubgraph=new UnorderedClassSubgraph(data.classes,selectedNodes)\r\n\t\t\ttheadLayout=new TheadLayout(unorderedClassSubgraph)\r\n\t\t\torderedClassSubgraph=new OrderedClassSubgraph(unorderedClassSubgraph,theadLayout.columns)\r\n\t\t\ttrLayout=new TrLayout(unorderedClassSubgraph,data.classes,theadLayout.columns)\r\n\t\t}\r\n\t\trecomputeLayouts()\r\n\r\n\t\t// TODO put into classSubgraph\r\n\t\tconst breadthWalk=(graph,id)=>{\r\n\t\t\tconst result=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst queue=[id]\r\n\t\t\twhile (queue.length>0) {\r\n\t\t\t\tid=queue.shift()\r\n\t\t\t\tif (visited[id]) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tif (!selectedNodes[id]) {\r\n\t\t\t\t\tresult.push(id)\r\n\t\t\t\t}\r\n\t\t\t\tqueue.push(...Object.keys(graph[id]).sort())\r\n\t\t\t}\r\n\t\t\treturn result\r\n\t\t}\r\n\t\tconst writeButton=(text,tip)=>{\r\n\t\t\tconst $button=$(`<button type='button'><span>${text}</span></button>`)\r\n\t\t\tif (tip!==undefined) {\r\n\t\t\t\t$button.attr('title',tip)\r\n\t\t\t}\r\n\t\t\treturn $button\r\n\t\t}\r\n\t\tconst writeTraitItem=(forClassId,fromClassId,traitId)=>{\r\n\t\t\tconst item=data.classes[fromClassId].traits[traitId]\r\n\t\t\tif (!item.content) return\r\n\t\t\tconst getTitle=()=>{\r\n\t\t\t\tif (item.title!==undefined) {\r\n\t\t\t\t\treturn item.title\r\n\t\t\t\t} else if (item.compare) {\r\n\t\t\t\t\treturn \"Property comparable to <em>\"+i18n('trait.'+traitId)+\"</em>\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn i18n('trait.'+traitId)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst $item=$(\"<details class='trait'>\").append(\r\n\t\t\t\t$(\"<summary>\").append(getTitle())\r\n\t\t\t).each(mathjaxDetailsFixAndPolyfill)\r\n\t\t\tconst rec=(line)=>{\r\n\t\t\t\tif (typeof line == 'string') {\r\n\t\t\t\t\treturn $(\"<div class='line'>\").append(line)\r\n\t\t\t\t} else if (typeof line == 'function') {\r\n\t\t\t\t\treturn line()\r\n\t\t\t\t} else if (line.type=='derivation' || line.type=='proof' || line.type=='example' || line.type=='case') {\r\n\t\t\t\t\treturn $(\"<details>\").append(\r\n\t\t\t\t\t\t$(\"<summary>\").append(line.title!==undefined ? line.title : line.type),\r\n\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t).each(mathjaxDetailsFixAndPolyfill)\r\n\t\t\t\t} else if (line.type=='switch') {\r\n\t\t\t\t\treturn $(\"<div class='\"+line.type+\"'>\").append(\r\n\t\t\t\t\t\t$(\"<div class='condition'>\").append(line.title!==undefined ? line.title : line.type,':'),\r\n\t\t\t\t\t\t$(\"<div class='cases'>\").append(\r\n\t\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn $(\"<div class='\"+line.type+\"'>\").append(\r\n\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (item.form) {\r\n\t\t\t\tconst forClass=data.classes[forClassId]\r\n\t\t\t\tlet forForm=forClassId\r\n\t\t\t\tif (forClass.hasForm!==undefined) {\r\n\t\t\t\t\tforForm=forClass.hasForm\r\n\t\t\t\t}\r\n\t\t\t\tlet fromForms={\r\n\t\t\t\t\t[fromClassId]: true,\r\n\t\t\t\t}\r\n\t\t\t\tif (item.form!==true) {\r\n\t\t\t\t\tfromForms=item.form\r\n\t\t\t\t}\r\n\t\t\t\tif (!fromForms[forForm]) {\r\n\t\t\t\t\t$item.append(\r\n\t\t\t\t\t\trec({type:'note',content:[\r\n\t\t\t\t\t\t\t\"when equation is written as <em>\"+getHtmlName(fromClassId)+\"</em>:\",\r\n\t\t\t\t\t\t\t\"\\\\[\"+data.classes[fromClassId].equation+\"\\\\]\",\r\n\t\t\t\t\t\t]})\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$item.append(item.content.map(rec))\r\n\t\t\treturn $item\r\n\t\t}\r\n\t\tconst writeTraitCell=(forClassId,traitCell)=>{\r\n\t\t\tconst $cell=$(\"<td>\")\r\n\t\t\tif (traitCell.length>0) {\r\n\t\t\t\t$cell.append(traitCell.map(classTraitId=>{\r\n\t\t\t\t\tconst classId=classTraitId[0]\r\n\t\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\t\treturn writeTraitItem(forClassId,classId,traitId)\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t\treturn $cell\r\n\t\t}\r\n\t\tconst writeTraitRow=(traitSubtree)=>{\r\n\t\t\tconst traitCells=trLayout.getSubtreeLayout(traitSubtree)\r\n\t\t\tif (!traitCells) return null\r\n\t\t\treturn $(\"<tr>\").append(traitCells.map(\r\n\t\t\t\t(traitCell,i)=>writeTraitCell(theadLayout.columns[i],traitCell)\r\n\t\t\t))\r\n\t\t}\r\n\r\n\t\tlet $tableContainer,$quickSelect,$quickSelectButton\r\n\t\tconst updateQuickSelectButton=()=>{\r\n\t\t\tconst id=$quickSelect.val()\r\n\t\t\t$quickSelectButton.text(selectedNodes[id]\r\n\t\t\t\t? \"Delete\"\r\n\t\t\t\t: \"Add\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tconst deleteNode=id=>{\r\n\t\t\tdelete selectedNodes[id]\r\n\t\t\t$quickSelect.children(`[value=\"${id}\"]`).removeClass('added')\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\trecomputeLayouts()\r\n\t\t\twriteTable()\r\n\t\t}\r\n\t\tconst addNode=id=>{\r\n\t\t\tselectedNodes[id]=true\r\n\t\t\t$quickSelect.children(`[value=\"${id}\"]`).addClass('added')\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\trecomputeLayouts()\r\n\t\t\twriteTable()\r\n\t\t}\r\n\t\tconst writeQuickSelectControls=()=>{\r\n\t\t\tconst $div=$(\"<div>\").append(\r\n\t\t\t\t$quickSelect=$(\"<select>\").append(\r\n\t\t\t\t\tObject.keys(data.classes).sort().map(id=>{\r\n\t\t\t\t\t\tconst $option=$(\"<option>\").val(id).text(data.classes[id].name)\r\n\t\t\t\t\t\tif (selectedNodes[id]) {\r\n\t\t\t\t\t\t\t$option.addClass('added')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $option\r\n\t\t\t\t\t})\r\n\t\t\t\t).change(function(){\r\n\t\t\t\t\tupdateQuickSelectButton()\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$quickSelectButton=$(\"<button>\").click(function(){\r\n\t\t\t\t\tconst id=$quickSelect.val()\r\n\t\t\t\t\tif (selectedNodes[id]) {\r\n\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button>Clear all</button>\").click(function(){\r\n\t\t\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\t\t\tdelete selectedNodes[id]\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$quickSelect.children().removeClass('added')\r\n\t\t\t\t\tupdateQuickSelectButton()\r\n\t\t\t\t\trecomputeLayouts()\r\n\t\t\t\t\twriteTable()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\treturn $div\r\n\t\t}\r\n\t\tconst writeTable=()=>{ // TODO rename (doesn't return object)\r\n\t\t\tconst visibleAncestors={} // including self\r\n\t\t\tconst computeVisibleAncestors=(id,aid)=>{\r\n\t\t\t\tvisibleAncestors[id][aid]=true\r\n\t\t\t\tfor (let naid in unorderedClassSubgraph.visibleParents[aid]) {\r\n\t\t\t\t\tcomputeVisibleAncestors(id,naid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\tvisibleAncestors[id]={}\r\n\t\t\t\tcomputeVisibleAncestors(id,id)\r\n\t\t\t}\r\n\t\t\tconst $equations={}\r\n\t\t\tlet $attachedMenu, $attachedToButton, attachedDirection, attachTimeoutId\r\n\t\t\tconst setCellClasses=($cell,cell)=>{\r\n\t\t\t\tfor (let dir of ['b','t','bt','rl','rt','bl']) {\r\n\t\t\t\t\tif (cell[dir]) {\r\n\t\t\t\t\t\t$cell.addClass(dir)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst writeTheadButton=($cell,text,tip,dir,nodes)=>{\r\n\t\t\t\tconst keyCodeEnter=13\r\n\t\t\t\tconst keyCodeSpace=32\r\n\t\t\t\tconst keyCodeUp=38\r\n\t\t\t\tconst keyCodeDown=40\r\n\t\t\t\tconst $button=writeButton(text,tip).addClass(dir).click(function(){\r\n\t\t\t\t\tconst removeAttachedMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton.removeClass('attached-t attached-b')\r\n\t\t\t\t\t\t$attachedMenu.remove()\r\n\t\t\t\t\t\tclearTimeout(attachTimeoutId)\r\n\t\t\t\t\t\t$attachedToButton=undefined\r\n\t\t\t\t\t\t$attachedMenu=undefined\r\n\t\t\t\t\t\tattachedDirection=undefined\r\n\t\t\t\t\t\tattachTimeoutId=undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst startAttachingMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton=$button\r\n\t\t\t\t\t\t$attachedMenu=$(\"<ul>\").append(nodes.map(\r\n\t\t\t\t\t\t\tid=>$(\"<li tabindex='0'>\"+data.classes[id].name+\"</li>\").click(function(){\r\n\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\t\t\t\tif (!attachedDirection) return // not yet decided on attach direction (this can't happen)\r\n\t\t\t\t\t\t\t\tif (ev.keyCode==keyCodeUp) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).prev()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='b') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).next()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='t') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace) {\r\n\t\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t\t$cell.append($attachedMenu)\r\n\t\t\t\t\t\tattachTimeoutId=setTimeout(()=>{ // can calculate height only after it's displayed\r\n\t\t\t\t\t\t\tconst mh=$attachedMenu.outerHeight()\r\n\t\t\t\t\t\t\tconst mo=$attachedMenu.offset()\r\n\t\t\t\t\t\t\tconst bh=$button.outerHeight()\r\n\t\t\t\t\t\t\tconst bo=$button.offset()\r\n\t\t\t\t\t\t\tlet t=bo.top-mh+1\r\n\t\t\t\t\t\t\tif (dir!='t' || t<0) { // want below or doesn't fit to screen above the button\r\n\t\t\t\t\t\t\t\tt=bo.top+bh-1\r\n\t\t\t\t\t\t\t\tattachedDirection='b'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$attachedMenu.insertBefore($button)\r\n\t\t\t\t\t\t\t\tattachedDirection='t'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$attachedMenu.offset({\r\n\t\t\t\t\t\t\t\ttop: t,\r\n\t\t\t\t\t\t\t\tleft: mo.left,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t$attachedMenu.addClass('attached')\r\n\t\t\t\t\t\t\t$button.addClass('attached-'+attachedDirection)\r\n\t\t\t\t\t\t},0)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!$button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif ($attachedToButton) {\r\n\t\t\t\t\t\t\tremoveAttachedMenu() // close menu opened elsewhere\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstartAttachingMenu()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tremoveAttachedMenu() // close menu here\r\n\t\t\t\t\t}\r\n\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\tif ($button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif (ev.keyCode==keyCodeUp && attachedDirection=='t') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().last().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown && attachedDirection=='b') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().first().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $button\r\n\t\t\t}\r\n\t\t\tconst writeTheadCell=cell=>{\r\n\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\tif (cell.node!==undefined) {\r\n\t\t\t\t\t$cell.append(getHtmlName(cell.node))\r\n\t\t\t\t\tconst ancestors=breadthWalk(unorderedClassSubgraph.allParents,cell.node).reverse()\r\n\t\t\t\t\tif (ancestors.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add ancestor\",\"Add one of supertypes of this equation type\",'t',ancestors)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst descendants=breadthWalk(unorderedClassSubgraph.allChildren,cell.node)\r\n\t\t\t\t\tif (descendants.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add descendant\",\"Add one of subtypes of this equation type\",'b',descendants)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $cell\r\n\t\t\t}\r\n\t\t\tconst writeThead=()=>{\r\n\t\t\t\tconst $thead=$(\"<thead>\")\r\n\t\t\t\tfor (let i=0;i<theadLayout.nodeLayers.length;i++) {\r\n\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t$(\"<tr class='nodes'>\").append(\r\n\t\t\t\t\t\t\ttheadLayout.nodeLayers[i].map(writeTheadCell)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (i<theadLayout.arcLayers.length) {\r\n\t\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t\ttheadLayout.arcLayers[i].map(row=>$(\"<tr class='arcs'>\").append(\r\n\t\t\t\t\t\t\t\trow.map(cell=>{\r\n\t\t\t\t\t\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\t\t\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\t\t\t\t\t\treturn $cell\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $thead\r\n\t\t\t}\r\n\t\t\tconst writeTfoot=()=>{\r\n\t\t\t\treturn $(\"<tfoot>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\ttheadLayout.columns.map(id=>$(\"<td>\").append(\r\n\t\t\t\t\t\t\twriteButton(\"Delete\",\"Delete this equation type\").click(function(){\r\n\t\t\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tconst writeTraitRows=()=>{\r\n\t\t\t\tconst output=[]\r\n\t\t\t\tconst rec=(traitSubtree,depth)=>{\r\n\t\t\t\t\tconst traitId=traitSubtree[0]\r\n\t\t\t\t\tconst traitChildren=traitSubtree[1]\r\n\t\t\t\t\tif (depth>=traitAlignmentLevel || !traitChildren) {\r\n\t\t\t\t\t\toutput.push(writeTraitRow(traitSubtree))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttraitChildren.forEach(traitChild=>rec(traitChild,depth+1))\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\trec(['root',data.traits],0)\r\n\t\t\t\treturn output\r\n\t\t\t}\r\n\t\t\tconst writeTraitAlignmentControls=()=>{\r\n\t\t\t\tconst $container=$(\"<form>Trait alignment level:</form>\")\r\n\t\t\t\tfor (let i=0;i<=maxTraitAlignmentLevel;i++) {\r\n\t\t\t\t\t$container.append(\r\n\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t\t$(\"<input type='radio' name='trait-alignment-level'>\").prop('checked',i==traitAlignmentLevel).click(function(){\r\n\t\t\t\t\t\t\t\ttraitAlignmentLevel=i\r\n\t\t\t\t\t\t\t\twriteTable()\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\" \"+i\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn $container\r\n\t\t\t}\r\n\t\t\tconst writeDependentVariablesControls=()=>{\r\n\t\t\t\t// TODO text inputs with\r\n\t\t\t\t//\tsuggested names: u, v, w, x, y, z\r\n\t\t\t\t//\texamples: x,y,w; y,v,z\r\n\t\t\t\tconst $container=$(\"<form>Dependent variables notation (main variable, second variable in 2d system, substitution variable):</form>\")\r\n\t\t\t\tfor (let dvs of availableDependentVariables) {\r\n\t\t\t\t\t$container.append(\r\n\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t\t$(\"<input type='radio' name='dependent-variables'>\").prop('checked',dvs==dependentVariables).click(function(){\r\n\t\t\t\t\t\t\t\tdependentVariables=dvs\r\n\t\t\t\t\t\t\t\tregenerateData()\r\n\t\t\t\t\t\t\t\twriteTable()\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\" \"+viewDependentVariables[dvs]\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn $container\r\n\t\t\t}\r\n\t\t\tconst writeEquation=(id)=>{\r\n\t\t\t\t$equations[id]=$(\"<div class='equation'>\").append(\"\\\\[\"+data.classes[id].equation+\"\\\\]\")\r\n\t\t\t\tif (data.classes[id].vectorEquation) {\r\n\t\t\t\t\t$equations[id].append(\"<div class='alt-separator'>or in vector format</div>\",\"\\\\[\"+data.classes[id].vectorEquation+\"\\\\]\")\r\n\t\t\t\t}\r\n\t\t\t\t$equations[id].hover(function(){\r\n\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t$equations[aid].addClass('highlight')\r\n\t\t\t\t\t}\r\n\t\t\t\t},function(){\r\n\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t$equations[aid].removeClass('highlight')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $equations[id]\r\n\t\t\t}\r\n\t\t\tconst writeGeneralNotes=()=>{\r\n\t\t\t\tconst nt=notation\r\n\t\t\t\treturn $(\"<ul>\").append(\r\n\t\t\t\t\t`<li>how to read the diagram: <ul>`+\r\n\t\t\t\t\t\t`<li>equation type names are written among arrows that show the relationship between types</li>`+\r\n\t\t\t\t\t\t`<li>properties of an equation type are listed in the table column below its name</li>`+\r\n\t\t\t\t\t\t`<li>every property of the equation type on the tip of the arrow <span class='arrow'></span> is also true for the equation type on the other end of the arrow (like <a href='https://en.wikipedia.org/wiki/Class_diagram'>class diagram</a>)</li>`+\r\n\t\t\t\t\t`</ul></li>`,\r\n\t\t\t\t\t`<li>all functions have to be continuous on the interval of interest</li>`,\r\n\t\t\t\t\t`<li>\\\\( ${nt.x} \\\\), \\\\( ${nt.y} \\\\) or \\\\( ${nt.w} \\\\) possibly with a subscript is a function of \\\\( t \\\\); other functions are written with an argument like this: \\\\( f(t) \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( C \\\\), \\\\( K \\\\) and other uppercase letters are arbitrary constants</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t + C \\\\) is a family of antiderivatives of \\\\( f(t) \\\\) with parameter \\\\( C \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t \\\\) is any single antiderivative of \\\\( f(t) \\\\)`\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t$tableContainer.empty()\r\n\t\t\tif (Object.keys(selectedNodes).length>0) $tableContainer.append(\r\n\t\t\t\t$(\"<table class='classes'>\").append(\r\n\t\t\t\t\twriteThead(),\r\n\t\t\t\t\twriteTfoot(),\r\n\t\t\t\t\t$(\"<tbody>\").append(\r\n\t\t\t\t\t\t$(\"<tr>\").append( // equations\r\n\t\t\t\t\t\t\ttheadLayout.columns.map(id=>{\r\n\t\t\t\t\t\t\t\tconst $td=$(\"<td>\").append(writeEquation(id))\r\n\t\t\t\t\t\t\t\tconst notes=[]\r\n\t\t\t\t\t\t\t\tif (data.classes[id].equationNotes!==undefined) {\r\n\t\t\t\t\t\t\t\t\tnotes.push(...data.classes[id].equationNotes.map(\r\n\t\t\t\t\t\t\t\t\t\tnoteText=>$(\"<div class='note'>\").append(noteText)\r\n\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconst columnParents=orderedClassSubgraph.visibleParents[id]\r\n\t\t\t\t\t\t\t\tif (columnParents.length>0) {\r\n\t\t\t\t\t\t\t\t\tnotes.push(\r\n\t\t\t\t\t\t\t\t\t\t$(\"<div class='note'>\").append(\r\n\t\t\t\t\t\t\t\t\t\t\t\"can also be written as and has all properties of:\",\r\n\t\t\t\t\t\t\t\t\t\t\t$(\"<ul>\").append(columnParents.map(pid=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst $li=$(\"<li>\").append(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"<em>\"+getHtmlName(pid)+\"</em>\").hover(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$equations[pid].addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$li.addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$li.removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$equations[pid].removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn $li\r\n\t\t\t\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (notes.length>0) {\r\n\t\t\t\t\t\t\t\t\t$td.append($(\"<ul>\").append(notes.map(\r\n\t\t\t\t\t\t\t\t\t\tnote=>$(\"<li>\").append(note)\r\n\t\t\t\t\t\t\t\t\t)))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn $td\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\twriteTraitRows()\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t$tableContainer.append(\r\n\t\t\t\twriteTraitAlignmentControls(),\r\n\t\t\t\twriteDependentVariablesControls(),\r\n\t\t\t\t\"<p>General notes:</p>\",\r\n\t\t\t\twriteGeneralNotes()\r\n\t\t\t)\r\n\t\t\tMathJax.Hub.Queue([\"Typeset\",MathJax.Hub]) // TODO pass table container\r\n\t\t}\r\n\t\t$container.append(\r\n\t\t\twriteQuickSelectControls(),\r\n\t\t\t$tableContainer=$(\"<div>\")\r\n\t\t)\r\n\t\twriteTable()\r\n\t})\r\n})\r\n","'use strict'\r\n\r\nclass Notation {\r\n\tconstructor(dependentVariables) {\r\n\t\tthis.dependentVariables=dependentVariables // main variable, second variable in 2d system, substitution variable\r\n\t}\r\n\r\n\t// variable names\r\n\tget x() { // main dependent variable\r\n\t\treturn this.dependentVariables.charAt(0)\r\n\t}\r\n\tget X() { // vector of dependent variables\r\n\t\treturn '\\\\mathbf{'+this.dependentVariables.charAt(0).toUpperCase()+'}'\r\n\t}\r\n\tget y() { // second dependent variable for systems of 2 equations\r\n\t\treturn this.dependentVariables.charAt(1)\r\n\t}\r\n\tget w() { // substituted variable\r\n\t\treturn this.dependentVariables.charAt(2)\r\n\t}\r\n\r\n\t// tex shortcuts\r\n\tdd(a,b,n) {\r\n\t\tif (a===undefined) a=''\r\n\t\tif (b===undefined) b='t'\r\n\t\tif (n===undefined) n=1\r\n\t\tif (n==1) {\r\n\t\t\treturn `\\\\frac{\\\\mathrm{d}${a}}{\\\\mathrm{d}${b}}`\r\n\t\t} else {\r\n\t\t\treturn `\\\\frac{\\\\mathrm{d}^{${n}}${a}}{\\\\mathrm{d}${b}^{${n}}}`\r\n\t\t}\r\n\t}\r\n\tget ddt() {\r\n\t\treturn this.dd()\r\n\t}\r\n\tget dxdt() {\r\n\t\treturn this.dd(this.x)\r\n\t}\r\n\tsint(f,t) { // short integral = with no spacing before dt\r\n\t\tif (t===undefined) t='t'\r\n\t\treturn `\\\\int\\\\!${f}\\\\mathrm{d}${t}`\r\n\t}\r\n\tint(f,t) {\r\n\t\treturn this.sint(f+'\\\\,',t)\r\n\t}\r\n\tvec2(a,b) {\r\n\t\treturn `\\\\begin{bmatrix} ${a} \\\\\\\\ ${b} \\\\end{bmatrix}`\r\n\t}\r\n\tsvec2(a,b) {\r\n\t\treturn `\\\\left[ \\\\begin{smallmatrix} ${a} \\\\\\\\ ${b} \\\\end{smallmatrix} \\\\right]`\r\n\t}\r\n\tmat2(a,b,c,d) {\r\n\t\treturn `\\\\begin{bmatrix} ${a} & ${b} \\\\\\\\ ${c} & ${d} \\\\end{bmatrix}`\r\n\t}\r\n}\r\n\r\nmodule.exports=Notation\r\n","'use strict'\r\n\r\n// TODO maybe don't need this class - use iterators on unordered subgraph instead?\r\nclass OrderedClassGraph {\r\n\tconstructor(unorderedClassGraph,orderedClasses) {\r\n\t\tconst ranks={}\r\n\t\torderedClasses.forEach((id,i)=>{\r\n\t\t\tranks[id]=i\r\n\t\t})\r\n\t\tthis.visibleParents={}\r\n\t\tfor (let id in unorderedClassGraph.visibleParents) {\r\n\t\t\tthis.visibleParents[id]=Object.keys(unorderedClassGraph.visibleParents[id]).sort((id1,id2)=>ranks[id1]-ranks[id2])\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=OrderedClassGraph\r\n","'use strict'\r\n\r\nconst makeNodeLabelLayers=require('./thead-layout/node-layers')\r\nconst makeArcLocationLayers=require('./thead-layout/arc-layers')\r\nconst makeLayoutLayers=require('./thead-layout/cell-layers')\r\n\r\nclass TheadLayout {\r\n\tconstructor(unorderedClassGraph) {\r\n\t\tconst orderedVisibleDepthNodes=makeNodeLabelLayers(unorderedClassGraph.visibleParents,unorderedClassGraph.visibleDepthNodes)\r\n\t\tconst arcLocationLayers=makeArcLocationLayers(orderedVisibleDepthNodes,unorderedClassGraph.visibleParents)\r\n\t\tconst t=makeLayoutLayers(orderedVisibleDepthNodes,arcLocationLayers)\r\n\t\tthis.columns=[].concat(...orderedVisibleDepthNodes)\r\n\t\tthis.nodeLayers=t[0]\r\n\t\tthis.arcLayers=t[1]\r\n\t}\r\n}\r\n\r\nmodule.exports=TheadLayout\r\n","'use strict'\r\n\r\nmodule.exports=(depthList,parents)=>{ // TODO would prefer ordered parents list\r\n\tconst merge=(a,b)=>{ // can also use lodash union and sort\r\n\t\tconst c=[]\r\n\t\tlet i=0, j=0\r\n\t\twhile (i<a.length || j<b.length) {\r\n\t\t\tif (j>=b.length) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (i>=a.length) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else if (a[i]<b[j]) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (a[i]>b[j]) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t\tj++\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn c\r\n\t}\r\n\tconst arcRows=[]\r\n\tconst xs={}\r\n\tlet x=0\r\n\tfor (let i=0;i<depthList.length;i++) {\r\n\t\tfor (const node of depthList[i]) {\r\n\t\t\txs[node]=x++\r\n\t\t}\r\n\t\tif (i>0) {\r\n\t\t\tconst arcs=[]\r\n\t\t\tfor (let j=depthList[i].length-1;j>=0;j--) {\r\n\t\t\t\tconst node=depthList[i][j]\r\n\t\t\t\tconst parentXs=Object.keys(parents[node]).map(parentNode=>xs[parentNode]).sort((a,b)=>a-b)\r\n\t\t\t\tarcs.push([parentXs,[xs[node]]])\r\n\t\t\t}\r\n\t\t\tfor (let j=1;j<arcs.length;j++) {\r\n\t\t\t\tif (String(arcs[j-1][0])===String(arcs[j][0])) { // sloppy but should be ok for numbers\r\n\t\t\t\t\tarcs[j-1][1]=merge(arcs[j-1][1],arcs[j][1]) // merge children - parents already merged\r\n\t\t\t\t\tarcs.splice(j,1)\r\n\t\t\t\t\tj-=1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tarcRows.push(arcs)\r\n\t\t}\r\n\t}\r\n\treturn arcRows\r\n}\r\n","'use strict'\r\n\r\n// TODO fake lodash\r\nconst sum=arr=>arr.reduce((a,b)=>a+b,0)\r\n//const times=(n,fn)=>Array(n).map((v,i)=>fn(i))\r\nconst times=(n,fn)=>{\r\n\tvar arr=Array(n)\r\n\tfor (var i=0;i<n;i++) {\r\n\t\tarr[i]=fn(i)\r\n\t}\r\n\treturn arr\r\n}\r\nconst head=arr=>arr[0]\r\nconst last=arr=>arr[arr.length-1]\r\n\r\nmodule.exports=(nodeLabelLayers,arcLocationLayers)=>{\r\n\tconst layoutWidth=sum(nodeLabelLayers.map(x=>x.length))\r\n\tconst makeBlankRow=()=>times(layoutWidth,()=>({}))\r\n\tconst nodeLayoutLayers=[], arcLayoutLayers=[]\r\n\tconst drawArcUp=(i,j,k)=>{\r\n\t\tfor (;i>=0;i--) {\r\n\t\t\tfor (j-=1;j>=0;j--) {\r\n\t\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t\t}\r\n\t\t\tif (nodeLayoutLayers[i][k].node!==undefined) {\r\n\t\t\t\tnodeLayoutLayers[i][k].b=true\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tnodeLayoutLayers[i][k].bt=true\r\n\t\t\tif (i<=0) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tj=arcLayoutLayers[i-1].length\r\n\t\t}\r\n\t}\r\n\tconst drawArcDown=(i,j,k)=>{\r\n\t\tfor (j+=1;j<arcLayoutLayers[i].length;j++) {\r\n\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t}\r\n\t\tnodeLayoutLayers[i+1][k].t=true\r\n\t}\r\n\t// create empty cells\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tnodeLayoutLayers.push(makeBlankRow())\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tarcLayoutLayers.push(arcLocationLayers[i].map(makeBlankRow))\r\n\t}\r\n\t// fill cells\r\n\tlet x=0\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tfor (const node of nodeLabelLayers[i]) {\r\n\t\t\tnodeLayoutLayers[i][x++].node=node\r\n\t\t}\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tfor (let j=0;j<arcLocationLayers[i].length;j++) {\r\n\t\t\tconst parentLocations=arcLocationLayers[i][j][0]\r\n\t\t\tconst childLocations=arcLocationLayers[i][j][1]\r\n\t\t\tlet pi=0, ci=0\r\n\t\t\tfor (let k=0;k<layoutWidth;k++) {\r\n\t\t\t\tif (k>head(parentLocations) && k<last(childLocations)) {\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rl=true\r\n\t\t\t\t}\r\n\t\t\t\tif (k==parentLocations[pi]) {\r\n\t\t\t\t\tpi++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rt=true\r\n\t\t\t\t\tdrawArcUp(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t\tif (k==childLocations[ci]) {\r\n\t\t\t\t\tci++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].bl=true\r\n\t\t\t\t\tdrawArcDown(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn [nodeLayoutLayers,arcLayoutLayers]\r\n}\r\n","'use strict'\r\n\r\n// dag = {nodeLabel:{parentLabel:true,...},...}\r\n// nodes = {nodeLabel:true,...}\r\nmodule.exports=(visibleParents,visibleDepthNodes)=>{\r\n\t// sort nodes at each depth by\r\n\t//\tlexicographic parent order\r\n\t//\tlabel\r\n\tconst orderedVisibleDepthNodes=[]\r\n\tlet nextParentOrder=0\r\n\tconst parentOrder={}\r\n\tfor (let depth in visibleDepthNodes) {\r\n\t\torderedVisibleDepthNodes[depth]=Object.keys(visibleDepthNodes[depth])\r\n\t\tconst sortedParents={}\r\n\t\tfor (let node in visibleDepthNodes[depth]) {\r\n\t\t\tsortedParents[node]=Object.keys(visibleParents[node]).map(\r\n\t\t\t\tparentNode=>parentOrder[parentNode]\r\n\t\t\t).sort((a,b)=>a-b)\r\n\t\t}\r\n\t\torderedVisibleDepthNodes[depth].sort((node0,node1)=>{\r\n\t\t\tconst p0=sortedParents[node0]\r\n\t\t\tconst p1=sortedParents[node1]\r\n\t\t\tfor (let i=0;i<p0.length||i<p1.length;i++) {\r\n\t\t\t\tconst cmpLen=(i<p0.length)-(i<p1.length)\r\n\t\t\t\tif (cmpLen!=0) {\r\n\t\t\t\t\treturn cmpLen\r\n\t\t\t\t}\r\n\t\t\t\tconst cmpOrd=p0[i]-p1[i]\r\n\t\t\t\tif (cmpOrd!=0) {\r\n\t\t\t\t\treturn cmpOrd\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (node0<node1) {\r\n\t\t\t\treturn -1\r\n\t\t\t} else if (node0>node1) {\r\n\t\t\t\treturn +1\r\n\t\t\t} else {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t})\r\n\t\tfor (const node of orderedVisibleDepthNodes[depth]) {\r\n\t\t\tparentOrder[node]=nextParentOrder++\r\n\t\t}\r\n\t}\r\n\treturn orderedVisibleDepthNodes\r\n}\r\n","'use strict'\r\n\r\nclass TrLayout {\r\n\tconstructor(classSubgraph,classData,classColumns) {\r\n\t\tthis.classSubgraph=classSubgraph\r\n\t\tthis.classData=classData\r\n\t\tthis.classColumns=classColumns\r\n\t}\r\n\r\n\t// returns list of cells: list of (class id, trait id)\r\n\t// \tclass id = which class to take property from\r\n\t// returns null if row is to be skipped\r\n\tgetSubtreeLayout(traitSubtree) {\r\n\t\tconst ancestorsHaveIntegratedTrait=(classId,traitId)=>{\r\n\t\t\tconst visited={}\r\n\t\t\tconst walk=classId=>{\r\n\t\t\t\tif (visited[classId]) return false\r\n\t\t\t\tvisited[classId]=true\r\n\t\t\t\tif (getIntegratedClassesForTrait(classId,traitId).length>0) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\tfor (let vpid in this.classSubgraph.visibleParents[classId]) {\r\n\t\t\t\t\tif (walk(vpid)) {\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tfor (let vpid in this.classSubgraph.visibleParents[classId]) {\r\n\t\t\t\tif (walk(vpid)) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tconst getIntegratedClassesForTrait=(classId,traitId)=>{ // TODO memoize?\r\n\t\t\tconst integratedClassIds=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst walk=id=>{\r\n\t\t\t\tif (visited[id]) return\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tconst trait=this.classData[id].traits[traitId]\r\n\t\t\t\tif (trait) {\r\n\t\t\t\t\tif (!trait.close || ancestorsHaveIntegratedTrait(classId,traitId)) {\r\n\t\t\t\t\t\tintegratedClassIds.push(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tObject.keys(this.classSubgraph.integratedAncestors[classId][id]).sort().forEach(walk)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twalk(classId)\r\n\t\t\treturn integratedClassIds\r\n\t\t}\r\n\r\n\t\tconst cells=this.classColumns.map(classId=>{\r\n\t\t\tconst cell=[]\r\n\t\t\tconst walkTraits=(traitSubtree)=>{\r\n\t\t\t\tconst traitId=traitSubtree[0]\r\n\t\t\t\tconst traitChildren=traitSubtree[1]\r\n\t\t\t\tif (traitChildren) {\r\n\t\t\t\t\ttraitChildren.forEach(walkTraits)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (const id of getIntegratedClassesForTrait(classId,traitId)) {\r\n\t\t\t\t\t\tcell.push([id,traitId])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twalkTraits(traitSubtree)\r\n\t\t\treturn cell\r\n\t\t})\r\n\r\n\t\t// compared traits filtering\r\n\t\tconst keepTraits={}\r\n\t\tfor (const cell of cells) {\r\n\t\t\tfor (const classTraitId of cell) {\r\n\t\t\t\tconst classId=classTraitId[0]\r\n\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\tconst trait=this.classData[classId].traits[traitId]\r\n\t\t\t\tif (!trait.compare) {\r\n\t\t\t\t\tkeepTraits[traitId]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i=0;i<cells.length;i++) {\r\n\t\t\tcells[i]=cells[i].filter(classTraitId=>{\r\n\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\treturn keepTraits[traitId]\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// empty row detection\r\n\t\tif (cells.some(cell=>cell.length>0)) {\r\n\t\t\treturn cells\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TrLayout\r\n","'use strict'\r\n\r\nclass UnorderedClassGraph {\r\n\tconstructor(classData,visibleClasses) {\r\n\t\tconst invertGraph=(graph)=>{\r\n\t\t\tconst igraph={}\r\n\t\t\tfor (let id in graph) {\r\n\t\t\t\tigraph[id]={}\r\n\t\t\t}\r\n\t\t\tfor (let id in graph) {\r\n\t\t\t\tfor (let pid in graph[id]) {\r\n\t\t\t\t\tigraph[pid][id]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn igraph\r\n\t\t}\r\n\r\n\t\t// this.allParents and this.allChildren\r\n\t\tthis.allParents={}\r\n\t\tfor (let id in classData) {\r\n\t\t\tthis.allParents[id]=classData[id].parents\r\n\t\t}\r\n\t\tthis.allChildren=invertGraph(this.allParents)\r\n\r\n\t\t// this.visibleParents, this.visibleChildren, this.visibleDepthNodes\r\n\t\tconst ancestorDistances={} // {node:{ancestorNode:distance,...},...}; node is any node, ancestorNode is one of selectedNodes\r\n\t\tconst addAncestorDistance=(fromNode,toNode,distance)=>{\r\n\t\t\tconst oldDistance=ancestorDistances[fromNode][toNode]\r\n\t\t\tconst newDistance=(oldDistance===undefined\r\n\t\t\t\t? distance\r\n\t\t\t\t: Math.max(distance,oldDistance)\r\n\t\t\t)\r\n\t\t\tancestorDistances[fromNode][toNode]=newDistance\r\n\t\t}\r\n\t\tconst traverseNode=node=>{\r\n\t\t\tif (ancestorDistances[node]) {\r\n\t\t\t\treturn // already visited\r\n\t\t\t}\r\n\t\t\tancestorDistances[node]={}\r\n\t\t\tfor (let parentNode in this.allParents[node]) {\r\n\t\t\t\ttraverseNode(parentNode)\r\n\t\t\t\tif (visibleClasses[parentNode]) {\r\n\t\t\t\t\taddAncestorDistance(node,parentNode,1)\r\n\t\t\t\t}\r\n\t\t\t\tfor (let ancestorNode in ancestorDistances[parentNode]) {\r\n\t\t\t\t\tconst parentDistance=ancestorDistances[parentNode][ancestorNode]\r\n\t\t\t\t\taddAncestorDistance(node,ancestorNode,parentDistance+!!visibleClasses[parentNode])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.visibleDepthNodes=[]\r\n\t\tthis.visibleParents={}\r\n\t\tfor (let node in visibleClasses) {\r\n\t\t\ttraverseNode(node)\r\n\t\t\tlet depth=0\r\n\t\t\tthis.visibleParents[node]={}\r\n\t\t\tfor (let ancestorNode in ancestorDistances[node]) {\r\n\t\t\t\tconst distance=ancestorDistances[node][ancestorNode]\r\n\t\t\t\tif (distance>depth) {\r\n\t\t\t\t\tdepth=distance\r\n\t\t\t\t}\r\n\t\t\t\tif (distance==1) {\r\n\t\t\t\t\tthis.visibleParents[node][ancestorNode]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.visibleDepthNodes[depth]===undefined) {\r\n\t\t\t\tthis.visibleDepthNodes[depth]={}\r\n\t\t\t}\r\n\t\t\tthis.visibleDepthNodes[depth][node]=true\r\n\t\t}\r\n\t\tthis.visibleChildren=invertGraph(this.visibleParents)\r\n\r\n\t\t// this.integratedAncestors = ancestors that are not (visible parents and/or ancestors of visible parents)\r\n\t\tthis.integratedAncestors={}\r\n\t\tfor (let cid in visibleClasses) {\r\n\t\t\tconst masked={}\r\n\t\t\tconst maskAncestors=id=>{\r\n\t\t\t\tif (masked[id]) return\r\n\t\t\t\tmasked[id]=true\r\n\t\t\t\tfor (let pid in this.allParents[id]) {\r\n\t\t\t\t\tmaskAncestors(pid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let pid in this.visibleParents[cid]) {\r\n\t\t\t\tmaskAncestors(pid)\r\n\t\t\t}\r\n\t\t\tthis.integratedAncestors[cid]={}\r\n\t\t\tconst integrateAncestors=id=>{\r\n\t\t\t\tif (this.integratedAncestors[cid][id]) return\r\n\t\t\t\tthis.integratedAncestors[cid][id]={}\r\n\t\t\t\tfor (let pid in this.allParents[id]) {\r\n\t\t\t\t\tif (!masked[pid]) {\r\n\t\t\t\t\t\tthis.integratedAncestors[cid][id][pid]=true\r\n\t\t\t\t\t\tintegrateAncestors(pid)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tintegrateAncestors(cid)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=UnorderedClassGraph\r\n"],"sourceRoot":"."}