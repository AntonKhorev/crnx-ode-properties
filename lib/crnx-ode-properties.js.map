{"version":3,"sources":["crnx-ode-properties.js","node_modules/browser-pack/_prelude.js","node_modules/crnx-base/details-polyfill.js","src/data.js","src/data/equations-1st.js","src/data/equations-2nd.js","src/data/equations-nth.js","src/data/systems.js","src/lhc-plot.js","src/lhc-plot/canvas.js","src/lhc-plot/closest-point-on-hyperbola.js","src/lhc-plot/matrix.js","src/lhc-plot/phase-canvas.js","src/lhc-plot/trdet-canvas.js","src/main.js","src/notation.js","src/ordered-class-subgraph.js","src/thead-layout.js","src/thead-layout/arc-layers.js","src/thead-layout/cell-layers.js","src/thead-layout/node-layers.js","src/tr-layout.js","src/unordered-class-subgraph.js"],"names":["babelHelpers","typeof","obj","Symbol","constructor","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","classCallCheck","instance","TypeError","possibleConstructorReturn","self","call","ReferenceError","inherits","subClass","superClass","defaults","keys","getOwnPropertyNames","value","getOwnPropertyDescriptor","undefined","create","taggedTemplateLiteralLoose","strings","raw","e","t","n","r","s","o","u","a","require","f","Error","code","l","exports",1,"module","detailsSupported","document","createElement","$details","$","this","toggleOpen","attr","removeAttr","keyCodeEnter","keyCodeSpace","handleEvent","ev","closest","is","addClass","children","click","keydown","keyCode",2,"traits","nt","classes","merge","mergedClassesGenerator","mergedClasses","id","3","4","5","6","eqsol","name","o1","parents","sn","on","importance","equation","dxdt","x","testSolutionMethod","content","o1_separable","htmlName","generalSolutionMethod","form","type","equilibriumSolutionMethod","o1_autonomous","isoclineProperty","shiftSolutionRelation","o1_bernoulli","equationNotes","w","dd","sint","o1_linear","associatedHomogeneousEquation","solutionSpaceBasis","homogeneitySolutionRelation","compare","additivitySolutionRelation","twoLinearCombinationSolutionRelation","nLinearCombinationSolutionRelation","twoAffineCombinationSolutionRelation","nAffineCombinationSolutionRelation","associatedSolutionRelation","title","ddt","close","o1_linearHomogeneous","o1_separableInT","o1_expGrowth","on_linearHomogeneousConstant","characteristicEquation","o1_logisticGrowth","ivp","lhc_characteristicEquation","b","c","lhc_orderReduction","y","lhc_generalSolutionMethod","mat2","vec2","harmonicOscillatorType","wiki","discriminantRelation","o2_harmonicOscillator","hasForm","o2","orderReduction","o2_autonomous","o2_linearHomogeneous","o2_linearHomogeneousConstant","o2_simpleHarmonicOscillator","o2_underdampedHarmonicOscillator","o2_criticallyDampedHarmonicOscillator","o2_overdampedHarmonicOscillator","o2_vanDerPol","o2_unforcedDuffing","LhcPlot","vectorEquation","X","s2","s2_partlyDecoupled","s2_autonomous","s2_linearHomogeneous","s2_linearHomogeneousConstant","svec2","plot","$output","sn_sir","phaseSolutionMethod","7","detailsPolyfill","Matrix","TrdetCanvas","PhaseCanvas","xLabel","yLabel","matrix","$numberInputs","$rangeInputs","$equilibriumType","trdetCanvas","phaseCanvas","updateDetails","updateEquilibriumType","getEquilibriumType","D","det","T","tr","ssc","text","forUpdated","cf","val","redraw","getCoefInputs","coef","isMatrixElement","valueRange","getRange","initCoefInput","getValue","setValue","$input","checkValidity","Number","$div","label","slice","charAt","$number","$range","append","v","toFixed","setZero","setAssociated","each","buttons","$canvas","width","h","height","trim","tRange","dRange","tClose","dClose","offsetX","d","offsetY","p","Math","abs","setTrdetExternally","10","11","12",8,"Canvas","ctx","getContext","drawAxes","xAxisSize","yAxisSize","arrowSize","drawAxis","beginPath","moveTo","lineTo","stroke","save","lineWidth","strokeStyle","fillStyle","font","rotate","PI","restore","textBaseline","fillText","textAlign",9,"getClosestPointOnPositiveHyperbolaIn1stQuadrant","C","x0","y0","sqrt","epsilon2","iterationLimit","yx","xy","x1","y1","getClosestPointOnPositiveHyperbola","getClosestPointOnHyperbola","_updated","fn","_computeElementsFromTrdet","_original","_a","_b","_c","_d","_tr","bc","_det","_computeTrdetFromElements","_computeEigenvaluesFromTrdet","discr","root","_re2","_re1","_im1","_im2","_root","re1","re2","im1","im2","_computeTrdetFromEigenvalues","getEigenvector","lambda","getComplexEigenvector","alpha","beta","_setRe","j","_setIm","get","set","_Canvas","apply","arguments","xRange","yRange","drawDirectionField","arrowSpacing","arrowLength","arrowWidth","drawArrow","dx","dy","dl","closePath","fill","nx","floor","ny","sign","drawEigenline","otherLambda","iconSize","icon","scale","transform","xic","yic","xis","yis","drawEigenlineIcon","dir","drawDiamond","drawTriangle","ofs","drawSolution","color","max","fnOnFractions","xNum","xDen","yNum","yDen","drawFixedPoint","fixedPointSize","arc","drawSaddleOrNodeSolution","lambda1","lambda2","xy1","xy2","x2","y2","k1","k2","_t","T1","T2","dT1","pow","_t2","_i","ke1","exp","ke2","dt","min","_i2","_ke","_ke2","_dt","_t3","drawSpiralSolution","xxyy","kxc","kxs","kyc","kys","cos","sin","calculateSemiaxes","A","B","F","DIS","A2","B2","A2B2","R2","t0","log","e0","nSegments","ceil","_i3","_t5","c0","s0","_t4","_i4","_s","dtRad","drawDefectiveSolution","t1","dT","fillRect","translate","crosshairSize","pointerSize","pointerMargin","trRange","detRange","drawRegionAreas","drawRegionLines","drawRegionLinesOnce","all","drawParabola","lineCap","drawPosition","SQRT2",13,"isNaN","UnorderedClassSubgraph","OrderedClassSubgraph","TheadLayout","TrLayout","Notation","dataGenerator","i18n","trait.entity","trait.associatedHomogeneousEquation","trait.characteristicEquation","trait.property","trait.isoclineProperty","trait.solutionRelation","trait.shiftSolutionRelation","trait.linearitySolutionRelation","trait.solutionSpaceBasis","trait.homogeneitySolutionRelation","trait.additivitySolutionRelation","trait.twoLinearCombinationSolutionRelation","trait.nLinearCombinationSolutionRelation","trait.twoAffineCombinationSolutionRelation","trait.nAffineCombinationSolutionRelation","trait.associatedSolutionRelation","trait.transform","trait.orderReduction","trait.solutionMethod","trait.generalSolutionMethod","trait.phaseSolutionMethod","trait.equilibriumSolutionMethod","trait.testSolutionMethod","trait.plot","$container","empty","selectedNodes","traitAlignmentLevel","maxTraitAlignmentLevel","dependentVariables","availableDependentVariables","viewDependentVariables","xyw","yvz","notation","data","regenerateData","getHtmlName","unorderedClassSubgraph","theadLayout","orderedClassSubgraph","trLayout","recomputeLayouts","columns","breadthWalk","graph","result","visited","queue","shift","push","sort","writeButton","tip","$button","writeTraitItem","forClassId","fromClassId","traitId","item","getTitle","$item","rec","line","map","_fromForms","forClass","forForm","fromForms","writeTraitCell","traitCell","$cell","classTraitId","classId","writeTraitRow","traitSubtree","traitCells","getSubtreeLayout","$tableContainer","$quickSelect","$quickSelectButton","updateQuickSelectButton","deleteNode","removeClass","writeTable","addNode","writeQuickSelectControls","$option","change","_id","visibleAncestors","computeVisibleAncestors","aid","naid","visibleParents","_id2","$equations","$attachedMenu","$attachedToButton","attachedDirection","attachTimeoutId","setCellClasses","cell","forEach","writeTheadButton","nodes","keyCodeUp","keyCodeDown","removeAttachedMenu","remove","clearTimeout","startAttachingMenu","$toFocus","prev","focus","_$toFocus","next","setTimeout","mh","outerHeight","mo","offset","bh","bo","top","insertBefore","left","last","first","writeTheadCell","node","ancestors","allParents","reverse","descendants","allChildren","writeThead","$thead","nodeLayers","arcLayers","row","writeTfoot","writeTraitRows","output","depth","traitChildren","traitChild","writeTraitAlignmentControls","_loop","prop","writeDependentVariablesControls","dvs","writeEquation","hover","writeGeneralNotes","$td","notes","noteText","columnParents","pid","$li","note","MathJax","Hub","Queue","14","15","16","20","21","toUpperCase","OrderedClassGraph","unorderedClassGraph","orderedClasses","ranks","id1","id2","makeNodeLabelLayers","makeArcLocationLayers","makeLayoutLayers","_ref","orderedVisibleDepthNodes","visibleDepthNodes","arcLocationLayers","concat","17","18","19","depthList","arcRows","xs","arcs","parentXs","parentNode","_j","String","splice","sum","arr","reduce","times","Array","head","nodeLabelLayers","layoutWidth","makeBlankRow","nodeLayoutLayers","arcLayoutLayers","drawArcUp","k","bt","drawArcDown","parentLocations","childLocations","pi","ci","rl","rt","bl","nextParentOrder","parentOrder","sortedParents","node0","node1","p0","p1","cmpLen","cmpOrd","classSubgraph","classData","classColumns","_this","ancestorsHaveIntegratedTrait","walk","getIntegratedClassesForTrait","vpid","integratedClassIds","trait","integratedAncestors","cells","walkTraits","keepTraits","filter","some","UnorderedClassGraph","visibleClasses","invertGraph","igraph","ancestorDistances","addAncestorDistance","fromNode","toNode","distance","oldDistance","newDistance","traverseNode","ancestorNode","parentDistance","visibleChildren","cid","masked","maskAncestors","integrateAncestors","_pid"],"mappings":"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","file":"crnx-ode-properties.js","sourcesContent":["(function () {\n    var babelHelpers = {\n        typeof: function (obj) {\n            return obj && typeof Symbol !== 'undefined' && obj.constructor === Symbol ? 'symbol' : typeof obj;\n        },\n        createClass: function () {\n            function defineProperties(target, props) {\n                for (var i = 0; i < props.length; i++) {\n                    var descriptor = props[i];\n                    descriptor.enumerable = descriptor.enumerable || false;\n                    descriptor.configurable = true;\n                    if ('value' in descriptor)\n                        descriptor.writable = true;\n                    Object.defineProperty(target, descriptor.key, descriptor);\n                }\n            }\n            return function (Constructor, protoProps, staticProps) {\n                if (protoProps)\n                    defineProperties(Constructor.prototype, protoProps);\n                if (staticProps)\n                    defineProperties(Constructor, staticProps);\n                return Constructor;\n            };\n        }(),\n        classCallCheck: function (instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n                throw new TypeError('Cannot call a class as a function');\n            }\n        },\n        possibleConstructorReturn: function (self, call) {\n            if (!self) {\n                throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n            }\n            return call && (typeof call === 'object' || typeof call === 'function') ? call : self;\n        },\n        inherits: function (subClass, superClass) {\n            function defaults(obj, defaults) {\n                var keys = Object.getOwnPropertyNames(defaults);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = keys[i];\n                    var value = Object.getOwnPropertyDescriptor(defaults, key);\n                    if (value && value.configurable && obj[key] === undefined) {\n                        Object.defineProperty(obj, key, value);\n                    }\n                }\n                return obj;\n            }\n            ;\n            if (typeof superClass !== 'function' && superClass !== null) {\n                throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n            }\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n                constructor: {\n                    value: subClass,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true\n                }\n            });\n            if (superClass)\n                defaults(subClass, superClass);\n        },\n        taggedTemplateLiteralLoose: function (strings, raw) {\n            strings.raw = raw;\n            return strings;\n        }\n    };\n    (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == 'function' && require;\n                    if (!u && a)\n                        return a(o, !0);\n                    if (i)\n                        return i(o, !0);\n                    var f = new Error('Cannot find module \\'' + o + '\\'');\n                    throw f.code = 'MODULE_NOT_FOUND', f;\n                }\n                var l = n[o] = { exports: {} };\n                t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }\n            return n[o].exports;\n        }\n        var i = typeof require == 'function' && require;\n        for (var o = 0; o < r.length; o++)\n            s(r[o]);\n        return s;\n    }({\n        1: [\n            function (require, module, exports) {\n                'use strict';\n                var detailsSupported = 'open' in document.createElement('details');\n                // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\n                module.exports = function () {\n                    // to be called in .each()\n                    if (detailsSupported)\n                        return;\n                    var $details = $(this);\n                    var toggleOpen = function () {\n                        if (!$details.attr('open')) {\n                            $details.attr('open', '');\n                        } else {\n                            $details.removeAttr('open');\n                        }\n                    };\n                    var keyCodeEnter = 13;\n                    var keyCodeSpace = 32;\n                    var handleEvent = function (ev) {\n                        return $(ev.target).closest('summary, :input, a[href]').is('summary');\n                    };\n                    // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\n                    $details.addClass('polyfill').children('summary').attr('tabindex', 0).click(function (ev) {\n                        if (handleEvent(ev)) {\n                            toggleOpen();\n                        }\n                    }).keydown(function (ev) {\n                        if (handleEvent(ev) && (ev.keyCode == keyCodeEnter || ev.keyCode == keyCodeSpace)) {\n                            toggleOpen();\n                            return false;\n                        }\n                    });\n                };\n            },\n            {}\n        ],\n        2: [\n            function (require, module, exports) {\n                'use strict';\n                var traits = [\n                    [\n                        'entity',\n                        [\n                            ['associatedHomogeneousEquation'],\n                            ['characteristicEquation']\n                        ]\n                    ],\n                    [\n                        'property',\n                        [\n                            ['isoclineProperty'],\n                            [\n                                'solutionRelation',\n                                [\n                                    ['shiftSolutionRelation'],\n                                    [\n                                        'linearitySolutionRelation',\n                                        [\n                                            // linear and affine properties of solutions\n                                            ['solutionSpaceBasis'],\n                                            ['homogeneitySolutionRelation'],\n                                            ['additivitySolutionRelation'],\n                                            ['twoLinearCombinationSolutionRelation'],\n                                            ['nLinearCombinationSolutionRelation'],\n                                            ['twoAffineCombinationSolutionRelation'],\n                                            ['nAffineCombinationSolutionRelation'],\n                                            ['associatedSolutionRelation']\n                                        ]\n                                    ]\n                                ]\n                            ]\n                        ]\n                    ],\n                    [\n                        'transform',\n                        [['orderReduction']]\n                    ],\n                    [\n                        'solutionMethod',\n                        [\n                            ['generalSolutionMethod'],\n                            ['phaseSolutionMethod'],\n                            ['equilibriumSolutionMethod'],\n                            ['testSolutionMethod']\n                        ]\n                    ],\n                    ['plot']\n                ];\n                // class entries:\n                //\thasForm = use this value as form type instead of class id\n                //\t...TODO...\n                // trait entries:\n                //\ttitle = redefine title\n                //\tcontent\n                //\tform = have to present the equation in which this trait was defined\n                //\t\tif true: form type is equal to class id\n                //\t\totherwise: object: { formType1:true, formType2:true, ... }\n                //\tclose = children don't need to inherit this trait; display it only if parents have it displayed\n                //\tcompare = show only if other classes have this property without compare entry\n                module.exports = function (nt) {\n                    var classes = {};\n                    var merge = function (mergedClassesGenerator) {\n                        var mergedClasses = mergedClassesGenerator(nt);\n                        for (var id in mergedClasses) {\n                            classes[id] = mergedClasses[id];\n                        }\n                    };\n                    merge(require(3));\n                    merge(require(4));\n                    merge(require(5));\n                    merge(require(6));\n                    return {\n                        traits: traits,\n                        classes: classes\n                    };\n                };\n            },\n            {\n                '3': 3,\n                '4': 4,\n                '5': 5,\n                '6': 6\n            }\n        ],\n        3: [\n            function (require, module, exports) {\n                'use strict';\n                var eqsol = function (name) {\n                    return '<a href=\\'https://en.wikipedia.org/wiki/Equilibrium_point\\'>' + name + '</a>';\n                };\n                module.exports = function (nt) {\n                    return {\n                        o1: {\n                            parents: {\n                                sn: true,\n                                on: true\n                            },\n                            name: 'first-order',\n                            importance: 0,\n                            equation: nt.dxdt + ' = f(t,' + nt.x + ')',\n                            traits: {\n                                testSolutionMethod: {\n                                    // same as in 'on', done to mask 'sn's trait\n                                    content: ['Can test if \\\\( ' + nt.x + '_p \\\\) is a solution by substituting \\\\( ' + nt.x + ' = ' + nt.x + '_p \\\\) into the equation.']\n                                }\n                            }\n                        },\n                        o1_separable: {\n                            parents: { o1: true },\n                            name: 'first-order separable',\n                            htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29\\'>separable</a>',\n                            importance: 1,\n                            equation: nt.dxdt + ' = f_1(t) \\\\cdot f_2(' + nt.x + ')',\n                            traits: {\n                                generalSolutionMethod: {\n                                    form: true,\n                                    content: [\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                '\\\\[ ' + nt.dxdt + ' = f_1(t) \\\\cdot f_2(' + nt.x + ') \\\\]',\n                                                '\\\\[ \\\\frac{1}{f_2(' + nt.x + ')} \\\\cdot ' + nt.dxdt + ' = f_1(t) \\\\]',\n                                                '\\\\[ ' + nt.int('\\\\frac{1}{f_2(' + nt.x + ')} ' + nt.dxdt) + ' = ' + nt.int('f_1(t)') + ' + C \\\\]'\n                                            ]\n                                        },\n                                        '\\\\[ ' + nt.int('\\\\frac{1}{f_2(' + nt.x + ')}', nt.x) + ' = ' + nt.int('f_1(t)') + ' + C \\\\]',\n                                        {\n                                            type: 'note',\n                                            content: ['this may or may not include ' + eqsol('equilibrium solutions')]\n                                        }\n                                    ]\n                                },\n                                equilibriumSolutionMethod: {\n                                    form: true,\n                                    content: ['solve \\\\( f_2(' + nt.x + ') = 0 \\\\) for constant \\\\( ' + nt.x + ' \\\\)']\n                                }\n                            }\n                        },\n                        //`domain is not necessary \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)`\n                        o1_autonomous: {\n                            parents: { o1_separable: true },\n                            name: 'first-order autonomous',\n                            htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29\\'>autonomous</a>',\n                            importance: 1,\n                            equation: nt.dxdt + ' = f(' + nt.x + ')',\n                            traits: {\n                                isoclineProperty: { content: ['isoclines are horizontal'] },\n                                shiftSolutionRelation: { content: ['If \\\\( ' + nt.x + '_p(t) \\\\) is a solution, then \\\\( ' + nt.x + '_p(t+C) \\\\) is a solution'] },\n                                generalSolutionMethod: {\n                                    form: true,\n                                    content: [\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                '\\\\[ ' + nt.dxdt + ' = f(' + nt.x + ') \\\\]',\n                                                '\\\\[ \\\\frac{1}{f(' + nt.x + ')} \\\\cdot ' + nt.dxdt + ' = 1 \\\\]',\n                                                '\\\\[ ' + nt.int('\\\\frac{1}{f(' + nt.x + ')} ' + nt.dxdt) + ' = ' + nt.int(1) + ' + C \\\\]'\n                                            ]\n                                        },\n                                        '\\\\[ ' + nt.int('\\\\frac{1}{f(' + nt.x + ')}', nt.x) + ' = t + C \\\\]',\n                                        {\n                                            type: 'note',\n                                            content: ['this may or may not include ' + eqsol('equilibrium solutions')]\n                                        }\n                                    ]\n                                },\n                                equilibriumSolutionMethod: {\n                                    form: true,\n                                    content: ['solve \\\\( f(' + nt.x + ') = 0 \\\\) for constant \\\\( ' + nt.x + ' \\\\)']\n                                }\n                            }\n                        },\n                        //`domain is \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)` // only if f(y) is continuous\n                        o1_bernoulli: {\n                            parents: { o1: true },\n                            name: 'Bernoulli',\n                            htmlName: '<a href=\\'https://en.wikipedia.org/wiki/Bernoulli_differential_equation\\'>Bernoulli</a>',\n                            importance: 2,\n                            equation: nt.dxdt + ' = a(t) \\\\cdot ' + nt.x + ' + b(t) \\\\cdot ' + nt.x + '^n',\n                            equationNotes: [\n                                '\\\\( n \\\\neq 1 \\\\)',\n                                'usually it\\'s also defined that additionally \\\\( n \\\\neq 0 \\\\), but we ignore this requirement here'\n                            ],\n                            traits: {\n                                generalSolutionMethod: {\n                                    form: true,\n                                    content: [\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                '\\\\[ ' + nt.dxdt + ' = a(t) \\\\cdot ' + nt.x + ' + b(t) \\\\cdot ' + nt.x + '^n \\\\]',\n                                                'multiply the equation by \\\\( \\\\frac{1-n}{' + nt.x + '^n} \\\\)',\n                                                '\\\\[ \\\\begin{multline} ' + ('\\\\frac{1-n}{' + nt.x + '^n} ' + nt.dxdt + ' = \\\\\\\\ ') + ('= \\\\frac{(1-n) a(t)}{' + nt.x + '^{n-1}} + (1-n) b(t) ') + '\\\\end{multline} \\\\]',\n                                                'introduce a new variable',\n                                                '\\\\[ ' + nt.w + ' = \\\\frac{1}{' + nt.x + '^{n-1}} \\\\]',\n                                                '\\\\[ ' + nt.dd(nt.w) + ' = ' + nt.dd(nt.w, nt.x) + ' ' + nt.dxdt + ' = \\\\frac{1-n}{' + nt.x + '^n} ' + nt.dxdt + ' \\\\]',\n                                                'substitute \\\\( ' + nt.w + ' \\\\) and \\\\( ' + nt.dd(nt.w) + ' \\\\) into the equation',\n                                                '\\\\[ ' + nt.dd(nt.w) + ' = (1-n) a(t) ' + nt.w + ' + (1-n) b(t) \\\\]',\n                                                'solve this equation as a linear equation in \\\\( ' + nt.w + ' \\\\), then return to the original variable \\\\( ' + nt.x + ' \\\\)',\n                                                '\\\\[ \\\\mu(t) ' + nt.w + ' = (1-n) ' + nt.int('\\\\mu(t) b(t)') + ' + C \\\\]'\n                                            ]\n                                        },\n                                        '\\\\[ \\\\mu(t) = e^{(n-1)' + nt.sint('a(t)') + '} \\\\]',\n                                        '\\\\[ \\\\frac{\\\\mu(t)}{' + nt.x + '^{n-1}} = (1-n) ' + nt.int('\\\\mu(t) b(t)') + ' + C \\\\]',\n                                        {\n                                            type: 'note',\n                                            content: ['this may or may not include ' + eqsol('equilibrium solutions')]\n                                        }\n                                    ]\n                                },\n                                equilibriumSolutionMethod: {\n                                    form: true,\n                                    content: ['if \\\\( n>0 \\\\), there\\'s an equilibrium solution \\\\( ' + nt.x + ' = 0 \\\\)']\n                                }\n                            }\n                        },\n                        o1_linear: {\n                            parents: { o1_bernoulli: true },\n                            name: 'first-order linear',\n                            htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Linear_differential_equation\\'>linear</a>',\n                            importance: 1,\n                            equation: nt.dxdt + ' = a(t) \\\\cdot ' + nt.x + ' + b(t)',\n                            traits: {\n                                associatedHomogeneousEquation: {\n                                    form: true,\n                                    content: ['\\\\[ ' + nt.dxdt + ' = a(t) \\\\cdot ' + nt.x + ' \\\\]']\n                                },\n                                solutionSpaceBasis: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_p \\\\) is a solution',\n                                        'and \\\\( ' + nt.x + '_h \\\\) is a nonzero solution of the associated homogeneous equation',\n                                        'then \\\\( K ' + nt.x + '_h + ' + nt.x + '_p \\\\) is a general solution.'\n                                    ]\n                                },\n                                homogeneitySolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_0 \\\\) and \\\\( ' + nt.x + '_1 \\\\) are solutions,',\n                                        'then \\\\( K_1 ' + nt.x + '_1 + (1 - K_1) ' + nt.x + '_0 \\\\) is a solution.'\n                                    ],\n                                    compare: true\n                                },\n                                additivitySolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_0 \\\\), \\\\( ' + nt.x + '_1 \\\\) and \\\\( ' + nt.x + '_2 \\\\) are solutions,',\n                                        'then \\\\( ' + nt.x + '_1 + ' + nt.x + '_2 - ' + nt.x + '_0 \\\\) is a solution.'\n                                    ],\n                                    compare: true\n                                },\n                                twoLinearCombinationSolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_0 \\\\), \\\\( ' + nt.x + '_1 \\\\) and \\\\( ' + nt.x + '_2 \\\\) are solutions,',\n                                        'then \\\\( K_1 ' + nt.x + '_1 + K_2 ' + nt.x + '_2 + (1 - K_1 - K_2) ' + nt.x + '_0 \\\\) is a solution.'\n                                    ],\n                                    compare: true\n                                },\n                                nLinearCombinationSolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_0 \\\\), \\\\( ' + nt.x + '_1 \\\\), \\\\( ' + nt.x + '_2 \\\\), ..., \\\\( ' + nt.x + '_m \\\\) are solutions,',\n                                        'then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ' + nt.x + '_i + (1 - \\\\sum\\\\limits_{i=1}^m K_i) ' + nt.x + '_0 \\\\) is a solution.'\n                                    ],\n                                    compare: true\n                                },\n                                twoAffineCombinationSolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_1 \\\\), \\\\( ' + nt.x + '_2 \\\\) are solutions',\n                                        'and \\\\( K_1 + K_2 = 1 \\\\)',\n                                        'then \\\\( K_1 ' + nt.x + '_1 + K_2 ' + nt.x + '_2 \\\\) is a solution.'\n                                    ]\n                                },\n                                nAffineCombinationSolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_1 \\\\), \\\\( ' + nt.x + '_2 \\\\), ..., \\\\( ' + nt.x + '_m \\\\) are solutions',\n                                        'and \\\\( \\\\sum\\\\limits_{i=1}^m K_i = 1 \\\\)',\n                                        'then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ' + nt.x + '_i \\\\) is a solution.'\n                                    ]\n                                },\n                                associatedSolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_1 \\\\) and \\\\( ' + nt.x + '_2 \\\\) are solutions,',\n                                        'then \\\\( ' + nt.x + '_1 - ' + nt.x + '_2 \\\\) is a solution of the associated homogeneous equation.'\n                                    ]\n                                },\n                                generalSolutionMethod: {\n                                    title: 'Solutions found with method of <a href=\\'https://en.wikipedia.org/wiki/Integrating_factor\\'>integrating factors</a>',\n                                    form: true,\n                                    content: [\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                '\\\\[ ' + nt.dxdt + ' = a(t) \\\\cdot ' + nt.x + ' + b(t) \\\\]',\n                                                'introduce a new function',\n                                                '\\\\[ g(t) = -a(t) \\\\]',\n                                                'rewrite the equation with \\\\( g(t) \\\\)',\n                                                '\\\\[ ' + nt.dxdt + ' + g(t) \\\\cdot ' + nt.x + ' = b(t) \\\\]',\n                                                'introduce the integrating factor',\n                                                '\\\\[ \\\\mu(t) = e^{' + nt.sint('g(t)') + '} \\\\]',\n                                                'multiply the equation by \\\\( \\\\mu(t) \\\\)',\n                                                '\\\\[ \\\\mu(t) ' + nt.dxdt + ' + \\\\mu(t) g(t) ' + nt.x + ' = \\\\mu(t) b(t) \\\\]',\n                                                '\\\\[ \\\\mu(t) ' + nt.dxdt + ' + e^{' + nt.sint('g(t)') + '} g(t) ' + nt.x + ' = \\\\mu(t) b(t) \\\\]',\n                                                '\\\\[ \\\\mu(t) ' + nt.dxdt + ' + ' + nt.ddt + '(e^{' + nt.sint('g(t)') + '}) ' + nt.x + ' = \\\\mu(t) b(t) \\\\]',\n                                                '\\\\[ \\\\mu(t) ' + nt.dxdt + ' + ' + nt.ddt + '(\\\\mu(t)) ' + nt.x + ' = \\\\mu(t) b(t) \\\\]',\n                                                '\\\\[ ' + nt.ddt + '(\\\\mu(t) ' + nt.x + ') = \\\\mu(t) b(t) \\\\]',\n                                                'integrate the equation multiplied by \\\\( \\\\mu(t) \\\\)',\n                                                '\\\\[ \\\\mu(t) ' + nt.x + ' = ' + nt.int('\\\\mu(t) b(t)') + ' + C \\\\]'\n                                            ]\n                                        },\n                                        '\\\\[ \\\\mu(t) = e^{-' + nt.sint('a(t)') + '} \\\\]',\n                                        '\\\\[ \\\\mu(t) y = ' + nt.int('\\\\mu(t) b(t)') + ' + C \\\\]'\n                                    ]\n                                },\n                                equilibriumSolutionMethod: {\n                                    content: [{\n                                            type: 'note',\n                                            content: ['Can\\'t find equilibrium solution like in Bernoulli equation because \\\\( n = 0 \\\\).']\n                                        }],\n                                    close: true\n                                }\n                            }\n                        },\n                        o1_linearHomogeneous: {\n                            parents: {\n                                o1_separable: true,\n                                o1_linear: true\n                            },\n                            name: 'first-order linear homogeneous',\n                            htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Linear_differential_equation\\'>linear</a> <a href=\\'https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations\\'>homogeneous</a>',\n                            importance: 1,\n                            equation: nt.dxdt + ' = a(t) \\\\cdot ' + nt.x,\n                            traits: {\n                                associatedHomogeneousEquation: {\n                                    content: [\n                                        '\\\\[ ' + nt.dxdt + ' = a(t) \\\\cdot ' + nt.x + ' \\\\]',\n                                        {\n                                            type: 'note',\n                                            content: ['The equation is associated with itself.']\n                                        }\n                                    ],\n                                    close: true\n                                },\n                                solutionSpaceBasis: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_h \\\\) is a nonzero solution,',\n                                        'then \\\\( K ' + nt.x + '_h \\\\) is a general solution.'\n                                    ]\n                                },\n                                homogeneitySolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_1 \\\\) is a solution,',\n                                        'then \\\\( K_1 ' + nt.x + '_1 \\\\) is a solution.'\n                                    ]\n                                },\n                                additivitySolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_1 \\\\) and \\\\( ' + nt.x + '_2 \\\\) are solutions,',\n                                        'then \\\\( ' + nt.x + '_1 + ' + nt.x + '_2 \\\\) is a solution.'\n                                    ]\n                                },\n                                twoLinearCombinationSolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_1 \\\\) and \\\\( ' + nt.x + '_2 \\\\) are solutions,',\n                                        'then \\\\( K_1 ' + nt.x + '_1 + K_2 ' + nt.x + '_2 \\\\) is a solution.'\n                                    ]\n                                },\n                                nLinearCombinationSolutionRelation: {\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_1 \\\\), \\\\( ' + nt.x + '_2 \\\\), ..., \\\\( ' + nt.x + '_m \\\\) are solutions,',\n                                        'then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ' + nt.x + '_i \\\\) is a solution.'\n                                    ]\n                                },\n                                twoAffineCombinationSolutionRelation: {\n                                    content: [{\n                                            type: 'note',\n                                            content: ['This is a special case of a linear combination.']\n                                        }],\n                                    close: true\n                                },\n                                nAffineCombinationSolutionRelation: {\n                                    content: [{\n                                            type: 'note',\n                                            content: ['This is a special case of a linear combination.']\n                                        }],\n                                    close: true\n                                },\n                                associatedSolutionRelation: { close: true },\n                                generalSolutionMethod: {\n                                    form: true,\n                                    content: [\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                '\\\\[ ' + nt.dxdt + ' = a(t) \\\\cdot ' + nt.x + ' \\\\]',\n                                                '\\\\[ \\\\frac{1}{' + nt.x + '} \\\\cdot ' + nt.dxdt + ' = a(t) \\\\]',\n                                                '\\\\[ ' + nt.int('\\\\frac{1}{' + nt.x + '} ' + nt.dxdt) + ' = ' + nt.int('a(t)') + ' + C \\\\]',\n                                                '\\\\[ ' + nt.int('\\\\frac{1}{' + nt.x + '}', nt.x) + ' = ' + nt.int('a(t)') + ' + C \\\\]',\n                                                '\\\\[ \\\\ln|' + nt.x + '| = ' + nt.int('a(t)') + ' + C \\\\]'\n                                            ]\n                                        },\n                                        '\\\\[ ' + nt.x + ' = K \\\\cdot e^{' + nt.sint('a(t)') + '} \\\\]',\n                                        {\n                                            type: 'note',\n                                            content: ['includes ' + eqsol('equilibrium solution') + ' when \\\\( K = 0 \\\\)']\n                                        }\n                                    ]\n                                },\n                                equilibriumSolutionMethod: { content: ['\\\\[ ' + nt.x + ' = 0 \\\\]'] }\n                            }\n                        },\n                        o1_separableInT: {\n                            parents: {\n                                o1_separable: true,\n                                o1_linear: true\n                            },\n                            name: 'first-order separable in independent variable',\n                            htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29\\'>separable</a> in \\\\(t\\\\)',\n                            importance: 2,\n                            equation: nt.dxdt + ' = f(t)',\n                            traits: {\n                                associatedHomogeneousEquation: { content: ['\\\\( ' + nt.dxdt + ' = 0 \\\\)'] },\n                                isoclineProperty: { content: ['isoclines are vertical'] },\n                                solutionSpaceBasis: {\n                                    // also shiftSolutionRelation\n                                    content: [\n                                        'If \\\\( ' + nt.x + '_p \\\\) is a solution',\n                                        'then \\\\( ' + nt.x + '_p + C \\\\) is a general solution.'\n                                    ]\n                                },\n                                associatedSolutionRelation: { content: ['\\\\( ' + nt.x + ' = C \\\\) is a solution of the associated homogeneous equation.'] },\n                                generalSolutionMethod: {\n                                    form: true,\n                                    content: [\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                '\\\\[ ' + nt.dxdt + ' = f(t) \\\\]',\n                                                '\\\\[ ' + nt.int(nt.dxdt) + ' = ' + nt.int('f(t)') + ' + C \\\\]'\n                                            ]\n                                        },\n                                        '\\\\[ ' + nt.x + ' = ' + nt.int('f(t)') + ' + C \\\\]'\n                                    ]\n                                },\n                                equilibriumSolutionMethod: {\n                                    content: [{\n                                            type: 'note',\n                                            content: ['Can\\'t find equilibrium solution like in separable equation because \\\\( f_2(' + nt.x + ') = 1 \\\\).']\n                                        }],\n                                    close: true\n                                }\n                            }\n                        },\n                        o1_expGrowth: {\n                            parents: {\n                                on_linearHomogeneousConstant: true,\n                                o1_autonomous: true,\n                                o1_linearHomogeneous: true\n                            },\n                            name: 'first-order linear homogeneous with constant coefficients (exponential growth)',\n                            htmlName: 'first-order <a href=\\'https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients\\'>linear homogeneous with constant coefficients</a> (<a href=\\'https://en.wikipedia.org/wiki/Exponential_growth#Differential_equation\\'>exponential growth</a>)',\n                            importance: 2,\n                            equation: nt.dxdt + ' = k \\\\cdot ' + nt.x,\n                            traits: {\n                                characteristicEquation: {\n                                    form: true,\n                                    content: [\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                '\\\\[ ' + nt.dxdt + ' = k \\\\cdot ' + nt.x + ' \\\\]',\n                                                'substitute \\\\( ' + nt.x + ' = e^{\\\\lambda t} \\\\)',\n                                                '\\\\[ ' + nt.ddt + ' e^{\\\\lambda t} = k \\\\cdot e^{\\\\lambda t} \\\\]',\n                                                '\\\\[ \\\\lambda \\\\cdot e^{\\\\lambda t} = k \\\\cdot e^{\\\\lambda t} \\\\]',\n                                                'divide by \\\\( e^{\\\\lambda t} \\\\)'\n                                            ]\n                                        },\n                                        '\\\\[ \\\\lambda = k \\\\]'\n                                    ]\n                                },\n                                generalSolutionMethod: {\n                                    form: true,\n                                    content: [\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                '\\\\[ ' + nt.dxdt + ' = k \\\\cdot ' + nt.x + ' \\\\]',\n                                                '\\\\[ \\\\frac{1}{' + nt.x + '} \\\\cdot ' + nt.dxdt + ' = k \\\\]',\n                                                '\\\\[ ' + nt.int('\\\\frac{1}{' + nt.x + '} ' + nt.dxdt) + ' = ' + nt.int('k') + ' + C \\\\]',\n                                                '\\\\[ ' + nt.int('\\\\frac{1}{' + nt.x + '}', nt.x) + ' = ' + nt.int('k') + ' + C \\\\]',\n                                                '\\\\[ \\\\ln|' + nt.x + '| = k t + C \\\\]',\n                                                '\\\\[ ' + nt.x + '(t) = C_1 e^{k t} \\\\]',\n                                                '\\\\[ ' + nt.x + '(0) = C_1 e^0 \\\\]',\n                                                '\\\\[ C_1 = ' + nt.x + '(0) \\\\]'\n                                            ]\n                                        },\n                                        '\\\\[ ' + nt.x + '(t) = ' + nt.x + '(0) e^{kt} \\\\]',\n                                        {\n                                            type: 'note',\n                                            content: ['includes ' + eqsol('equilibrium solution') + ' when \\\\( ' + nt.x + '(0) = 0 \\\\)']\n                                        }\n                                    ]\n                                },\n                                equilibriumSolutionMethod: {\n                                    // TODO could have inherited from linear homogeneous, but have to override autonomous\n                                    content: ['\\\\[ ' + nt.x + ' = 0 \\\\]']\n                                }\n                            }\n                        },\n                        o1_logisticGrowth: {\n                            parents: {\n                                o1_autonomous: true,\n                                o1_bernoulli: true\n                            },\n                            name: 'logistic growth',\n                            htmlName: '<a href=\\'https://en.wikipedia.org/wiki/Logistic_function#In_ecology:_modeling_population_growth\\'>logistic growth</a>',\n                            importance: 2,\n                            equation: nt.dxdt + ' = r \\\\cdot ' + nt.x + ' \\\\cdot \\\\left(1 - \\\\frac{' + nt.x + '}{k}\\\\right)',\n                            equationNotes: ['\\\\( k \\\\) is the <a href=\\'https://en.wikipedia.org/wiki/Carrying_capacity\\'>carrying capacity</a>'],\n                            traits: {\n                                equilibriumSolutionMethod: {\n                                    form: true,\n                                    content: [\n                                        '\\\\[ ' + nt.x + ' = 0 \\\\]',\n                                        '\\\\[ ' + nt.x + ' = k \\\\]'\n                                    ]\n                                }\n                            }\n                        }\n                    };\n                };\n            },\n            {}\n        ],\n        4: [\n            function (require, module, exports) {\n                'use strict';\n                var ivp = '<a href=\\'https://en.wikipedia.org/wiki/Initial_value_problem\\'>initial value problem</a>';\n                module.exports = function (nt) {\n                    var lhc_characteristicEquation = function (a, b, c) {\n                        return {\n                            form: true,\n                            content: [\n                                {\n                                    type: 'derivation',\n                                    content: [\n                                        '\\\\[ ' + a + ' ' + nt.dd(nt.x, 't', 2) + ' ' + (b ? '+ ' + b + ' ' + nt.dxdt + ' ' : '') + ('+ ' + c + ' ' + nt.x + ' = 0 \\\\]'),\n                                        'substitute \\\\( ' + nt.x + ' = e^{\\\\lambda t} \\\\)',\n                                        '\\\\[ ' + a + ' ' + nt.dd('', 't', 2) + ' e^{\\\\lambda t} ' + (b ? '+ ' + b + ' ' + nt.ddt + ' e^{\\\\lambda t} ' : '') + ('+ ' + c + ' e^{\\\\lambda t} = 0 \\\\]'),\n                                        '\\\\[ ' + a + ' \\\\lambda^2 e^{\\\\lambda t} ' + (b ? '+ ' + b + ' \\\\lambda e^{\\\\lambda t} ' : '') + ('+ ' + c + ' e^{\\\\lambda t} = 0 \\\\]'),\n                                        'divide by \\\\( e^{\\\\lambda t} \\\\)'\n                                    ]\n                                },\n                                '\\\\[ ' + a + ' \\\\lambda^2 ' + (b ? '+ ' + b + ' \\\\lambda ' : '') + ('+ ' + c + ' = 0 \\\\]')\n                            ]\n                        };\n                    };\n                    var lhc_orderReduction = function (a, b, c) {\n                        return {\n                            title: 'Order reduction to a system of 2 first-order linear homogeneous equations with constant coefficients',\n                            form: true,\n                            content: ['\\\\[ \\\\left\\\\{ \\\\begin{aligned} ' + (nt.dd(nt.x) + ' &= ' + nt.y + ' \\\\\\\\ ') + (nt.dd(nt.y) + ' &= - \\\\frac ' + c + ' ' + a + ' ' + nt.x + ' ') + (b ? '- \\\\frac ' + b + ' ' + a + ' ' + nt.y + ' ' : '') + '\\\\end{aligned} \\\\right. \\\\]']\n                        };\n                    };\n                    var lhc_generalSolutionMethod = function (a, b, c) {\n                        return {\n                            title: 'General and ' + ivp + ' solution',\n                            form: true,\n                            content: [\n                                'solve characteristic equation for \\\\( \\\\lambda \\\\):',\n                                '\\\\[ ' + a + ' \\\\lambda^2 + ' + b + ' \\\\lambda + ' + c + ' = 0 \\\\]',\n                                {\n                                    type: 'switch',\n                                    title: 'roots \\\\( \\\\lambda \\\\) are',\n                                    content: [\n                                        {\n                                            type: 'case',\n                                            title: 'repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)',\n                                            content: [\n                                                'general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):',\n                                                '\\\\[ ' + nt.x + ' = k_1 e^{\\\\lambda t} + k_2 t e^{\\\\lambda t} \\\\]',\n                                                'constants for ' + ivp + ' solution:',\n                                                '\\\\[ \\\\begin{aligned} ' + ('k_1 &= ' + nt.x + '(0) \\\\\\\\ ') + ('k_2 &= ' + nt.x + '\\'(0) - \\\\lambda ' + nt.x + '(0) ') + '\\\\end{aligned} \\\\]'\n                                            ]\n                                        },\n                                        {\n                                            type: 'case',\n                                            title: 'real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)',\n                                            content: [\n                                                'general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):',\n                                                '\\\\[ ' + nt.x + ' = k_1 e^{\\\\lambda_1 t} + k_2 e^{\\\\lambda_2 t} \\\\]',\n                                                'get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ' + ivp + ' solution by solving:',\n                                                '\\\\[ ' + nt.mat2(1, 1, '\\\\lambda_1', '\\\\lambda_2') + ' ' + nt.vec2('k_1', 'k_2') + ' = ' + nt.vec2(nt.x + '(0)', nt.x + '\\'(0)') + ' \\\\]'\n                                            ]\n                                        },\n                                        {\n                                            type: 'case',\n                                            title: 'complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)',\n                                            content: [\n                                                'general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):',\n                                                '\\\\[ ' + nt.x + ' = k_1 e^{\\\\alpha t} \\\\cos \\\\beta t + k_2 e^{\\\\alpha t} \\\\sin \\\\beta t \\\\]',\n                                                'get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ' + ivp + ' solution by solving:',\n                                                '\\\\[ ' + nt.mat2(1, 0, '\\\\alpha', '\\\\beta') + ' ' + nt.vec2('k_1', 'k_2') + ' = ' + nt.vec2(nt.x + '(0)', nt.x + '\\'(0)') + ' \\\\]'\n                                            ]\n                                        }\n                                    ]\n                                }\n                            ]\n                        };\n                    };\n                    var harmonicOscillatorType = function (type, wiki, discriminantRelation) {\n                        return {\n                            parents: { o2_harmonicOscillator: true },\n                            name: type + ' harmonic oscillator',\n                            htmlName: '<a href=\\'' + wiki + '\\'>' + type + '</a> harmonic oscillator',\n                            importance: 4,\n                            equation: nt.dd(nt.x, 't', 2) + ' = - \\\\frac bm ' + nt.dxdt + ' - \\\\frac km ' + nt.x,\n                            equationNotes: [\n                                '\\\\[ b^2 - 4 m k ' + discriminantRelation + ' 0 \\\\]',\n                                'usually written as \\\\( m ' + nt.dd(nt.x, 't', 2) + ' + b ' + nt.dxdt + ' + k ' + nt.x + ' = 0 \\\\)',\n                                '\\\\( m > 0 \\\\) is the mass',\n                                '\\\\( b \\\\ge 0 \\\\) is the viscous damping coefficient',\n                                '\\\\( k > 0 \\\\) is the spring constant'\n                            ],\n                            hasForm: 'o2_harmonicOscillator',\n                            traits: {}\n                        };\n                    };\n                    return {\n                        o2: {\n                            parents: { on: true },\n                            name: 'second-order',\n                            importance: 2,\n                            equation: nt.dd(nt.x, 't', 2) + ' = f(t,' + nt.x + ',' + nt.dxdt + ')',\n                            traits: {\n                                orderReduction: {\n                                    title: 'Order reduction to a system of 2 first-order equations',\n                                    form: true,\n                                    content: [\n                                        'transform to a system of 2 first-order equations',\n                                        '\\\\[ \\\\left\\\\{ \\\\begin{aligned} ' + (nt.dd(nt.x) + ' &= ' + nt.y + ' \\\\\\\\ ') + (nt.dd(nt.y) + ' &= f(t,' + nt.x + ',' + nt.y + ') ') + '\\\\end{aligned} \\\\right. \\\\]'\n                                    ]\n                                }\n                            }\n                        },\n                        o2_autonomous: {\n                            parents: { o2: true },\n                            name: 'second-order autonomous',\n                            htmlName: 'second-order <a href=\\'https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29\\'>autonomous</a>',\n                            importance: 2,\n                            equation: nt.dd(nt.x, 't', 2) + ' = f(' + nt.x + ',' + nt.dxdt + ')',\n                            traits: {\n                                orderReduction: {\n                                    title: 'Order reduction to a system of 2 first-order autonomous equations',\n                                    form: true,\n                                    content: ['\\\\[ \\\\left\\\\{ \\\\begin{aligned} ' + (nt.dd(nt.x) + ' &= ' + nt.y + ' \\\\\\\\ ') + (nt.dd(nt.y) + ' &= f(' + nt.x + ',' + nt.y + ') ') + '\\\\end{aligned} \\\\right. \\\\]']\n                                }\n                            }\n                        },\n                        o2_linearHomogeneous: {\n                            parents: { o2: true },\n                            name: 'second-order linear homogeneous',\n                            htmlName: 'second-order <a href=\\'https://en.wikipedia.org/wiki/Linear_differential_equation\\'>linear</a> <a href=\\'https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations\\'>homogeneous</a>',\n                            importance: 2,\n                            equation: nt.dd(nt.x, 't', 2) + ' = a(t) \\\\cdot ' + nt.dxdt + ' + b(t) \\\\cdot ' + nt.x,\n                            traits: {\n                                equilibriumSolutionMethod: {\n                                    form: true,\n                                    content: [{\n                                            type: 'switch',\n                                            title: '\\\\( b(t) \\\\) is',\n                                            content: [\n                                                {\n                                                    type: 'case',\n                                                    title: '\\\\( b(t) = 0 \\\\)',\n                                                    content: ['\\\\[ ' + nt.x + ' = K \\\\]']\n                                                },\n                                                {\n                                                    type: 'case',\n                                                    title: '\\\\( b(t) \\\\ne 0 \\\\)',\n                                                    content: ['\\\\[ ' + nt.x + ' = 0 \\\\]']\n                                                }\n                                            ]\n                                        }]\n                                }\n                            }\n                        },\n                        o2_linearHomogeneousConstant: {\n                            parents: {\n                                on_linearHomogeneousConstant: true,\n                                o2_autonomous: true,\n                                o2_linearHomogeneous: true\n                            },\n                            name: 'second-order linear homogeneous with constant coefficients',\n                            htmlName: 'second-order <a href=\\'https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients\\'>linear homogeneous with constant coefficients</a>',\n                            importance: 2,\n                            equation: nt.dd(nt.x, 't', 2) + ' = - \\\\frac ba ' + nt.dxdt + ' - \\\\frac ca ' + nt.x,\n                            equationNotes: ['usually written as \\\\( a ' + nt.dd(nt.x, 't', 2) + ' + b ' + nt.dxdt + ' + c ' + nt.x + ' = 0 \\\\)'],\n                            traits: {\n                                characteristicEquation: lhc_characteristicEquation('a', 'b', 'c'),\n                                orderReduction: lhc_orderReduction('a', 'b', 'c'),\n                                generalSolutionMethod: lhc_generalSolutionMethod('a', 'b', 'c'),\n                                equilibriumSolutionMethod: {\n                                    form: true,\n                                    content: [{\n                                            type: 'switch',\n                                            title: '\\\\( c \\\\) is',\n                                            content: [\n                                                {\n                                                    type: 'case',\n                                                    title: '\\\\( c = 0 \\\\)',\n                                                    content: ['\\\\[ ' + nt.x + ' = K \\\\]']\n                                                },\n                                                {\n                                                    type: 'case',\n                                                    title: '\\\\( c \\\\ne 0 \\\\)',\n                                                    content: ['\\\\[ ' + nt.x + ' = 0 \\\\]']\n                                                }\n                                            ]\n                                        }]\n                                }\n                            }\n                        },\n                        o2_harmonicOscillator: {\n                            parents: { o2_linearHomogeneousConstant: true },\n                            name: 'harmonic oscillator',\n                            htmlName: '<a href=\\'https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator\\'>harmonic oscillator</a>',\n                            importance: 3,\n                            equation: nt.dd(nt.x, 't', 2) + ' = - \\\\frac bm ' + nt.dxdt + ' - \\\\frac km ' + nt.x,\n                            equationNotes: [\n                                'usually written as \\\\( m ' + nt.dd(nt.x, 't', 2) + ' + b ' + nt.dxdt + ' + k ' + nt.x + ' = 0 \\\\)',\n                                '\\\\( m > 0 \\\\) is the mass',\n                                '\\\\( b \\\\ge 0 \\\\) is the viscous damping coefficient',\n                                '\\\\( k > 0 \\\\) is the spring constant'\n                            ],\n                            traits: {\n                                characteristicEquation: lhc_characteristicEquation('m', 'b', 'k'),\n                                orderReduction: lhc_orderReduction('m', 'b', 'k'),\n                                generalSolutionMethod: lhc_generalSolutionMethod('m', 'b', 'k'),\n                                equilibriumSolutionMethod: {\n                                    form: {\n                                        o2_harmonicOscillator: true,\n                                        o2_simpleHarmonicOscillator: true\n                                    },\n                                    content: [\n                                        '\\\\[ ' + nt.x + ' = 0 \\\\]',\n                                        {\n                                            type: 'note',\n                                            content: ['no other equilibrium solution is possible because \\\\( k > 0 \\\\)']\n                                        }\n                                    ]\n                                }\n                            }\n                        },\n                        o2_underdampedHarmonicOscillator: harmonicOscillatorType('underdamped', 'https://en.wikipedia.org/wiki/Damping#Under-damping_.280_.E2.89.A4_.CE.B6_.3C_1.29', '&lt;'),\n                        o2_criticallyDampedHarmonicOscillator: harmonicOscillatorType('critically damped', 'https://en.wikipedia.org/wiki/Damping#Critical_damping_.28.CE.B6_.3D_1.29', '='),\n                        o2_overdampedHarmonicOscillator: harmonicOscillatorType('overdamped', 'https://en.wikipedia.org/wiki/Damping#Over-damping_.28.CE.B6_.3E_1.29', '>'),\n                        o2_simpleHarmonicOscillator: {\n                            parents: { o2_underdampedHarmonicOscillator: true },\n                            name: 'simple (undamped) harmonic oscillator',\n                            htmlName: '<a href=\\'https://en.wikipedia.org/wiki/Harmonic_oscillator#Simple_harmonic_oscillator\\'>simple (undamped) harmonic oscillator</a>',\n                            importance: 3,\n                            equation: nt.dd(nt.x, 't', 2) + ' = - \\\\frac km ' + nt.x,\n                            equationNotes: [\n                                'usually written as \\\\( m ' + nt.dd(nt.x, 't', 2) + ' + k ' + nt.x + ' = 0 \\\\)',\n                                '\\\\( m > 0 \\\\) is the mass',\n                                '\\\\( k > 0 \\\\) is the spring constant'\n                            ],\n                            traits: {\n                                characteristicEquation: lhc_characteristicEquation('m', 0, 'k'),\n                                orderReduction: lhc_orderReduction('m', 0, 'k'),\n                                generalSolutionMethod: {\n                                    title: 'General and ' + ivp + ' solution',\n                                    form: true,\n                                    content: [\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                'solve characteristic equation for \\\\( \\\\lambda \\\\):',\n                                                '\\\\[ m \\\\lambda^2 + k = 0 \\\\]',\n                                                '\\\\[ \\\\lambda = \\\\pm i \\\\sqrt{\\\\frac km} \\\\]',\n                                                'see harmonic oscillator - general solution - <em>complex conjugate pair</em> case'\n                                            ]\n                                        },\n                                        'general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):',\n                                        '\\\\[ ' + nt.x + ' = k_1 \\\\cos \\\\sqrt{\\\\frac km} t + k_2 \\\\sin \\\\sqrt{\\\\frac km} t \\\\]',\n                                        'constants for ' + ivp + ' solution:',\n                                        '\\\\[ \\\\begin{aligned} ' + ('k_1 &= ' + nt.y + '(0) \\\\\\\\ ') + ('k_2 &= \\\\sqrt{\\\\frac mk} ' + nt.y + '\\'(0) ') + '\\\\end{aligned} \\\\]'\n                                    ]\n                                }\n                            }\n                        },\n                        o2_vanDerPol: {\n                            parents: { o2_autonomous: true },\n                            name: 'Van der Pol',\n                            htmlName: '<a href=\\'https://en.wikipedia.org/wiki/Van_der_Pol_oscillator\\'>Van der Pol</a>',\n                            importance: 3,\n                            equation: nt.dd(nt.x, 't', 2) + ' = \\\\mu(1-' + nt.x + '^2)' + nt.dxdt + ' - ' + nt.x,\n                            traits: {}\n                        },\n                        o2_unforcedDuffing: {\n                            parents: { o2_autonomous: true },\n                            name: 'unforced Duffing',\n                            htmlName: 'unforced <a href=\\'https://en.wikipedia.org/wiki/Duffing_equation\\'>Duffing</a>',\n                            importance: 3,\n                            equation: nt.dd(nt.x, 't', 2) + ' = - \\\\delta ' + nt.dxdt + ' - \\\\alpha ' + nt.x + ' - \\\\beta ' + nt.x + '^3',\n                            traits: {}\n                        }\n                    };\n                };\n            },\n            {}\n        ],\n        5: [\n            function (require, module, exports) {\n                'use strict';\n                module.exports = function (nt) {\n                    return {\n                        on: {\n                            parents: {},\n                            name: 'nth-order',\n                            htmlName: '<em>n</em>th-order',\n                            importance: 2,\n                            equation: nt.dd(nt.x, 't', 'n') + ' = f(t,' + nt.x + ',' + nt.dxdt + ',\\\\dotsc,' + nt.dd(nt.x, 't', 'n-1') + ')',\n                            traits: { testSolutionMethod: { content: ['Can test if \\\\( ' + nt.x + '_p \\\\) is a solution by substituting \\\\( ' + nt.x + ' = ' + nt.x + '_p \\\\) into the equation.'] } }\n                        },\n                        on_linearHomogeneousConstant: {\n                            parents: { on: true },\n                            name: 'nth-order linear homogeneous with constant coefficients',\n                            htmlName: '<em>n</em>th-order <a href=\\'https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients\\'>linear homogeneous with constant coefficients</a>',\n                            importance: 2,\n                            //equation: `y^{(n)} = - \\\\tfrac{a_{n-1}}{a_n} y^{(n-1)} - \\\\cdots - \\\\tfrac{a_1}{a_n} y' - \\\\tfrac{a_0}{a_n} y`,\n                            equation: nt.dd(nt.x, 't', 'n') + ' = - \\\\sum_{i=0}^{n-1} \\\\frac{a_i}{a_n} ' + nt.dd(nt.x, 't', 'i'),\n                            equationNotes: ['usually written as \\\\( \\\\sum_{i=0}^n a_i ' + nt.dd(nt.x, 't', 'i') + ' = 0 \\\\)'],\n                            traits: {\n                                characteristicEquation: {\n                                    form: true,\n                                    content: [\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                '\\\\[ \\\\sum_{i=0}^n a_i ' + nt.dd(nt.x, 't', 'i') + ' = 0 \\\\]',\n                                                'substitute \\\\( ' + nt.x + ' = e^{\\\\lambda t} \\\\)',\n                                                '\\\\[ \\\\sum_{i=0}^n a_i ' + nt.dd('', 't', 'i') + ' e^{\\\\lambda t} = 0 \\\\]',\n                                                '\\\\[ \\\\sum_{i=0}^n a_i \\\\lambda^i e^{\\\\lambda t} = 0 \\\\]',\n                                                'divide by \\\\( e^{\\\\lambda t} \\\\)'\n                                            ]\n                                        },\n                                        '\\\\[ \\\\sum_{i=0}^n a_i \\\\lambda^i = 0 \\\\]'\n                                    ]\n                                }\n                            }\n                        }\n                    };\n                };\n            },\n            {}\n        ],\n        6: [\n            function (require, module, exports) {\n                'use strict';\n                var LhcPlot = require(7);\n                var ivp = '<a href=\\'https://en.wikipedia.org/wiki/Initial_value_problem\\'>initial value problem</a>';\n                module.exports = function (nt) {\n                    return {\n                        sn: {\n                            parents: {},\n                            name: 'system of n first-order',\n                            htmlName: 'system of <em>n</em> first-order',\n                            importance: 3,\n                            equation: '\\\\left\\\\{ \\\\begin{array}{c}' + (nt.dd(nt.x + '_1') + ' = f_1(t,' + nt.x + '_1,\\\\dotsc,' + nt.x + '_n) \\\\\\\\') + '\\\\vdots \\\\\\\\' + (nt.dd(nt.x + '_n') + ' = f_n(t,' + nt.x + '_1,\\\\dotsc,' + nt.x + '_n)') + '\\\\end{array} \\\\right.',\n                            vectorEquation: nt.dd(nt.X) + ' = \\\\mathbf{F}(t,' + nt.X + ')',\n                            traits: { testSolutionMethod: { content: ['Can test if \\\\( ' + nt.X + '_p \\\\) is a solution by substituting \\\\( ' + nt.X + ' = ' + nt.X + '_p \\\\) into the equation.'] } }\n                        },\n                        s2: {\n                            parents: { sn: true },\n                            name: 'system of 2 first-order',\n                            importance: 3,\n                            equation: '\\\\left\\\\{ \\\\begin{aligned}' + (nt.dd(nt.x) + ' &= f(t,' + nt.x + ',' + nt.y + ') \\\\\\\\') + (nt.dd(nt.y) + ' &= g(t,' + nt.x + ',' + nt.y + ')') + '\\\\end{aligned} \\\\right.',\n                            vectorEquation: nt.dd(nt.X) + ' = \\\\mathbf{F}(t,' + nt.X + ')',\n                            traits: {}\n                        },\n                        s2_partlyDecoupled: {\n                            parents: { s2: true },\n                            name: 'partly decoupled system of 2 first-order',\n                            importance: 3,\n                            equation: '\\\\left\\\\{ \\\\begin{aligned}' + (nt.dd(nt.x) + ' &= f(t,' + nt.x + ',' + nt.y + ') \\\\\\\\') + (nt.dd(nt.y) + ' &= g(t,' + nt.y + ')') + '\\\\end{aligned} \\\\right.',\n                            traits: {\n                                generalSolutionMethod: {\n                                    form: true,\n                                    content: [\n                                        'Solve \\\\(' + nt.dd(nt.y) + ' = g(t,' + nt.y + ') \\\\).',\n                                        'Substitute \\\\( ' + nt.y + ' \\\\) into \\\\( ' + nt.dd(nt.x) + ' = f(t,' + nt.x + ',' + nt.y + ') \\\\).'\n                                    ]\n                                }\n                            }\n                        },\n                        s2_autonomous: {\n                            parents: { s2: true },\n                            name: 'system of 2 first-order autonomous',\n                            importance: 3,\n                            equation: '\\\\left\\\\{ \\\\begin{aligned}' + (nt.dd(nt.x) + ' &= f(' + nt.x + ',' + nt.y + ') \\\\\\\\') + (nt.dd(nt.y) + ' &= g(' + nt.x + ',' + nt.y + ')') + '\\\\end{aligned} \\\\right.',\n                            vectorEquation: nt.dd(nt.X) + ' = \\\\mathbf{F}(' + nt.X + ')',\n                            traits: {}\n                        },\n                        s2_linearHomogeneous: {\n                            parents: { s2: true },\n                            name: 'system of 2 first-order linear homogeneous equations',\n                            importance: 3,\n                            equation: '\\\\left\\\\{ \\\\begin{aligned}' + (nt.dd(nt.x) + ' &= a(t) \\\\, ' + nt.x + ' + b(t) \\\\, ' + nt.y + ' \\\\\\\\') + (nt.dd(nt.y) + ' &= c(t) \\\\, ' + nt.x + ' + d(t) \\\\, ' + nt.y) + '\\\\end{aligned} \\\\right.',\n                            vectorEquation: nt.dd(nt.X) + ' = \\\\mathbf{A}(t) \\\\, ' + nt.X,\n                            traits: {\n                                equilibriumSolutionMethod: {\n                                    form: true,\n                                    content: ['\\\\[ ' + nt.X + ' = ' + nt.vec2(0, 0) + ' \\\\]']\n                                }\n                            }\n                        },\n                        s2_linearHomogeneousConstant: {\n                            parents: {\n                                s2_autonomous: true,\n                                s2_linearHomogeneous: true\n                            },\n                            name: 'system of 2 first-order linear homogeneous equations with constant coefficients',\n                            importance: 3,\n                            equation: '\\\\left\\\\{ \\\\begin{aligned}' + (nt.dd(nt.x) + ' &= a ' + nt.x + ' + b ' + nt.y + ' \\\\\\\\') + (nt.dd(nt.y) + ' &= c ' + nt.x + ' + d ' + nt.y) + '\\\\end{aligned} \\\\right.',\n                            vectorEquation: nt.dd(nt.X) + ' = \\\\mathbf{A} ' + nt.X,\n                            traits: {\n                                characteristicEquation: {\n                                    form: true,\n                                    content: [\n                                        '\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]',\n                                        {\n                                            type: 'note',\n                                            content: ['\\\\( \\\\lambda \\\\) is an eigenvalue of \\\\( \\\\mathbf{A} \\\\)']\n                                        }\n                                    ]\n                                },\n                                generalSolutionMethod: {\n                                    title: 'General and ' + ivp + ' solution',\n                                    form: true,\n                                    content: [\n                                        ivp + ' initial conditions are: \\\\( ' + nt.x + '_0 = ' + nt.x + '(0) \\\\), \\\\( ' + nt.y + '_0 = ' + nt.y + '(0) \\\\)',\n                                        {\n                                            type: 'switch',\n                                            title: 'coefficients satisfy conditions',\n                                            content: [\n                                                {\n                                                    type: 'case',\n                                                    title: '\\\\( b = c = 0 \\\\)',\n                                                    content: [\n                                                        'the equation has the form:',\n                                                        '\\\\[ ' + nt.ddt + ' ' + nt.vec2(nt.x, nt.y) + ' = ' + nt.mat2('\\\\lambda_1', 0, 0, '\\\\lambda_2') + ' ' + nt.vec2(nt.x, nt.y) + ' \\\\]',\n                                                        'general solution (with arbitrary constants \\\\( ' + nt.x + '_0 \\\\), \\\\( ' + nt.y + '_0 \\\\)) and ' + ivp + ' solution:',\n                                                        '\\\\[ ' + nt.X + ' = ' + nt.x + '_0 e^{\\\\lambda_1 t} ' + nt.vec2(1, 0) + ' + ' + nt.y + '_0 e^{\\\\lambda_2 t} ' + nt.vec2(0, 1) + ' \\\\]'\n                                                    ]\n                                                },\n                                                {\n                                                    type: 'case',\n                                                    title: '\\\\( a = 0 \\\\) and \\\\( b = 1 \\\\) (optional)',\n                                                    content: [\n                                                        {\n                                                            type: 'note',\n                                                            content: [\n                                                                'this is an optional case, you can use <em>\\\\( b \\\\neq 0 \\\\) or \\\\( c \\\\neq 0 \\\\)</em> case below',\n                                                                'this case will happen after order reduction of second-order equation'\n                                                            ]\n                                                        },\n                                                        'the equation has the form:',\n                                                        '\\\\[ ' + nt.ddt + ' ' + nt.vec2(nt.x, nt.y) + ' = ' + nt.mat2(0, 1, 'c', 'd') + ' ' + nt.vec2(nt.x, nt.y) + ' \\\\]',\n                                                        {\n                                                            type: 'derivation',\n                                                            content: [\n                                                                'eigenvector for \\\\( \\\\lambda_1 \\\\) is:',\n                                                                '\\\\[ ' + nt.vec2(nt.x + '_1', nt.y + '_1') + ' = ' + nt.vec2(1, '\\\\lambda_1') + ' \\\\]',\n                                                                'eigenvector for \\\\( \\\\lambda_2 \\\\) is:',\n                                                                '\\\\[ ' + nt.vec2(nt.x + '_2', nt.y + '_2') + ' = ' + nt.vec2(1, '\\\\lambda_2') + ' \\\\]',\n                                                                'use these eigenvectors in <em>\\\\( b \\\\neq 0 \\\\) or \\\\( c \\\\neq 0 \\\\)</em> case below'\n                                                            ]\n                                                        },\n                                                        'get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):',\n                                                        '\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]',\n                                                        {\n                                                            type: 'switch',\n                                                            title: 'eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are',\n                                                            content: [\n                                                                {\n                                                                    type: 'case',\n                                                                    title: 'repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)',\n                                                                    content: [\n                                                                        'general solution (with arbitrary constants \\\\( ' + nt.x + '_0 \\\\), \\\\( ' + nt.y + '_0 \\\\)) and ' + ivp + ' solution:',\n                                                                        '\\\\[ ' + nt.X + ' = e^{\\\\lambda t} ' + nt.vec2(nt.x + '_0', nt.y + '_0') + ' + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ' + nt.vec2(nt.x + '_0', nt.y + '_0') + ' \\\\]'\n                                                                    ]\n                                                                },\n                                                                {\n                                                                    type: 'case',\n                                                                    title: 'real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)',\n                                                                    content: [\n                                                                        'general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):',\n                                                                        '\\\\[ ' + nt.X + ' = k_1 e^{\\\\lambda_1 t} ' + nt.vec2(1, '\\\\lambda_1') + ' + k_2 e^{\\\\lambda_2 t} ' + nt.vec2(1, '\\\\lambda_2') + ' \\\\]',\n                                                                        'get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ' + ivp + ' solution by solving:',\n                                                                        '\\\\[ ' + nt.mat2(1, 1, '\\\\lambda_1', '\\\\lambda_2') + ' ' + nt.vec2('k_1', 'k_2') + ' = ' + nt.vec2(nt.x + '_0', nt.y + '_0') + ' \\\\]'\n                                                                    ]\n                                                                },\n                                                                {\n                                                                    type: 'case',\n                                                                    title: 'complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)',\n                                                                    content: [\n                                                                        'general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):',\n                                                                        '\\\\[ \\\\begin{aligned} ' + (nt.X + ' = \\\\: & k_1 e^{\\\\alpha t} ' + nt.vec2('\\\\cos \\\\beta t', '\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t') + ' \\\\\\\\') + ('+ \\\\: & k_2 e^{\\\\alpha t} ' + nt.vec2('\\\\sin \\\\beta t', '\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t') + ' ') + '\\\\end{aligned} \\\\]',\n                                                                        'get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ' + ivp + ' solution by solving:',\n                                                                        '\\\\[ ' + nt.mat2(1, 0, '\\\\alpha', '\\\\beta') + ' ' + nt.vec2('k_1', 'k_2') + ' = ' + nt.vec2(nt.x + '_0', nt.y + '_0') + ' \\\\]'\n                                                                    ]\n                                                                }\n                                                            ]\n                                                        }\n                                                    ]\n                                                },\n                                                {\n                                                    type: 'case',\n                                                    title: '\\\\( b \\\\neq 0 \\\\) or \\\\( c \\\\neq 0 \\\\)',\n                                                    content: [\n                                                        'get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):',\n                                                        '\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]',\n                                                        {\n                                                            type: 'switch',\n                                                            title: 'eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are',\n                                                            content: [\n                                                                {\n                                                                    type: 'case',\n                                                                    title: 'repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)',\n                                                                    content: [\n                                                                        'general solution (with arbitrary constants \\\\( ' + nt.x + '_0 \\\\), \\\\( ' + nt.y + '_0 \\\\)) and ' + ivp + ' solution:',\n                                                                        '\\\\[ ' + nt.X + ' = e^{\\\\lambda t} ' + nt.vec2(nt.x + '_0', nt.y + '_0') + ' + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ' + nt.vec2(nt.x + '_0', nt.y + '_0') + ' \\\\]'\n                                                                    ]\n                                                                },\n                                                                {\n                                                                    type: 'case',\n                                                                    title: 'real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)',\n                                                                    content: [\n                                                                        'find eigenvector \\\\( ' + nt.svec2(nt.x + '_1', nt.y + '_1') + ' \\\\) by solving:',\n                                                                        '\\\\[ (\\\\mathbf{A} - \\\\lambda_1 \\\\mathbf{I}) ' + nt.vec2(nt.x + '_1', nt.y + '_1') + ' = 0 \\\\]',\n                                                                        'find eigenvector \\\\( ' + nt.svec2(nt.x + '_2', nt.y + '_2') + ' \\\\) by solving:',\n                                                                        '\\\\[ (\\\\mathbf{A} - \\\\lambda_2 \\\\mathbf{I}) ' + nt.vec2(nt.x + '_2', nt.y + '_2') + ' = 0 \\\\]',\n                                                                        'general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):',\n                                                                        '\\\\[ ' + nt.X + ' = k_1 e^{\\\\lambda_1 t} ' + nt.vec2(nt.x + '_1', nt.y + '_1') + ' + k_2 e^{\\\\lambda_2 t} ' + nt.vec2(nt.x + '_2', nt.y + '_2') + ' \\\\]',\n                                                                        'get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ' + ivp + ' solution by solving:',\n                                                                        '\\\\[ ' + nt.mat2(nt.x + '_1', nt.x + '_2', nt.y + '_1', nt.y + '_2') + ' ' + nt.vec2('k_1', 'k_2') + ' = ' + nt.vec2(nt.x + '_0', nt.y + '_0') + ' \\\\]'\n                                                                    ]\n                                                                },\n                                                                {\n                                                                    type: 'case',\n                                                                    title: 'complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)',\n                                                                    content: [\n                                                                        'select one of eigenvalues \\\\( \\\\lambda_1 = \\\\alpha + i \\\\beta \\\\)',\n                                                                        'find complex-valued eigenvector \\\\( ' + nt.svec2(nt.x + '_1 + i ' + nt.x + '_2', nt.y + '_1 + i ' + nt.y + '_2') + ' \\\\) by solving:',\n                                                                        '\\\\[ (\\\\mathbf{A} - \\\\lambda_1 \\\\mathbf{I}) ' + nt.vec2(nt.x + '_1 + i ' + nt.x + '_2', nt.y + '_1 + i ' + nt.y + '_2') + ' = 0 \\\\]',\n                                                                        {\n                                                                            type: 'derivation',\n                                                                            content: [\n                                                                                'one of complex-valued solutions:',\n                                                                                '\\\\[ ' + nt.X + '_c = e^{\\\\alpha t} (\\\\cos \\\\beta t + i \\\\sin \\\\beta t) ' + nt.svec2(nt.x + '_1 + i ' + nt.x + '_2', nt.y + '_1 + i ' + nt.y + '_2') + ' \\\\]',\n                                                                                'find general solution by taking real and imaginary parts of a complex-valued solution:',\n                                                                                '\\\\[ ' + nt.X + ' = k_1 \\\\operatorname{Re}(' + nt.X + '_c) + k_2 \\\\operatorname{Im}(' + nt.X + '_c) \\\\]'\n                                                                            ]\n                                                                        },\n                                                                        'general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):',\n                                                                        '\\\\[ \\\\begin{aligned} ' + (nt.X + ' = \\\\: & k_1 e^{\\\\alpha t} ' + nt.vec2(nt.x + '_1 \\\\cos \\\\beta t - ' + nt.x + '_2 \\\\sin \\\\beta t', nt.y + '_1 \\\\cos \\\\beta t - ' + nt.y + '_2 \\\\sin \\\\beta t') + ' \\\\\\\\') + ('+ \\\\: & k_2 e^{\\\\alpha t} ' + nt.vec2(nt.x + '_1 \\\\sin \\\\beta t + ' + nt.x + '_2 \\\\cos \\\\beta t', nt.y + '_1 \\\\sin \\\\beta t + ' + nt.y + '_2 \\\\cos \\\\beta t') + ' ') + '\\\\end{aligned} \\\\]',\n                                                                        'get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ' + ivp + ' solution by solving:',\n                                                                        '\\\\[ ' + nt.mat2(nt.x + '_1', nt.x + '_2', nt.y + '_1', nt.y + '_2') + ' ' + nt.vec2('k_1', 'k_2') + ' = ' + nt.vec2(nt.x + '_0', nt.y + '_0') + ' \\\\]'\n                                                                    ]\n                                                                }\n                                                            ]\n                                                        }\n                                                    ]\n                                                }\n                                            ]\n                                        }\n                                    ]\n                                },\n                                equilibriumSolutionMethod: {\n                                    form: true,\n                                    content: [{\n                                            type: 'switch',\n                                            title: '\\\\( \\\\det(\\\\mathbf{A}) \\\\) is',\n                                            content: [\n                                                {\n                                                    type: 'case',\n                                                    title: '\\\\( \\\\det(\\\\mathbf{A}) = 0 \\\\)',\n                                                    content: [\n                                                        '\\\\[ ' + nt.X + ' = K ' + nt.vec2('b', '-a') + ' \\\\]',\n                                                        {\n                                                            type: 'proof',\n                                                            content: [\n                                                                '\\\\[ ' + nt.dd(nt.X) + ' = K ' + nt.mat2('a', 'b', 'c', 'd') + ' ' + nt.vec2('b', '-a') + ' \\\\]',\n                                                                '\\\\[ ' + nt.dd(nt.X) + ' = K ' + nt.vec2('a b - b a', 'c b - d a') + ' \\\\]',\n                                                                '\\\\[ a d = b c \\\\]',\n                                                                '\\\\[ ' + nt.dd(nt.X) + ' = ' + nt.vec2(0, 0) + ' \\\\]'\n                                                            ]\n                                                        }\n                                                    ]\n                                                },\n                                                {\n                                                    type: 'case',\n                                                    title: '\\\\( \\\\det(\\\\mathbf{A}) \\\\ne 0 \\\\)',\n                                                    content: ['\\\\[ ' + nt.X + ' = ' + nt.vec2(0, 0) + ' \\\\]']\n                                                }\n                                            ]\n                                        }]\n                                },\n                                plot: {\n                                    form: true,\n                                    content: [function () {\n                                            var plot = new LhcPlot(nt.x, nt.y);\n                                            return plot.$output;\n                                        }]\n                                }\n                            }\n                        },\n                        sn_sir: {\n                            parents: { sn: true },\n                            name: 'SIR model',\n                            htmlName: '<a href=\\'https://en.wikipedia.org/w/index.php?title=SIR_model\\'>SIR</a> model',\n                            importance: 3,\n                            equation: '\\\\left\\\\{ \\\\begin{aligned}' + (nt.dd('S') + ' &= -\\\\alpha S I \\\\\\\\') + (nt.dd('I') + ' &= \\\\alpha S I - \\\\beta I \\\\\\\\ ') + (nt.dd('R') + ' &= \\\\beta I') + '\\\\end{aligned} \\\\right.',\n                            equationNotes: [\n                                '\\\\( S = \\\\) number susceptible',\n                                '\\\\( I = \\\\) number infectious',\n                                '\\\\( R = \\\\) number recovered (immune)',\n                                '\\\\( \\\\alpha = \\\\) contact rate',\n                                '\\\\( \\\\beta = \\\\) recovery rate',\n                                'all quantities are nonnegative'\n                            ],\n                            traits: {\n                                phaseSolutionMethod: {\n                                    form: true,\n                                    content: [\n                                        'threshold value \\\\( \\\\rho = \\\\frac\\\\beta\\\\alpha \\\\):',\n                                        '\\\\( I \\\\) increases when \\\\( S &gt; \\\\rho \\\\)',\n                                        '\\\\( S \\\\) decreases',\n                                        '\\\\( I \\\\) attains its maximum when \\\\( S = \\\\rho \\\\)',\n                                        {\n                                            type: 'derivation',\n                                            content: [\n                                                '\\\\[ ' + nt.dd('S') + ' + ' + nt.dd('I') + ' + ' + nt.dd('R') + ' = 0 \\\\]',\n                                                'total population \\\\( N \\\\) is constant',\n                                                '\\\\[ S + I + R = N \\\\]',\n                                                'eliminate \\\\( R \\\\)',\n                                                '\\\\[ \\\\left\\\\{ \\\\begin{aligned} ' + (nt.dd('S') + ' &= -\\\\alpha S I \\\\\\\\ ') + (nt.dd('I') + ' &= \\\\alpha S I - \\\\beta I \\\\\\\\ ') + '\\\\end{aligned} \\\\right. \\\\]',\n                                                '\\\\[ ' + nt.dd('I', 'S') + ' = \\\\frac{\\\\alpha S I - \\\\beta I}{-\\\\alpha S I} = -1 + \\\\frac{\\\\rho}{S} \\\\]',\n                                                'integrate by \\\\( S \\\\)',\n                                                '\\\\[ I = -S + \\\\rho \\\\ln S + C \\\\]'\n                                            ]\n                                        },\n                                        'conserved quantities:',\n                                        '\\\\[ \\\\begin{multline}' + 'S(t) + I(t) + R(t) = \\\\\\\\ ' + '= S(0) + I(0) + R(0) ' + '\\\\end{multline} \\\\]',\n                                        '\\\\[ \\\\begin{multline}' + 'I(t) + S(t) - \\\\rho \\\\ln S(t) = \\\\\\\\ ' + '= I(0) + S(0) - \\\\rho \\\\ln S(0) ' + '\\\\end{multline} \\\\]',\n                                        'maximum of \\\\( I \\\\):',\n                                        '\\\\[ \\\\begin{multline}' + 'I_{max} + \\\\rho - \\\\rho \\\\ln \\\\rho = \\\\\\\\ ' + '= I(0) + S(0) - \\\\rho \\\\ln S(0) ' + '\\\\end{multline} \\\\]'\n                                    ]\n                                },\n                                equilibriumSolutionMethod: {\n                                    form: true,\n                                    content: ['\\\\[ I = 0 \\\\]']\n                                }\n                            }\n                        }\n                    };\n                };\n            },\n            { '7': 7 }\n        ],\n        7: [\n            function (require, module, exports) {\n                'use strict';\n                var detailsPolyfill = require(1);\n                var Matrix = require(10);\n                var TrdetCanvas = require(12);\n                var PhaseCanvas = require(11);\n                // works like this: http://mathlets.org/mathlets/linear-phase-portraits-matrix-entry/\n                var LhcPlot = function LhcPlot(xLabel, yLabel) {\n                    babelHelpers.classCallCheck(this, LhcPlot);\n                    var matrix = new Matrix();\n                    var $numberInputs = {};\n                    var $rangeInputs = {};\n                    var $equilibriumType = void 0;\n                    var trdetCanvas = new TrdetCanvas();\n                    var phaseCanvas = new PhaseCanvas();\n                    var updateDetails = function () {\n                        var updateEquilibriumType = function () {\n                            var getEquilibriumType = function () {\n                                // names are based on\n                                // http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\n                                var D = matrix.det;\n                                var T = matrix.tr;\n                                var ssc = T == 0 ? 'center' : T < 0 ? 'sink' : 'source';\n                                if (D < 0) {\n                                    return 'saddle';\n                                } else if (D == 0) {\n                                    if (T == 0) {\n                                        if (matrix.b == 0 && matrix.c == 0) {\n                                            return 'degenerate everywhere fixed';\n                                        } else {\n                                            return 'degenerate parallel lines';\n                                        }\n                                    } else {\n                                        return 'degenerate comb ' + ssc;\n                                    }\n                                } else if (4 * D < T * T) {\n                                    return 'nodal (real) ' + ssc;\n                                } else if (4 * D == T * T) {\n                                    if (matrix.b == 0 && matrix.c == 0) {\n                                        return 'star ' + ssc;\n                                    } else {\n                                        return 'defective nodal (real) ' + ssc;\n                                    }\n                                } else {\n                                    if (T == 0) {\n                                        return ssc;\n                                    } else {\n                                        return 'spiral ' + ssc;\n                                    }\n                                }\n                            };\n                            $equilibriumType.text(getEquilibriumType());\n                        };\n                        matrix.forUpdated(function (cf) {\n                            $numberInputs[cf].val(matrix[cf]);\n                            $rangeInputs[cf].val(matrix[cf]);\n                        });\n                        updateEquilibriumType();\n                        trdetCanvas.redraw(matrix);\n                        phaseCanvas.redraw(matrix, xLabel, yLabel);\n                    };\n                    var getCoefInputs = function (coef) {\n                        var isMatrixElement = coef.length == 1;\n                        var valueRange = matrix.getRange(coef);\n                        var initCoefInput = function (type, getValue, setValue) {\n                            var $input = $('<input type=\\'' + type + '\\'>').attr('step', 'any').val(matrix[coef]);\n                            if (type == 'range') {\n                                $input.attr('min', -valueRange).attr('max', valueRange);\n                            }\n                            $input.on('input change', function () {\n                                if (this.checkValidity()) {\n                                    var value = getValue();\n                                    setValue(value);\n                                    matrix[coef] = Number(value);\n                                    updateDetails();\n                                }\n                            });\n                            return $input;\n                        };\n                        var $div = $('<div>');\n                        if (!isMatrixElement) {\n                            $div.addClass(coef);\n                        }\n                        var label = coef;\n                        if (coef == 'tr') {\n                            label = '\\\\operatorname{' + coef + '}(\\\\mathbf{A})';\n                        } else if (coef == 'det') {\n                            label = '\\\\' + coef + '(\\\\mathbf{A})';\n                        } else if (coef.slice(0, 2) == 're') {\n                            //label=`\\\\lambda_${coef.charAt(2)} =`\n                            label = '\\\\Re \\\\lambda_' + coef.charAt(2);\n                        } else if (coef.slice(0, 2) == 'im') {\n                            //label=`+ i \\\\cdot`\n                            label = '\\\\Im \\\\lambda_' + coef.charAt(2);\n                        }\n                        var $number = void 0, $range = void 0;\n                        $div.append($('<label>').append('<span class=\\'label\\'>\\\\( ' + label + ' \\\\)</span>', '<span class=\\'space\\'> </span>', $number = initCoefInput('number', function () {\n                            return $number.val();\n                        }, function (v) {\n                            return $range.val(v);\n                        })), ' ', $range = initCoefInput('range', function () {\n                            return Number($range.val()).toFixed(2);\n                        }, function (v) {\n                            return $number.val(v);\n                        }));\n                        $numberInputs[coef] = $number;\n                        $rangeInputs[coef] = $range;\n                        return $div;\n                    };\n                    this.$output = $('<div class=\\'matrix\\'>').append($('<details>').append($('<summary>').append('equation coefficients'), $('<table>').append($('<tr>').append($('<td>').append(getCoefInputs('a')), $('<td>').append(getCoefInputs('b'))), $('<tr>').append($('<td>').append(getCoefInputs('c')), $('<td>').append(getCoefInputs('d')))), $('<div>').append('Set matrix to ', $('<button>zero</button>').click(function () {\n                        matrix.setZero();\n                        updateDetails();\n                    }), ' ', $('<button>associated</button>').click(function () {\n                        matrix.setAssociated();\n                        updateDetails();\n                    }))).each(detailsPolyfill), $('<details>').append($('<summary>').append('matrix parameters'), getCoefInputs('tr'), getCoefInputs('det'), $('<table>').append($('<tr>').append($('<td>').append(getCoefInputs('re1')), $('<td>').append(getCoefInputs('im1'))), $('<tr>').append($('<td>').append(getCoefInputs('re2')), $('<td>').append(getCoefInputs('im2'))))).each(detailsPolyfill), $('<details>').append($('<summary>').append('equilibrium point type'), $equilibriumType = $('<div>')).each(detailsPolyfill), $('<details>').append($('<summary class=\\'bordered\\'>').append('<a href=\\'https://en.wikipedia.org/wiki/Trace_(linear_algebra)\\'>tr</a>-<a href=\\'https://en.wikipedia.org/wiki/Determinant\\'>det</a> plane'), trdetCanvas.$output.on('mousedown mousemove', function (ev) {\n                        if (!ev.buttons & 1)\n                            return;\n                        var $canvas = $(this);\n                        var w = $canvas.width();\n                        var h = $canvas.height();\n                        var trim = function (v) {\n                            return Number(v.toFixed(2));\n                        };\n                        var tRange = matrix.getRange('tr');\n                        var dRange = matrix.getRange('det');\n                        var tClose = 2 * tRange / (w / 2);\n                        var dClose = 2 * dRange / (h / 2);\n                        var t = trim(+(ev.offsetX - w / 2 + 0.5) / (w / 2) * tRange);\n                        var d = trim(-(ev.offsetY - h / 2 + 0.5) / (h / 2) * dRange);\n                        var p = t * t / 4;\n                        if (Math.abs(d) <= dClose && Math.abs(t) <= tClose) {\n                            t = 0;\n                            d = 0;\n                        } else if (d > 0 && Math.abs(t) <= tClose) {\n                            t = 0;\n                        } else if (d < 0 && d >= -dClose) {\n                            d = 0;\n                        } else if (d - p > 0 && d - p <= dClose) {\n                            d = p;\n                        } else if (d > 0 && d <= dClose) {\n                            d = 0;\n                        } else if (d - p < 0 && d - p >= -dClose) {\n                            d = p;\n                        }\n                        matrix.setTrdetExternally(t, d);\n                        updateDetails();\n                    })).each(detailsPolyfill), $('<details>').append($('<summary class=\\'bordered\\'>').append('<a href=\\'https://en.wikipedia.org/wiki/Phase_space\\'>phase plane</a>'), phaseCanvas.$output).each(detailsPolyfill));\n                    updateDetails();\n                };\n                module.exports = LhcPlot;\n            },\n            {\n                '1': 1,\n                '10': 10,\n                '11': 11,\n                '12': 12\n            }\n        ],\n        8: [\n            function (require, module, exports) {\n                'use strict';\n                var Canvas = function () {\n                    function Canvas() {\n                        babelHelpers.classCallCheck(this, Canvas);\n                        this.width = 246;\n                        this.height = 246;\n                        this.$output = $('<canvas width=\\'' + this.width + '\\' height=\\'' + this.height + '\\'>');\n                        this.ctx = this.$output[0].getContext('2d');\n                    }\n                    Canvas.prototype.drawAxes = function drawAxes(xLabel, yLabel) {\n                        var xAxisSize = 80;\n                        var yAxisSize = 80;\n                        var arrowSize = 15;\n                        var ctx = this.ctx;\n                        var drawAxis = function () {\n                            ctx.beginPath();\n                            ctx.moveTo(-xAxisSize, 0);\n                            ctx.lineTo(+xAxisSize, 0);\n                            ctx.moveTo(xAxisSize - arrowSize, -arrowSize);\n                            ctx.lineTo(xAxisSize, 0);\n                            ctx.lineTo(xAxisSize - arrowSize, +arrowSize);\n                            ctx.stroke();\n                        };\n                        ctx.save();\n                        ctx.lineWidth = 6;\n                        ctx.strokeStyle = ctx.fillStyle = '#DDD';\n                        ctx.font = '900 30px sans-serif';\n                        drawAxis();\n                        ctx.save();\n                        ctx.rotate(-Math.PI / 2);\n                        drawAxis();\n                        ctx.restore();\n                        ctx.textBaseline = 'middle';\n                        ctx.fillText(xLabel, xAxisSize + 10, 0);\n                        ctx.textBaseline = 'alphabetic';\n                        ctx.textAlign = 'center';\n                        ctx.fillText(yLabel, 0, -yAxisSize - 10);\n                        ctx.restore();\n                    };\n                    return Canvas;\n                }();\n                module.exports = Canvas;\n            },\n            {}\n        ],\n        9: [\n            function (require, module, exports) {\n                'use strict';\n                // returns coords [x,y] of a point on x*y=C closest to (x0,y0)\n                // could have solved x^3*(x-x0)+C*y0*x-C^2=0, y=C/x\n                var getClosestPointOnPositiveHyperbolaIn1stQuadrant = function (C, x0, y0) {\n                    var x = Math.sqrt(C);\n                    var y = x;\n                    var epsilon2 = 1e-12;\n                    var iterationLimit = 20;\n                    for (var i = 0; i < iterationLimit; i++) {\n                        if (x <= 0)\n                            return [\n                                C / y0,\n                                y0\n                            ];\n                        if (y <= 0)\n                            return [\n                                x0,\n                                C / x0\n                            ];\n                        var yx = y0 / (2 * x);\n                        var xy = x0 / (2 * y);\n                        var t = yx + xy - Math.sqrt((yx - xy) * (yx - xy) + C / (x * y));\n                        var x1 = x0 - y * t;\n                        var y1 = y0 - x * t;\n                        if ((x - x1) * (x - x1) + (y - y1) * (y - y1) <= epsilon2)\n                            break;\n                        x = x1;\n                        y = y1;\n                    }\n                    return [\n                        x,\n                        y\n                    ];\n                };\n                var getClosestPointOnPositiveHyperbola = function (C, x0, y0) {\n                    if (y0 >= -x0) {\n                        // top-right branch\n                        return getClosestPointOnPositiveHyperbolaIn1stQuadrant(C, x0, y0);\n                    } else {\n                        // bottom-left branch\n                        var xy = getClosestPointOnPositiveHyperbolaIn1stQuadrant(C, -x0, -y0);\n                        return [\n                            -xy[0],\n                            -xy[1]\n                        ];\n                    }\n                };\n                var getClosestPointOnHyperbola = function (C, x0, y0) {\n                    if (C == 0) {\n                        if (Math.abs(x0) < Math.abs(y0)) {\n                            return [\n                                0,\n                                y0\n                            ];\n                        } else {\n                            return [\n                                x0,\n                                0\n                            ];\n                        }\n                    } else if (C > 0) {\n                        return getClosestPointOnPositiveHyperbola(C, x0, y0);\n                    } else {\n                        // flip y axis\n                        var xy = getClosestPointOnPositiveHyperbola(-C, x0, -y0);\n                        return [\n                            xy[0],\n                            -xy[1]\n                        ];\n                    }\n                };\n                module.exports = getClosestPointOnHyperbola;\n            },\n            {}\n        ],\n        10: [\n            function (require, module, exports) {\n                'use strict';\n                var getClosestPointOnHyperbola = require(9);\n                var Matrix = function () {\n                    function Matrix() {\n                        babelHelpers.classCallCheck(this, Matrix);\n                        this._updated = {};\n                        this.setZero();\n                        this._updated = {};\n                    }\n                    Matrix.prototype.forUpdated = function forUpdated(fn) {\n                        for (var coef in this._updated) {\n                            fn(coef);\n                        }\n                        this._updated = {};\n                    };\n                    Matrix.prototype._computeElementsFromTrdet = function _computeElementsFromTrdet() {\n                        if (this._original === null) {\n                            this._original = {\n                                a: this._a,\n                                b: this._b,\n                                c: this._c,\n                                d: this._d\n                            };\n                        }\n                        this._a = (this._original.a + this._tr - this._original.d) / 2;\n                        this._d = this._tr - this._a;\n                        var bc = getClosestPointOnHyperbola(this._a * this._d - this._det, this._original.b, this._original.c);\n                        this._b = bc[0];\n                        this._c = bc[1];\n                        this._updated.a = this._updated.b = this._updated.c = this._updated.d = true;\n                    };\n                    Matrix.prototype._computeTrdetFromElements = function _computeTrdetFromElements() {\n                        this._tr = this._a + this._d;\n                        this._det = this._a * this._d - this._b * this._c;\n                        this._updated.tr = this._updated.det = true;\n                    };\n                    Matrix.prototype._computeEigenvaluesFromTrdet = function _computeEigenvaluesFromTrdet() {\n                        var discr = this._tr * this._tr - 4 * this._det;\n                        if (discr >= 0) {\n                            var root = Math.sqrt(discr);\n                            if (this._re2 >= this._re1) {\n                                this._re1 = (this._tr - root) / 2;\n                                this._re2 = (this._tr + root) / 2;\n                            } else {\n                                this._re2 = (this._tr - root) / 2;\n                                this._re1 = (this._tr + root) / 2;\n                            }\n                            this._im1 = this._im2 = 0;\n                        } else {\n                            var _root = Math.sqrt(-discr);\n                            this._re1 = this._re2 = this._tr / 2;\n                            if (this._im2 >= this._im1) {\n                                this._im1 = -_root / 2;\n                                this._im2 = +_root / 2;\n                            } else {\n                                this._im2 = -_root / 2;\n                                this._im1 = +_root / 2;\n                            }\n                        }\n                        this._updated.re1 = this._updated.re2 = this._updated.im1 = this._updated.im2 = true;\n                    };\n                    Matrix.prototype._computeTrdetFromEigenvalues = function _computeTrdetFromEigenvalues() {\n                        this._tr = this._re1 + this._re2;\n                        this._det = this._re1 * this._re2 - this._im1 * this._im2;\n                        this._updated.tr = this._updated.det = true;\n                    };\n                    Matrix.prototype.getEigenvector = function getEigenvector(lambda) {\n                        if (Math.abs(this._b) + Math.abs(lambda - this._a) >= Math.abs(lambda - this._d) + Math.abs(this._c)) {\n                            return [\n                                this._b,\n                                lambda - this._a\n                            ];\n                        } else {\n                            return [\n                                lambda - this._d,\n                                this._c\n                            ];\n                        }\n                    };\n                    Matrix.prototype.getComplexEigenvector = function getComplexEigenvector(alpha, beta) {\n                        if (Math.abs(this._b) + Math.abs(alpha - this._a) >= Math.abs(alpha - this._d) + Math.abs(this._c)) {\n                            return [\n                                this._b,\n                                0,\n                                alpha - this._a,\n                                beta\n                            ];\n                        } else {\n                            return [\n                                alpha - this._d,\n                                beta,\n                                this._c,\n                                0\n                            ];\n                        }\n                    };\n                    Matrix.prototype.getRange = function getRange(coef) {\n                        if (coef == 'tr') {\n                            return 10;\n                        } else if (coef == 'det') {\n                            return 50;\n                        } else if (coef == 'a' || coef == 'b' || coef == 'c' || coef == 'd') {\n                            return 5;\n                        } else {\n                            return 10;    // eigenvalues\n                        }\n                    };\n                    Matrix.prototype.setTrdetExternally = function setTrdetExternally(T, D) {\n                        // for use with clicks on tr-det plane plot\n                        this._tr = T;\n                        this._det = D;\n                        this._updated.tr = this._updated.det = true;\n                        this._computeElementsFromTrdet();\n                        this._computeEigenvaluesFromTrdet();\n                    };\n                    Matrix.prototype._setRe = function _setRe(v, i, j) {\n                        this['_re' + i] = v;\n                        if (this._im1 != 0 || this._im2 != 0) {\n                            this['_re' + j] = v;\n                            this._updated['re' + j] = true;\n                        }\n                        this._computeTrdetFromEigenvalues();\n                        this._computeElementsFromTrdet();\n                    };\n                    Matrix.prototype._setIm = function _setIm(v, i, j) {\n                        this['_im' + i] = v;\n                        this['_im' + j] = -v;\n                        this._updated['im' + j] = true;\n                        if (v != 0) {\n                            this['_re' + j] = this['_re' + i];\n                            this._updated['re' + j] = true;\n                        }\n                        this._computeTrdetFromEigenvalues();\n                        this._computeElementsFromTrdet();\n                    };\n                    Matrix.prototype.setZero = function setZero() {\n                        this._a = this._b = this._c = this._d = 0;\n                        this._tr = this._det = 0;\n                        this._re1 = this._re2 = this._im1 = this._im2 = 0;\n                        this._original = null;\n                        this._updated.a = this._updated.b = this._updated.c = this._updated.d = true;\n                        this._updated.tr = this._updated.det = true;\n                        this._updated.re1 = this._updated.re2 = this._updated.im1 = this._updated.im2 = true;\n                    };\n                    Matrix.prototype.setAssociated = function setAssociated() {\n                        // \"associated matrix\" http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\n                        this._a = 0;\n                        this._b = 1;\n                        this._c = -this._det;\n                        this._d = this._tr;\n                        this._original = null;\n                        this._updated.a = this._updated.b = this._updated.c = this._updated.d = true;\n                    };\n                    babelHelpers.createClass(Matrix, [\n                        {\n                            key: 'a',\n                            get: function () {\n                                return this._a;\n                            },\n                            set: function (v) {\n                                this._a = v;\n                                this._original = null;\n                                this._computeTrdetFromElements();\n                                this._computeEigenvaluesFromTrdet();\n                            }\n                        },\n                        {\n                            key: 'b',\n                            get: function () {\n                                return this._b;\n                            },\n                            set: function (v) {\n                                this._b = v;\n                                this._original = null;\n                                this._computeTrdetFromElements();\n                                this._computeEigenvaluesFromTrdet();\n                            }\n                        },\n                        {\n                            key: 'c',\n                            get: function () {\n                                return this._c;\n                            },\n                            set: function (v) {\n                                this._c = v;\n                                this._original = null;\n                                this._computeTrdetFromElements();\n                                this._computeEigenvaluesFromTrdet();\n                            }\n                        },\n                        {\n                            key: 'd',\n                            get: function () {\n                                return this._d;\n                            },\n                            set: function (v) {\n                                this._d = v;\n                                this._original = null;\n                                this._computeTrdetFromElements();\n                                this._computeEigenvaluesFromTrdet();\n                            }\n                        },\n                        {\n                            key: 'tr',\n                            get: function () {\n                                return this._tr;\n                            },\n                            set: function (v) {\n                                this._tr = v;\n                                this._computeElementsFromTrdet();\n                                this._computeEigenvaluesFromTrdet();\n                            }\n                        },\n                        {\n                            key: 'det',\n                            get: function () {\n                                return this._det;\n                            },\n                            set: function (v) {\n                                this._det = v;\n                                this._computeElementsFromTrdet();\n                                this._computeEigenvaluesFromTrdet();\n                            }\n                        },\n                        {\n                            key: 're1',\n                            get: function () {\n                                return this._re1;\n                            },\n                            set: function (v) {\n                                this._setRe(v, 1, 2);\n                            }\n                        },\n                        {\n                            key: 're2',\n                            get: function () {\n                                return this._re2;\n                            },\n                            set: function (v) {\n                                this._setRe(v, 2, 1);\n                            }\n                        },\n                        {\n                            key: 'im1',\n                            get: function () {\n                                return this._im1;\n                            },\n                            set: function (v) {\n                                this._setIm(v, 1, 2);\n                            }\n                        },\n                        {\n                            key: 'im2',\n                            get: function () {\n                                return this._im2;\n                            },\n                            set: function (v) {\n                                this._setIm(v, 2, 1);\n                            }\n                        }\n                    ]);\n                    return Matrix;\n                }();\n                module.exports = Matrix;\n            },\n            { '9': 9 }\n        ],\n        11: [\n            function (require, module, exports) {\n                'use strict';\n                var Canvas = require(8);\n                var PhaseCanvas = function (_Canvas) {\n                    babelHelpers.inherits(PhaseCanvas, _Canvas);\n                    function PhaseCanvas() {\n                        babelHelpers.classCallCheck(this, PhaseCanvas);\n                        return babelHelpers.possibleConstructorReturn(this, _Canvas.apply(this, arguments));\n                    }\n                    PhaseCanvas.prototype.redraw = function redraw(matrix, xLabel, yLabel) {\n                        var ctx = this.ctx;\n                        var xRange = this.width / 2;\n                        var yRange = this.height / 2;\n                        var drawDirectionField = function () {\n                            var arrowSpacing = 27;\n                            var arrowLength = 5;\n                            var arrowWidth = 2;\n                            var drawArrow = function (x, y) {\n                                var dx = matrix.a * x + matrix.b * y;\n                                var dy = matrix.c * x + matrix.d * y;\n                                var dl = Math.sqrt(dx * dx + dy * dy);\n                                ctx.beginPath();\n                                ctx.moveTo(+(x - dx / dl * arrowLength), -(y - dy / dl * arrowLength));\n                                ctx.lineTo(+x, -y);\n                                ctx.stroke();\n                                ctx.beginPath();\n                                ctx.moveTo(+(x + dx / dl * arrowLength), -(y + dy / dl * arrowLength));\n                                ctx.lineTo(+(x - dy / dl * arrowWidth), -(y + dx / dl * arrowWidth));\n                                ctx.lineTo(+(x + dy / dl * arrowWidth), -(y - dx / dl * arrowWidth));\n                                ctx.closePath();\n                                ctx.fill();\n                            };\n                            ctx.save();\n                            ctx.fillStyle = ctx.strokeStyle = '#888';\n                            var nx = Math.floor(xRange / arrowSpacing);\n                            var ny = Math.floor(yRange / arrowSpacing);\n                            for (var i = -nx; i <= nx; i++) {\n                                for (var j = -ny; j <= ny; j++) {\n                                    drawArrow(i * arrowSpacing + 0.5 * Math.sign(i), j * arrowSpacing + 0.5 * Math.sign(j));\n                                }\n                            }\n                            ctx.restore();\n                        };\n                        var drawEigenline = function (lambda, otherLambda) {\n                            var iconSize = 5;\n                            var icon = void 0;\n                            if (lambda < 0) {\n                                icon = -1 - (otherLambda < 0 && lambda < otherLambda);\n                            } else if (lambda > 0) {\n                                icon = +1 + (otherLambda > 0 && lambda > otherLambda);\n                            } else {\n                                icon = 0;\n                            }\n                            var xy = matrix.getEigenvector(lambda);\n                            var x = xy[0], y = xy[1];\n                            ctx.save();\n                            ctx.lineWidth = 2;\n                            if (x < 0) {\n                                x = -x;\n                                y = -y;\n                            }\n                            if (y < 0) {\n                                ctx.scale(1, -1);\n                                y = -y;\n                            }\n                            if (x < y) {\n                                // TODO this will work only for square canvases, should also swap xRange and yRange\n                                ctx.transform(0, 1, 1, 0, 0, 0);\n                                // swap x,y\n                                var t = x;\n                                x = y;\n                                y = t;\n                            }\n                            if (x > 0) {\n                                (function () {\n                                    var r = Math.sqrt(x * x + y * y);\n                                    var x0 = x / r;\n                                    var y0 = y / r;\n                                    var x1 = xRange;\n                                    var y1 = yRange * y / x;\n                                    var xic = xRange / 2 * x0;\n                                    var yic = yRange / 2 * y0;\n                                    var xis = iconSize * x0;\n                                    var yis = iconSize * y0;\n                                    var drawEigenlineIcon = function () {\n                                        var dir = Math.sign(icon);\n                                        var drawDiamond = function () {\n                                            ctx.beginPath();\n                                            ctx.moveTo(xic - xis, -(yic - yis));\n                                            ctx.lineTo(xic + yis, -(yic - xis));\n                                            ctx.lineTo(xic + xis, -(yic + yis));\n                                            ctx.lineTo(xic - yis, -(yic + xis));\n                                            ctx.closePath();\n                                            ctx.fill();\n                                        };\n                                        var drawTriangle = function (ofs) {\n                                            ctx.beginPath();\n                                            ctx.moveTo(xic + dir * (ofs * xis - xis - yis), -(yic + dir * (ofs * yis - yis + xis)));\n                                            ctx.lineTo(xic + dir * (ofs * xis - xis + yis), -(yic + dir * (ofs * yis - yis - xis)));\n                                            ctx.lineTo(xic + dir * (ofs * xis + xis), -(yic + dir * (ofs * yis + yis)));\n                                            ctx.closePath();\n                                            ctx.fill();\n                                        };\n                                        if (dir == 0) {\n                                            drawDiamond();\n                                        } else {\n                                            drawTriangle(0);\n                                            if (Math.abs(icon) >= 2) {\n                                                drawTriangle(2);\n                                            }\n                                        }\n                                    };\n                                    ctx.beginPath();\n                                    ctx.moveTo(-x1, +y1);\n                                    ctx.lineTo(+x1, -y1);\n                                    ctx.stroke();\n                                    ctx.save();\n                                    drawEigenlineIcon();\n                                    ctx.scale(-1, -1);\n                                    drawEigenlineIcon();\n                                    ctx.restore();\n                                }());\n                            }\n                            ctx.restore();\n                        };\n                        var drawSolution = function (x0, y0, color) {\n                            var iterationLimit = 100 * Math.max(xRange, yRange);\n                            var fnOnFractions = function (fn, xNum, xDen, yNum, yDen) {\n                                if (xDen != 0 && yDen != 0) {\n                                    return fn(xNum / xDen, yNum / yDen);\n                                } else if (xDen == 0 && yDen != 0) {\n                                    return yNum / yDen;\n                                } else if (xDen != 0 && yDen == 0) {\n                                    return xNum / xDen;\n                                }\n                            };\n                            var drawFixedPoint = function () {\n                                var fixedPointSize = 3;\n                                ctx.beginPath();\n                                ctx.arc(x0, y0, fixedPointSize, 0, 2 * Math.PI);\n                                ctx.fill();\n                            };\n                            var drawSaddleOrNodeSolution = function () {\n                                var lambda1 = void 0, lambda2 = void 0;\n                                if (matrix.re1 <= matrix.re2) {\n                                    lambda1 = matrix.re1;\n                                    lambda2 = matrix.re2;\n                                } else {\n                                    lambda1 = matrix.re2;\n                                    lambda2 = matrix.re1;\n                                }\n                                var xy1 = matrix.getEigenvector(lambda1);\n                                var x1 = xy1[0], y1 = xy1[1];\n                                var xy2 = matrix.getEigenvector(lambda2);\n                                var x2 = xy2[0], y2 = xy2[1];\n                                if (lambda2 <= 0) {\n                                    var t = void 0;\n                                    t = lambda1;\n                                    lambda1 = -lambda2;\n                                    lambda2 = -t;\n                                    t = x1;\n                                    x1 = x2;\n                                    x2 = t;\n                                    t = y1;\n                                    y1 = y2;\n                                    y2 = t;\n                                }\n                                var k1 = +(x2 * y0 - x0 * y2) / (x2 * y1 - x1 * y2);\n                                var k2 = -(x1 * y0 - x0 * y1) / (x2 * y1 - x1 * y2);\n                                if (k1 == 0 && k2 == 0 || lambda1 == 0 && k2 == 0) {\n                                    drawFixedPoint();\n                                    return;\n                                } else if (k1 == 0 && lambda2 != 0) {\n                                    lambda1 = 0;    // trigger comb case below\n                                } else if (k2 == 0 && lambda1 != 0) {\n                                    lambda2 = Math.abs(lambda1);\n                                    lambda1 = 0;\n                                    // trigger comb case below\n                                    var _t = void 0;\n                                    _t = x1;\n                                    x1 = x2;\n                                    x2 = _t;\n                                    _t = y1;\n                                    y1 = y2;\n                                    y2 = _t;\n                                    _t = k1;\n                                    k1 = k2;\n                                    k2 = _t;\n                                }\n                                if (lambda1 > 0) {\n                                    // node\n                                    var T1 = 0;\n                                    var T2 = 0;\n                                    var dT1 = 1 / Math.max(Math.abs(k1 * x1), Math.abs(k1 * y1));\n                                    // step size is controlled by slow direction\n                                    ctx.beginPath();\n                                    ctx.moveTo(0, 0);\n                                    for (var i = 0; i < iterationLimit; i++) {\n                                        T1 += dT1;\n                                        T2 = Math.pow(T1, lambda2 / lambda1);\n                                        ctx.lineTo(+(k1 * x1 * T1 + k2 * x2 * T2), -(k1 * y1 * T1 + k2 * y2 * T2));\n                                        if ((k1 * x1 * T1 + k2 * x2 * T2) * Math.sign(k2 * x2) > xRange || (k1 * y1 * T1 + k2 * y2 * T2) * Math.sign(k2 * y2) > yRange)\n                                            break;\n                                    }\n                                    ctx.stroke();\n                                } else if (lambda1 < 0 && lambda2 > 0) {\n                                    // saddle\n                                    var _t2 = 0;\n                                    // assumes starting point is in viewport\n                                    for (var _i = 0; _i < iterationLimit; _i++) {\n                                        var ke1 = k1 * Math.exp(lambda1 * _t2);\n                                        var ke2 = k2 * Math.exp(lambda2 * _t2);\n                                        if ((x1 * ke1 + x2 * ke2) * Math.sign(x1 * k1) > xRange || (y1 * ke1 + y2 * ke2) * Math.sign(y1 * k1) > yRange)\n                                            break;\n                                        var dt = Math.min(1 / Math.abs(x1 * ke1 * lambda1), 1 / Math.abs(y1 * ke1 * lambda1), 1 / Math.abs(x1 * ke2 * lambda2), 1 / Math.abs(y1 * ke2 * lambda2));\n                                        _t2 -= dt;\n                                    }\n                                    ctx.beginPath();\n                                    for (var _i2 = 0; _i2 < iterationLimit; _i2++) {\n                                        var _ke = k1 * Math.exp(lambda1 * _t2);\n                                        var _ke2 = k2 * Math.exp(lambda2 * _t2);\n                                        ctx[_i2 ? 'lineTo' : 'moveTo'](+(x1 * _ke + x2 * _ke2), -(y1 * _ke + y2 * _ke2));\n                                        if (_t2 > 0 && ((x1 * _ke + x2 * _ke2) * Math.sign(x1 * k2) > xRange || (y1 * _ke + y2 * _ke2) * Math.sign(y1 * k2) > yRange))\n                                            break;\n                                        var _dt = Math.min(1 / Math.abs(x1 * _ke * lambda1), 1 / Math.abs(y1 * _ke * lambda1), 1 / Math.abs(x1 * _ke2 * lambda2), 1 / Math.abs(y1 * _ke2 * lambda2));\n                                        _t2 += _dt;\n                                    }\n                                    ctx.stroke();\n                                } else if (lambda1 == 0 && lambda2 > 0) {\n                                    // comb\n                                    var _t3 = fnOnFractions(Math.min, Math.sign(x2 * k2) * xRange - x1 * k1, x2 * k2, Math.sign(y2 * k2) * yRange - y1 * k1, y2 * k2);\n                                    if (_t3 > 0) {\n                                        ctx.beginPath();\n                                        ctx.moveTo(+(x1 * k1), -(y1 * k1));\n                                        ctx.lineTo(+(x1 * k1 + x2 * k2 * _t3), -(y1 * k1 + y2 * k2 * _t3));\n                                        ctx.stroke();\n                                    }\n                                }\n                            };\n                            var drawSpiralSolution = function () {\n                                var alpha = matrix.re1;\n                                var beta = matrix.im1;\n                                if (beta < 0) {\n                                    beta = -beta;\n                                }\n                                var xxyy = matrix.getComplexEigenvector(alpha, beta);\n                                if (alpha < 0) {\n                                    alpha = -alpha;\n                                    beta = -beta;\n                                }\n                                var x1 = xxyy[0], x2 = xxyy[1];\n                                var y1 = xxyy[2], y2 = xxyy[3];\n                                var k1 = +(x2 * y0 - x0 * y2) / (x2 * y1 - x1 * y2);\n                                var k2 = -(x1 * y0 - x0 * y1) / (x2 * y1 - x1 * y2);\n                                if (k1 == 0 && k2 == 0)\n                                    return;\n                                var kxc = k1 * x1 + k2 * x2;\n                                var kxs = k2 * x1 - k1 * x2;\n                                var kyc = k1 * y1 + k2 * y2;\n                                var kys = k2 * y1 - k1 * y2;\n                                if (alpha == 0) {\n                                    // center\n                                    ctx.beginPath();\n                                    var dt = 1 / Math.max(kxc, kyc, kxs, kys);\n                                    var t = 0;\n                                    for (var i = 0; i < iterationLimit; i++) {\n                                        var c = Math.cos(t);\n                                        var s = Math.sin(t);\n                                        ctx[i ? 'lineTo' : 'moveTo'](+(kxc * c + kxs * s), -(kyc * c + kys * s));\n                                        t += dt;\n                                        if (t >= 2 * Math.PI)\n                                            break;\n                                    }\n                                    ctx.closePath();\n                                    ctx.stroke();\n                                } else {\n                                    // spiral\n                                    var calculateSemiaxes = function () {\n                                        // https://en.wikipedia.org/wiki/Ellipse#Canonical_form\n                                        var A = kys * kys + kyc * kyc, B = -2 * (kxs * kys + kxc * kyc), C = kxs * kxs + kxc * kxc;\n                                        var f = kxc * kys - kxs * kyc;\n                                        var F = -f * f;\n                                        var DIS = B * B - 4 * A * C;\n                                        var A2 = 2 * DIS * F * (A + C - Math.sqrt((A - C) * (A - C) + B * B)) / (DIS * DIS);\n                                        var B2 = 2 * DIS * F * (A + C + Math.sqrt((A - C) * (A - C) + B * B)) / (DIS * DIS);\n                                        return [\n                                            A2,\n                                            B2\n                                        ];    // TODO relative axes lengths don't depend on initial conditions, this calculation should be simpler\n                                    };\n                                    var A2B2 = calculateSemiaxes();\n                                    var A2 = A2B2[0];\n                                    var B2 = A2B2[1];\n                                    var B = Math.sqrt(B2);\n                                    var R2 = xRange * xRange + yRange * yRange;\n                                    //const t0=-(Math.log(B2)/2+Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\n                                    var lineWidth = 2;\n                                    var t0 = (Math.log(lineWidth) - Math.log(B2) / 2 - Math.log(Math.exp(2 * Math.PI * alpha / Math.abs(beta)) - 1)) / alpha;\n                                    //const t1=(Math.log(R2)-Math.log(A2))/(2*alpha)\n                                    ctx.beginPath();\n                                    var e0 = Math.exp(alpha * t0);\n                                    var nSegments = Math.ceil(B * e0 * 2 * Math.PI);\n                                    for (var _i3 = 0; _i3 < nSegments; _i3++) {\n                                        var _t5 = 2 * Math.PI * _i3 / nSegments;\n                                        var c0 = Math.cos(_t5);\n                                        var s0 = Math.sin(_t5);\n                                        ctx[_i3 ? 'lineTo' : 'moveTo'](+e0 * (kxc * c0 + kxs * s0), -e0 * (kyc * c0 + kys * s0));\n                                    }\n                                    ctx.closePath();\n                                    ctx.stroke();\n                                    ctx.fill();\n                                    ctx.beginPath();\n                                    var _t4 = t0;\n                                    for (var _i4 = 0; _i4 < iterationLimit; _i4++) {\n                                        var e = Math.exp(alpha * _t4);\n                                        var _c = Math.cos(beta * _t4);\n                                        var _s = Math.sin(beta * _t4);\n                                        ctx[_i4 ? 'lineTo' : 'moveTo'](+e * (kxc * _c + kxs * _s), -e * (kyc * _c + kys * _s));\n                                        //const dtTan=1/Math.abs(beta*B*e)\n                                        var dtRad = Math.log(1 / (B * e) + 1) / alpha;\n                                        //t+=Math.min(Math.max(dtTan,1/Math.abs(40*beta)),dtRad)\n                                        _t4 += Math.min(dtRad, 1 / Math.abs(16 * beta));\n                                        if (e * e * A2 > R2)\n                                            break;\n                                    }\n                                    ctx.stroke();\n                                }\n                            };\n                            var drawDefectiveSolution = function () {\n                                var lambda = matrix.re1;\n                                var x1 = (matrix.a - lambda) * x0 + matrix.b * y0;\n                                var y1 = matrix.c * x0 + (matrix.d - lambda) * y0;\n                                if (lambda < 0) {\n                                    lambda = -lambda;\n                                    x1 = -x1;\n                                    y1 = -y1;\n                                }\n                                if (lambda == 0 && x1 == 0 && y1 == 0) {\n                                    // everywhere fixed\n                                    drawFixedPoint();\n                                }\n                                if (lambda == 0) {\n                                    // parallel lines\n                                    var t0 = fnOnFractions(Math.min, -Math.sign(x1) * xRange - x0, x1, -Math.sign(y1) * yRange - y0, y1);\n                                    var t1 = fnOnFractions(Math.max, +Math.sign(x1) * xRange - x0, x1, +Math.sign(y1) * yRange - y0, y1);\n                                    ctx.beginPath();\n                                    ctx.moveTo(+(x0 + t0 * x1), -(y0 + t0 * y1));\n                                    ctx.lineTo(+(x0 + t1 * x1), -(y0 + t1 * y1));\n                                    ctx.stroke();\n                                } else {\n                                    // star or defective node\n                                    ctx.beginPath();\n                                    ctx.moveTo(0, 0);\n                                    var T = 0;\n                                    var dT = 1 / Math.max(Math.abs(x0), Math.abs(y0));\n                                    for (var i = 0; i < iterationLimit; i++) {\n                                        T += dT;\n                                        var t = Math.log(T) / lambda;\n                                        ctx.lineTo(+T * (x0 + t * x1), -T * (y0 + t * y1));\n                                        if (T * (x0 + t * x1) * Math.sign(x0) > xRange || T * (y0 + t * y1) * Math.sign(y0) > yRange)\n                                            break;\n                                    }\n                                    ctx.stroke();\n                                }\n                            };\n                            ctx.save();\n                            ctx.lineWidth = 2;\n                            ctx.strokeStyle = ctx.fillStyle = color;\n                            if (matrix.im1 == 0 && matrix.re1 != matrix.re2) {\n                                drawSaddleOrNodeSolution();\n                            } else if (matrix.im1 == 0 && matrix.re1 == matrix.re2) {\n                                drawDefectiveSolution();\n                            } else if (matrix.im1 != 0) {\n                                drawSpiralSolution();\n                            }\n                            ctx.restore();\n                        };\n                        ctx.save();\n                        ctx.fillStyle = '#FFF';\n                        ctx.fillRect(0, 0, this.width, this.height);\n                        ctx.restore();\n                        ctx.save();\n                        ctx.translate(xRange, yRange);\n                        this.drawAxes(xLabel, yLabel);\n                        drawDirectionField();\n                        if (matrix.im1 == 0) {\n                            drawEigenline(matrix.re1, matrix.re2);\n                            if (matrix.re1 != matrix.re2) {\n                                drawEigenline(matrix.re2, matrix.re1);\n                            }\n                        }\n                        drawSolution(+xRange / 2, 0, '#08F');\n                        drawSolution(-xRange / 2, 0, '#28F');\n                        drawSolution(0, +yRange / 2, '#0AF');\n                        drawSolution(0, -yRange / 2, '#08D');\n                        ctx.restore();\n                    };\n                    return PhaseCanvas;\n                }(Canvas);\n                module.exports = PhaseCanvas;\n            },\n            { '8': 8 }\n        ],\n        12: [\n            function (require, module, exports) {\n                'use strict';\n                var Canvas = require(8);\n                var TrdetCanvas = function (_Canvas) {\n                    babelHelpers.inherits(TrdetCanvas, _Canvas);\n                    function TrdetCanvas() {\n                        babelHelpers.classCallCheck(this, TrdetCanvas);\n                        return babelHelpers.possibleConstructorReturn(this, _Canvas.apply(this, arguments));\n                    }\n                    TrdetCanvas.prototype.redraw = function redraw(matrix) {\n                        var crosshairSize = 10;\n                        var pointerSize = 5;\n                        var pointerMargin = 3;\n                        var trRange = matrix.getRange('tr');\n                        var detRange = matrix.getRange('det');\n                        var ctx = this.ctx;\n                        var xRange = this.width / 2;\n                        var yRange = this.height / 2;\n                        var D = matrix.det;\n                        var T = matrix.tr;\n                        var drawRegionAreas = function () {\n                            ctx.save();\n                            ctx.fillStyle = '#FCC';\n                            if (D < 0) {\n                                ctx.fillRect(-xRange, 0, xRange * 2, yRange);\n                            } else if (D > 0 && 4 * D < T * T || 4 * D > T * T && T != 0) {\n                                if (T < 0) {\n                                    ctx.scale(-1, 1);\n                                }\n                                ctx.beginPath();\n                                if (4 * D > T * T) {\n                                    ctx.moveTo(xRange, -yRange);\n                                    ctx.lineTo(0, -yRange);\n                                } else {\n                                    ctx.moveTo(xRange, 0);\n                                }\n                                for (var x = 0; x <= xRange; x++) {\n                                    var t = x * trRange / xRange;\n                                    var d = t * t / 4;\n                                    var y = -d * yRange / detRange;\n                                    ctx.lineTo(x, y);\n                                }\n                                ctx.closePath();\n                                ctx.fill();\n                            }\n                            ctx.restore();\n                        };\n                        var drawRegionLines = function () {\n                            ctx.save();\n                            var drawRegionLinesOnce = function (all) {\n                                var drawParabola = function () {\n                                    for (var x = 0; x <= +xRange; x++) {\n                                        var t = x * trRange / xRange;\n                                        var d = t * t / 4;\n                                        var y = -d * yRange / detRange;\n                                        ctx[x ? 'lineTo' : 'moveTo'](x, y);\n                                    }\n                                };\n                                ctx.beginPath();\n                                if (all || D == 0 && T < 0) {\n                                    ctx.moveTo(-xRange, 0);\n                                    ctx.lineTo(0, 0);\n                                }\n                                if (all || D == 0 && T > 0) {\n                                    ctx.moveTo(+xRange, 0);\n                                    ctx.lineTo(0, 0);\n                                }\n                                if (all || D > 0 && T == 0) {\n                                    ctx.moveTo(0, -yRange);\n                                    ctx.lineTo(0, 0);\n                                }\n                                if (all || 4 * D == T * T && T < 0) {\n                                    ctx.save();\n                                    ctx.scale(-1, 1);\n                                    drawParabola();\n                                    ctx.restore();\n                                }\n                                if (all || 4 * D == T * T && T > 0) {\n                                    drawParabola();\n                                }\n                                if (all || D == 0 && T == 0) {\n                                    ctx.moveTo(-2, -2);\n                                    ctx.lineTo(-2, +2);\n                                    ctx.lineTo(+2, +2);\n                                    ctx.lineTo(+2, -2);\n                                    ctx.closePath();\n                                }\n                                ctx.stroke();\n                            };\n                            ctx.lineCap = 'square';\n                            ctx.lineWidth = 2;\n                            drawRegionLinesOnce(true);\n                            ctx.lineWidth = 4;\n                            ctx.strokeStyle = '#F88';\n                            drawRegionLinesOnce();\n                            ctx.lineWidth = 2;\n                            ctx.strokeStyle = '#400';\n                            drawRegionLinesOnce();\n                            ctx.restore();\n                        };\n                        var drawPosition = function () {\n                            ctx.save();\n                            ctx.strokeStyle = ctx.fillStyle = '#F00';\n                            var x = matrix.tr / trRange * xRange;\n                            var y = -matrix.det / detRange * yRange;\n                            if (x < 0) {\n                                ctx.scale(-1, 1);\n                                x = -x;\n                            }\n                            if (y < 0) {\n                                ctx.scale(1, -1);\n                                y = -y;\n                            }\n                            if (x > xRange) {\n                                ctx.transform(0, 1, 1, 0, 0, 0);\n                                var t = x;\n                                x = y;\n                                y = t;\n                            }\n                            if (x > xRange && y > yRange - pointerMargin || x > xRange - pointerMargin && y > yRange) {\n                                ctx.beginPath();\n                                ctx.moveTo(xRange - pointerMargin, yRange - pointerMargin);\n                                ctx.lineTo(xRange - pointerMargin, yRange - pointerMargin - pointerSize * Math.SQRT2);\n                                ctx.lineTo(xRange - pointerMargin - pointerSize * Math.SQRT2, yRange - pointerMargin);\n                                ctx.closePath();\n                                ctx.fill();\n                            } else if (y > xRange) {\n                                ctx.beginPath();\n                                ctx.moveTo(x, yRange - pointerMargin);\n                                ctx.lineTo(x + pointerSize, yRange - pointerMargin - pointerSize);\n                                ctx.lineTo(x - pointerSize, yRange - pointerMargin - pointerSize);\n                                ctx.closePath();\n                                ctx.fill();\n                            } else {\n                                var s = crosshairSize;\n                                ctx.beginPath();\n                                ctx.moveTo(x - s, y);\n                                ctx.lineTo(x + s, y);\n                                ctx.moveTo(x, y - s);\n                                ctx.lineTo(x, y + s);\n                                ctx.stroke();\n                            }\n                            ctx.restore();\n                        };\n                        ctx.save();\n                        ctx.fillStyle = '#FFF';\n                        ctx.fillRect(0, 0, this.width, this.height);\n                        ctx.translate(xRange, yRange);\n                        drawRegionAreas();\n                        this.drawAxes('tr', 'det');\n                        drawRegionLines();\n                        drawPosition();\n                        ctx.restore();\n                    };\n                    return TrdetCanvas;\n                }(Canvas);\n                module.exports = TrdetCanvas;\n            },\n            { '8': 8 }\n        ],\n        13: [\n            function (require, module, exports) {\n                'use strict';\n                // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n                Math.sign = Math.sign || function (x) {\n                    x = +x;\n                    // convert to a number\n                    if (x === 0 || isNaN(x)) {\n                        return x;\n                    }\n                    return x > 0 ? 1 : -1;\n                };\n                var detailsPolyfill = require(1);\n                var UnorderedClassSubgraph = require(21);\n                var OrderedClassSubgraph = require(15);\n                var TheadLayout = require(16);\n                var TrLayout = require(20);\n                var Notation = require(14);\n                var dataGenerator = require(2);\n                var i18n = function (id) {\n                    var strings = {\n                        'trait.entity': 'Associated entities',\n                        'trait.associatedHomogeneousEquation': 'Associated homogeneous equation',\n                        'trait.characteristicEquation': '<a href=\\'https://en.wikipedia.org/wiki/Characteristic_equation_(calculus)\\'>Characteristic equation</a>',\n                        'trait.property': 'Properties',\n                        'trait.isoclineProperty': 'Property of <a href=\\'https://en.wikipedia.org/wiki/Isocline\\'>isoclines</a>',\n                        'trait.solutionRelation': 'Solution relation properties',\n                        'trait.shiftSolutionRelation': 'Time/value shifts of solutions',\n                        'trait.linearitySolutionRelation': 'Linear/affine properties of solutions',\n                        'trait.solutionSpaceBasis': 'Basis of the solution space',\n                        'trait.homogeneitySolutionRelation': 'Homogeneity of solutions',\n                        'trait.additivitySolutionRelation': 'Additivity of solutions',\n                        'trait.twoLinearCombinationSolutionRelation': '<a href=\\'https://en.wikipedia.org/wiki/Linear_combination\\'>Linear combination</a> property of solutions',\n                        'trait.nLinearCombinationSolutionRelation': '<a href=\\'https://en.wikipedia.org/wiki/Linear_combination\\'>Linear combination</a> property of solutions',\n                        'trait.twoAffineCombinationSolutionRelation': '<a href=\\'https://en.wikipedia.org/wiki/Affine_combination\\'>Affine combination</a> property of solutions',\n                        'trait.nAffineCombinationSolutionRelation': '<a href=\\'https://en.wikipedia.org/wiki/Affine_combination\\'>Affine combination</a> property of solutions',\n                        'trait.associatedSolutionRelation': 'Associated homogeneous equation solution',\n                        'trait.transform': 'Transforms to different types',\n                        'trait.orderReduction': 'Order reduction',\n                        'trait.solutionMethod': 'Solutions',\n                        'trait.generalSolutionMethod': 'General solution',\n                        'trait.phaseSolutionMethod': '<a href=\\'https://en.wikipedia.org/wiki/Phase_space\\'>Phase space</a> trajectory',\n                        'trait.equilibriumSolutionMethod': '<a href=\\'https://en.wikipedia.org/wiki/Equilibrium_point\\'>Equilibrium solutions</a>',\n                        'trait.testSolutionMethod': 'Solution testing',\n                        'trait.plot': 'Plot'\n                    };\n                    return strings[id];\n                };\n                $(function () {\n                    $('.crnx-ode-properties').each(function () {\n                        var $container = $(this).empty();\n                        var selectedNodes = {};\n                        // visible nodes // TODO rename to visibleNodes\n                        // options\n                        var traitAlignmentLevel = 1;\n                        var maxTraitAlignmentLevel = 4;\n                        var dependentVariables = 'yvz';\n                        var availableDependentVariables = [\n                            'xyw',\n                            'yvz'\n                        ];\n                        var viewDependentVariables = {\n                            xyw: '\\\\( x \\\\), \\\\( y \\\\), \\\\( w \\\\)',\n                            yvz: '\\\\( y \\\\), \\\\( v \\\\), \\\\( z \\\\)'\n                        };\n                        var notation = void 0, data = void 0;\n                        var regenerateData = function () {\n                            notation = new Notation(dependentVariables);\n                            data = dataGenerator(notation);\n                        };\n                        regenerateData();\n                        for (var id in data.classes) {\n                            if (data.classes[id].importance <= 1) {\n                                selectedNodes[id] = true;\n                            }\n                        }\n                        var getHtmlName = function (id) {\n                            return data.classes[id].htmlName !== undefined ? data.classes[id].htmlName : data.classes[id].name;\n                        };\n                        var unorderedClassSubgraph = void 0, theadLayout = void 0, orderedClassSubgraph = void 0, trLayout = void 0;\n                        var recomputeLayouts = function () {\n                            unorderedClassSubgraph = new UnorderedClassSubgraph(data.classes, selectedNodes);\n                            theadLayout = new TheadLayout(unorderedClassSubgraph);\n                            orderedClassSubgraph = new OrderedClassSubgraph(unorderedClassSubgraph, theadLayout.columns);\n                            trLayout = new TrLayout(unorderedClassSubgraph, data.classes, theadLayout.columns);\n                        };\n                        recomputeLayouts();\n                        // TODO put into classSubgraph\n                        var breadthWalk = function (graph, id) {\n                            var result = [];\n                            var visited = {};\n                            var queue = [id];\n                            while (queue.length > 0) {\n                                id = queue.shift();\n                                if (visited[id]) {\n                                    continue;\n                                }\n                                visited[id] = true;\n                                if (!selectedNodes[id]) {\n                                    result.push(id);\n                                }\n                                queue.push.apply(queue, Object.keys(graph[id]).sort());\n                            }\n                            return result;\n                        };\n                        var writeButton = function (text, tip) {\n                            var $button = $('<button type=\\'button\\'><span>' + text + '</span></button>');\n                            if (tip !== undefined) {\n                                $button.attr('title', tip);\n                            }\n                            return $button;\n                        };\n                        var writeTraitItem = function (forClassId, fromClassId, traitId) {\n                            var item = data.classes[fromClassId].traits[traitId];\n                            if (!item.content)\n                                return;\n                            var getTitle = function () {\n                                if (item.title !== undefined) {\n                                    return item.title;\n                                } else if (item.compare) {\n                                    return 'Property comparable to <em>' + i18n('trait.' + traitId) + '</em>';\n                                } else {\n                                    return i18n('trait.' + traitId);\n                                }\n                            };\n                            var $item = $('<details class=\\'trait\\'>').append($('<summary>').append(getTitle())).each(detailsPolyfill);\n                            var rec = function (line) {\n                                if (typeof line == 'string') {\n                                    return $('<div class=\\'line\\'>').append(line);\n                                } else if (typeof line == 'function') {\n                                    return line();\n                                } else if (line.type == 'derivation' || line.type == 'proof' || line.type == 'case') {\n                                    return $('<details>').append($('<summary>').append(line.title !== undefined ? line.title : line.type), line.content.map(rec)).each(detailsPolyfill);\n                                } else if (line.type == 'switch') {\n                                    return $('<div class=\\'' + line.type + '\\'>').append($('<div class=\\'condition\\'>').append(line.title !== undefined ? line.title : line.type, ':'), $('<div class=\\'cases\\'>').append(line.content.map(rec)));\n                                } else {\n                                    return $('<div class=\\'' + line.type + '\\'>').append(line.content.map(rec));\n                                }\n                            };\n                            if (item.form) {\n                                var _fromForms;\n                                var forClass = data.classes[forClassId];\n                                var forForm = forClassId;\n                                if (forClass.hasForm !== undefined) {\n                                    forForm = forClass.hasForm;\n                                }\n                                var fromForms = (_fromForms = {}, _fromForms[fromClassId] = true, _fromForms);\n                                if (item.form !== true) {\n                                    fromForms = item.form;\n                                }\n                                if (!fromForms[forForm]) {\n                                    $item.append(rec({\n                                        type: 'note',\n                                        content: [\n                                            'when equation is written as <em>' + getHtmlName(fromClassId) + '</em>:',\n                                            '\\\\[' + data.classes[fromClassId].equation + '\\\\]'\n                                        ]\n                                    }));\n                                }\n                            }\n                            $item.append(item.content.map(rec));\n                            return $item;\n                        };\n                        var writeTraitCell = function (forClassId, traitCell) {\n                            var $cell = $('<td>');\n                            if (traitCell.length > 0) {\n                                $cell.append(traitCell.map(function (classTraitId) {\n                                    var classId = classTraitId[0];\n                                    var traitId = classTraitId[1];\n                                    return writeTraitItem(forClassId, classId, traitId);\n                                }));\n                            }\n                            return $cell;\n                        };\n                        var writeTraitRow = function (traitSubtree) {\n                            var traitCells = trLayout.getSubtreeLayout(traitSubtree);\n                            if (!traitCells)\n                                return null;\n                            return $('<tr>').append(traitCells.map(function (traitCell, i) {\n                                return writeTraitCell(theadLayout.columns[i], traitCell);\n                            }));\n                        };\n                        var $tableContainer = void 0, $quickSelect = void 0, $quickSelectButton = void 0;\n                        var updateQuickSelectButton = function () {\n                            var id = $quickSelect.val();\n                            $quickSelectButton.text(selectedNodes[id] ? 'Delete' : 'Add');\n                        };\n                        var deleteNode = function (id) {\n                            delete selectedNodes[id];\n                            $quickSelect.children('[value=\"' + id + '\"]').removeClass('added');\n                            updateQuickSelectButton();\n                            recomputeLayouts();\n                            writeTable();\n                        };\n                        var addNode = function (id) {\n                            selectedNodes[id] = true;\n                            $quickSelect.children('[value=\"' + id + '\"]').addClass('added');\n                            updateQuickSelectButton();\n                            recomputeLayouts();\n                            writeTable();\n                        };\n                        var writeQuickSelectControls = function () {\n                            var $div = $('<div>').append($quickSelect = $('<select>').append(Object.keys(data.classes).sort().map(function (id) {\n                                var $option = $('<option>').val(id).text(data.classes[id].name);\n                                if (selectedNodes[id]) {\n                                    $option.addClass('added');\n                                }\n                                return $option;\n                            })).change(function () {\n                                updateQuickSelectButton();\n                            }), ' ', $quickSelectButton = $('<button>').click(function () {\n                                var id = $quickSelect.val();\n                                if (selectedNodes[id]) {\n                                    deleteNode(id);\n                                } else {\n                                    addNode(id);\n                                }\n                            }), ' ', $('<button>Clear all</button>').click(function () {\n                                for (var _id in selectedNodes) {\n                                    delete selectedNodes[_id];\n                                }\n                                $quickSelect.children().removeClass('added');\n                                updateQuickSelectButton();\n                                recomputeLayouts();\n                                writeTable();\n                            }));\n                            updateQuickSelectButton();\n                            return $div;\n                        };\n                        var writeTable = function () {\n                            // TODO rename (doesn't return object)\n                            var visibleAncestors = {};\n                            // including self\n                            var computeVisibleAncestors = function (id, aid) {\n                                visibleAncestors[id][aid] = true;\n                                for (var naid in unorderedClassSubgraph.visibleParents[aid]) {\n                                    computeVisibleAncestors(id, naid);\n                                }\n                            };\n                            for (var _id2 in selectedNodes) {\n                                visibleAncestors[_id2] = {};\n                                computeVisibleAncestors(_id2, _id2);\n                            }\n                            var $equations = {};\n                            var $attachedMenu = void 0, $attachedToButton = void 0, attachedDirection = void 0, attachTimeoutId = void 0;\n                            var setCellClasses = function ($cell, cell) {\n                                ;\n                                [\n                                    'b',\n                                    't',\n                                    'bt',\n                                    'rl',\n                                    'rt',\n                                    'bl'\n                                ].forEach(function (dir) {\n                                    if (cell[dir]) {\n                                        $cell.addClass(dir);\n                                    }\n                                });\n                            };\n                            var writeTheadButton = function ($cell, text, tip, dir, nodes) {\n                                var keyCodeEnter = 13;\n                                var keyCodeSpace = 32;\n                                var keyCodeUp = 38;\n                                var keyCodeDown = 40;\n                                var $button = writeButton(text, tip).addClass(dir).click(function () {\n                                    var removeAttachedMenu = function () {\n                                        $attachedToButton.removeClass('attached-t attached-b');\n                                        $attachedMenu.remove();\n                                        clearTimeout(attachTimeoutId);\n                                        $attachedToButton = undefined;\n                                        $attachedMenu = undefined;\n                                        attachedDirection = undefined;\n                                        attachTimeoutId = undefined;\n                                    };\n                                    var startAttachingMenu = function () {\n                                        $attachedToButton = $button;\n                                        $attachedMenu = $('<ul>').append(nodes.map(function (id) {\n                                            return $('<li tabindex=\\'0\\'>' + data.classes[id].name + '</li>').click(function () {\n                                                addNode(id);\n                                            }).keydown(function (ev) {\n                                                if (!attachedDirection)\n                                                    return;\n                                                // not yet decided on attach direction (this can't happen)\n                                                if (ev.keyCode == keyCodeUp) {\n                                                    var $toFocus = $(this).prev();\n                                                    if ($toFocus.length) {\n                                                        $toFocus.focus();\n                                                        return false;\n                                                    } else if (attachedDirection == 'b') {\n                                                        $button.focus();\n                                                        return false;\n                                                    }\n                                                } else if (ev.keyCode == keyCodeDown) {\n                                                    var _$toFocus = $(this).next();\n                                                    if (_$toFocus.length) {\n                                                        _$toFocus.focus();\n                                                        return false;\n                                                    } else if (attachedDirection == 't') {\n                                                        $button.focus();\n                                                        return false;\n                                                    }\n                                                } else if (ev.keyCode == keyCodeEnter || ev.keyCode == keyCodeSpace) {\n                                                    addNode(id);\n                                                    return false;\n                                                }\n                                            });\n                                        }));\n                                        $cell.append($attachedMenu);\n                                        attachTimeoutId = setTimeout(function () {\n                                            // can calculate height only after it's displayed\n                                            var mh = $attachedMenu.outerHeight();\n                                            var mo = $attachedMenu.offset();\n                                            var bh = $button.outerHeight();\n                                            var bo = $button.offset();\n                                            var t = bo.top - mh + 1;\n                                            if (dir != 't' || t < 0) {\n                                                // want below or doesn't fit to screen above the button\n                                                t = bo.top + bh - 1;\n                                                attachedDirection = 'b';\n                                            } else {\n                                                $attachedMenu.insertBefore($button);\n                                                attachedDirection = 't';\n                                            }\n                                            $attachedMenu.offset({\n                                                top: t,\n                                                left: mo.left\n                                            });\n                                            $attachedMenu.addClass('attached');\n                                            $button.addClass('attached-' + attachedDirection);\n                                        }, 0);\n                                    };\n                                    if (!$button.is($attachedToButton)) {\n                                        if ($attachedToButton) {\n                                            removeAttachedMenu();    // close menu opened elsewhere\n                                        }\n                                        startAttachingMenu();\n                                    } else {\n                                        removeAttachedMenu();    // close menu here\n                                    }\n                                }).keydown(function (ev) {\n                                    if ($button.is($attachedToButton)) {\n                                        if (ev.keyCode == keyCodeUp && attachedDirection == 't') {\n                                            $attachedMenu.children().last().focus();\n                                            return false;\n                                        } else if (ev.keyCode == keyCodeDown && attachedDirection == 'b') {\n                                            $attachedMenu.children().first().focus();\n                                            return false;\n                                        }\n                                    }\n                                });\n                                return $button;\n                            };\n                            var writeTheadCell = function (cell) {\n                                var $cell = $('<th>');\n                                setCellClasses($cell, cell);\n                                if (cell.node !== undefined) {\n                                    $cell.append(getHtmlName(cell.node));\n                                    var ancestors = breadthWalk(unorderedClassSubgraph.allParents, cell.node).reverse();\n                                    if (ancestors.length > 0) {\n                                        $cell.append(' ', writeTheadButton($cell, 'Add ancestor', 'Add one of supertypes of this equation type', 't', ancestors));\n                                    }\n                                    var descendants = breadthWalk(unorderedClassSubgraph.allChildren, cell.node);\n                                    if (descendants.length > 0) {\n                                        $cell.append(' ', writeTheadButton($cell, 'Add descendant', 'Add one of subtypes of this equation type', 'b', descendants));\n                                    }\n                                }\n                                return $cell;\n                            };\n                            var writeThead = function () {\n                                var $thead = $('<thead>');\n                                for (var i = 0; i < theadLayout.nodeLayers.length; i++) {\n                                    $thead.append($('<tr class=\\'nodes\\'>').append(theadLayout.nodeLayers[i].map(writeTheadCell)));\n                                    if (i < theadLayout.arcLayers.length) {\n                                        $thead.append(theadLayout.arcLayers[i].map(function (row) {\n                                            return $('<tr class=\\'arcs\\'>').append(row.map(function (cell) {\n                                                var $cell = $('<th>');\n                                                setCellClasses($cell, cell);\n                                                return $cell;\n                                            }));\n                                        }));\n                                    }\n                                }\n                                return $thead;\n                            };\n                            var writeTfoot = function () {\n                                return $('<tfoot>').append($('<tr>').append(theadLayout.columns.map(function (id) {\n                                    return $('<td>').append(writeButton('Delete', 'Delete this equation type').click(function () {\n                                        deleteNode(id);\n                                    }));\n                                })));\n                            };\n                            var writeTraitRows = function () {\n                                var output = [];\n                                var rec = function (traitSubtree, depth) {\n                                    var traitId = traitSubtree[0];\n                                    var traitChildren = traitSubtree[1];\n                                    if (depth >= traitAlignmentLevel || !traitChildren) {\n                                        output.push(writeTraitRow(traitSubtree));\n                                    } else {\n                                        traitChildren.forEach(function (traitChild) {\n                                            return rec(traitChild, depth + 1);\n                                        });\n                                    }\n                                };\n                                rec([\n                                    'root',\n                                    data.traits\n                                ], 0);\n                                return output;\n                            };\n                            var writeTraitAlignmentControls = function () {\n                                var $container = $('<form>Trait alignment level:</form>');\n                                var _loop = function (i) {\n                                    $container.append(' ', $('<label>').append($('<input type=\\'radio\\' name=\\'trait-alignment-level\\'>').prop('checked', i == traitAlignmentLevel).click(function () {\n                                        traitAlignmentLevel = i;\n                                        writeTable();\n                                    }), ' ' + i));\n                                };\n                                for (var i = 0; i <= maxTraitAlignmentLevel; i++) {\n                                    _loop(i);\n                                }\n                                return $container;\n                            };\n                            var writeDependentVariablesControls = function () {\n                                // TODO text inputs with\n                                //\tsuggested names: u, v, w, x, y, z\n                                //\texamples: x,y,w; y,v,z\n                                var $container = $('<form>Dependent variables notation (main variable, second variable in 2d system, substitution variable):</form>');\n                                availableDependentVariables.forEach(function (dvs) {\n                                    $container.append(' ', $('<label>').append($('<input type=\\'radio\\' name=\\'dependent-variables\\'>').prop('checked', dvs == dependentVariables).click(function () {\n                                        dependentVariables = dvs;\n                                        regenerateData();\n                                        writeTable();\n                                    }), ' ' + viewDependentVariables[dvs]));\n                                });\n                                return $container;\n                            };\n                            var writeEquation = function (id) {\n                                $equations[id] = $('<div class=\\'equation\\'>').append('\\\\[' + data.classes[id].equation + '\\\\]');\n                                if (data.classes[id].vectorEquation) {\n                                    $equations[id].append('<div class=\\'alt-separator\\'>or in vector format</div>', '\\\\[' + data.classes[id].vectorEquation + '\\\\]');\n                                }\n                                $equations[id].hover(function () {\n                                    for (var aid in visibleAncestors[id]) {\n                                        $equations[aid].addClass('highlight');\n                                    }\n                                }, function () {\n                                    for (var aid in visibleAncestors[id]) {\n                                        $equations[aid].removeClass('highlight');\n                                    }\n                                });\n                                return $equations[id];\n                            };\n                            var writeGeneralNotes = function () {\n                                var nt = notation;\n                                return $('<ul>').append('<li>how to read the diagram: <ul>' + '<li>equation type names are written among arrows that show the relationship between types</li>' + '<li>properties of an equation type are listed in the table column below its name</li>' + '<li>every property of the equation type on the tip of the arrow <span class=\\'arrow\\'></span> is also true for the equation type on the other end of the arrow (like <a href=\\'https://en.wikipedia.org/wiki/Class_diagram\\'>class diagram</a>)</li>' + '</ul></li>', '<li>all functions have to be continuous on the interval of interest</li>', '<li>\\\\( ' + nt.x + ' \\\\), \\\\( ' + nt.y + ' \\\\) or \\\\( ' + nt.w + ' \\\\) possibly with a subscript is a function of \\\\( t \\\\); other functions are written with an argument like this: \\\\( f(t) \\\\)</li>', '<li>\\\\( C \\\\), \\\\( K \\\\) and other uppercase letters are arbitrary constants</li>', '<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t + C \\\\) is a family of antiderivatives of \\\\( f(t) \\\\) with parameter \\\\( C \\\\)</li>', '<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t \\\\) is any single antiderivative of \\\\( f(t) \\\\)');\n                            };\n                            $tableContainer.empty();\n                            if (Object.keys(selectedNodes).length > 0)\n                                $tableContainer.append($('<table class=\\'classes\\'>').append(writeThead(), writeTfoot(), $('<tbody>').append($('<tr>').append(// equations\n                                theadLayout.columns.map(function (id) {\n                                    var $td = $('<td>').append(writeEquation(id));\n                                    var notes = [];\n                                    if (data.classes[id].equationNotes !== undefined) {\n                                        notes.push.apply(notes, data.classes[id].equationNotes.map(function (noteText) {\n                                            return $('<div class=\\'note\\'>').append(noteText);\n                                        }));\n                                    }\n                                    var columnParents = orderedClassSubgraph.visibleParents[id];\n                                    if (columnParents.length > 0) {\n                                        notes.push($('<div class=\\'note\\'>').append('can also be written as and has all properties of:', $('<ul>').append(columnParents.map(function (pid) {\n                                            var $li = $('<li>').append($('<em>' + getHtmlName(pid) + '</em>').hover(function () {\n                                                $equations[pid].addClass('highlight');\n                                                $li.addClass('highlight');\n                                            }, function () {\n                                                $li.removeClass('highlight');\n                                                $equations[pid].removeClass('highlight');\n                                            }));\n                                            return $li;\n                                        }))));\n                                    }\n                                    if (notes.length > 0) {\n                                        $td.append($('<ul>').append(notes.map(function (note) {\n                                            return $('<li>').append(note);\n                                        })));\n                                    }\n                                    return $td;\n                                })), writeTraitRows())));\n                            $tableContainer.append(writeTraitAlignmentControls(), writeDependentVariablesControls(), '<p>General notes:</p>', writeGeneralNotes());\n                            MathJax.Hub.Queue([\n                                'Typeset',\n                                MathJax.Hub\n                            ]);\n                        };\n                        $container.append(writeQuickSelectControls(), $tableContainer = $('<div>'));\n                        writeTable();\n                    });\n                });\n            },\n            {\n                '1': 1,\n                '14': 14,\n                '15': 15,\n                '16': 16,\n                '2': 2,\n                '20': 20,\n                '21': 21\n            }\n        ],\n        14: [\n            function (require, module, exports) {\n                'use strict';\n                var Notation = function () {\n                    function Notation(dependentVariables) {\n                        babelHelpers.classCallCheck(this, Notation);\n                        this.dependentVariables = dependentVariables;    // main variable, second variable in 2d system, substitution variable\n                    }\n                    // variable names\n                    // tex shortcuts\n                    Notation.prototype.dd = function dd(a, b, n) {\n                        if (a === undefined)\n                            a = '';\n                        if (b === undefined)\n                            b = 't';\n                        if (n === undefined)\n                            n = 1;\n                        if (n == 1) {\n                            return '\\\\frac{\\\\mathrm{d}' + a + '}{\\\\mathrm{d}' + b + '}';\n                        } else {\n                            return '\\\\frac{\\\\mathrm{d}^{' + n + '}' + a + '}{\\\\mathrm{d}' + b + '^{' + n + '}}';\n                        }\n                    };\n                    Notation.prototype.sint = function sint(f, t) {\n                        // short integral = with no spacing before dt\n                        if (t === undefined)\n                            t = 't';\n                        return '\\\\int\\\\!' + f + '\\\\mathrm{d}' + t;\n                    };\n                    Notation.prototype.int = function int(f, t) {\n                        return this.sint(f + '\\\\,', t);\n                    };\n                    Notation.prototype.vec2 = function vec2(a, b) {\n                        return '\\\\begin{bmatrix} ' + a + ' \\\\\\\\ ' + b + ' \\\\end{bmatrix}';\n                    };\n                    Notation.prototype.svec2 = function svec2(a, b) {\n                        return '\\\\left[ \\\\begin{smallmatrix} ' + a + ' \\\\\\\\ ' + b + ' \\\\end{smallmatrix} \\\\right]';\n                    };\n                    Notation.prototype.mat2 = function mat2(a, b, c, d) {\n                        return '\\\\begin{bmatrix} ' + a + ' & ' + b + ' \\\\\\\\ ' + c + ' & ' + d + ' \\\\end{bmatrix}';\n                    };\n                    babelHelpers.createClass(Notation, [\n                        {\n                            key: 'x',\n                            get: function () {\n                                // main dependent variable\n                                return this.dependentVariables.charAt(0);\n                            }\n                        },\n                        {\n                            key: 'X',\n                            get: function () {\n                                // vector of dependent variables\n                                return '\\\\mathbf{' + this.dependentVariables.charAt(0).toUpperCase() + '}';\n                            }\n                        },\n                        {\n                            key: 'y',\n                            get: function () {\n                                // second dependent variable for systems of 2 equations\n                                return this.dependentVariables.charAt(1);\n                            }\n                        },\n                        {\n                            key: 'w',\n                            get: function () {\n                                // substituted variable\n                                return this.dependentVariables.charAt(2);\n                            }\n                        },\n                        {\n                            key: 'ddt',\n                            get: function () {\n                                return this.dd();\n                            }\n                        },\n                        {\n                            key: 'dxdt',\n                            get: function () {\n                                return this.dd(this.x);\n                            }\n                        }\n                    ]);\n                    return Notation;\n                }();\n                module.exports = Notation;\n            },\n            {}\n        ],\n        15: [\n            function (require, module, exports) {\n                'use strict';\n                // TODO maybe don't need this class - use iterators on unordered subgraph instead?\n                var OrderedClassGraph = function OrderedClassGraph(unorderedClassGraph, orderedClasses) {\n                    babelHelpers.classCallCheck(this, OrderedClassGraph);\n                    var ranks = {};\n                    orderedClasses.forEach(function (id, i) {\n                        ranks[id] = i;\n                    });\n                    this.visibleParents = {};\n                    for (var id in unorderedClassGraph.visibleParents) {\n                        this.visibleParents[id] = Object.keys(unorderedClassGraph.visibleParents[id]).sort(function (id1, id2) {\n                            return ranks[id1] - ranks[id2];\n                        });\n                    }\n                };\n                module.exports = OrderedClassGraph;\n            },\n            {}\n        ],\n        16: [\n            function (require, module, exports) {\n                'use strict';\n                var makeNodeLabelLayers = require(19);\n                var makeArcLocationLayers = require(17);\n                var makeLayoutLayers = require(18);\n                var TheadLayout = function TheadLayout(unorderedClassGraph) {\n                    var _ref;\n                    babelHelpers.classCallCheck(this, TheadLayout);\n                    var orderedVisibleDepthNodes = makeNodeLabelLayers(unorderedClassGraph.visibleParents, unorderedClassGraph.visibleDepthNodes);\n                    var arcLocationLayers = makeArcLocationLayers(orderedVisibleDepthNodes, unorderedClassGraph.visibleParents);\n                    var t = makeLayoutLayers(orderedVisibleDepthNodes, arcLocationLayers);\n                    this.columns = (_ref = []).concat.apply(_ref, orderedVisibleDepthNodes);\n                    this.nodeLayers = t[0];\n                    this.arcLayers = t[1];\n                };\n                module.exports = TheadLayout;\n            },\n            {\n                '17': 17,\n                '18': 18,\n                '19': 19\n            }\n        ],\n        17: [\n            function (require, module, exports) {\n                'use strict';\n                module.exports = function (depthList, parents) {\n                    // TODO would prefer ordered parents list\n                    var merge = function (a, b) {\n                        // can also use lodash union and sort\n                        var c = [];\n                        var i = 0, j = 0;\n                        while (i < a.length || j < b.length) {\n                            if (j >= b.length) {\n                                c.push(a[i++]);\n                            } else if (i >= a.length) {\n                                c.push(b[j++]);\n                            } else if (a[i] < b[j]) {\n                                c.push(a[i++]);\n                            } else if (a[i] > b[j]) {\n                                c.push(b[j++]);\n                            } else {\n                                c.push(a[i++]);\n                                j++;\n                            }\n                        }\n                        return c;\n                    };\n                    var arcRows = [];\n                    var xs = {};\n                    var x = 0;\n                    for (var i = 0; i < depthList.length; i++) {\n                        depthList[i].forEach(function (node) {\n                            xs[node] = x++;\n                        });\n                        if (i > 0) {\n                            var arcs = [];\n                            for (var j = depthList[i].length - 1; j >= 0; j--) {\n                                var node = depthList[i][j];\n                                var parentXs = Object.keys(parents[node]).map(function (parentNode) {\n                                    return xs[parentNode];\n                                }).sort(function (a, b) {\n                                    return a - b;\n                                });\n                                arcs.push([\n                                    parentXs,\n                                    [xs[node]]\n                                ]);\n                            }\n                            for (var _j = 1; _j < arcs.length; _j++) {\n                                if (String(arcs[_j - 1][0]) === String(arcs[_j][0])) {\n                                    // sloppy but should be ok for numbers\n                                    arcs[_j - 1][1] = merge(arcs[_j - 1][1], arcs[_j][1]);\n                                    // merge children - parents already merged\n                                    arcs.splice(_j, 1);\n                                    _j -= 1;\n                                }\n                            }\n                            arcRows.push(arcs);\n                        }\n                    }\n                    return arcRows;\n                };\n            },\n            {}\n        ],\n        18: [\n            function (require, module, exports) {\n                'use strict';\n                // TODO fake lodash\n                var sum = function (arr) {\n                    return arr.reduce(function (a, b) {\n                        return a + b;\n                    }, 0);\n                };\n                //const times=(n,fn)=>Array(n).map((v,i)=>fn(i))\n                var times = function (n, fn) {\n                    var arr = Array(n);\n                    for (var i = 0; i < n; i++) {\n                        arr[i] = fn(i);\n                    }\n                    return arr;\n                };\n                var head = function (arr) {\n                    return arr[0];\n                };\n                var last = function (arr) {\n                    return arr[arr.length - 1];\n                };\n                module.exports = function (nodeLabelLayers, arcLocationLayers) {\n                    var layoutWidth = sum(nodeLabelLayers.map(function (x) {\n                        return x.length;\n                    }));\n                    var makeBlankRow = function () {\n                        return times(layoutWidth, function () {\n                            return {};\n                        });\n                    };\n                    var nodeLayoutLayers = [], arcLayoutLayers = [];\n                    var drawArcUp = function (i, j, k) {\n                        for (; i >= 0; i--) {\n                            for (j -= 1; j >= 0; j--) {\n                                arcLayoutLayers[i][j][k].bt = true;\n                            }\n                            if (nodeLayoutLayers[i][k].node !== undefined) {\n                                nodeLayoutLayers[i][k].b = true;\n                                return;\n                            }\n                            nodeLayoutLayers[i][k].bt = true;\n                            if (i <= 0) {\n                                return;\n                            }\n                            j = arcLayoutLayers[i - 1].length;\n                        }\n                    };\n                    var drawArcDown = function (i, j, k) {\n                        for (j += 1; j < arcLayoutLayers[i].length; j++) {\n                            arcLayoutLayers[i][j][k].bt = true;\n                        }\n                        nodeLayoutLayers[i + 1][k].t = true;\n                    };\n                    // create empty cells\n                    for (var i = 0; i < nodeLabelLayers.length; i++) {\n                        nodeLayoutLayers.push(makeBlankRow());\n                        if (i >= arcLocationLayers.length)\n                            continue;\n                        arcLayoutLayers.push(arcLocationLayers[i].map(makeBlankRow));\n                    }\n                    // fill cells\n                    var x = 0;\n                    var _loop = function (_i) {\n                        nodeLabelLayers[_i].forEach(function (node) {\n                            nodeLayoutLayers[_i][x++].node = node;\n                        });\n                        if (_i >= arcLocationLayers.length)\n                            return 'continue';\n                        for (var j = 0; j < arcLocationLayers[_i].length; j++) {\n                            var parentLocations = arcLocationLayers[_i][j][0];\n                            var childLocations = arcLocationLayers[_i][j][1];\n                            var pi = 0, ci = 0;\n                            for (var k = 0; k < layoutWidth; k++) {\n                                if (k > head(parentLocations) && k < last(childLocations)) {\n                                    arcLayoutLayers[_i][j][k].rl = true;\n                                }\n                                if (k == parentLocations[pi]) {\n                                    pi++;\n                                    arcLayoutLayers[_i][j][k].rt = true;\n                                    drawArcUp(_i, j, k);\n                                }\n                                if (k == childLocations[ci]) {\n                                    ci++;\n                                    arcLayoutLayers[_i][j][k].bl = true;\n                                    drawArcDown(_i, j, k);\n                                }\n                            }\n                        }\n                    };\n                    for (var _i = 0; _i < nodeLabelLayers.length; _i++) {\n                        var _ret = _loop(_i);\n                        if (_ret === 'continue')\n                            continue;\n                    }\n                    return [\n                        nodeLayoutLayers,\n                        arcLayoutLayers\n                    ];\n                };\n            },\n            {}\n        ],\n        19: [\n            function (require, module, exports) {\n                'use strict';\n                // dag = {nodeLabel:{parentLabel:true,...},...}\n                // nodes = {nodeLabel:true,...}\n                module.exports = function (visibleParents, visibleDepthNodes) {\n                    // sort nodes at each depth by\n                    //\tlexicographic parent order\n                    //\tlabel\n                    var orderedVisibleDepthNodes = [];\n                    var nextParentOrder = 0;\n                    var parentOrder = {};\n                    var _loop = function (depth) {\n                        orderedVisibleDepthNodes[depth] = Object.keys(visibleDepthNodes[depth]);\n                        var sortedParents = {};\n                        for (var node in visibleDepthNodes[depth]) {\n                            sortedParents[node] = Object.keys(visibleParents[node]).map(function (parentNode) {\n                                return parentOrder[parentNode];\n                            }).sort(function (a, b) {\n                                return a - b;\n                            });\n                        }\n                        orderedVisibleDepthNodes[depth].sort(function (node0, node1) {\n                            var p0 = sortedParents[node0];\n                            var p1 = sortedParents[node1];\n                            for (var i = 0; i < p0.length || i < p1.length; i++) {\n                                var cmpLen = (i < p0.length) - (i < p1.length);\n                                if (cmpLen != 0) {\n                                    return cmpLen;\n                                }\n                                var cmpOrd = p0[i] - p1[i];\n                                if (cmpOrd != 0) {\n                                    return cmpOrd;\n                                }\n                            }\n                            if (node0 < node1) {\n                                return -1;\n                            } else if (node0 > node1) {\n                                return +1;\n                            } else {\n                                return 0;\n                            }\n                        });\n                        orderedVisibleDepthNodes[depth].forEach(function (node) {\n                            parentOrder[node] = nextParentOrder++;\n                        });\n                    };\n                    for (var depth in visibleDepthNodes) {\n                        _loop(depth);\n                    }\n                    return orderedVisibleDepthNodes;\n                };\n            },\n            {}\n        ],\n        20: [\n            function (require, module, exports) {\n                'use strict';\n                var TrLayout = function () {\n                    function TrLayout(classSubgraph, classData, classColumns) {\n                        babelHelpers.classCallCheck(this, TrLayout);\n                        this.classSubgraph = classSubgraph;\n                        this.classData = classData;\n                        this.classColumns = classColumns;\n                    }\n                    // returns list of cells: list of (class id, trait id)\n                    // \tclass id = which class to take property from\n                    // returns null if row is to be skipped\n                    TrLayout.prototype.getSubtreeLayout = function getSubtreeLayout(traitSubtree) {\n                        var _this = this;\n                        var ancestorsHaveIntegratedTrait = function (classId, traitId) {\n                            var visited = {};\n                            var walk = function (classId) {\n                                if (visited[classId])\n                                    return false;\n                                visited[classId] = true;\n                                if (getIntegratedClassesForTrait(classId, traitId).length > 0) {\n                                    return true;\n                                }\n                                for (var vpid in _this.classSubgraph.visibleParents[classId]) {\n                                    if (walk(vpid)) {\n                                        return true;\n                                    }\n                                }\n                                return false;\n                            };\n                            for (var vpid in _this.classSubgraph.visibleParents[classId]) {\n                                if (walk(vpid)) {\n                                    return true;\n                                }\n                            }\n                            return false;\n                        };\n                        var getIntegratedClassesForTrait = function (classId, traitId) {\n                            // TODO memoize?\n                            var integratedClassIds = [];\n                            var visited = {};\n                            var walk = function (id) {\n                                if (visited[id])\n                                    return;\n                                visited[id] = true;\n                                var trait = _this.classData[id].traits[traitId];\n                                if (trait) {\n                                    if (!trait.close || ancestorsHaveIntegratedTrait(classId, traitId)) {\n                                        integratedClassIds.push(id);\n                                    }\n                                } else {\n                                    Object.keys(_this.classSubgraph.integratedAncestors[classId][id]).sort().forEach(walk);\n                                }\n                            };\n                            walk(classId);\n                            return integratedClassIds;\n                        };\n                        var cells = this.classColumns.map(function (classId) {\n                            var cell = [];\n                            var walkTraits = function (traitSubtree) {\n                                var traitId = traitSubtree[0];\n                                var traitChildren = traitSubtree[1];\n                                if (traitChildren) {\n                                    traitChildren.forEach(walkTraits);\n                                } else {\n                                    getIntegratedClassesForTrait(classId, traitId).forEach(function (id) {\n                                        cell.push([\n                                            id,\n                                            traitId\n                                        ]);\n                                    });\n                                }\n                            };\n                            walkTraits(traitSubtree);\n                            return cell;\n                        });\n                        // compared traits filtering\n                        var keepTraits = {};\n                        cells.forEach(function (cell) {\n                            return cell.forEach(function (classTraitId) {\n                                var classId = classTraitId[0];\n                                var traitId = classTraitId[1];\n                                var trait = _this.classData[classId].traits[traitId];\n                                if (!trait.compare) {\n                                    keepTraits[traitId] = true;\n                                }\n                            });\n                        });\n                        for (var i = 0; i < cells.length; i++) {\n                            cells[i] = cells[i].filter(function (classTraitId) {\n                                var traitId = classTraitId[1];\n                                return keepTraits[traitId];\n                            });\n                        }\n                        // empty row detection\n                        if (cells.some(function (cell) {\n                                return cell.length > 0;\n                            })) {\n                            return cells;\n                        } else {\n                            return null;\n                        }\n                    };\n                    return TrLayout;\n                }();\n                module.exports = TrLayout;\n            },\n            {}\n        ],\n        21: [\n            function (require, module, exports) {\n                'use strict';\n                var UnorderedClassGraph = function UnorderedClassGraph(classData, visibleClasses) {\n                    var _this = this;\n                    babelHelpers.classCallCheck(this, UnorderedClassGraph);\n                    var invertGraph = function (graph) {\n                        var igraph = {};\n                        for (var id in graph) {\n                            igraph[id] = {};\n                        }\n                        for (var _id in graph) {\n                            for (var pid in graph[_id]) {\n                                igraph[pid][_id] = true;\n                            }\n                        }\n                        return igraph;\n                    };\n                    // this.allParents and this.allChildren\n                    this.allParents = {};\n                    for (var id in classData) {\n                        this.allParents[id] = classData[id].parents;\n                    }\n                    this.allChildren = invertGraph(this.allParents);\n                    // this.visibleParents, this.visibleChildren, this.visibleDepthNodes\n                    var ancestorDistances = {};\n                    // {node:{ancestorNode:distance,...},...}; node is any node, ancestorNode is one of selectedNodes\n                    var addAncestorDistance = function (fromNode, toNode, distance) {\n                        var oldDistance = ancestorDistances[fromNode][toNode];\n                        var newDistance = oldDistance === undefined ? distance : Math.max(distance, oldDistance);\n                        ancestorDistances[fromNode][toNode] = newDistance;\n                    };\n                    var traverseNode = function (node) {\n                        if (ancestorDistances[node]) {\n                            return;    // already visited\n                        }\n                        ancestorDistances[node] = {};\n                        for (var parentNode in _this.allParents[node]) {\n                            traverseNode(parentNode);\n                            if (visibleClasses[parentNode]) {\n                                addAncestorDistance(node, parentNode, 1);\n                            }\n                            for (var ancestorNode in ancestorDistances[parentNode]) {\n                                var parentDistance = ancestorDistances[parentNode][ancestorNode];\n                                addAncestorDistance(node, ancestorNode, parentDistance + !!visibleClasses[parentNode]);\n                            }\n                        }\n                    };\n                    this.visibleDepthNodes = [];\n                    this.visibleParents = {};\n                    for (var node in visibleClasses) {\n                        traverseNode(node);\n                        var depth = 0;\n                        this.visibleParents[node] = {};\n                        for (var ancestorNode in ancestorDistances[node]) {\n                            var distance = ancestorDistances[node][ancestorNode];\n                            if (distance > depth) {\n                                depth = distance;\n                            }\n                            if (distance == 1) {\n                                this.visibleParents[node][ancestorNode] = true;\n                            }\n                        }\n                        if (this.visibleDepthNodes[depth] === undefined) {\n                            this.visibleDepthNodes[depth] = {};\n                        }\n                        this.visibleDepthNodes[depth][node] = true;\n                    }\n                    this.visibleChildren = invertGraph(this.visibleParents);\n                    // this.integratedAncestors = ancestors that are not (visible parents and/or ancestors of visible parents)\n                    this.integratedAncestors = {};\n                    var _loop = function (cid) {\n                        var masked = {};\n                        var maskAncestors = function (id) {\n                            if (masked[id])\n                                return;\n                            masked[id] = true;\n                            for (var pid in _this.allParents[id]) {\n                                maskAncestors(pid);\n                            }\n                        };\n                        for (var pid in _this.visibleParents[cid]) {\n                            maskAncestors(pid);\n                        }\n                        _this.integratedAncestors[cid] = {};\n                        var integrateAncestors = function (id) {\n                            if (_this.integratedAncestors[cid][id])\n                                return;\n                            _this.integratedAncestors[cid][id] = {};\n                            for (var _pid in _this.allParents[id]) {\n                                if (!masked[_pid]) {\n                                    _this.integratedAncestors[cid][id][_pid] = true;\n                                    integrateAncestors(_pid);\n                                }\n                            }\n                        };\n                        integrateAncestors(cid);\n                    };\n                    for (var cid in visibleClasses) {\n                        _loop(cid);\n                    }\n                };\n                module.exports = UnorderedClassGraph;\n            },\n            {}\n        ]\n    }, {}, [13]));\n}());","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nconst detailsSupported=('open' in document.createElement('details')) // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\r\n\r\nmodule.exports=function(){ // to be called in .each()\r\n\tif (detailsSupported) return\r\n\tconst $details=$(this)\r\n\tconst toggleOpen=()=>{\r\n\t\tif (!$details.attr('open')) {\r\n\t\t\t$details.attr('open','')\r\n\t\t} else {\r\n\t\t\t$details.removeAttr('open')\r\n\t\t}\r\n\t}\r\n\tconst keyCodeEnter=13\r\n\tconst keyCodeSpace=32\r\n\tconst handleEvent=ev=>$(ev.target).closest('summary, :input, a[href]').is('summary') // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\r\n\t$details.addClass('polyfill').children('summary').attr('tabindex',0).click(function(ev){\r\n\t\tif (handleEvent(ev)) {\r\n\t\t\ttoggleOpen()\r\n\t\t}\r\n\t}).keydown(function(ev){\r\n\t\tif (handleEvent(ev) && (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace)) {\r\n\t\t\ttoggleOpen()\r\n\t\t\treturn false\r\n\t\t}\r\n\t})\r\n}\r\n","'use strict'\r\n\r\nconst traits=[\r\n\t['entity',[\r\n\t\t['associatedHomogeneousEquation'],\r\n\t\t['characteristicEquation'],\r\n\t]],\r\n\t['property',[\r\n\t\t['isoclineProperty'],\r\n\t\t['solutionRelation',[\r\n\t\t\t['shiftSolutionRelation'],\r\n\t\t\t['linearitySolutionRelation',[ // linear and affine properties of solutions\r\n\t\t\t\t['solutionSpaceBasis'],\r\n\t\t\t\t['homogeneitySolutionRelation'],\r\n\t\t\t\t['additivitySolutionRelation'],\r\n\t\t\t\t['twoLinearCombinationSolutionRelation'],\r\n\t\t\t\t['nLinearCombinationSolutionRelation'],\r\n\t\t\t\t['twoAffineCombinationSolutionRelation'],\r\n\t\t\t\t['nAffineCombinationSolutionRelation'],\r\n\t\t\t\t['associatedSolutionRelation'],\r\n\t\t\t]]\r\n\t\t]],\r\n\t]],\r\n\t['transform',[\r\n\t\t['orderReduction'],\r\n\t]],\r\n\t['solutionMethod',[\r\n\t\t['generalSolutionMethod'],\r\n\t\t['phaseSolutionMethod'],\r\n\t\t['equilibriumSolutionMethod'],\r\n\t\t['testSolutionMethod'],\r\n\t]],\r\n\t['plot'],\r\n]\r\n\r\n// class entries:\r\n//\thasForm = use this value as form type instead of class id\r\n//\t...TODO...\r\n\r\n// trait entries:\r\n//\ttitle = redefine title\r\n//\tcontent\r\n//\tform = have to present the equation in which this trait was defined\r\n//\t\tif true: form type is equal to class id\r\n//\t\totherwise: object: { formType1:true, formType2:true, ... }\r\n//\tclose = children don't need to inherit this trait; display it only if parents have it displayed\r\n//\tcompare = show only if other classes have this property without compare entry\r\nmodule.exports=(nt)=>{\r\n\tconst classes={}\r\n\tconst merge=(mergedClassesGenerator)=>{\r\n\t\tconst mergedClasses=mergedClassesGenerator(nt)\r\n\t\tfor (let id in mergedClasses) {\r\n\t\t\tclasses[id]=mergedClasses[id]\r\n\t\t}\r\n\t}\r\n\tmerge(require('./data/equations-1st'))\r\n\tmerge(require('./data/equations-2nd'))\r\n\tmerge(require('./data/equations-nth'))\r\n\tmerge(require('./data/systems'))\r\n\treturn {traits,classes}\r\n}\r\n","'use strict'\r\n\r\nconst eqsol=(name)=>`<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>${name}</a>`\r\n\r\nmodule.exports=(nt)=>({\r\n\to1: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"first-order\",\r\n\t\timportance: 0,\r\n\t\tequation: `${nt.dxdt} = f(t,${nt.x})`,\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: { // same as in 'on', done to mask 'sn's trait\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`Can test if \\\\( ${nt.x}_p \\\\) is a solution by substituting \\\\( ${nt.x} = ${nt.x}_p \\\\) into the equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_separable: {\r\n\t\tparents: {\r\n\t\t\to1: true,\r\n\t\t},\r\n\t\tname: \"first-order separable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${nt.dxdt} = f_1(t) \\\\cdot f_2(${nt.x})`,\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f_1(t) \\\\cdot f_2(${nt.x}) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{f_2(${nt.x})} \\\\cdot ${nt.dxdt} = f_1(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f_2(${nt.x})} ${nt.dxdt}`)} = ${nt.int('f_1(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f_2(${nt.x})}`,nt.x)} = ${nt.int('f_1(t)')} + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`solve \\\\( f_2(${nt.x}) = 0 \\\\) for constant \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t\t//`domain is not necessary \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)`\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_autonomous: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t},\r\n\t\tname: \"first-order autonomous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${nt.dxdt} = f(${nt.x})`,\r\n\t\ttraits: {\r\n\t\t\tisoclineProperty: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`isoclines are horizontal`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tshiftSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p(t) \\\\) is a solution, then \\\\( ${nt.x}_p(t+C) \\\\) is a solution`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f(${nt.x}) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{f(${nt.x})} \\\\cdot ${nt.dxdt} = 1 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f(${nt.x})} ${nt.dxdt}`)} = ${nt.int(1)} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f(${nt.x})}`,nt.x)} = t + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`solve \\\\( f(${nt.x}) = 0 \\\\) for constant \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t\t//`domain is \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)` // only if f(y) is continuous\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_bernoulli: {\r\n\t\tparents: {\r\n\t\t\to1: true,\r\n\t\t},\r\n\t\tname: \"Bernoulli\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Bernoulli_differential_equation'>Bernoulli</a>\",\r\n\t\timportance: 2,\r\n\t\tequation: `${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.x}^n`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\( n \\\\neq 1 \\\\)`,\r\n\t\t\t`usually it's also defined that additionally \\\\( n \\\\neq 0 \\\\), but we ignore this requirement here`,\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.x}^n \\\\]`,\r\n\t\t\t\t\t\t`multiply the equation by \\\\( \\\\frac{1-n}{${nt.x}^n} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\begin{multline} `+\r\n\t\t\t\t\t\t\t`\\\\frac{1-n}{${nt.x}^n} ${nt.dxdt} = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`= \\\\frac{(1-n) a(t)}{${nt.x}^{n-1}} + (1-n) b(t) `+\r\n\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t`introduce a new variable`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.w} = \\\\frac{1}{${nt.x}^{n-1}} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.w)} = ${nt.dd(nt.w,nt.x)} ${nt.dxdt} = \\\\frac{1-n}{${nt.x}^n} ${nt.dxdt} \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.w} \\\\) and \\\\( ${nt.dd(nt.w)} \\\\) into the equation`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.w)} = (1-n) a(t) ${nt.w} + (1-n) b(t) \\\\]`,\r\n\t\t\t\t\t\t`solve this equation as a linear equation in \\\\( ${nt.w} \\\\), then return to the original variable \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.w} = (1-n) ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{(n-1)${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{\\\\mu(t)}{${nt.x}^{n-1}} = (1-n) ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`if \\\\( n>0 \\\\), there's an equilibrium solution \\\\( ${nt.x} = 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linear: {\r\n\t\tparents: {\r\n\t\t\to1_bernoulli: true,\r\n\t\t},\r\n\t\tname: \"first-order linear\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t)`,\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p \\\\) is a solution`,\r\n\t\t\t\t\t`and \\\\( ${nt.x}_h \\\\) is a nonzero solution of the associated homogeneous equation`,\r\n\t\t\t\t\t`then \\\\( K ${nt.x}_h + ${nt.x}_p \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thomogeneitySolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\) and \\\\( ${nt.x}_1 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + (1 - K_1) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\tadditivitySolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 + ${nt.x}_2 - ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\ttwoLinearCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 + (1 - K_1 - K_2) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\tnLinearCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i + (1 - \\\\sum\\\\limits_{i=1}^m K_i) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\ttwoAffineCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\) are solutions`,\r\n\t\t\t\t\t`and \\\\( K_1 + K_2 = 1 \\\\)`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tnAffineCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions`,\r\n\t\t\t\t\t`and \\\\( \\\\sum\\\\limits_{i=1}^m K_i = 1 \\\\)`,\r\n\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 - ${nt.x}_2 \\\\) is a solution of the associated homogeneous equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: \"Solutions found with method of <a href='https://en.wikipedia.org/wiki/Integrating_factor'>integrating factors</a>\",\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\]`,\r\n\t\t\t\t\t\t`introduce a new function`,\r\n\t\t\t\t\t\t`\\\\[ g(t) = -a(t) \\\\]`,\r\n\t\t\t\t\t\t`rewrite the equation with \\\\( g(t) \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = b(t) \\\\]`,\r\n\t\t\t\t\t\t`introduce the integrating factor`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{${nt.sint('g(t)')}} \\\\]`,\r\n\t\t\t\t\t\t`multiply the equation by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + \\\\mu(t) g(t) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + e^{${nt.sint('g(t)')}} g(t) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + ${nt.ddt}(e^{${nt.sint('g(t)')}}) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + ${nt.ddt}(\\\\mu(t)) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.ddt}(\\\\mu(t) ${nt.x}) = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t\t\t`integrate the equation multiplied by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.x} = ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{-${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) y = ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`Can't find equilibrium solution like in Bernoulli equation because \\\\( n = 0 \\\\).`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t\to1_linear: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\timportance: 1,\r\n\t\tequation: `${nt.dxdt} = a(t) \\\\cdot ${nt.x}`,\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`The equation is associated with itself.`,\r\n\t\t\t\t\t]}\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_h \\\\) is a nonzero solution,`,\r\n\t\t\t\t\t`then \\\\( K ${nt.x}_h \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thomogeneitySolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) is a solution,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tadditivitySolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 + ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\ttwoLinearCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tnLinearCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\ttwoAffineCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`This is a special case of a linear combination.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tnAffineCombinationSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`This is a special case of a linear combination.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = a(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${nt.int('a(t)')} + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${nt.int('a(t)')} + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\ln|${nt.x}| = ${nt.int('a(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\cdot e^{${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( K = 0 \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_separableInT: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t\to1_linear: true,\r\n\t\t},\r\n\t\tname: \"first-order separable in independent variable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a> in \\\\(t\\\\)\",\r\n\t\timportance: 2,\r\n\t\tequation: `${nt.dxdt} = f(t)`,\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\( ${nt.dxdt} = 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tisoclineProperty: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`isoclines are vertical`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: { // also shiftSolutionRelation\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p \\\\) is a solution`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_p + C \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\( ${nt.x} = C \\\\) is a solution of the associated homogeneous equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(nt.dxdt)} = ${nt.int('f(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.x} = ${nt.int('f(t)')} + C \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`Can't find equilibrium solution like in separable equation because \\\\( f_2(${nt.x}) = 1 \\\\).`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_expGrowth: {\r\n\t\tparents: {\r\n\t\t\ton_linearHomogeneousConstant: true,\r\n\t\t\to1_autonomous: true,\r\n\t\t\to1_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous with constant coefficients (exponential growth)\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a> (<a href='https://en.wikipedia.org/wiki/Exponential_growth#Differential_equation'>exponential growth</a>)\",\r\n\t\timportance: 2,\r\n\t\tequation: `${nt.dxdt} = k \\\\cdot ${nt.x}`,\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = k \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.x} = e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.ddt} e^{\\\\lambda t} = k \\\\cdot e^{\\\\lambda t} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\lambda \\\\cdot e^{\\\\lambda t} = k \\\\cdot e^{\\\\lambda t} \\\\]`,\r\n\t\t\t\t\t\t`divide by \\\\( e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\lambda = k \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = k \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = k \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${nt.int('k')} + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${nt.int('k')} + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\ln|${nt.x}| = k t + C \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(t) = C_1 e^{k t} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(0) = C_1 e^0 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ C_1 = ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.x}(t) = ${nt.x}(0) e^{kt} \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( ${nt.x}(0) = 0 \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: { // TODO could have inherited from linear homogeneous, but have to override autonomous\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_logisticGrowth: {\r\n\t\tparents: {\r\n\t\t\to1_autonomous: true,\r\n\t\t\to1_bernoulli: true,\r\n\t\t},\r\n\t\tname: \"logistic growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Logistic_function#In_ecology:_modeling_population_growth'>logistic growth</a>\",\r\n\t\timportance: 2,\r\n\t\tequation: `${nt.dxdt} = r \\\\cdot ${nt.x} \\\\cdot \\\\left(1 - \\\\frac{${nt.x}}{k}\\\\right)`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\( k \\\\) is the <a href='https://en.wikipedia.org/wiki/Carrying_capacity'>carrying capacity</a>`,\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n})\r\n","'use strict'\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nmodule.exports=(nt)=>{\r\n\tconst lhc_characteristicEquation=(a,b,c)=>({\r\n\t\tform: true,\r\n\t\tcontent: [\r\n\t\t\t{type:'derivation',content:[\r\n\t\t\t\t`\\\\[ ${a} ${nt.dd(nt.x,'t',2)} `+(b?`+ ${b} ${nt.dxdt} `:``)+`+ ${c} ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t`substitute \\\\( ${nt.x} = e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t`\\\\[ ${a} ${nt.dd('','t',2)} e^{\\\\lambda t} `+(b?`+ ${b} ${nt.ddt} e^{\\\\lambda t} `:``)+`+ ${c} e^{\\\\lambda t} = 0 \\\\]`,\r\n\t\t\t\t`\\\\[ ${a} \\\\lambda^2 e^{\\\\lambda t} `+(b?`+ ${b} \\\\lambda e^{\\\\lambda t} `:``)+`+ ${c} e^{\\\\lambda t} = 0 \\\\]`,\r\n\t\t\t\t`divide by \\\\( e^{\\\\lambda t} \\\\)`,\r\n\t\t\t]},\r\n\t\t\t`\\\\[ ${a} \\\\lambda^2 `+(b?`+ ${b} \\\\lambda `:``)+`+ ${c} = 0 \\\\]`,\r\n\t\t],\r\n\t})\r\n\tconst lhc_orderReduction=(a,b,c)=>({\r\n\t\ttitle: \"Order reduction to a system of 2 first-order linear homogeneous equations with constant coefficients\",\r\n\t\tform: true,\r\n\t\tcontent: [\r\n\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t`${nt.dd(nt.y)} &= - \\\\frac ${c} ${a} ${nt.x} `+(b?`- \\\\frac ${b} ${a} ${nt.y} `:``)+\r\n\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t],\r\n\t})\r\n\tconst lhc_generalSolutionMethod=(a,b,c)=>({\r\n\t\ttitle: `General and ${ivp} solution`,\r\n\t\tform: true,\r\n\t\tcontent: [\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${a} \\\\lambda^2 + ${b} \\\\lambda + ${c} = 0 \\\\]`,\r\n\t\t\t{type:'switch',title:`roots \\\\( \\\\lambda \\\\) are`,content:[\r\n\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k_1 e^{\\\\lambda t} + k_2 t e^{\\\\lambda t} \\\\]`,\r\n\t\t\t\t\t`constants for ${ivp} solution:`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t`k_1 &= ${nt.x}(0) \\\\\\\\ `+\r\n\t\t\t\t\t\t`k_2 &= ${nt.x}'(0) - \\\\lambda ${nt.x}(0) `+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k_1 e^{\\\\lambda_1 t} + k_2 e^{\\\\lambda_2 t} \\\\]`,\r\n\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t`\\\\[ ${nt.mat2(1,1,'\\\\lambda_1','\\\\lambda_2')} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}(0)`,`${nt.x}'(0)`)} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k_1 e^{\\\\alpha t} \\\\cos \\\\beta t + k_2 e^{\\\\alpha t} \\\\sin \\\\beta t \\\\]`,\r\n\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t`\\\\[ ${nt.mat2(1,0,'\\\\alpha','\\\\beta')} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}(0)`,`${nt.x}'(0)`)} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t],\r\n\t})\r\n\tconst harmonicOscillatorType=(type,wiki,discriminantRelation)=>({\r\n\t\tparents: {\r\n\t\t\to2_harmonicOscillator: true,\r\n\t\t},\r\n\t\tname: `${type} harmonic oscillator`,\r\n\t\thtmlName: `<a href='${wiki}'>${type}</a> harmonic oscillator`,\r\n\t\timportance: 4,\r\n\t\tequation: `${nt.dd(nt.x,'t',2)} = - \\\\frac bm ${nt.dxdt} - \\\\frac km ${nt.x}`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\[ b^2 - 4 m k ${discriminantRelation} 0 \\\\]`,\r\n\t\t\t`usually written as \\\\( m ${nt.dd(nt.x,'t',2)} + b ${nt.dxdt} + k ${nt.x} = 0 \\\\)`,\r\n\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t`\\\\( b \\\\ge 0 \\\\) is the viscous damping coefficient`,\r\n\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t],\r\n\t\thasForm: 'o2_harmonicOscillator',\r\n\t\ttraits: {},\r\n\t})\r\n\treturn {\r\n\t\to2: {\r\n\t\t\tparents: {\r\n\t\t\t\ton: true,\r\n\t\t\t},\r\n\t\t\tname: \"second-order\",\r\n\t\t\timportance: 2,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = f(t,${nt.x},${nt.dxdt})`,\r\n\t\t\ttraits: {\r\n\t\t\t\torderReduction: {\r\n\t\t\t\t\ttitle: \"Order reduction to a system of 2 first-order equations\",\r\n\t\t\t\t\tform: true,\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t`transform to a system of 2 first-order equations`,\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`${nt.dd(nt.y)} &= f(t,${nt.x},${nt.y}) `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_autonomous: {\r\n\t\t\tparents: {\r\n\t\t\t\to2: true,\r\n\t\t\t},\r\n\t\t\tname: \"second-order autonomous\",\r\n\t\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\t\timportance: 2,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = f(${nt.x},${nt.dxdt})`,\r\n\t\t\ttraits: {\r\n\t\t\t\torderReduction: {\r\n\t\t\t\t\ttitle: \"Order reduction to a system of 2 first-order autonomous equations\",\r\n\t\t\t\t\tform: true,\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`${nt.dd(nt.y)} &= f(${nt.x},${nt.y}) `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_linearHomogeneous: {\r\n\t\t\tparents: {\r\n\t\t\t\to2: true,\r\n\t\t\t},\r\n\t\t\tname: \"second-order linear homogeneous\",\r\n\t\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\t\timportance: 2,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = a(t) \\\\cdot ${nt.dxdt} + b(t) \\\\cdot ${nt.x}`,\r\n\t\t\ttraits: {\r\n\t\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\t\tform: true,\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t{type:'switch',title:`\\\\( b(t) \\\\) is`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( b(t) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( b(t) \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_linearHomogeneousConstant: {\r\n\t\t\tparents: {\r\n\t\t\t\ton_linearHomogeneousConstant: true,\r\n\t\t\t\to2_autonomous: true,\r\n\t\t\t\to2_linearHomogeneous: true,\r\n\t\t\t},\r\n\t\t\tname: \"second-order linear homogeneous with constant coefficients\",\r\n\t\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\t\timportance: 2,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = - \\\\frac ba ${nt.dxdt} - \\\\frac ca ${nt.x}`,\r\n\t\t\tequationNotes: [\r\n\t\t\t\t`usually written as \\\\( a ${nt.dd(nt.x,'t',2)} + b ${nt.dxdt} + c ${nt.x} = 0 \\\\)`,\r\n\t\t\t],\r\n\t\t\ttraits: {\r\n\t\t\t\tcharacteristicEquation: lhc_characteristicEquation('a','b','c'),\r\n\t\t\t\torderReduction: lhc_orderReduction('a','b','c'),\r\n\t\t\t\tgeneralSolutionMethod: lhc_generalSolutionMethod('a','b','c'),\r\n\t\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\t\tform: true,\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t{type:'switch',title:`\\\\( c \\\\) is`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( c = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( c \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_harmonicOscillator: {\r\n\t\t\tparents: {\r\n\t\t\t\to2_linearHomogeneousConstant: true,\r\n\t\t\t},\r\n\t\t\tname: \"harmonic oscillator\",\r\n\t\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator'>harmonic oscillator</a>\",\r\n\t\t\timportance: 3,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = - \\\\frac bm ${nt.dxdt} - \\\\frac km ${nt.x}`,\r\n\t\t\tequationNotes: [\r\n\t\t\t\t`usually written as \\\\( m ${nt.dd(nt.x,'t',2)} + b ${nt.dxdt} + k ${nt.x} = 0 \\\\)`,\r\n\t\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t\t`\\\\( b \\\\ge 0 \\\\) is the viscous damping coefficient`,\r\n\t\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t\t],\r\n\t\t\ttraits: {\r\n\t\t\t\tcharacteristicEquation: lhc_characteristicEquation('m','b','k'),\r\n\t\t\t\torderReduction: lhc_orderReduction('m','b','k'),\r\n\t\t\t\tgeneralSolutionMethod: lhc_generalSolutionMethod('m','b','k'),\r\n\t\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\t\tform: {\r\n\t\t\t\t\t\to2_harmonicOscillator: true,\r\n\t\t\t\t\t\to2_simpleHarmonicOscillator: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`no other equilibrium solution is possible because \\\\( k > 0 \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_underdampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\t\"underdamped\",\r\n\t\t\t\"https://en.wikipedia.org/wiki/Damping#Under-damping_.280_.E2.89.A4_.CE.B6_.3C_1.29\",\r\n\t\t\t\"&lt;\"\r\n\t\t),\r\n\t\to2_criticallyDampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\t\"critically damped\",\r\n\t\t\t\"https://en.wikipedia.org/wiki/Damping#Critical_damping_.28.CE.B6_.3D_1.29\",\r\n\t\t\t\"=\"\r\n\t\t),\r\n\t\to2_overdampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\t\"overdamped\",\r\n\t\t\t\"https://en.wikipedia.org/wiki/Damping#Over-damping_.28.CE.B6_.3E_1.29\",\r\n\t\t\t\">\"\r\n\t\t),\r\n\t\to2_simpleHarmonicOscillator: {\r\n\t\t\tparents: {\r\n\t\t\t\to2_underdampedHarmonicOscillator: true,\r\n\t\t\t},\r\n\t\t\tname: \"simple (undamped) harmonic oscillator\",\r\n\t\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Simple_harmonic_oscillator'>simple (undamped) harmonic oscillator</a>\",\r\n\t\t\timportance: 3,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = - \\\\frac km ${nt.x}`,\r\n\t\t\tequationNotes: [\r\n\t\t\t\t`usually written as \\\\( m ${nt.dd(nt.x,'t',2)} + k ${nt.x} = 0 \\\\)`,\r\n\t\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t\t],\r\n\t\t\ttraits: {\r\n\t\t\t\tcharacteristicEquation: lhc_characteristicEquation('m',0,'k'),\r\n\t\t\t\torderReduction: lhc_orderReduction('m',0,'k'),\r\n\t\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\t\tform: true,\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\t\t\t\t`\\\\[ m \\\\lambda^2 + k = 0 \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\lambda = \\\\pm i \\\\sqrt{\\\\frac km} \\\\]`,\r\n\t\t\t\t\t\t\t`see harmonic oscillator - general solution - <em>complex conjugate pair</em> case`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = k_1 \\\\cos \\\\sqrt{\\\\frac km} t + k_2 \\\\sin \\\\sqrt{\\\\frac km} t \\\\]`,\r\n\t\t\t\t\t\t`constants for ${ivp} solution:`,\r\n\t\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`k_1 &= ${nt.y}(0) \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`k_2 &= \\\\sqrt{\\\\frac mk} ${nt.y}'(0) `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\to2_vanDerPol: {\r\n\t\t\tparents: {\r\n\t\t\t\to2_autonomous: true,\r\n\t\t\t},\r\n\t\t\tname: \"Van der Pol\",\r\n\t\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Van_der_Pol_oscillator'>Van der Pol</a>\",\r\n\t\t\timportance: 3,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = \\\\mu(1-${nt.x}^2)${nt.dxdt} - ${nt.x}`,\r\n\t\t\ttraits: {},\r\n\t\t},\r\n\t\to2_unforcedDuffing: {\r\n\t\t\tparents: {\r\n\t\t\t\to2_autonomous: true,\r\n\t\t\t},\r\n\t\t\tname: \"unforced Duffing\",\r\n\t\t\thtmlName: \"unforced <a href='https://en.wikipedia.org/wiki/Duffing_equation'>Duffing</a>\",\r\n\t\t\timportance: 3,\r\n\t\t\tequation: `${nt.dd(nt.x,'t',2)} = - \\\\delta ${nt.dxdt} - \\\\alpha ${nt.x} - \\\\beta ${nt.x}^3`,\r\n\t\t\ttraits: {},\r\n\t\t},\r\n\t}\r\n}\r\n","'use strict'\r\n\r\nmodule.exports=(nt)=>({\r\n\ton: {\r\n\t\tparents: {},\r\n\t\tname: \"nth-order\",\r\n\t\thtmlName: \"<em>n</em>th-order\",\r\n\t\timportance: 2,\r\n\t\tequation: `${nt.dd(nt.x,'t','n')} = f(t,${nt.x},${nt.dxdt},\\\\dotsc,${nt.dd(nt.x,'t','n-1')})`,\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`Can test if \\\\( ${nt.x}_p \\\\) is a solution by substituting \\\\( ${nt.x} = ${nt.x}_p \\\\) into the equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\ton_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\t//equation: `y^{(n)} = - \\\\tfrac{a_{n-1}}{a_n} y^{(n-1)} - \\\\cdots - \\\\tfrac{a_1}{a_n} y' - \\\\tfrac{a_0}{a_n} y`,\r\n\t\tequation: `${nt.dd(nt.x,'t','n')} = - \\\\sum_{i=0}^{n-1} \\\\frac{a_i}{a_n} ${nt.dd(nt.x,'t','i')}`,\r\n\t\tequationNotes: [\r\n\t\t\t`usually written as \\\\( \\\\sum_{i=0}^n a_i ${nt.dd(nt.x,'t','i')} = 0 \\\\)`,\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ \\\\sum_{i=0}^n a_i ${nt.dd(nt.x,'t','i')} = 0 \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.x} = e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\sum_{i=0}^n a_i ${nt.dd('','t','i')} e^{\\\\lambda t} = 0 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\sum_{i=0}^n a_i \\\\lambda^i e^{\\\\lambda t} = 0 \\\\]`,\r\n\t\t\t\t\t\t`divide by \\\\( e^{\\\\lambda t} \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\sum_{i=0}^n a_i \\\\lambda^i = 0 \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n})\r\n","'use strict'\r\n\r\nconst LhcPlot=require('../lhc-plot')\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nmodule.exports=(nt)=>({\r\n\tsn: {\r\n\t\tparents: {},\r\n\t\tname: \"system of n first-order\",\r\n\t\thtmlName: \"system of <em>n</em> first-order\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{array}{c}`+\r\n\t\t\t\t`${nt.dd(`${nt.x}_1`)} = f_1(t,${nt.x}_1,\\\\dotsc,${nt.x}_n) \\\\\\\\`+\r\n\t\t\t\t`\\\\vdots \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(`${nt.x}_n`)} = f_n(t,${nt.x}_1,\\\\dotsc,${nt.x}_n)`+\r\n\t\t\t`\\\\end{array} \\\\right.`,\r\n\t\tvectorEquation: `${nt.dd(nt.X)} = \\\\mathbf{F}(t,${nt.X})`,\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`Can test if \\\\( ${nt.X}_p \\\\) is a solution by substituting \\\\( ${nt.X} = ${nt.X}_p \\\\) into the equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd(nt.x)} &= f(t,${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(nt.y)} &= g(t,${nt.x},${nt.y})`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\tvectorEquation: `${nt.dd(nt.X)} = \\\\mathbf{F}(t,${nt.X})`,\r\n\t\ttraits: {},\r\n\t},\r\n\ts2_partlyDecoupled: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"partly decoupled system of 2 first-order\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd(nt.x)} &= f(t,${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(nt.y)} &= g(t,${nt.y})`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`Solve \\\\(${nt.dd(nt.y)} = g(t,${nt.y}) \\\\).`,\r\n\t\t\t\t\t`Substitute \\\\( ${nt.y} \\\\) into \\\\( ${nt.dd(nt.x)} = f(t,${nt.x},${nt.y}) \\\\).`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_autonomous: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order autonomous\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd(nt.x)} &= f(${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(nt.y)} &= g(${nt.x},${nt.y})`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\tvectorEquation: `${nt.dd(nt.X)} = \\\\mathbf{F}(${nt.X})`,\r\n\t\ttraits: {},\r\n\t},\r\n\ts2_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order linear homogeneous equations\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd(nt.x)} &= a(t) \\\\, ${nt.x} + b(t) \\\\, ${nt.y} \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(nt.y)} &= c(t) \\\\, ${nt.x} + d(t) \\\\, ${nt.y}`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\tvectorEquation: `${nt.dd(nt.X)} = \\\\mathbf{A}(t) \\\\, ${nt.X}`,\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.vec2(0,0)} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ts2_autonomous: true,\r\n\t\t\ts2_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order linear homogeneous equations with constant coefficients\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd(nt.x)} &= a ${nt.x} + b ${nt.y} \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(nt.y)} &= c ${nt.x} + d ${nt.y}`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\tvectorEquation: `${nt.dd(nt.X)} = \\\\mathbf{A} ${nt.X}`,\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`\\\\( \\\\lambda \\\\) is an eigenvalue of \\\\( \\\\mathbf{A} \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`${ivp} initial conditions are: \\\\( ${nt.x}_0 = ${nt.x}(0) \\\\), \\\\( ${nt.y}_0 = ${nt.y}(0) \\\\)`,\r\n\t\t\t\t\t{type:'switch',title:`coefficients satisfy conditions`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( b = c = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`the equation has the form:`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.ddt} ${nt.vec2(nt.x,nt.y)} = ${nt.mat2('\\\\lambda_1',0,0,'\\\\lambda_2')} ${nt.vec2(nt.x,nt.y)} \\\\]`,\r\n\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.y}_0 \\\\)) and ${ivp} solution:`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.x}_0 e^{\\\\lambda_1 t} ${nt.vec2(1,0)} + ${nt.y}_0 e^{\\\\lambda_2 t} ${nt.vec2(0,1)} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( a = 0 \\\\) and \\\\( b = 1 \\\\) (optional)`,content:[\r\n\t\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t\t`this is an optional case, you can use <em>\\\\( b \\\\neq 0 \\\\) or \\\\( c \\\\neq 0 \\\\)</em> case below`,\r\n\t\t\t\t\t\t\t\t`this case will happen after order reduction of second-order equation`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`the equation has the form:`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.ddt} ${nt.vec2(nt.x,nt.y)} = ${nt.mat2(0,1,`c`,`d`)} ${nt.vec2(nt.x,nt.y)} \\\\]`,\r\n\t\t\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t\t\t\t`eigenvector for \\\\( \\\\lambda_1 \\\\) is:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.vec2(`${nt.x}_1`,`${nt.y}_1`)} = ${nt.vec2(1,'\\\\lambda_1')} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`eigenvector for \\\\( \\\\lambda_2 \\\\) is:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.vec2(`${nt.x}_2`,`${nt.y}_2`)} = ${nt.vec2(1,'\\\\lambda_2')} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`use these eigenvectors in <em>\\\\( b \\\\neq 0 \\\\) or \\\\( c \\\\neq 0 \\\\)</em> case below`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]`,\r\n\t\t\t\t\t\t\t{type:'switch',title:`eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are`,content:[\r\n\t\t\t\t\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.y}_0 \\\\)) and ${ivp} solution:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = e^{\\\\lambda t} ${nt.vec2(nt.x+'_0',nt.y+'_0')} + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ${nt.vec2(nt.x+'_0',nt.y+'_0')} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = k_1 e^{\\\\lambda_1 t} ${nt.vec2(1,'\\\\lambda_1')} + k_2 e^{\\\\lambda_2 t} ${nt.vec2(1,'\\\\lambda_2')} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.mat2(1,1,'\\\\lambda_1','\\\\lambda_2')} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}_0`,`${nt.y}_0`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2('\\\\cos \\\\beta t','\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t')} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2('\\\\sin \\\\beta t','\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t')} `+\r\n\t\t\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.mat2(1,0,'\\\\alpha','\\\\beta')} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}_0`,`${nt.y}_0`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( b \\\\neq 0 \\\\) or \\\\( c \\\\neq 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]`,\r\n\t\t\t\t\t\t\t{type:'switch',title:`eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are`,content:[\r\n\t\t\t\t\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.y}_0 \\\\)) and ${ivp} solution:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = e^{\\\\lambda t} ${nt.vec2(nt.x+'_0',nt.y+'_0')} + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ${nt.vec2(nt.x+'_0',nt.y+'_0')} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`find eigenvector \\\\( ${nt.svec2(`${nt.x}_1`,`${nt.y}_1`)} \\\\) by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ (\\\\mathbf{A} - \\\\lambda_1 \\\\mathbf{I}) ${nt.vec2(`${nt.x}_1`,`${nt.y}_1`)} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`find eigenvector \\\\( ${nt.svec2(`${nt.x}_2`,`${nt.y}_2`)} \\\\) by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ (\\\\mathbf{A} - \\\\lambda_2 \\\\mathbf{I}) ${nt.vec2(`${nt.x}_2`,`${nt.y}_2`)} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = k_1 e^{\\\\lambda_1 t} ${nt.vec2(`${nt.x}_1`,`${nt.y}_1`)} + k_2 e^{\\\\lambda_2 t} ${nt.vec2(`${nt.x}_2`,`${nt.y}_2`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.mat2(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`)} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}_0`,`${nt.y}_0`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`select one of eigenvalues \\\\( \\\\lambda_1 = \\\\alpha + i \\\\beta \\\\)`,\r\n\t\t\t\t\t\t\t\t\t`find complex-valued eigenvector \\\\( ${nt.svec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} \\\\) by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ (\\\\mathbf{A} - \\\\lambda_1 \\\\mathbf{I}) ${nt.vec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} = 0 \\\\]`,\r\n\t\t\t\t\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t\t\t\t\t`one of complex-valued solutions:`,\r\n\t\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X}_c = e^{\\\\alpha t} (\\\\cos \\\\beta t + i \\\\sin \\\\beta t) ${nt.svec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t\t`find general solution by taking real and imaginary parts of a complex-valued solution:`,\r\n\t\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.X} = k_1 \\\\operatorname{Re}(${nt.X}_c) + k_2 \\\\operatorname{Im}(${nt.X}_c) \\\\]`,\r\n\t\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2(`${nt.x}_1 \\\\cos \\\\beta t - ${nt.x}_2 \\\\sin \\\\beta t`,`${nt.y}_1 \\\\cos \\\\beta t - ${nt.y}_2 \\\\sin \\\\beta t`)} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2(`${nt.x}_1 \\\\sin \\\\beta t + ${nt.x}_2 \\\\cos \\\\beta t`,`${nt.y}_1 \\\\sin \\\\beta t + ${nt.y}_2 \\\\cos \\\\beta t`)} `+\r\n\t\t\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ ${nt.mat2(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`)} ${nt.vec2('k_1','k_2')} = ${nt.vec2(`${nt.x}_0`,`${nt.y}_0`)} \\\\]`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t{type:'switch',title:`\\\\( \\\\det(\\\\mathbf{A}) \\\\) is`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( \\\\det(\\\\mathbf{A}) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = K ${nt.vec2('b','-a')} \\\\]`,\r\n\t\t\t\t\t\t\t{type:'proof',content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.X)} = K ${nt.mat2('a','b','c','d')} ${nt.vec2('b','-a')} \\\\]`,\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.X)} = K ${nt.vec2('a b - b a','c b - d a')} \\\\]`,\r\n\t\t\t\t\t\t\t\t`\\\\[ a d = b c \\\\]`,\r\n\t\t\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.X)} = ${nt.vec2(0,0)} \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( \\\\det(\\\\mathbf{A}) \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.vec2(0,0)} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tplot: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t()=>{\r\n\t\t\t\t\t\tconst plot=new LhcPlot(nt.x,nt.y)\r\n\t\t\t\t\t\treturn plot.$output\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tsn_sir: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"SIR model\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/w/index.php?title=SIR_model'>SIR</a> model\",\r\n\t\timportance: 3,\r\n\t\tequation:\r\n\t\t\t`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.dd('S')} &= -\\\\alpha S I \\\\\\\\`+\r\n\t\t\t\t`${nt.dd('I')} &= \\\\alpha S I - \\\\beta I \\\\\\\\ `+\r\n\t\t\t\t`${nt.dd('R')} &= \\\\beta I`+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\tequationNotes: [\r\n\t\t\t`\\\\( S = \\\\) number susceptible`,\r\n\t\t\t`\\\\( I = \\\\) number infectious`,\r\n\t\t\t`\\\\( R = \\\\) number recovered (immune)`,\r\n\t\t\t`\\\\( \\\\alpha = \\\\) contact rate`,\r\n\t\t\t`\\\\( \\\\beta = \\\\) recovery rate`,\r\n\t\t\t`all quantities are nonnegative`,\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tphaseSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`threshold value \\\\( \\\\rho = \\\\frac\\\\beta\\\\alpha \\\\):`,\r\n\t\t\t\t\t`\\\\( I \\\\) increases when \\\\( S &gt; \\\\rho \\\\)`,\r\n\t\t\t\t\t`\\\\( S \\\\) decreases`,\r\n\t\t\t\t\t`\\\\( I \\\\) attains its maximum when \\\\( S = \\\\rho \\\\)`,\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd('S')} + ${nt.dd('I')} + ${nt.dd('R')} = 0 \\\\]`,\r\n\t\t\t\t\t\t`total population \\\\( N \\\\) is constant`,\r\n\t\t\t\t\t\t`\\\\[ S + I + R = N \\\\]`,\r\n\t\t\t\t\t\t`eliminate \\\\( R \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`${nt.dd('S')} &= -\\\\alpha S I \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`${nt.dd('I')} &= \\\\alpha S I - \\\\beta I \\\\\\\\ `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd('I','S')} = \\\\frac{\\\\alpha S I - \\\\beta I}{-\\\\alpha S I} = -1 + \\\\frac{\\\\rho}{S} \\\\]`,\r\n\t\t\t\t\t\t`integrate by \\\\( S \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ I = -S + \\\\rho \\\\ln S + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`conserved quantities:`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`S(t) + I(t) + R(t) = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= S(0) + I(0) + R(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`I(t) + S(t) - \\\\rho \\\\ln S(t) = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= I(0) + S(0) - \\\\rho \\\\ln S(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t`maximum of \\\\( I \\\\):`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`I_{max} + \\\\rho - \\\\rho \\\\ln \\\\rho = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= I(0) + S(0) - \\\\rho \\\\ln S(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tform: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t`\\\\[ I = 0 \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n})\r\n","'use strict'\r\n\r\nconst detailsPolyfill=require('crnx-base/details-polyfill')\r\nconst Matrix=require('./lhc-plot/matrix')\r\nconst TrdetCanvas=require('./lhc-plot/trdet-canvas')\r\nconst PhaseCanvas=require('./lhc-plot/phase-canvas')\r\n\r\n// works like this: http://mathlets.org/mathlets/linear-phase-portraits-matrix-entry/\r\nclass LhcPlot {\r\n\tconstructor(xLabel,yLabel) {\r\n\t\tconst matrix=new Matrix\r\n\t\tconst $numberInputs={}\r\n\t\tconst $rangeInputs={}\r\n\t\tlet $equilibriumType\r\n\t\tconst trdetCanvas=new TrdetCanvas\r\n\t\tconst phaseCanvas=new PhaseCanvas\r\n\t\tconst updateDetails=()=>{\r\n\t\t\tconst updateEquilibriumType=()=>{\r\n\t\t\t\tconst getEquilibriumType=()=>{\r\n\t\t\t\t\t// names are based on\r\n\t\t\t\t\t// http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\r\n\t\t\t\t\tconst D=matrix.det\r\n\t\t\t\t\tconst T=matrix.tr\r\n\t\t\t\t\tconst ssc=(T==0)?\"center\":((T<0)?\"sink\":\"source\")\r\n\t\t\t\t\tif (D<0) {\r\n\t\t\t\t\t\treturn `saddle`\r\n\t\t\t\t\t} else if (D==0) {\r\n\t\t\t\t\t\tif (T==0) {\r\n\t\t\t\t\t\t\tif (matrix.b==0 && matrix.c==0) {\r\n\t\t\t\t\t\t\t\treturn `degenerate everywhere fixed`\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn `degenerate parallel lines`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `degenerate comb ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (4*D<T*T) {\r\n\t\t\t\t\t\treturn `nodal (real) ${ssc}`\r\n\t\t\t\t\t} else if (4*D==T*T) {\r\n\t\t\t\t\t\tif (matrix.b==0 && matrix.c==0) {\r\n\t\t\t\t\t\t\treturn `star ${ssc}`\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `defective nodal (real) ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (T==0) {\r\n\t\t\t\t\t\t\treturn ssc\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `spiral ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$equilibriumType.text(getEquilibriumType())\r\n\t\t\t}\r\n\t\t\tmatrix.forUpdated(cf=>{\r\n\t\t\t\t$numberInputs[cf].val(matrix[cf])\r\n\t\t\t\t$rangeInputs[cf].val(matrix[cf])\r\n\t\t\t})\r\n\t\t\tupdateEquilibriumType()\r\n\t\t\ttrdetCanvas.redraw(matrix)\r\n\t\t\tphaseCanvas.redraw(matrix,xLabel,yLabel)\r\n\t\t}\r\n\t\tconst getCoefInputs=coef=>{\r\n\t\t\tconst isMatrixElement=coef.length==1\r\n\t\t\tconst valueRange=matrix.getRange(coef)\r\n\t\t\tconst initCoefInput=(type,getValue,setValue)=>{\r\n\t\t\t\tconst $input=$(`<input type='${type}'>`).attr('step','any').val(matrix[coef])\r\n\t\t\t\tif (type=='range') {\r\n\t\t\t\t\t$input.attr('min',-valueRange).attr('max',valueRange)\r\n\t\t\t\t}\r\n\t\t\t\t$input.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\tconst value=getValue()\r\n\t\t\t\t\t\tsetValue(value)\r\n\t\t\t\t\t\tmatrix[coef]=Number(value)\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $input\r\n\t\t\t}\r\n\t\t\tconst $div=$(\"<div>\")\r\n\t\t\tif (!isMatrixElement) {\r\n\t\t\t\t$div.addClass(coef)\r\n\t\t\t}\r\n\t\t\tlet label=coef\r\n\t\t\tif (coef=='tr') {\r\n\t\t\t\tlabel=`\\\\operatorname{${coef}}(\\\\mathbf{A})`\r\n\t\t\t} else if (coef=='det') {\r\n\t\t\t\tlabel=`\\\\${coef}(\\\\mathbf{A})`\r\n\t\t\t} else if (coef.slice(0,2)=='re') {\r\n\t\t\t\t//label=`\\\\lambda_${coef.charAt(2)} =`\r\n\t\t\t\tlabel=`\\\\Re \\\\lambda_${coef.charAt(2)}`\r\n\t\t\t} else if (coef.slice(0,2)=='im') {\r\n\t\t\t\t//label=`+ i \\\\cdot`\r\n\t\t\t\tlabel=`\\\\Im \\\\lambda_${coef.charAt(2)}`\r\n\t\t\t}\r\n\t\t\tlet $number,$range\r\n\t\t\t$div.append(\r\n\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t`<span class='label'>\\\\( ${label} \\\\)</span>`,\r\n\t\t\t\t\t`<span class='space'> </span>`,\r\n\t\t\t\t\t$number=initCoefInput('number',()=>$number.val(),(v)=>$range.val(v))\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$range=initCoefInput('range',()=>Number($range.val()).toFixed(2),(v)=>$number.val(v))\r\n\t\t\t)\r\n\t\t\t$numberInputs[coef]=$number\r\n\t\t\t$rangeInputs[coef]=$range\r\n\t\t\treturn $div\r\n\t\t}\r\n\t\tthis.$output=$(\"<div class='matrix'>\").append(\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"equation coefficients\"),\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('a')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('b'))\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('c')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('d'))\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t\"Set matrix to \",\r\n\t\t\t\t\t$(\"<button>zero</button>\").click(function(){\r\n\t\t\t\t\t\tmatrix.setZero()\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\t$(\"<button>associated</button>\").click(function(){\r\n\t\t\t\t\t\tmatrix.setAssociated()\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"matrix parameters\"),\r\n\t\t\t\tgetCoefInputs('tr'),\r\n\t\t\t\tgetCoefInputs('det'),\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('re1')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('im1'))\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('re2')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('im2'))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"equilibrium point type\"),\r\n\t\t\t\t$equilibriumType=$(\"<div>\")\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary class='bordered'>\").append(\"<a href='https://en.wikipedia.org/wiki/Trace_(linear_algebra)'>tr</a>-<a href='https://en.wikipedia.org/wiki/Determinant'>det</a> plane\"),\r\n\t\t\t\ttrdetCanvas.$output.on('mousedown mousemove',function(ev){\r\n\t\t\t\t\tif (!ev.buttons&1) return\r\n\t\t\t\t\tconst $canvas=$(this)\r\n\t\t\t\t\tconst w=$canvas.width()\r\n\t\t\t\t\tconst h=$canvas.height()\r\n\t\t\t\t\tconst trim=(v)=>Number(v.toFixed(2))\r\n\t\t\t\t\tconst tRange=matrix.getRange('tr')\r\n\t\t\t\t\tconst dRange=matrix.getRange('det')\r\n\t\t\t\t\tconst tClose=2*tRange/(w/2)\r\n\t\t\t\t\tconst dClose=2*dRange/(h/2)\r\n\t\t\t\t\tlet t=trim(+(ev.offsetX-w/2+0.5)/(w/2)*tRange)\r\n\t\t\t\t\tlet d=trim(-(ev.offsetY-h/2+0.5)/(h/2)*dRange)\r\n\t\t\t\t\tconst p=t*t/4\r\n\t\t\t\t\tif (Math.abs(d)<=dClose && Math.abs(t)<=tClose) {\r\n\t\t\t\t\t\tt=0\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d>0 && Math.abs(t)<=tClose) {\r\n\t\t\t\t\t\tt=0\r\n\t\t\t\t\t} else if (d<0 && d>=-dClose) {\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d-p>0 && d-p<=dClose) {\r\n\t\t\t\t\t\td=p\r\n\t\t\t\t\t} else if (d>0 && d<=dClose) {\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d-p<0 && d-p>=-dClose) {\r\n\t\t\t\t\t\td=p\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmatrix.setTrdetExternally(t,d)\r\n\t\t\t\t\tupdateDetails()\r\n\t\t\t\t})\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary class='bordered'>\").append(\"<a href='https://en.wikipedia.org/wiki/Phase_space'>phase plane</a>\"),\r\n\t\t\t\tphaseCanvas.$output\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t)\r\n\t\tupdateDetails()\r\n\t}\r\n}\r\n\r\nmodule.exports=LhcPlot\r\n","'use strict'\r\n\r\nclass Canvas {\r\n\tconstructor() {\r\n\t\tthis.width=246\r\n\t\tthis.height=246\r\n\t\tthis.$output=$(`<canvas width='${this.width}' height='${this.height}'>`)\r\n\t\tthis.ctx=this.$output[0].getContext('2d')\r\n\t}\r\n\tdrawAxes(xLabel,yLabel) {\r\n\t\tconst xAxisSize=80\r\n\t\tconst yAxisSize=80\r\n\t\tconst arrowSize=15\r\n\t\tconst ctx=this.ctx\r\n\t\tconst drawAxis=()=>{\r\n\t\t\tctx.beginPath()\r\n\t\t\tctx.moveTo(-xAxisSize,0)\r\n\t\t\tctx.lineTo(+xAxisSize,0)\r\n\t\t\tctx.moveTo(xAxisSize-arrowSize,-arrowSize)\r\n\t\t\tctx.lineTo(xAxisSize,0)\r\n\t\t\tctx.lineTo(xAxisSize-arrowSize,+arrowSize)\r\n\t\t\tctx.stroke()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.lineWidth=6\r\n\t\tctx.strokeStyle=ctx.fillStyle='#DDD'\r\n\t\tctx.font='900 30px sans-serif'\r\n\t\tdrawAxis()\r\n\t\tctx.save()\r\n\t\tctx.rotate(-Math.PI/2)\r\n\t\tdrawAxis()\r\n\t\tctx.restore()\r\n\t\tctx.textBaseline='middle'\r\n\t\tctx.fillText(xLabel,xAxisSize+10,0)\r\n\t\tctx.textBaseline='alphabetic'\r\n\t\tctx.textAlign='center'\r\n\t\tctx.fillText(yLabel,0,-yAxisSize-10)\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=Canvas\r\n","'use strict'\r\n\r\n// returns coords [x,y] of a point on x*y=C closest to (x0,y0)\r\n// could have solved x^3*(x-x0)+C*y0*x-C^2=0, y=C/x\r\n\r\nconst getClosestPointOnPositiveHyperbolaIn1stQuadrant=(C,x0,y0)=>{\r\n\tlet x=Math.sqrt(C)\r\n\tlet y=x\r\n\tconst epsilon2=1e-12\r\n\tconst iterationLimit=20\r\n\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\tif (x<=0) return [C/y0,y0]\r\n\t\tif (y<=0) return [x0,C/x0]\r\n\t\tconst yx=y0/(2*x)\r\n\t\tconst xy=x0/(2*y)\r\n\t\tconst t=yx+xy-Math.sqrt((yx-xy)*(yx-xy)+C/(x*y))\r\n\t\tlet x1=x0-y*t\r\n\t\tlet y1=y0-x*t\r\n\t\tif ((x-x1)*(x-x1)+(y-y1)*(y-y1)<=epsilon2) break\r\n\t\tx=x1\r\n\t\ty=y1\r\n\t}\r\n\treturn [x,y]\r\n}\r\n\r\nconst getClosestPointOnPositiveHyperbola=(C,x0,y0)=>{\r\n\tif (y0>=-x0) { // top-right branch\r\n\t\treturn getClosestPointOnPositiveHyperbolaIn1stQuadrant(C,x0,y0)\r\n\t} else { // bottom-left branch\r\n\t\tconst xy=getClosestPointOnPositiveHyperbolaIn1stQuadrant(C,-x0,-y0)\r\n\t\treturn [-xy[0],-xy[1]]\r\n\t}\r\n}\r\n\r\nconst getClosestPointOnHyperbola=(C,x0,y0)=>{\r\n\tif (C==0) {\r\n\t\tif (Math.abs(x0)<Math.abs(y0)) {\r\n\t\t\treturn [0,y0]\r\n\t\t} else {\r\n\t\t\treturn [x0,0]\r\n\t\t}\r\n\t} else if (C>0) {\r\n\t\treturn getClosestPointOnPositiveHyperbola(C,x0,y0)\r\n\t} else { // flip y axis\r\n\t\tconst xy=getClosestPointOnPositiveHyperbola(-C,x0,-y0)\r\n\t\treturn [xy[0],-xy[1]]\r\n\t}\r\n}\r\n\r\nmodule.exports=getClosestPointOnHyperbola\r\n","'use strict'\r\n\r\nconst getClosestPointOnHyperbola=require('./closest-point-on-hyperbola')\r\n\r\nclass Matrix {\r\n\tconstructor() {\r\n\t\tthis._updated={}\r\n\t\tthis.setZero()\r\n\t\tthis._updated={}\r\n\t}\r\n\tforUpdated(fn) {\r\n\t\tfor (let coef in this._updated) {\r\n\t\t\tfn(coef)\r\n\t\t}\r\n\t\tthis._updated={}\r\n\t}\r\n\t_computeElementsFromTrdet() {\r\n\t\tif (this._original===null) {\r\n\t\t\tthis._original={\r\n\t\t\t\ta: this._a,\r\n\t\t\t\tb: this._b,\r\n\t\t\t\tc: this._c,\r\n\t\t\t\td: this._d,\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._a=(this._original.a+this._tr-this._original.d)/2\r\n\t\tthis._d=this._tr-this._a\r\n\t\tconst bc=getClosestPointOnHyperbola(this._a*this._d-this._det,this._original.b,this._original.c)\r\n\t\tthis._b=bc[0]\r\n\t\tthis._c=bc[1]\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t}\r\n\t_computeTrdetFromElements() {\r\n\t\tthis._tr=this._a+this._d\r\n\t\tthis._det=this._a*this._d-this._b*this._c\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t}\r\n\t_computeEigenvaluesFromTrdet() {\r\n\t\tconst discr=this._tr*this._tr-4*this._det\r\n\t\tif (discr>=0) {\r\n\t\t\tconst root=Math.sqrt(discr)\r\n\t\t\tif (this._re2>=this._re1) {\r\n\t\t\t\tthis._re1=(this._tr-root)/2\r\n\t\t\t\tthis._re2=(this._tr+root)/2\r\n\t\t\t} else {\r\n\t\t\t\tthis._re2=(this._tr-root)/2\r\n\t\t\t\tthis._re1=(this._tr+root)/2\r\n\t\t\t}\r\n\t\t\tthis._im1=this._im2=0\r\n\t\t} else {\r\n\t\t\tconst root=Math.sqrt(-discr)\r\n\t\t\tthis._re1=this._re2=this._tr/2\r\n\t\t\tif (this._im2>=this._im1) {\r\n\t\t\t\tthis._im1=-root/2\r\n\t\t\t\tthis._im2=+root/2\r\n\t\t\t} else {\r\n\t\t\t\tthis._im2=-root/2\r\n\t\t\t\tthis._im1=+root/2\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._updated.re1=this._updated.re2=this._updated.im1=this._updated.im2=true\r\n\t}\r\n\t_computeTrdetFromEigenvalues() {\r\n\t\tthis._tr=this._re1+this._re2\r\n\t\tthis._det=this._re1*this._re2-this._im1*this._im2\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t}\r\n\tget a() { return this._a }\r\n\tget b() { return this._b }\r\n\tget c() { return this._c }\r\n\tget d() { return this._d }\r\n\tget tr() { return this._tr }\r\n\tget det() { return this._det }\r\n\tget re1() { return this._re1 }\r\n\tget re2() { return this._re2 }\r\n\tget im1() { return this._im1 }\r\n\tget im2() { return this._im2 }\r\n\tgetEigenvector(lambda) {\r\n\t\tif (Math.abs(this._b)+Math.abs(lambda-this._a)>=Math.abs(lambda-this._d)+Math.abs(this._c)) {\r\n\t\t\treturn [this._b,lambda-this._a]\r\n\t\t} else {\r\n\t\t\treturn [lambda-this._d,this._c]\r\n\t\t}\r\n\t}\r\n\tgetComplexEigenvector(alpha,beta) {\r\n\t\tif (Math.abs(this._b)+Math.abs(alpha-this._a)>=Math.abs(alpha-this._d)+Math.abs(this._c)) {\r\n\t\t\treturn [this._b,0,alpha-this._a,beta]\r\n\t\t} else {\r\n\t\t\treturn [alpha-this._d,beta,this._c,0]\r\n\t\t}\r\n\t}\r\n\tgetRange(coef) {\r\n\t\tif (coef=='tr') {\r\n\t\t\treturn 10\r\n\t\t} else if (coef=='det') {\r\n\t\t\treturn 50\r\n\t\t} else if (coef=='a' || coef=='b' || coef=='c' || coef=='d') {\r\n\t\t\treturn 5\r\n\t\t} else {\r\n\t\t\treturn 10 // eigenvalues\r\n\t\t}\r\n\t}\r\n\tset a(v) {\r\n\t\tthis._a=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset b(v) {\r\n\t\tthis._b=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset c(v) {\r\n\t\tthis._c=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset d(v) {\r\n\t\tthis._d=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset tr(v) {\r\n\t\tthis._tr=v\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset det(v) {\r\n\t\tthis._det=v\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tsetTrdetExternally(T,D) { // for use with clicks on tr-det plane plot\r\n\t\tthis._tr=T\r\n\t\tthis._det=D\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\t_setRe(v,i,j) {\r\n\t\tthis['_re'+i]=v\r\n\t\tif (this._im1!=0 || this._im2!=0) {\r\n\t\t\tthis['_re'+j]=v\r\n\t\t\tthis._updated['re'+j]=true\r\n\t\t}\r\n\t\tthis._computeTrdetFromEigenvalues()\r\n\t\tthis._computeElementsFromTrdet()\r\n\t}\r\n\tset re1(v) {\r\n\t\tthis._setRe(v,1,2)\r\n\t}\r\n\tset re2(v) {\r\n\t\tthis._setRe(v,2,1)\r\n\t}\r\n\t_setIm(v,i,j) {\r\n\t\tthis['_im'+i]=v\r\n\t\tthis['_im'+j]=-v\r\n\t\tthis._updated['im'+j]=true\r\n\t\tif (v!=0) {\r\n\t\t\tthis['_re'+j]=this['_re'+i]\r\n\t\t\tthis._updated['re'+j]=true\r\n\t\t}\r\n\t\tthis._computeTrdetFromEigenvalues()\r\n\t\tthis._computeElementsFromTrdet()\r\n\t}\r\n\tset im1(v) {\r\n\t\tthis._setIm(v,1,2)\r\n\t}\r\n\tset im2(v) {\r\n\t\tthis._setIm(v,2,1)\r\n\t}\r\n\tsetZero() {\r\n\t\tthis._a=this._b=this._c=this._d=0\r\n\t\tthis._tr=this._det=0\r\n\t\tthis._re1=this._re2=this._im1=this._im2=0\r\n\t\tthis._original=null\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t\tthis._updated.re1=this._updated.re2=this._updated.im1=this._updated.im2=true\r\n\t}\r\n\tsetAssociated() { // \"associated matrix\" http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\r\n\t\tthis._a=0\r\n\t\tthis._b=1\r\n\t\tthis._c=-this._det\r\n\t\tthis._d=this._tr\r\n\t\tthis._original=null\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t}\r\n}\r\n\r\nmodule.exports=Matrix\r\n","'use strict'\r\n\r\nconst Canvas=require('./canvas')\r\n\r\nclass PhaseCanvas extends Canvas {\r\n\tredraw(matrix,xLabel,yLabel) {\r\n\t\tconst ctx=this.ctx\r\n\t\tconst xRange=this.width/2\r\n\t\tconst yRange=this.height/2\r\n\t\tconst drawDirectionField=()=>{\r\n\t\t\tconst arrowSpacing=27\r\n\t\t\tconst arrowLength=5\r\n\t\t\tconst arrowWidth=2\r\n\t\t\tconst drawArrow=(x,y)=>{\r\n\t\t\t\tconst dx=matrix.a*x+matrix.b*y\r\n\t\t\t\tconst dy=matrix.c*x+matrix.d*y\r\n\t\t\t\tconst dl=Math.sqrt(dx*dx+dy*dy)\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t+(x-dx/dl*arrowLength),\r\n\t\t\t\t\t-(y-dy/dl*arrowLength)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(+x,-y)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t+(x+dx/dl*arrowLength),\r\n\t\t\t\t\t-(y+dy/dl*arrowLength)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t+(x-dy/dl*arrowWidth),\r\n\t\t\t\t\t-(y+dx/dl*arrowWidth)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t+(x+dy/dl*arrowWidth),\r\n\t\t\t\t\t-(y-dx/dl*arrowWidth)\r\n\t\t\t\t)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tctx.save()\r\n\t\t\tctx.fillStyle=ctx.strokeStyle='#888'\r\n\t\t\tconst nx=Math.floor(xRange/arrowSpacing)\r\n\t\t\tconst ny=Math.floor(yRange/arrowSpacing)\r\n\t\t\tfor (let i=-nx;i<=nx;i++) {\r\n\t\t\t\tfor (let j=-ny;j<=ny;j++) {\r\n\t\t\t\t\tdrawArrow(\r\n\t\t\t\t\t\ti*arrowSpacing+0.5*Math.sign(i),\r\n\t\t\t\t\t\tj*arrowSpacing+0.5*Math.sign(j)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawEigenline=(lambda,otherLambda)=>{\r\n\t\t\tconst iconSize=5\r\n\t\t\tlet icon\r\n\t\t\tif (lambda<0) {\r\n\t\t\t\ticon=-1-(otherLambda<0 && lambda<otherLambda)\r\n\t\t\t} else if (lambda>0) {\r\n\t\t\t\ticon=+1+(otherLambda>0 && lambda>otherLambda)\r\n\t\t\t} else {\r\n\t\t\t\ticon=0\r\n\t\t\t}\r\n\t\t\tconst xy=matrix.getEigenvector(lambda)\r\n\t\t\tlet x=xy[0], y=xy[1]\r\n\t\t\tctx.save()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tif (x<0) {\r\n\t\t\t\tx=-x\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (y<0) {\r\n\t\t\t\tctx.scale(1,-1)\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (x<y) { // TODO this will work only for square canvases, should also swap xRange and yRange\r\n\t\t\t\tctx.transform(0,1,1,0,0,0) // swap x,y\r\n\t\t\t\tconst t=x\r\n\t\t\t\tx=y\r\n\t\t\t\ty=t\r\n\t\t\t}\r\n\t\t\tif (x>0) {\r\n\t\t\t\tconst r=Math.sqrt(x*x+y*y)\r\n\t\t\t\tconst x0=x/r\r\n\t\t\t\tconst y0=y/r\r\n\t\t\t\tconst x1=xRange\r\n\t\t\t\tconst y1=yRange*y/x\r\n\t\t\t\tconst xic=xRange/2*x0\r\n\t\t\t\tconst yic=yRange/2*y0\r\n\t\t\t\tconst xis=iconSize*x0\r\n\t\t\t\tconst yis=iconSize*y0\r\n\t\t\t\tconst drawEigenlineIcon=()=>{\r\n\t\t\t\t\tconst dir=Math.sign(icon)\r\n\t\t\t\t\tconst drawDiamond=()=>{\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(xic-xis,-(yic-yis))\r\n\t\t\t\t\t\tctx.lineTo(xic+yis,-(yic-xis))\r\n\t\t\t\t\t\tctx.lineTo(xic+xis,-(yic+yis))\r\n\t\t\t\t\t\tctx.lineTo(xic-yis,-(yic+xis))\r\n\t\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\t\tctx.fill()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst drawTriangle=(ofs)=>{\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(xic+dir*(ofs*xis-xis-yis),-(yic+dir*(ofs*yis-yis+xis)))\r\n\t\t\t\t\t\tctx.lineTo(xic+dir*(ofs*xis-xis+yis),-(yic+dir*(ofs*yis-yis-xis)))\r\n\t\t\t\t\t\tctx.lineTo(xic+dir*(ofs*xis+xis    ),-(yic+dir*(ofs*yis+yis    )))\r\n\t\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\t\tctx.fill()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dir==0) {\r\n\t\t\t\t\t\tdrawDiamond()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrawTriangle(0)\r\n\t\t\t\t\t\tif (Math.abs(icon)>=2) {\r\n\t\t\t\t\t\t\tdrawTriangle(2)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(-x1,+y1)\r\n\t\t\t\tctx.lineTo(+x1,-y1)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.save()\r\n\t\t\t\tdrawEigenlineIcon()\r\n\t\t\t\tctx.scale(-1,-1)\r\n\t\t\t\tdrawEigenlineIcon()\r\n\t\t\t\tctx.restore()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawSolution=(x0,y0,color)=>{\r\n\t\t\tconst iterationLimit=100*Math.max(xRange,yRange)\r\n\t\t\tconst fnOnFractions=(fn,xNum,xDen,yNum,yDen)=>{\r\n\t\t\t\tif (xDen!=0 && yDen!=0) {\r\n\t\t\t\t\treturn fn(xNum/xDen,yNum/yDen)\r\n\t\t\t\t} else if (xDen==0 && yDen!=0) {\r\n\t\t\t\t\treturn yNum/yDen\r\n\t\t\t\t} else if (xDen!=0 && yDen==0) {\r\n\t\t\t\t\treturn xNum/xDen\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawFixedPoint=()=>{\r\n\t\t\t\tconst fixedPointSize=3\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.arc(x0,y0,fixedPointSize,0,2*Math.PI)\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tconst drawSaddleOrNodeSolution=()=>{\r\n\t\t\t\tlet lambda1,lambda2\r\n\t\t\t\tif (matrix.re1<=matrix.re2) {\r\n\t\t\t\t\tlambda1=matrix.re1\r\n\t\t\t\t\tlambda2=matrix.re2\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlambda1=matrix.re2\r\n\t\t\t\t\tlambda2=matrix.re1\r\n\t\t\t\t}\r\n\t\t\t\tconst xy1=matrix.getEigenvector(lambda1)\r\n\t\t\t\tlet x1=xy1[0], y1=xy1[1]\r\n\t\t\t\tconst xy2=matrix.getEigenvector(lambda2)\r\n\t\t\t\tlet x2=xy2[0], y2=xy2[1]\r\n\t\t\t\tif (lambda2<=0) {\r\n\t\t\t\t\tlet t\r\n\t\t\t\t\tt=lambda1\r\n\t\t\t\t\tlambda1=-lambda2\r\n\t\t\t\t\tlambda2=-t\r\n\t\t\t\t\tt=x1; x1=x2; x2=t\r\n\t\t\t\t\tt=y1; y1=y2; y2=t\r\n\t\t\t\t}\r\n\t\t\t\tlet k1=+(x2*y0-x0*y2)/(x2*y1-x1*y2)\r\n\t\t\t\tlet k2=-(x1*y0-x0*y1)/(x2*y1-x1*y2)\r\n\t\t\t\tif ((k1==0 && k2==0) || (lambda1==0 && k2==0)) {\r\n\t\t\t\t\tdrawFixedPoint()\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else if (k1==0 && lambda2!=0) {\r\n\t\t\t\t\tlambda1=0 // trigger comb case below\r\n\t\t\t\t} else if (k2==0 && lambda1!=0) {\r\n\t\t\t\t\tlambda2=Math.abs(lambda1)\r\n\t\t\t\t\tlambda1=0 // trigger comb case below\r\n\t\t\t\t\tlet t\r\n\t\t\t\t\tt=x1; x1=x2; x2=t\r\n\t\t\t\t\tt=y1; y1=y2; y2=t\r\n\t\t\t\t\tt=k1; k1=k2; k2=t\r\n\t\t\t\t}\r\n\t\t\t\tif (lambda1>0) { // node\r\n\t\t\t\t\tlet T1=0\r\n\t\t\t\t\tlet T2=0\r\n\t\t\t\t\tconst dT1=1/Math.max(Math.abs(k1*x1),Math.abs(k1*y1)) // step size is controlled by slow direction\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(0,0)\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tT1+=dT1\r\n\t\t\t\t\t\tT2=Math.pow(T1,lambda2/lambda1)\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+(k1*x1*T1+k2*x2*T2),\r\n\t\t\t\t\t\t\t-(k1*y1*T1+k2*y2*T2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(k1*x1*T1+k2*x2*T2)*Math.sign(k2*x2)>xRange ||\r\n\t\t\t\t\t\t\t(k1*y1*T1+k2*y2*T2)*Math.sign(k2*y2)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else if (lambda1<0 && lambda2>0) { // saddle\r\n\t\t\t\t\tlet t=0 // assumes starting point is in viewport\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst ke1=k1*Math.exp(lambda1*t)\r\n\t\t\t\t\t\tconst ke2=k2*Math.exp(lambda2*t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(x1*ke1+x2*ke2)*Math.sign(x1*k1)>xRange ||\r\n\t\t\t\t\t\t\t(y1*ke1+y2*ke2)*Math.sign(y1*k1)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t\tconst dt=Math.min(\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke2*lambda2),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke2*lambda2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt-=dt\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst ke1=k1*Math.exp(lambda1*t)\r\n\t\t\t\t\t\tconst ke2=k2*Math.exp(lambda2*t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+(x1*ke1+x2*ke2),\r\n\t\t\t\t\t\t\t-(y1*ke1+y2*ke2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (t>0 && (\r\n\t\t\t\t\t\t\t(x1*ke1+x2*ke2)*Math.sign(x1*k2)>xRange ||\r\n\t\t\t\t\t\t\t(y1*ke1+y2*ke2)*Math.sign(y1*k2)>yRange\r\n\t\t\t\t\t\t)) break\r\n\t\t\t\t\t\tconst dt=Math.min(\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke2*lambda2),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke2*lambda2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt+=dt\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else if (lambda1==0 && lambda2>0) { // comb\r\n\t\t\t\t\tconst t=fnOnFractions(Math.min,\r\n\t\t\t\t\t\tMath.sign(x2*k2)*xRange-x1*k1, x2*k2,\r\n\t\t\t\t\t\tMath.sign(y2*k2)*yRange-y1*k1, y2*k2\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (t>0) {\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t\t\t+(x1*k1),\r\n\t\t\t\t\t\t\t-(y1*k1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+(x1*k1+x2*k2*t),\r\n\t\t\t\t\t\t\t-(y1*k1+y2*k2*t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawSpiralSolution=()=>{\r\n\t\t\t\tlet alpha=matrix.re1\r\n\t\t\t\tlet beta=matrix.im1\r\n\t\t\t\tif (beta<0) {\r\n\t\t\t\t\tbeta=-beta\r\n\t\t\t\t}\r\n\t\t\t\tconst xxyy=matrix.getComplexEigenvector(alpha,beta)\r\n\t\t\t\tif (alpha<0) {\r\n\t\t\t\t\talpha=-alpha\r\n\t\t\t\t\tbeta=-beta\r\n\t\t\t\t}\r\n\t\t\t\tconst x1=xxyy[0], x2=xxyy[1]\r\n\t\t\t\tconst y1=xxyy[2], y2=xxyy[3]\r\n\t\t\t\tconst k1=+(x2*y0-x0*y2)/(x2*y1-x1*y2)\r\n\t\t\t\tconst k2=-(x1*y0-x0*y1)/(x2*y1-x1*y2)\r\n\t\t\t\tif (k1==0 && k2==0) return\r\n\t\t\t\tconst kxc=k1*x1+k2*x2\r\n\t\t\t\tconst kxs=k2*x1-k1*x2\r\n\t\t\t\tconst kyc=k1*y1+k2*y2\r\n\t\t\t\tconst kys=k2*y1-k1*y2\r\n\t\t\t\tif (alpha==0) { // center\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tconst dt=1/Math.max(kxc,kyc,kxs,kys)\r\n\t\t\t\t\tlet t=0\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst c=Math.cos(t)\r\n\t\t\t\t\t\tconst s=Math.sin(t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+(kxc*c+kxs*s),\r\n\t\t\t\t\t\t\t-(kyc*c+kys*s)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt+=dt\r\n\t\t\t\t\t\tif (t>=2*Math.PI) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else { // spiral\r\n\t\t\t\t\tconst calculateSemiaxes=()=>{ // https://en.wikipedia.org/wiki/Ellipse#Canonical_form\r\n\t\t\t\t\t\tconst A=kys*kys+kyc*kyc, B=-2*(kxs*kys+kxc*kyc), C=kxs*kxs+kxc*kxc\r\n\t\t\t\t\t\tconst f=kxc*kys-kxs*kyc\r\n\t\t\t\t\t\tconst F=-f*f\r\n\t\t\t\t\t\tconst DIS=B*B-4*A*C\r\n\t\t\t\t\t\tconst A2=2*DIS*F*(A+C-Math.sqrt((A-C)*(A-C)+B*B))/(DIS*DIS)\r\n\t\t\t\t\t\tconst B2=2*DIS*F*(A+C+Math.sqrt((A-C)*(A-C)+B*B))/(DIS*DIS)\r\n\t\t\t\t\t\treturn [A2,B2] // TODO relative axes lengths don't depend on initial conditions, this calculation should be simpler\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst A2B2=calculateSemiaxes()\r\n\t\t\t\t\tconst A2=A2B2[0]\r\n\t\t\t\t\tconst B2=A2B2[1]\r\n\t\t\t\t\tconst B=Math.sqrt(B2)\r\n\t\t\t\t\tconst R2=xRange*xRange+yRange*yRange\r\n\t\t\t\t\t//const t0=-(Math.log(B2)/2+Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\r\n\t\t\t\t\tconst lineWidth=2\r\n\t\t\t\t\tconst t0=(Math.log(lineWidth)-Math.log(B2)/2-Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\r\n\t\t\t\t\t//const t1=(Math.log(R2)-Math.log(A2))/(2*alpha)\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tconst e0=Math.exp(alpha*t0)\r\n\t\t\t\t\tconst nSegments=Math.ceil(B*e0*2*Math.PI)\r\n\t\t\t\t\tfor (let i=0;i<nSegments;i++) {\r\n\t\t\t\t\t\tconst t=2*Math.PI*i/nSegments\r\n\t\t\t\t\t\tconst c0=Math.cos(t)\r\n\t\t\t\t\t\tconst s0=Math.sin(t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+e0*(kxc*c0+kxs*s0),\r\n\t\t\t\t\t\t\t-e0*(kyc*c0+kys*s0)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\tctx.fill()\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tlet t=t0\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst e=Math.exp(alpha*t)\r\n\t\t\t\t\t\tconst c=Math.cos(beta*t)\r\n\t\t\t\t\t\tconst s=Math.sin(beta*t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+e*(kxc*c+kxs*s),\r\n\t\t\t\t\t\t\t-e*(kyc*c+kys*s)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t//const dtTan=1/Math.abs(beta*B*e)\r\n\t\t\t\t\t\tconst dtRad=Math.log(1/(B*e)+1)/alpha\r\n\t\t\t\t\t\t//t+=Math.min(Math.max(dtTan,1/Math.abs(40*beta)),dtRad)\r\n\t\t\t\t\t\tt+=Math.min(dtRad,1/Math.abs(16*beta))\r\n\t\t\t\t\t\tif (e*e*A2>R2) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawDefectiveSolution=()=>{\r\n\t\t\t\tlet lambda=matrix.re1\r\n\t\t\t\tlet x1=(matrix.a-lambda)*x0+matrix.b*y0\r\n\t\t\t\tlet y1=matrix.c*x0+(matrix.d-lambda)*y0\r\n\t\t\t\tif (lambda<0) {\r\n\t\t\t\t\tlambda=-lambda\r\n\t\t\t\t\tx1=-x1\r\n\t\t\t\t\ty1=-y1\r\n\t\t\t\t}\r\n\t\t\t\tif (lambda==0 && x1==0 && y1==0) { // everywhere fixed\r\n\t\t\t\t\tdrawFixedPoint()\r\n\t\t\t\t} if (lambda==0) { // parallel lines\r\n\t\t\t\t\tconst t0=fnOnFractions(Math.min,\r\n\t\t\t\t\t\t-Math.sign(x1)*xRange-x0, x1,\r\n\t\t\t\t\t\t-Math.sign(y1)*yRange-y0, y1\r\n\t\t\t\t\t)\r\n\t\t\t\t\tconst t1=fnOnFractions(Math.max,\r\n\t\t\t\t\t\t+Math.sign(x1)*xRange-x0, x1,\r\n\t\t\t\t\t\t+Math.sign(y1)*yRange-y0, y1\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t\t+(x0+t0*x1),\r\n\t\t\t\t\t\t-(y0+t0*y1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t+(x0+t1*x1),\r\n\t\t\t\t\t\t-(y0+t1*y1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else { // star or defective node\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(0,0)\r\n\t\t\t\t\tlet T=0\r\n\t\t\t\t\tconst dT=1/Math.max(Math.abs(x0),Math.abs(y0))\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tT+=dT\r\n\t\t\t\t\t\tconst t=Math.log(T)/lambda\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+T*(x0+t*x1),\r\n\t\t\t\t\t\t\t-T*(y0+t*y1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tT*(x0+t*x1)*Math.sign(x0)>xRange ||\r\n\t\t\t\t\t\t\tT*(y0+t*y1)*Math.sign(y0)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.save()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tctx.strokeStyle=ctx.fillStyle=color\r\n\t\t\tif (matrix.im1==0 && matrix.re1!=matrix.re2) {\r\n\t\t\t\tdrawSaddleOrNodeSolution()\r\n\t\t\t} else if (matrix.im1==0 && matrix.re1==matrix.re2) {\r\n\t\t\t\tdrawDefectiveSolution()\r\n\t\t\t} else if (matrix.im1!=0) {\r\n\t\t\t\tdrawSpiralSolution()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.fillStyle='#FFF'\r\n\t\tctx.fillRect(0,0,this.width,this.height)\r\n\t\tctx.restore()\r\n\t\tctx.save()\r\n\t\tctx.translate(xRange,yRange)\r\n\t\tthis.drawAxes(xLabel,yLabel)\r\n\t\tdrawDirectionField()\r\n\t\tif (matrix.im1==0) {\r\n\t\t\tdrawEigenline(matrix.re1,matrix.re2)\r\n\t\t\tif (matrix.re1!=matrix.re2) {\r\n\t\t\t\tdrawEigenline(matrix.re2,matrix.re1)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawSolution(+xRange/2,0,'#08F')\r\n\t\tdrawSolution(-xRange/2,0,'#28F')\r\n\t\tdrawSolution(0,+yRange/2,'#0AF')\r\n\t\tdrawSolution(0,-yRange/2,'#08D')\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=PhaseCanvas\r\n","'use strict'\r\n\r\nconst Canvas=require('./canvas')\r\n\r\nclass TrdetCanvas extends Canvas {\r\n\tredraw(matrix) {\r\n\t\tconst crosshairSize=10\r\n\t\tconst pointerSize=5\r\n\t\tconst pointerMargin=3\r\n\t\tconst trRange=matrix.getRange('tr')\r\n\t\tconst detRange=matrix.getRange('det')\r\n\t\tconst ctx=this.ctx\r\n\t\tconst xRange=this.width/2\r\n\t\tconst yRange=this.height/2\r\n\t\tconst D=matrix.det\r\n\t\tconst T=matrix.tr\r\n\t\tconst drawRegionAreas=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tctx.fillStyle='#FCC'\r\n\t\t\tif (D<0) {\r\n\t\t\t\tctx.fillRect(-xRange,0,xRange*2,yRange)\r\n\t\t\t} else if ((D>0 && 4*D<T*T) || (4*D>T*T) && T!=0) {\r\n\t\t\t\tif (T<0) {\r\n\t\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tif (4*D>T*T) {\r\n\t\t\t\t\tctx.moveTo(xRange,-yRange)\r\n\t\t\t\t\tctx.lineTo(0,-yRange)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.moveTo(xRange,0)\r\n\t\t\t\t}\r\n\t\t\t\tfor (let x=0;x<=xRange;x++) {\r\n\t\t\t\t\tconst t=x*trRange/xRange\r\n\t\t\t\t\tconst d=t*t/4\r\n\t\t\t\t\tconst y=-d*yRange/detRange\r\n\t\t\t\t\tctx.lineTo(x,y)\r\n\t\t\t\t}\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawRegionLines=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tconst drawRegionLinesOnce=(all)=>{\r\n\t\t\t\tconst drawParabola=()=>{\r\n\t\t\t\t\tfor (let x=0;x<=+xRange;x++) {\r\n\t\t\t\t\t\tconst t=x*trRange/xRange\r\n\t\t\t\t\t\tconst d=t*t/4\r\n\t\t\t\t\t\tconst y=-d*yRange/detRange\r\n\t\t\t\t\t\tctx[x?'lineTo':'moveTo'](x,y)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tif (all || (D==0 && T<0)) {\r\n\t\t\t\t\tctx.moveTo(-xRange,0)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D==0 && T>0)) {\r\n\t\t\t\t\tctx.moveTo(+xRange,0)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D>0 && T==0)) {\r\n\t\t\t\t\tctx.moveTo(0,-yRange)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (4*D==T*T && T<0)) {\r\n\t\t\t\t\tctx.save()\r\n\t\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\t\tdrawParabola()\r\n\t\t\t\t\tctx.restore()\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (4*D==T*T && T>0)) {\r\n\t\t\t\t\tdrawParabola()\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D==0 && T==0)) {\r\n\t\t\t\t\tctx.moveTo(-2,-2)\r\n\t\t\t\t\tctx.lineTo(-2,+2)\r\n\t\t\t\t\tctx.lineTo(+2,+2)\r\n\t\t\t\t\tctx.lineTo(+2,-2)\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke()\r\n\t\t\t}\r\n\t\t\tctx.lineCap='square'\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tdrawRegionLinesOnce(true)\r\n\t\t\tctx.lineWidth=4\r\n\t\t\tctx.strokeStyle='#F88'\r\n\t\t\tdrawRegionLinesOnce()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tctx.strokeStyle='#400'\r\n\t\t\tdrawRegionLinesOnce()\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawPosition=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tctx.strokeStyle=ctx.fillStyle='#F00'\r\n\t\t\tlet x=matrix.tr/trRange*xRange\r\n\t\t\tlet y=-matrix.det/detRange*yRange\r\n\t\t\tif (x<0) {\r\n\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\tx=-x\r\n\t\t\t}\r\n\t\t\tif (y<0) {\r\n\t\t\t\tctx.scale(1,-1)\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (x>xRange) {\r\n\t\t\t\tctx.transform(0,1,1,0,0,0)\r\n\t\t\t\tconst t=x\r\n\t\t\t\tx=y\r\n\t\t\t\ty=t\r\n\t\t\t}\r\n\t\t\tif ((x>xRange && y>yRange-pointerMargin) || (x>xRange-pointerMargin && y>yRange)) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(xRange-pointerMargin,yRange-pointerMargin)\r\n\t\t\t\tctx.lineTo(xRange-pointerMargin,yRange-pointerMargin-pointerSize*Math.SQRT2)\r\n\t\t\t\tctx.lineTo(xRange-pointerMargin-pointerSize*Math.SQRT2,yRange-pointerMargin)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t} else if (y>xRange) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(x,yRange-pointerMargin)\r\n\t\t\t\tctx.lineTo(x+pointerSize,yRange-pointerMargin-pointerSize)\r\n\t\t\t\tctx.lineTo(x-pointerSize,yRange-pointerMargin-pointerSize)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t} else {\r\n\t\t\t\tconst s=crosshairSize\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(x-s,y)\r\n\t\t\t\tctx.lineTo(x+s,y)\r\n\t\t\t\tctx.moveTo(x,y-s)\r\n\t\t\t\tctx.lineTo(x,y+s)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.fillStyle='#FFF'\r\n\t\tctx.fillRect(0,0,this.width,this.height)\r\n\t\tctx.translate(xRange,yRange)\r\n\t\tdrawRegionAreas()\r\n\t\tthis.drawAxes('tr','det')\r\n\t\tdrawRegionLines()\r\n\t\tdrawPosition()\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=TrdetCanvas\r\n","'use strict'\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\nMath.sign = Math.sign || function(x){\r\n\tx=+x; // convert to a number\r\n\tif (x===0 || isNaN(x)) {\r\n\t\treturn x\r\n\t}\r\n\treturn x>0 ? 1 : -1;\r\n}\r\n\r\nconst detailsPolyfill=require('crnx-base/details-polyfill')\r\nconst UnorderedClassSubgraph=require('./unordered-class-subgraph')\r\nconst OrderedClassSubgraph=require('./ordered-class-subgraph')\r\nconst TheadLayout=require('./thead-layout')\r\nconst TrLayout=require('./tr-layout')\r\nconst Notation=require('./notation')\r\nconst dataGenerator=require('./data')\r\n\r\nconst i18n=(id)=>{\r\n\tconst strings={\r\n\t\t'trait.entity': \"Associated entities\",\r\n\t\t'trait.associatedHomogeneousEquation': \"Associated homogeneous equation\",\r\n\t\t'trait.characteristicEquation': \"<a href='https://en.wikipedia.org/wiki/Characteristic_equation_(calculus)'>Characteristic equation</a>\",\r\n\r\n\t\t'trait.property': \"Properties\",\r\n\t\t'trait.isoclineProperty': \"Property of <a href='https://en.wikipedia.org/wiki/Isocline'>isoclines</a>\",\r\n\t\t'trait.solutionRelation': \"Solution relation properties\",\r\n\t\t'trait.shiftSolutionRelation': \"Time/value shifts of solutions\",\r\n\t\t'trait.linearitySolutionRelation': \"Linear/affine properties of solutions\",\r\n\t\t'trait.solutionSpaceBasis': \"Basis of the solution space\",\r\n\t\t'trait.homogeneitySolutionRelation': \"Homogeneity of solutions\",\r\n\t\t'trait.additivitySolutionRelation': \"Additivity of solutions\",\r\n\t\t'trait.twoLinearCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Linear_combination'>Linear combination</a> property of solutions\",\r\n\t\t'trait.nLinearCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Linear_combination'>Linear combination</a> property of solutions\",\r\n\t\t'trait.twoAffineCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Affine_combination'>Affine combination</a> property of solutions\",\r\n\t\t'trait.nAffineCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Affine_combination'>Affine combination</a> property of solutions\",\r\n\t\t'trait.associatedSolutionRelation': \"Associated homogeneous equation solution\",\r\n\r\n\t\t'trait.transform': \"Transforms to different types\",\r\n\t\t'trait.orderReduction': \"Order reduction\",\r\n\r\n\t\t'trait.solutionMethod': \"Solutions\",\r\n\t\t'trait.generalSolutionMethod': \"General solution\",\r\n\t\t'trait.phaseSolutionMethod': \"<a href='https://en.wikipedia.org/wiki/Phase_space'>Phase space</a> trajectory\",\r\n\t\t'trait.equilibriumSolutionMethod': \"<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>Equilibrium solutions</a>\",\r\n\t\t'trait.testSolutionMethod': \"Solution testing\",\r\n\r\n\t\t'trait.plot': \"Plot\",\r\n\t}\r\n\treturn strings[id]\r\n}\r\n\r\n$(function(){\r\n\t$('.crnx-ode-properties').each(function(){\r\n\t\tconst $container=$(this).empty()\r\n\t\tconst selectedNodes={} // visible nodes // TODO rename to visibleNodes\r\n\r\n\t\t// options\r\n\t\tlet traitAlignmentLevel=1\r\n\t\tconst maxTraitAlignmentLevel=4\r\n\t\tlet dependentVariables='yvz'\r\n\t\tconst availableDependentVariables=['xyw','yvz']\r\n\t\tconst viewDependentVariables={\r\n\t\t\txyw: `\\\\( x \\\\), \\\\( y \\\\), \\\\( w \\\\)`,\r\n\t\t\tyvz: `\\\\( y \\\\), \\\\( v \\\\), \\\\( z \\\\)`,\r\n\t\t}\r\n\r\n\t\tlet notation,data\r\n\t\tconst regenerateData=()=>{\r\n\t\t\tnotation=new Notation(dependentVariables)\r\n\t\t\tdata=dataGenerator(notation)\r\n\t\t}\r\n\t\tregenerateData()\r\n\r\n\t\tfor (let id in data.classes) {\r\n\t\t\tif (data.classes[id].importance<=1) {\r\n\t\t\t\tselectedNodes[id]=true\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst getHtmlName=id=>(data.classes[id].htmlName!==undefined\r\n\t\t\t? data.classes[id].htmlName\r\n\t\t\t: data.classes[id].name\r\n\t\t)\r\n\r\n\t\tlet unorderedClassSubgraph,theadLayout,orderedClassSubgraph,trLayout\r\n\t\tconst recomputeLayouts=()=>{\r\n\t\t\tunorderedClassSubgraph=new UnorderedClassSubgraph(data.classes,selectedNodes)\r\n\t\t\ttheadLayout=new TheadLayout(unorderedClassSubgraph)\r\n\t\t\torderedClassSubgraph=new OrderedClassSubgraph(unorderedClassSubgraph,theadLayout.columns)\r\n\t\t\ttrLayout=new TrLayout(unorderedClassSubgraph,data.classes,theadLayout.columns)\r\n\t\t}\r\n\t\trecomputeLayouts()\r\n\r\n\t\t// TODO put into classSubgraph\r\n\t\tconst breadthWalk=(graph,id)=>{\r\n\t\t\tconst result=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst queue=[id]\r\n\t\t\twhile (queue.length>0) {\r\n\t\t\t\tid=queue.shift()\r\n\t\t\t\tif (visited[id]) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tif (!selectedNodes[id]) {\r\n\t\t\t\t\tresult.push(id)\r\n\t\t\t\t}\r\n\t\t\t\tqueue.push(...Object.keys(graph[id]).sort())\r\n\t\t\t}\r\n\t\t\treturn result\r\n\t\t}\r\n\t\tconst writeButton=(text,tip)=>{\r\n\t\t\tconst $button=$(`<button type='button'><span>${text}</span></button>`)\r\n\t\t\tif (tip!==undefined) {\r\n\t\t\t\t$button.attr('title',tip)\r\n\t\t\t}\r\n\t\t\treturn $button\r\n\t\t}\r\n\t\tconst writeTraitItem=(forClassId,fromClassId,traitId)=>{\r\n\t\t\tconst item=data.classes[fromClassId].traits[traitId]\r\n\t\t\tif (!item.content) return\r\n\t\t\tconst getTitle=()=>{\r\n\t\t\t\tif (item.title!==undefined) {\r\n\t\t\t\t\treturn item.title\r\n\t\t\t\t} else if (item.compare) {\r\n\t\t\t\t\treturn \"Property comparable to <em>\"+i18n('trait.'+traitId)+\"</em>\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn i18n('trait.'+traitId)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst $item=$(\"<details class='trait'>\").append(\r\n\t\t\t\t$(\"<summary>\").append(getTitle())\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t\tconst rec=(line)=>{\r\n\t\t\t\tif (typeof line == 'string') {\r\n\t\t\t\t\treturn $(\"<div class='line'>\").append(line)\r\n\t\t\t\t} else if (typeof line == 'function') {\r\n\t\t\t\t\treturn line()\r\n\t\t\t\t} else if (line.type=='derivation' || line.type=='proof' || line.type=='case') {\r\n\t\t\t\t\treturn $(\"<details>\").append(\r\n\t\t\t\t\t\t$(\"<summary>\").append(line.title!==undefined ? line.title : line.type),\r\n\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t).each(detailsPolyfill)\r\n\t\t\t\t} else if (line.type=='switch') {\r\n\t\t\t\t\treturn $(\"<div class='\"+line.type+\"'>\").append(\r\n\t\t\t\t\t\t$(\"<div class='condition'>\").append(line.title!==undefined ? line.title : line.type,':'),\r\n\t\t\t\t\t\t$(\"<div class='cases'>\").append(\r\n\t\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn $(\"<div class='\"+line.type+\"'>\").append(\r\n\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (item.form) {\r\n\t\t\t\tconst forClass=data.classes[forClassId]\r\n\t\t\t\tlet forForm=forClassId\r\n\t\t\t\tif (forClass.hasForm!==undefined) {\r\n\t\t\t\t\tforForm=forClass.hasForm\r\n\t\t\t\t}\r\n\t\t\t\tlet fromForms={\r\n\t\t\t\t\t[fromClassId]: true,\r\n\t\t\t\t}\r\n\t\t\t\tif (item.form!==true) {\r\n\t\t\t\t\tfromForms=item.form\r\n\t\t\t\t}\r\n\t\t\t\tif (!fromForms[forForm]) {\r\n\t\t\t\t\t$item.append(\r\n\t\t\t\t\t\trec({type:'note',content:[\r\n\t\t\t\t\t\t\t\"when equation is written as <em>\"+getHtmlName(fromClassId)+\"</em>:\",\r\n\t\t\t\t\t\t\t\"\\\\[\"+data.classes[fromClassId].equation+\"\\\\]\",\r\n\t\t\t\t\t\t]})\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$item.append(item.content.map(rec))\r\n\t\t\treturn $item\r\n\t\t}\r\n\t\tconst writeTraitCell=(forClassId,traitCell)=>{\r\n\t\t\tconst $cell=$(\"<td>\")\r\n\t\t\tif (traitCell.length>0) {\r\n\t\t\t\t$cell.append(traitCell.map(classTraitId=>{\r\n\t\t\t\t\tconst classId=classTraitId[0]\r\n\t\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\t\treturn writeTraitItem(forClassId,classId,traitId)\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t\treturn $cell\r\n\t\t}\r\n\t\tconst writeTraitRow=(traitSubtree)=>{\r\n\t\t\tconst traitCells=trLayout.getSubtreeLayout(traitSubtree)\r\n\t\t\tif (!traitCells) return null\r\n\t\t\treturn $(\"<tr>\").append(traitCells.map(\r\n\t\t\t\t(traitCell,i)=>writeTraitCell(theadLayout.columns[i],traitCell)\r\n\t\t\t))\r\n\t\t}\r\n\r\n\t\tlet $tableContainer,$quickSelect,$quickSelectButton\r\n\t\tconst updateQuickSelectButton=()=>{\r\n\t\t\tconst id=$quickSelect.val()\r\n\t\t\t$quickSelectButton.text(selectedNodes[id]\r\n\t\t\t\t? \"Delete\"\r\n\t\t\t\t: \"Add\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tconst deleteNode=id=>{\r\n\t\t\tdelete selectedNodes[id]\r\n\t\t\t$quickSelect.children(`[value=\"${id}\"]`).removeClass('added')\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\trecomputeLayouts()\r\n\t\t\twriteTable()\r\n\t\t}\r\n\t\tconst addNode=id=>{\r\n\t\t\tselectedNodes[id]=true\r\n\t\t\t$quickSelect.children(`[value=\"${id}\"]`).addClass('added')\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\trecomputeLayouts()\r\n\t\t\twriteTable()\r\n\t\t}\r\n\t\tconst writeQuickSelectControls=()=>{\r\n\t\t\tconst $div=$(\"<div>\").append(\r\n\t\t\t\t$quickSelect=$(\"<select>\").append(\r\n\t\t\t\t\tObject.keys(data.classes).sort().map(id=>{\r\n\t\t\t\t\t\tconst $option=$(\"<option>\").val(id).text(data.classes[id].name)\r\n\t\t\t\t\t\tif (selectedNodes[id]) {\r\n\t\t\t\t\t\t\t$option.addClass('added')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $option\r\n\t\t\t\t\t})\r\n\t\t\t\t).change(function(){\r\n\t\t\t\t\tupdateQuickSelectButton()\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$quickSelectButton=$(\"<button>\").click(function(){\r\n\t\t\t\t\tconst id=$quickSelect.val()\r\n\t\t\t\t\tif (selectedNodes[id]) {\r\n\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button>Clear all</button>\").click(function(){\r\n\t\t\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\t\t\tdelete selectedNodes[id]\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$quickSelect.children().removeClass('added')\r\n\t\t\t\t\tupdateQuickSelectButton()\r\n\t\t\t\t\trecomputeLayouts()\r\n\t\t\t\t\twriteTable()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\treturn $div\r\n\t\t}\r\n\t\tconst writeTable=()=>{ // TODO rename (doesn't return object)\r\n\t\t\tconst visibleAncestors={} // including self\r\n\t\t\tconst computeVisibleAncestors=(id,aid)=>{\r\n\t\t\t\tvisibleAncestors[id][aid]=true\r\n\t\t\t\tfor (let naid in unorderedClassSubgraph.visibleParents[aid]) {\r\n\t\t\t\t\tcomputeVisibleAncestors(id,naid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\tvisibleAncestors[id]={}\r\n\t\t\t\tcomputeVisibleAncestors(id,id)\r\n\t\t\t}\r\n\t\t\tconst $equations={}\r\n\t\t\tlet $attachedMenu, $attachedToButton, attachedDirection, attachTimeoutId\r\n\t\t\tconst setCellClasses=($cell,cell)=>{\r\n\t\t\t\t;['b','t','bt','rl','rt','bl'].forEach(dir=>{\r\n\t\t\t\t\tif (cell[dir]) {\r\n\t\t\t\t\t\t$cell.addClass(dir)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tconst writeTheadButton=($cell,text,tip,dir,nodes)=>{\r\n\t\t\t\tconst keyCodeEnter=13\r\n\t\t\t\tconst keyCodeSpace=32\r\n\t\t\t\tconst keyCodeUp=38\r\n\t\t\t\tconst keyCodeDown=40\r\n\t\t\t\tconst $button=writeButton(text,tip).addClass(dir).click(function(){\r\n\t\t\t\t\tconst removeAttachedMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton.removeClass('attached-t attached-b')\r\n\t\t\t\t\t\t$attachedMenu.remove()\r\n\t\t\t\t\t\tclearTimeout(attachTimeoutId)\r\n\t\t\t\t\t\t$attachedToButton=undefined\r\n\t\t\t\t\t\t$attachedMenu=undefined\r\n\t\t\t\t\t\tattachedDirection=undefined\r\n\t\t\t\t\t\tattachTimeoutId=undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst startAttachingMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton=$button\r\n\t\t\t\t\t\t$attachedMenu=$(\"<ul>\").append(nodes.map(\r\n\t\t\t\t\t\t\tid=>$(\"<li tabindex='0'>\"+data.classes[id].name+\"</li>\").click(function(){\r\n\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\t\t\t\tif (!attachedDirection) return // not yet decided on attach direction (this can't happen)\r\n\t\t\t\t\t\t\t\tif (ev.keyCode==keyCodeUp) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).prev()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='b') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).next()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='t') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace) {\r\n\t\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t\t$cell.append($attachedMenu)\r\n\t\t\t\t\t\tattachTimeoutId=setTimeout(()=>{ // can calculate height only after it's displayed\r\n\t\t\t\t\t\t\tconst mh=$attachedMenu.outerHeight()\r\n\t\t\t\t\t\t\tconst mo=$attachedMenu.offset()\r\n\t\t\t\t\t\t\tconst bh=$button.outerHeight()\r\n\t\t\t\t\t\t\tconst bo=$button.offset()\r\n\t\t\t\t\t\t\tlet t=bo.top-mh+1\r\n\t\t\t\t\t\t\tif (dir!='t' || t<0) { // want below or doesn't fit to screen above the button\r\n\t\t\t\t\t\t\t\tt=bo.top+bh-1\r\n\t\t\t\t\t\t\t\tattachedDirection='b'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$attachedMenu.insertBefore($button)\r\n\t\t\t\t\t\t\t\tattachedDirection='t'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$attachedMenu.offset({\r\n\t\t\t\t\t\t\t\ttop: t,\r\n\t\t\t\t\t\t\t\tleft: mo.left,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t$attachedMenu.addClass('attached')\r\n\t\t\t\t\t\t\t$button.addClass('attached-'+attachedDirection)\r\n\t\t\t\t\t\t},0)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!$button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif ($attachedToButton) {\r\n\t\t\t\t\t\t\tremoveAttachedMenu() // close menu opened elsewhere\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstartAttachingMenu()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tremoveAttachedMenu() // close menu here\r\n\t\t\t\t\t}\r\n\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\tif ($button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif (ev.keyCode==keyCodeUp && attachedDirection=='t') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().last().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown && attachedDirection=='b') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().first().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $button\r\n\t\t\t}\r\n\t\t\tconst writeTheadCell=cell=>{\r\n\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\tif (cell.node!==undefined) {\r\n\t\t\t\t\t$cell.append(getHtmlName(cell.node))\r\n\t\t\t\t\tconst ancestors=breadthWalk(unorderedClassSubgraph.allParents,cell.node).reverse()\r\n\t\t\t\t\tif (ancestors.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add ancestor\",\"Add one of supertypes of this equation type\",'t',ancestors)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst descendants=breadthWalk(unorderedClassSubgraph.allChildren,cell.node)\r\n\t\t\t\t\tif (descendants.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add descendant\",\"Add one of subtypes of this equation type\",'b',descendants)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $cell\r\n\t\t\t}\r\n\t\t\tconst writeThead=()=>{\r\n\t\t\t\tconst $thead=$(\"<thead>\")\r\n\t\t\t\tfor (let i=0;i<theadLayout.nodeLayers.length;i++) {\r\n\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t$(\"<tr class='nodes'>\").append(\r\n\t\t\t\t\t\t\ttheadLayout.nodeLayers[i].map(writeTheadCell)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (i<theadLayout.arcLayers.length) {\r\n\t\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t\ttheadLayout.arcLayers[i].map(row=>$(\"<tr class='arcs'>\").append(\r\n\t\t\t\t\t\t\t\trow.map(cell=>{\r\n\t\t\t\t\t\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\t\t\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\t\t\t\t\t\treturn $cell\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $thead\r\n\t\t\t}\r\n\t\t\tconst writeTfoot=()=>{\r\n\t\t\t\treturn $(\"<tfoot>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\ttheadLayout.columns.map(id=>$(\"<td>\").append(\r\n\t\t\t\t\t\t\twriteButton(\"Delete\",\"Delete this equation type\").click(function(){\r\n\t\t\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tconst writeTraitRows=()=>{\r\n\t\t\t\tconst output=[]\r\n\t\t\t\tconst rec=(traitSubtree,depth)=>{\r\n\t\t\t\t\tconst traitId=traitSubtree[0]\r\n\t\t\t\t\tconst traitChildren=traitSubtree[1]\r\n\t\t\t\t\tif (depth>=traitAlignmentLevel || !traitChildren) {\r\n\t\t\t\t\t\toutput.push(writeTraitRow(traitSubtree))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttraitChildren.forEach(traitChild=>rec(traitChild,depth+1))\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\trec(['root',data.traits],0)\r\n\t\t\t\treturn output\r\n\t\t\t}\r\n\t\t\tconst writeTraitAlignmentControls=()=>{\r\n\t\t\t\tconst $container=$(\"<form>Trait alignment level:</form>\")\r\n\t\t\t\tfor (let i=0;i<=maxTraitAlignmentLevel;i++) {\r\n\t\t\t\t\t$container.append(\r\n\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t\t$(\"<input type='radio' name='trait-alignment-level'>\").prop('checked',i==traitAlignmentLevel).click(function(){\r\n\t\t\t\t\t\t\t\ttraitAlignmentLevel=i\r\n\t\t\t\t\t\t\t\twriteTable()\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\" \"+i\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn $container\r\n\t\t\t}\r\n\t\t\tconst writeDependentVariablesControls=()=>{\r\n\t\t\t\t// TODO text inputs with\r\n\t\t\t\t//\tsuggested names: u, v, w, x, y, z\r\n\t\t\t\t//\texamples: x,y,w; y,v,z\r\n\t\t\t\tconst $container=$(\"<form>Dependent variables notation (main variable, second variable in 2d system, substitution variable):</form>\")\r\n\t\t\t\tavailableDependentVariables.forEach(dvs=>{\r\n\t\t\t\t\t$container.append(\r\n\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t\t$(\"<input type='radio' name='dependent-variables'>\").prop('checked',dvs==dependentVariables).click(function(){\r\n\t\t\t\t\t\t\t\tdependentVariables=dvs\r\n\t\t\t\t\t\t\t\tregenerateData()\r\n\t\t\t\t\t\t\t\twriteTable()\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\" \"+viewDependentVariables[dvs]\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t\treturn $container\r\n\t\t\t}\r\n\t\t\tconst writeEquation=(id)=>{\r\n\t\t\t\t$equations[id]=$(\"<div class='equation'>\").append(\"\\\\[\"+data.classes[id].equation+\"\\\\]\")\r\n\t\t\t\tif (data.classes[id].vectorEquation) {\r\n\t\t\t\t\t$equations[id].append(\"<div class='alt-separator'>or in vector format</div>\",\"\\\\[\"+data.classes[id].vectorEquation+\"\\\\]\")\r\n\t\t\t\t}\r\n\t\t\t\t$equations[id].hover(function(){\r\n\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t$equations[aid].addClass('highlight')\r\n\t\t\t\t\t}\r\n\t\t\t\t},function(){\r\n\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t$equations[aid].removeClass('highlight')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $equations[id]\r\n\t\t\t}\r\n\t\t\tconst writeGeneralNotes=()=>{\r\n\t\t\t\tconst nt=notation\r\n\t\t\t\treturn $(\"<ul>\").append(\r\n\t\t\t\t\t`<li>how to read the diagram: <ul>`+\r\n\t\t\t\t\t\t`<li>equation type names are written among arrows that show the relationship between types</li>`+\r\n\t\t\t\t\t\t`<li>properties of an equation type are listed in the table column below its name</li>`+\r\n\t\t\t\t\t\t`<li>every property of the equation type on the tip of the arrow <span class='arrow'></span> is also true for the equation type on the other end of the arrow (like <a href='https://en.wikipedia.org/wiki/Class_diagram'>class diagram</a>)</li>`+\r\n\t\t\t\t\t`</ul></li>`,\r\n\t\t\t\t\t`<li>all functions have to be continuous on the interval of interest</li>`,\r\n\t\t\t\t\t`<li>\\\\( ${nt.x} \\\\), \\\\( ${nt.y} \\\\) or \\\\( ${nt.w} \\\\) possibly with a subscript is a function of \\\\( t \\\\); other functions are written with an argument like this: \\\\( f(t) \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( C \\\\), \\\\( K \\\\) and other uppercase letters are arbitrary constants</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t + C \\\\) is a family of antiderivatives of \\\\( f(t) \\\\) with parameter \\\\( C \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t \\\\) is any single antiderivative of \\\\( f(t) \\\\)`\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t$tableContainer.empty()\r\n\t\t\tif (Object.keys(selectedNodes).length>0) $tableContainer.append(\r\n\t\t\t\t$(\"<table class='classes'>\").append(\r\n\t\t\t\t\twriteThead(),\r\n\t\t\t\t\twriteTfoot(),\r\n\t\t\t\t\t$(\"<tbody>\").append(\r\n\t\t\t\t\t\t$(\"<tr>\").append( // equations\r\n\t\t\t\t\t\t\ttheadLayout.columns.map(id=>{\r\n\t\t\t\t\t\t\t\tconst $td=$(\"<td>\").append(writeEquation(id))\r\n\t\t\t\t\t\t\t\tconst notes=[]\r\n\t\t\t\t\t\t\t\tif (data.classes[id].equationNotes!==undefined) {\r\n\t\t\t\t\t\t\t\t\tnotes.push(...data.classes[id].equationNotes.map(\r\n\t\t\t\t\t\t\t\t\t\tnoteText=>$(\"<div class='note'>\").append(noteText)\r\n\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconst columnParents=orderedClassSubgraph.visibleParents[id]\r\n\t\t\t\t\t\t\t\tif (columnParents.length>0) {\r\n\t\t\t\t\t\t\t\t\tnotes.push(\r\n\t\t\t\t\t\t\t\t\t\t$(\"<div class='note'>\").append(\r\n\t\t\t\t\t\t\t\t\t\t\t\"can also be written as and has all properties of:\",\r\n\t\t\t\t\t\t\t\t\t\t\t$(\"<ul>\").append(columnParents.map(pid=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst $li=$(\"<li>\").append(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"<em>\"+getHtmlName(pid)+\"</em>\").hover(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$equations[pid].addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$li.addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$li.removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$equations[pid].removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn $li\r\n\t\t\t\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (notes.length>0) {\r\n\t\t\t\t\t\t\t\t\t$td.append($(\"<ul>\").append(notes.map(\r\n\t\t\t\t\t\t\t\t\t\tnote=>$(\"<li>\").append(note)\r\n\t\t\t\t\t\t\t\t\t)))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn $td\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\twriteTraitRows()\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t$tableContainer.append(\r\n\t\t\t\twriteTraitAlignmentControls(),\r\n\t\t\t\twriteDependentVariablesControls(),\r\n\t\t\t\t\"<p>General notes:</p>\",\r\n\t\t\t\twriteGeneralNotes()\r\n\t\t\t)\r\n\t\t\tMathJax.Hub.Queue([\"Typeset\",MathJax.Hub]);\r\n\t\t}\r\n\t\t$container.append(\r\n\t\t\twriteQuickSelectControls(),\r\n\t\t\t$tableContainer=$(\"<div>\")\r\n\t\t)\r\n\t\twriteTable()\r\n\t})\r\n})\r\n","'use strict'\r\n\r\nclass Notation {\r\n\tconstructor(dependentVariables) {\r\n\t\tthis.dependentVariables=dependentVariables // main variable, second variable in 2d system, substitution variable\r\n\t}\r\n\r\n\t// variable names\r\n\tget x() { // main dependent variable\r\n\t\treturn this.dependentVariables.charAt(0)\r\n\t}\r\n\tget X() { // vector of dependent variables\r\n\t\treturn '\\\\mathbf{'+this.dependentVariables.charAt(0).toUpperCase()+'}'\r\n\t}\r\n\tget y() { // second dependent variable for systems of 2 equations\r\n\t\treturn this.dependentVariables.charAt(1)\r\n\t}\r\n\tget w() { // substituted variable\r\n\t\treturn this.dependentVariables.charAt(2)\r\n\t}\r\n\r\n\t// tex shortcuts\r\n\tdd(a,b,n) {\r\n\t\tif (a===undefined) a=''\r\n\t\tif (b===undefined) b='t'\r\n\t\tif (n===undefined) n=1\r\n\t\tif (n==1) {\r\n\t\t\treturn `\\\\frac{\\\\mathrm{d}${a}}{\\\\mathrm{d}${b}}`\r\n\t\t} else {\r\n\t\t\treturn `\\\\frac{\\\\mathrm{d}^{${n}}${a}}{\\\\mathrm{d}${b}^{${n}}}`\r\n\t\t}\r\n\t}\r\n\tget ddt() {\r\n\t\treturn this.dd()\r\n\t}\r\n\tget dxdt() {\r\n\t\treturn this.dd(this.x)\r\n\t}\r\n\tsint(f,t) { // short integral = with no spacing before dt\r\n\t\tif (t===undefined) t='t'\r\n\t\treturn `\\\\int\\\\!${f}\\\\mathrm{d}${t}`\r\n\t}\r\n\tint(f,t) {\r\n\t\treturn this.sint(f+'\\\\,',t)\r\n\t}\r\n\tvec2(a,b) {\r\n\t\treturn `\\\\begin{bmatrix} ${a} \\\\\\\\ ${b} \\\\end{bmatrix}`\r\n\t}\r\n\tsvec2(a,b) {\r\n\t\treturn `\\\\left[ \\\\begin{smallmatrix} ${a} \\\\\\\\ ${b} \\\\end{smallmatrix} \\\\right]`\r\n\t}\r\n\tmat2(a,b,c,d) {\r\n\t\treturn `\\\\begin{bmatrix} ${a} & ${b} \\\\\\\\ ${c} & ${d} \\\\end{bmatrix}`\r\n\t}\r\n}\r\n\r\nmodule.exports=Notation\r\n","'use strict'\r\n\r\n// TODO maybe don't need this class - use iterators on unordered subgraph instead?\r\nclass OrderedClassGraph {\r\n\tconstructor(unorderedClassGraph,orderedClasses) {\r\n\t\tconst ranks={}\r\n\t\torderedClasses.forEach((id,i)=>{\r\n\t\t\tranks[id]=i\r\n\t\t})\r\n\t\tthis.visibleParents={}\r\n\t\tfor (let id in unorderedClassGraph.visibleParents) {\r\n\t\t\tthis.visibleParents[id]=Object.keys(unorderedClassGraph.visibleParents[id]).sort((id1,id2)=>ranks[id1]-ranks[id2])\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=OrderedClassGraph\r\n","'use strict'\r\n\r\nconst makeNodeLabelLayers=require('./thead-layout/node-layers')\r\nconst makeArcLocationLayers=require('./thead-layout/arc-layers')\r\nconst makeLayoutLayers=require('./thead-layout/cell-layers')\r\n\r\nclass TheadLayout {\r\n\tconstructor(unorderedClassGraph) {\r\n\t\tconst orderedVisibleDepthNodes=makeNodeLabelLayers(unorderedClassGraph.visibleParents,unorderedClassGraph.visibleDepthNodes)\r\n\t\tconst arcLocationLayers=makeArcLocationLayers(orderedVisibleDepthNodes,unorderedClassGraph.visibleParents)\r\n\t\tconst t=makeLayoutLayers(orderedVisibleDepthNodes,arcLocationLayers)\r\n\t\tthis.columns=[].concat(...orderedVisibleDepthNodes)\r\n\t\tthis.nodeLayers=t[0]\r\n\t\tthis.arcLayers=t[1]\r\n\t}\r\n}\r\n\r\nmodule.exports=TheadLayout\r\n","'use strict'\r\n\r\nmodule.exports=(depthList,parents)=>{ // TODO would prefer ordered parents list\r\n\tconst merge=(a,b)=>{ // can also use lodash union and sort\r\n\t\tconst c=[]\r\n\t\tlet i=0, j=0\r\n\t\twhile (i<a.length || j<b.length) {\r\n\t\t\tif (j>=b.length) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (i>=a.length) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else if (a[i]<b[j]) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (a[i]>b[j]) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t\tj++\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn c\r\n\t}\r\n\tconst arcRows=[]\r\n\tconst xs={}\r\n\tlet x=0\r\n\tfor (let i=0;i<depthList.length;i++) {\r\n\t\tdepthList[i].forEach(node=>{\r\n\t\t\txs[node]=x++\r\n\t\t})\r\n\t\tif (i>0) {\r\n\t\t\tconst arcs=[]\r\n\t\t\tfor (let j=depthList[i].length-1;j>=0;j--) {\r\n\t\t\t\tconst node=depthList[i][j]\r\n\t\t\t\tconst parentXs=Object.keys(parents[node]).map(parentNode=>xs[parentNode]).sort((a,b)=>a-b)\r\n\t\t\t\tarcs.push([parentXs,[xs[node]]])\r\n\t\t\t}\r\n\t\t\tfor (let j=1;j<arcs.length;j++) {\r\n\t\t\t\tif (String(arcs[j-1][0])===String(arcs[j][0])) { // sloppy but should be ok for numbers\r\n\t\t\t\t\tarcs[j-1][1]=merge(arcs[j-1][1],arcs[j][1]) // merge children - parents already merged\r\n\t\t\t\t\tarcs.splice(j,1)\r\n\t\t\t\t\tj-=1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tarcRows.push(arcs)\r\n\t\t}\r\n\t}\r\n\treturn arcRows\r\n}\r\n","'use strict'\r\n\r\n// TODO fake lodash\r\nconst sum=arr=>arr.reduce((a,b)=>a+b,0)\r\n//const times=(n,fn)=>Array(n).map((v,i)=>fn(i))\r\nconst times=(n,fn)=>{\r\n\tvar arr=Array(n)\r\n\tfor (var i=0;i<n;i++) {\r\n\t\tarr[i]=fn(i)\r\n\t}\r\n\treturn arr\r\n}\r\nconst head=arr=>arr[0]\r\nconst last=arr=>arr[arr.length-1]\r\n\r\nmodule.exports=(nodeLabelLayers,arcLocationLayers)=>{\r\n\tconst layoutWidth=sum(nodeLabelLayers.map(x=>x.length))\r\n\tconst makeBlankRow=()=>times(layoutWidth,()=>({}))\r\n\tconst nodeLayoutLayers=[], arcLayoutLayers=[]\r\n\tconst drawArcUp=(i,j,k)=>{\r\n\t\tfor (;i>=0;i--) {\r\n\t\t\tfor (j-=1;j>=0;j--) {\r\n\t\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t\t}\r\n\t\t\tif (nodeLayoutLayers[i][k].node!==undefined) {\r\n\t\t\t\tnodeLayoutLayers[i][k].b=true\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tnodeLayoutLayers[i][k].bt=true\r\n\t\t\tif (i<=0) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tj=arcLayoutLayers[i-1].length\r\n\t\t}\r\n\t}\r\n\tconst drawArcDown=(i,j,k)=>{\r\n\t\tfor (j+=1;j<arcLayoutLayers[i].length;j++) {\r\n\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t}\r\n\t\tnodeLayoutLayers[i+1][k].t=true\r\n\t}\r\n\t// create empty cells\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tnodeLayoutLayers.push(makeBlankRow())\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tarcLayoutLayers.push(arcLocationLayers[i].map(makeBlankRow))\r\n\t}\r\n\t// fill cells\r\n\tlet x=0\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tnodeLabelLayers[i].forEach(node=>{\r\n\t\t\tnodeLayoutLayers[i][x++].node=node\r\n\t\t})\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tfor (let j=0;j<arcLocationLayers[i].length;j++) {\r\n\t\t\tconst parentLocations=arcLocationLayers[i][j][0]\r\n\t\t\tconst childLocations=arcLocationLayers[i][j][1]\r\n\t\t\tlet pi=0, ci=0\r\n\t\t\tfor (let k=0;k<layoutWidth;k++) {\r\n\t\t\t\tif (k>head(parentLocations) && k<last(childLocations)) {\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rl=true\r\n\t\t\t\t}\r\n\t\t\t\tif (k==parentLocations[pi]) {\r\n\t\t\t\t\tpi++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rt=true\r\n\t\t\t\t\tdrawArcUp(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t\tif (k==childLocations[ci]) {\r\n\t\t\t\t\tci++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].bl=true\r\n\t\t\t\t\tdrawArcDown(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn [nodeLayoutLayers,arcLayoutLayers]\r\n}\r\n","'use strict'\r\n\r\n// dag = {nodeLabel:{parentLabel:true,...},...}\r\n// nodes = {nodeLabel:true,...}\r\nmodule.exports=(visibleParents,visibleDepthNodes)=>{\r\n\t// sort nodes at each depth by\r\n\t//\tlexicographic parent order\r\n\t//\tlabel\r\n\tconst orderedVisibleDepthNodes=[]\r\n\tlet nextParentOrder=0\r\n\tconst parentOrder={}\r\n\tfor (let depth in visibleDepthNodes) {\r\n\t\torderedVisibleDepthNodes[depth]=Object.keys(visibleDepthNodes[depth])\r\n\t\tconst sortedParents={}\r\n\t\tfor (let node in visibleDepthNodes[depth]) {\r\n\t\t\tsortedParents[node]=Object.keys(visibleParents[node]).map(\r\n\t\t\t\tparentNode=>parentOrder[parentNode]\r\n\t\t\t).sort((a,b)=>a-b)\r\n\t\t}\r\n\t\torderedVisibleDepthNodes[depth].sort((node0,node1)=>{\r\n\t\t\tconst p0=sortedParents[node0]\r\n\t\t\tconst p1=sortedParents[node1]\r\n\t\t\tfor (let i=0;i<p0.length||i<p1.length;i++) {\r\n\t\t\t\tconst cmpLen=(i<p0.length)-(i<p1.length)\r\n\t\t\t\tif (cmpLen!=0) {\r\n\t\t\t\t\treturn cmpLen\r\n\t\t\t\t}\r\n\t\t\t\tconst cmpOrd=p0[i]-p1[i]\r\n\t\t\t\tif (cmpOrd!=0) {\r\n\t\t\t\t\treturn cmpOrd\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (node0<node1) {\r\n\t\t\t\treturn -1\r\n\t\t\t} else if (node0>node1) {\r\n\t\t\t\treturn +1\r\n\t\t\t} else {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t})\r\n\t\torderedVisibleDepthNodes[depth].forEach(node=>{\r\n\t\t\tparentOrder[node]=nextParentOrder++\r\n\t\t})\r\n\t}\r\n\treturn orderedVisibleDepthNodes\r\n}\r\n","'use strict'\r\n\r\nclass TrLayout {\r\n\tconstructor(classSubgraph,classData,classColumns) {\r\n\t\tthis.classSubgraph=classSubgraph\r\n\t\tthis.classData=classData\r\n\t\tthis.classColumns=classColumns\r\n\t}\r\n\r\n\t// returns list of cells: list of (class id, trait id)\r\n\t// \tclass id = which class to take property from\r\n\t// returns null if row is to be skipped\r\n\tgetSubtreeLayout(traitSubtree) {\r\n\t\tconst ancestorsHaveIntegratedTrait=(classId,traitId)=>{\r\n\t\t\tconst visited={}\r\n\t\t\tconst walk=classId=>{\r\n\t\t\t\tif (visited[classId]) return false\r\n\t\t\t\tvisited[classId]=true\r\n\t\t\t\tif (getIntegratedClassesForTrait(classId,traitId).length>0) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\tfor (let vpid in this.classSubgraph.visibleParents[classId]) {\r\n\t\t\t\t\tif (walk(vpid)) {\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tfor (let vpid in this.classSubgraph.visibleParents[classId]) {\r\n\t\t\t\tif (walk(vpid)) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tconst getIntegratedClassesForTrait=(classId,traitId)=>{ // TODO memoize?\r\n\t\t\tconst integratedClassIds=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst walk=id=>{\r\n\t\t\t\tif (visited[id]) return\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tconst trait=this.classData[id].traits[traitId]\r\n\t\t\t\tif (trait) {\r\n\t\t\t\t\tif (!trait.close || ancestorsHaveIntegratedTrait(classId,traitId)) {\r\n\t\t\t\t\t\tintegratedClassIds.push(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tObject.keys(this.classSubgraph.integratedAncestors[classId][id]).sort().forEach(walk)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twalk(classId)\r\n\t\t\treturn integratedClassIds\r\n\t\t}\r\n\r\n\t\tconst cells=this.classColumns.map(classId=>{\r\n\t\t\tconst cell=[]\r\n\t\t\tconst walkTraits=(traitSubtree)=>{\r\n\t\t\t\tconst traitId=traitSubtree[0]\r\n\t\t\t\tconst traitChildren=traitSubtree[1]\r\n\t\t\t\tif (traitChildren) {\r\n\t\t\t\t\ttraitChildren.forEach(walkTraits)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgetIntegratedClassesForTrait(classId,traitId).forEach(id=>{\r\n\t\t\t\t\t\tcell.push([id,traitId])\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twalkTraits(traitSubtree)\r\n\t\t\treturn cell\r\n\t\t})\r\n\r\n\t\t// compared traits filtering\r\n\t\tconst keepTraits={}\r\n\t\tcells.forEach(cell=>cell.forEach(classTraitId=>{\r\n\t\t\tconst classId=classTraitId[0]\r\n\t\t\tconst traitId=classTraitId[1]\r\n\t\t\tconst trait=this.classData[classId].traits[traitId]\r\n\t\t\tif (!trait.compare) {\r\n\t\t\t\tkeepTraits[traitId]=true\r\n\t\t\t}\r\n\t\t}))\r\n\t\tfor (let i=0;i<cells.length;i++) {\r\n\t\t\tcells[i]=cells[i].filter(classTraitId=>{\r\n\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\treturn keepTraits[traitId]\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// empty row detection\r\n\t\tif (cells.some(cell=>cell.length>0)) {\r\n\t\t\treturn cells\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TrLayout\r\n","'use strict'\r\n\r\nclass UnorderedClassGraph {\r\n\tconstructor(classData,visibleClasses) {\r\n\t\tconst invertGraph=(graph)=>{\r\n\t\t\tconst igraph={}\r\n\t\t\tfor (let id in graph) {\r\n\t\t\t\tigraph[id]={}\r\n\t\t\t}\r\n\t\t\tfor (let id in graph) {\r\n\t\t\t\tfor (let pid in graph[id]) {\r\n\t\t\t\t\tigraph[pid][id]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn igraph\r\n\t\t}\r\n\r\n\t\t// this.allParents and this.allChildren\r\n\t\tthis.allParents={}\r\n\t\tfor (let id in classData) {\r\n\t\t\tthis.allParents[id]=classData[id].parents\r\n\t\t}\r\n\t\tthis.allChildren=invertGraph(this.allParents)\r\n\r\n\t\t// this.visibleParents, this.visibleChildren, this.visibleDepthNodes\r\n\t\tconst ancestorDistances={} // {node:{ancestorNode:distance,...},...}; node is any node, ancestorNode is one of selectedNodes\r\n\t\tconst addAncestorDistance=(fromNode,toNode,distance)=>{\r\n\t\t\tconst oldDistance=ancestorDistances[fromNode][toNode]\r\n\t\t\tconst newDistance=(oldDistance===undefined\r\n\t\t\t\t? distance\r\n\t\t\t\t: Math.max(distance,oldDistance)\r\n\t\t\t)\r\n\t\t\tancestorDistances[fromNode][toNode]=newDistance\r\n\t\t}\r\n\t\tconst traverseNode=node=>{\r\n\t\t\tif (ancestorDistances[node]) {\r\n\t\t\t\treturn // already visited\r\n\t\t\t}\r\n\t\t\tancestorDistances[node]={}\r\n\t\t\tfor (let parentNode in this.allParents[node]) {\r\n\t\t\t\ttraverseNode(parentNode)\r\n\t\t\t\tif (visibleClasses[parentNode]) {\r\n\t\t\t\t\taddAncestorDistance(node,parentNode,1)\r\n\t\t\t\t}\r\n\t\t\t\tfor (let ancestorNode in ancestorDistances[parentNode]) {\r\n\t\t\t\t\tconst parentDistance=ancestorDistances[parentNode][ancestorNode]\r\n\t\t\t\t\taddAncestorDistance(node,ancestorNode,parentDistance+!!visibleClasses[parentNode])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.visibleDepthNodes=[]\r\n\t\tthis.visibleParents={}\r\n\t\tfor (let node in visibleClasses) {\r\n\t\t\ttraverseNode(node)\r\n\t\t\tlet depth=0\r\n\t\t\tthis.visibleParents[node]={}\r\n\t\t\tfor (let ancestorNode in ancestorDistances[node]) {\r\n\t\t\t\tconst distance=ancestorDistances[node][ancestorNode]\r\n\t\t\t\tif (distance>depth) {\r\n\t\t\t\t\tdepth=distance\r\n\t\t\t\t}\r\n\t\t\t\tif (distance==1) {\r\n\t\t\t\t\tthis.visibleParents[node][ancestorNode]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.visibleDepthNodes[depth]===undefined) {\r\n\t\t\t\tthis.visibleDepthNodes[depth]={}\r\n\t\t\t}\r\n\t\t\tthis.visibleDepthNodes[depth][node]=true\r\n\t\t}\r\n\t\tthis.visibleChildren=invertGraph(this.visibleParents)\r\n\r\n\t\t// this.integratedAncestors = ancestors that are not (visible parents and/or ancestors of visible parents)\r\n\t\tthis.integratedAncestors={}\r\n\t\tfor (let cid in visibleClasses) {\r\n\t\t\tconst masked={}\r\n\t\t\tconst maskAncestors=id=>{\r\n\t\t\t\tif (masked[id]) return\r\n\t\t\t\tmasked[id]=true\r\n\t\t\t\tfor (let pid in this.allParents[id]) {\r\n\t\t\t\t\tmaskAncestors(pid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let pid in this.visibleParents[cid]) {\r\n\t\t\t\tmaskAncestors(pid)\r\n\t\t\t}\r\n\t\t\tthis.integratedAncestors[cid]={}\r\n\t\t\tconst integrateAncestors=id=>{\r\n\t\t\t\tif (this.integratedAncestors[cid][id]) return\r\n\t\t\t\tthis.integratedAncestors[cid][id]={}\r\n\t\t\t\tfor (let pid in this.allParents[id]) {\r\n\t\t\t\t\tif (!masked[pid]) {\r\n\t\t\t\t\t\tthis.integratedAncestors[cid][id][pid]=true\r\n\t\t\t\t\t\tintegrateAncestors(pid)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tintegrateAncestors(cid)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=UnorderedClassGraph\r\n"],"sourceRoot":"."}