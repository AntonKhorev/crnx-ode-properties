{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/crnx-base/details-polyfill.js","crnx-ode-properties.js","node_modules/crnx-build/babel-helpers/arraylike-prototype-includes.es5","node_modules/crnx-build/babel-helpers/math-sign.es5","src/characteristic-equation-content.js","src/data.js","src/data/equations-1st.js","src/data/equations-2nd.js","src/data/equations-nth.js","src/data/systems.js","src/form-rows-output.js","src/lhc-plot.js","src/lhc-plot/canvas.js","src/lhc-plot/closest-point-on-hyperbola.js","src/lhc-plot/matrix.js","src/lhc-plot/phase-canvas.js","src/lhc-plot/trdet-canvas.js","src/linear-constant-equation.js","src/linear-equation-form-suite.js","src/linear-equation.js","src/main.js","src/notation.js","src/o2-linear-constant-equation.js","src/o2-linear-equation-form-suite.js","src/o2-linear-homogeneous-constant-solution.js","src/on-linear-equation-form-suite.js","src/ordered-class-subgraph.js","src/oscillator-linear-equation-form-suite.js","src/tex-depvar.js","src/tex-scalar-depvar.js","src/tex-system-depvar.js","src/tex-system2-depvar.js","src/tex-vector-depvar.js","src/tex-vector2-depvar.js","src/tex.js","src/thead-layout.js","src/thead-layout/arc-layers.js","src/thead-layout/cell-layers.js","src/thead-layout/node-layers.js","src/tr-layout.js","src/trait-rows-output.js","src/unordered-class-subgraph.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","detailsSupported","document","createElement","$details","$","this","on","ev","preventDefault","toggleOpen","attr","removeAttr","trigger","keyCodeEnter","keyCodeSpace","handleEvent","target","closest","is","addClass","children","click","keydown","keyCode",2,"haystack","needle","start","undefined","includes","Array","isArray","indexOf",3,"Math","sign","x","isNaN",4,"tex","_len","arguments","terms","_key","needToCollect","collectedTerms","flipSign","_i","term","push","lambdaPow","order","mapTerms","nt","mapper","_ref","blockSum","concat","apply","map","factor","step1","dd","step2","step3","step4","type","content","34",5,"traits","classes","merge","mergedClasses","id","classId","classData","htmlName","name","traitId","traitData","formType","forms","split","pop","contents","6","7","8","9","characteristicEquationContent","eqsol","o1_linear_generalSolutionMethod_content","isLinear","mvp1","mvp2","mvp3","mvpa","mvpyh","sint","title","dxdt","ddt","int","o1_linearHomogeneous_generalSolutionMethod_content","o1_linearHomogeneous_equilibriumSolutionMethod_content","xMultiplier","o1_linearHomogeneousConstant_generalSolutionMethod_content","xMulSign","xMulValue","o1","parents","importance","equation","o1_separable","generalSolutionMethod","equilibriumSolutionMethod","o1_autonomous","isoclineProperty","shiftSolutionRelation","o1_bernoulli","notes","w","o1_linear","on_linear","associatedHomogeneousEquation","linear_o1_linear","resolved_o1_linear","solutionSpaceBasis","homogeneitySolutionRelation","compare","additivitySolutionRelation","linearCombinationSolutionRelation","affineCombinationSolutionRelation","associatedSolutionRelation","close","o1_linearHomogeneous","on_linearHomogeneous","linear_o1_linearHomogeneous","resolved_o1_linearHomogeneous","o1_separableInT","o1_linearHomogeneousConstant","on_linearHomogeneousConstant","characteristicEquation","linear_o1_linearHomogeneousConstant","resolved_o1_linearHomogeneousConstant","o1_expGrowth","linear_o1_expGrowth","resolved_o1_expGrowth","o1_expDecay","linear_o1_expDecay","resolved_o1_expDecay","halfLife","o1_logisticGrowth","TexScalarDepvar","TexSystem2Depvar","TexVector2Depvar","O2LinearEquationFormSuite","OscillatorLinearEquationFormSuite","LinearEquation","O2LinearConstantEquation","O2LinearHomogeneousConstantSolution","ivp","o2_formSuite","osc_formSuite","osc0_formSuite","harmonicOscillatorType","discriminantRelation","solutionMethodName","o2_harmonicOscillator","getForms","linear_o2_harmonicOscillator","linear","resolved_o2_harmonicOscillator","resolved","system_o2_harmonicOscillator","y","system","vector_o2_harmonicOscillator","X","vector","o2OrderReductionForms","resolvedFormFn","o2","s2","o2_autonomous","s2_autonomous","o2_linear","getAssociatedHomogeneousEquationTrait","linear_o2_linear","getContentFor_generalSolutionMethod","resolved_o2_linear","system_o2_linear","vector_o2_linear","o2_linearHomogeneous","s2_linearHomogeneous","getEquilibriumSolutionMethodTrait","o2_linearConstant","on_linearConstant","linear_o2_linearConstant","_","getSolution","resolved_o2_linearConstant","system_o2_linearConstant","vector_o2_linearConstant","o2_linearHomogeneousConstant","s2_linearHomogeneousConstant","getCharacteristicEquationTrait","linear_o2_linearHomogeneousConstant","resolved_o2_linearHomogeneousConstant","system_o2_linearHomogeneousConstant","vector_o2_linearHomogeneousConstant","o2_underdampedHarmonicOscillator","o2_criticallyDampedHarmonicOscillator","o2_overdampedHarmonicOscillator","o2_simpleHarmonicOscillator","linear_o2_simpleHarmonicOscillator","getSolution_Imaginary","resolved_o2_simpleHarmonicOscillator","system_o2_simpleHarmonicOscillator","vector_o2_simpleHarmonicOscillator","o2_vanDerPol","o2_unforcedDuffing","19","22","23","24","29","31","33","TexSystemDepvar","TexVectorDepvar","OnLinearEquationFormSuite","LinearConstantEquation","on_formSuite","on_linearHomogeneousConstant_generalSolutionMethod_content","form","firstComponentExpressionPreamble","c","firstComponentExpression","x1","restDiffComponentExpressionContent","sn","testSolutionMethod","linear_on_linear","resolved_on_linear","system_on_linear","vector_on_linear","realitySolutionRelation","linear_on_linearHomogeneous","linear_on_linearConstant","resolved_on_linearConstant","system_on_linearConstant","vector_on_linearConstant","linear_on_linearHomogeneousConstant","resolved_on_linearHomogeneousConstant","system_on_linearHomogeneousConstant","vector_on_linearHomogeneousConstant","17","25","30","32","LhcPlot","s2_partlyDecoupled","_contents","ith","choose","g","generalSolutionMethodContents","_choose","dv","cv","_choose2","df","cf","_choose3","ex1","ex2","_choose4","dth","cth","sub","vec2","s2_linearHomogeneousConstant_characteristicEquation","scalar","s2_linearHomogeneousConstant_generalSolutionMethod_content","none","generalSolutionLeadX0","specificSolutionLeadX0","generalAndSpecificSolutionLeadX0","findRealEigenvector","svec2","mat2","findComplexEigenvector","generalRealSolution","eigx1","eigx2","eigy1","eigy2","specificSolution","smat2","xi","xy","s2_partlyDecoupled1","s2_partlyDecoupled2","s2_completelyDecoupled","system_s2_linearHomogeneousConstant","vector_s2_linearHomogeneousConstant","plot","$output","sn_sir","phaseSolutionMethod","11",10,"FormRowsOutput","i18n","orderedClassSubgraph","theadLayout","notation","$classHighlightables","formSelectCallback","___babelHelper___classCallCheck","writeEquations","iColumn","$cell","$classEquations","forEach","formData","append","$equation","add","select","$e","unselect","removeClass","hasClass","noteText","columnParents","visibleParents","pid","$li","hover","$trs","columns","detailsPolyfill","Matrix","TrdetCanvas","PhaseCanvas","xLabel","yLabel","matrix","$numberInputs","$rangeInputs","$equilibriumType","trdetCanvas","phaseCanvas","updateDetails","updateEquilibriumType","getEquilibriumType","D","det","T","tr","ssc","b","text","forUpdated","val","redraw","getCoefInputs","coef","isMatrixElement","valueRange","getRange","initCoefInput","getValue","setValue","$input","checkValidity","value","Number","$div","label","slice","charAt","$number","$range","v","toFixed","setZero","setAssociated","each","buttons","$canvas","width","h","height","trim","tRange","dRange","tClose","dClose","offsetX","d","offsetY","p","abs","setTrdetExternally","14","15","16",12,"Canvas","ctx","getContext","prototype","drawAxes","xAxisSize","yAxisSize","arrowSize","drawAxis","beginPath","moveTo","lineTo","stroke","save","lineWidth","strokeStyle","fillStyle","font","rotate","PI","restore","textBaseline","fillText","textAlign",13,"getClosestPointOnPositiveHyperbolaIn1stQuadrant","C","x0","y0","sqrt","epsilon2","iterationLimit","yx","y1","getClosestPointOnPositiveHyperbola","getClosestPointOnHyperbola","_updated","fn","_computeElementsFromTrdet","_original","_a","_b","_c","_d","_tr","bc","_det","_computeTrdetFromElements","_computeEigenvaluesFromTrdet","discr","root","_re2","_re1","_im1","_im2","_root","re1","re2","im1","im2","_computeTrdetFromEigenvalues","getEigenvector","lambda","getComplexEigenvector","alpha","beta","_setRe","j","_setIm","___babelHelper___createClass","key","get","set","_Canvas","___babelHelper___possibleConstructorReturn","___babelHelper___inherits","xRange","yRange","drawDirectionField","arrowSpacing","arrowLength","arrowWidth","drawArrow","dx","dy","dl","closePath","fill","nx","floor","ny","drawEigenline","otherLambda","iconSize","icon","scale","transform","xic","yic","xis","yis","drawEigenlineIcon","dir","drawDiamond","drawTriangle","ofs","drawSolution","color","max","fnOnFractions","xNum","xDen","yNum","yDen","drawFixedPoint","fixedPointSize","arc","drawSaddleOrNodeSolution","lambda1","lambda2","xy1","xy2","x2","y2","_ref2","_ref3","_ref4","k1","k2","_ref5","_ref6","_ref7","T1","T2","dT1","pow","ke1","exp","ke2","dt","min","_i2","_ke","_ke2","_dt","_t","drawSpiralSolution","xxyy","kxc","kxs","kyc","kys","cos","sin","calculateSemiaxes","A","B","F","DIS","A2","B2","A2B2","R2","t0","log","e0","nSegments","ceil","_i3","_t3","c0","s0","_t2","_i4","_s","dtRad","drawDefectiveSolution","t1","dT","fillRect","translate","crosshairSize","pointerSize","pointerMargin","trRange","detRange","drawRegionAreas","drawRegionLines","drawRegionLinesOnce","all","drawParabola","lineCap","drawPosition","SQRT2","_LinearEquation","particularSolutionCases","_this2","parallelExpression","xp","erfContent","_this3","characteristicPolynomial",18,"LinearEquationFormSuite","makeConstantForm","equationFn","characteristicPolynomialFn","equationCoefs","form1","input","makeForm","_this","isConstant","getClassId","isHomogeneous","classIdPrefix","highestOrderCoefficient","systemFormType","note","trait","homogeneousGeneralSolution","extraSection",20,"UnorderedClassSubgraph","OrderedClassSubgraph","TheadLayout","TrLayout","Notation","data","TraitRowsOutput","strings","trait.entity","trait.associatedHomogeneousEquation","trait.characteristicEquation","trait.halfLife","trait.property","trait.isoclineProperty","trait.solutionRelation","trait.shiftSolutionRelation","trait.linearitySolutionRelation","trait.solutionSpaceBasis","trait.homogeneitySolutionRelation","trait.additivitySolutionRelation","trait.linearCombinationSolutionRelation","trait.affineCombinationSolutionRelation","trait.realitySolutionRelation","trait.associatedSolutionRelation","trait.transform","trait.orderReduction","trait.solutionMethod","trait.generalSolutionMethod","trait.phaseSolutionMethod","trait.equilibriumSolutionMethod","trait.testSolutionMethod","trait.plot","$container","empty","selectedNodes","traitAlignmentLevel","maxTraitAlignmentLevel","dependentVariables","availableDependentVariables","viewDependentVariables","xyw","yvz","unorderedClassSubgraph","trLayout","recomputeLayouts","breadthWalk","graph","result","visited","queue","shift","Object","keys","sort","writeButton","tip","$button","$tableContainer","$quickSelect","$quickSelectButton","updateQuickSelectButton","deleteNode","writeTable","addNode","writeQuickSelectControls","$option","change","_id","visibleAncestors","computeVisibleAncestors","aid","naid","_id2","$attachedMenu","$attachedToButton","attachedDirection","attachTimeoutId","setCellClasses","cell","_arr","writeTheadButton","nodes","keyCodeUp","keyCodeDown","removeAttachedMenu","remove","clearTimeout","startAttachingMenu","$toFocus","prev","focus","_$toFocus","next","setTimeout","mh","outerHeight","mo","offset","bh","bo","top","insertBefore","left","last","first","writeTheadCell","node","ancestors","allParents","reverse","descendants","allChildren","writeThead","$thead","nodeLayers","arcLayers","row","writeTfoot","writeTraitAlignmentControls","_loop","prop","writeDependentVariablesControls","_loop2","dvs","writeGeneralNotes","traitRowsOutput","formRowsOutput","updateForm","MathJax","Hub","Queue","21","26","35","39","40","41","sys2","toUpperCase","_LinearConstantEquati","a0","a1","a2","expr","args","sum","sexpr","_len2","_key2","cosCase","fa","fb","op","expCosCase","frac","_LinearEquationFormSu","b0","b1","initBi","bi","ai","_contents2","_this4","_this5","_this6","_this7","pl","eq","solveIvp","frameSolution","getSolutionCase_Repeated","getSolutionCase_Real","getSolutionCase_Complex","getSolution_Repeated","getSolution_Real","getSolution_Complex","naturalFrequency","getSolutionCase_Imaginary","specificLines","frameSolutionCase","solutionExpVector","solutionCoefMatrix1","solutionCoefMatrix2","solutionFormatting","ivpMatrix","generalLinearSolution","ICLinearSystemSolution","OrderedClassGraph","unorderedClassGraph","orderedClasses","ranks","id1","id2","27","_O2LinearEquationForm","simpleClassId",28,"TexDepvar","matMul","mata","matb","a11","a12","a21","a22","b11","b12","b21","b22","_TexDepvar","subscripts","ii","toString","join","template","replace","exp1","exp2","_matMul$map","c11","c12","systemLineBreak","vectorLineBreak","expInFront","component","componentX","componentY","c21","c22","matrixPrefix","_matMul","vec","mat","v1","v2","lastLineTerms","unshift","_TexVectorDepvar","makeTerms","items","lastFactors","item","isPositive","factors","filter","renderTerms","wrapOp","equalityItems","sumSide","doSumSide","equalityItem","isOne","_terms$","numer","denom","leadNegation","numerTerms","denomTerms","denomFactor","canSimplify","every","newFactors","splice","makeNodeLabelLayers","makeArcLocationLayers","makeLayoutLayers","orderedVisibleDepthNodes","visibleDepthNodes","arcLocationLayers","36","37","38","depthList","arcRows","xs","_node","arcs","parentXs","parentNode","_j","String","arr","reduce","times","head","nodeLabelLayers","layoutWidth","makeBlankRow","nodeLayoutLayers","arcLayoutLayers","drawArcUp","k","bt","drawArcDown","parentLocations","childLocations","pi","ci","rl","rt","bl","nextParentOrder","parentOrder","depth","sortedParents","node0","node1","p0","p1","cmpLen","cmpOrd","classSubgraph","classColumns","getSubtreeLayout","traitSubtree","ancestorsHaveIntegratedTrait","walk","getIntegratedClassesForTrait","vpid","integratedClassIds","integratedAncestors","cells","walkTraits","traitChildren","keepTraits","classTraitId","some","mathjaxDetailsFixAndPolyfill","columnTraitCells","writeTraitItem","forClassId","fromClassId","selectedForm","getTitle","$trait","rec","line","hasSelectedForm","selectedFormType","preferredForm","_arr2","writeTraitCell","traitCell","writeTraitRow","traitCells","cellWriterForForm","traitChild","_columnTraitCells$iCo","$oldCell","$newCell","replaceWith","UnorderedClassGraph","visibleClasses","invertGraph","igraph","ancestorDistances","addAncestorDistance","fromNode","toNode","distance","oldDistance","newDistance","traverseNode","ancestorNode","parentDistance","visibleChildren","cid","masked","maskAncestors","integrateAncestors","_pid"],"mappings":"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","file":"crnx-ode-properties.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nconst detailsSupported=('open' in document.createElement('details')) // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\r\n\r\nmodule.exports=function(){ // to be called in .each()\r\n\tconst $details=$(this)\r\n\t$details.on('click','summary :input, summary a[href]',function(ev){ // firefox lets those events through\r\n\t\tev.preventDefault()\r\n\t})\r\n\tif (detailsSupported) return\r\n\tconst toggleOpen=()=>{\r\n\t\tif (!$details.attr('open')) {\r\n\t\t\t$details.attr('open','')\r\n\t\t} else {\r\n\t\t\t$details.removeAttr('open')\r\n\t\t}\r\n\t\t$details.trigger('toggle') // TODO coalesce toggle events\r\n\t}\r\n\tconst keyCodeEnter=13\r\n\tconst keyCodeSpace=32\r\n\tconst handleEvent=ev=>$(ev.target).closest('summary, :input, a[href]').is('summary') // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\r\n\t$details.addClass('polyfill').children('summary').attr('tabindex',0).click(function(ev){\r\n\t\tif (handleEvent(ev)) {\r\n\t\t\ttoggleOpen()\r\n\t\t}\r\n\t}).keydown(function(ev){\r\n\t\tif (handleEvent(ev) && (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace)) {\r\n\t\t\ttoggleOpen()\r\n\t\t\treturn false\r\n\t\t}\r\n\t})\r\n}\r\n",null,"module.exports = function(haystack){\r\n\treturn function(needle,start){\r\n\t\tif (\r\n\t\t\t(haystack!=null && haystack.includes!==undefined) ||\r\n\t\t\t!((typeof haystack === 'string') || (Array.isArray(haystack)))\r\n\t\t) {\r\n\t\t\treturn haystack.includes(needle,start)\r\n\t\t} else {\r\n\t\t\treturn haystack.indexOf(needle,start) !== -1\r\n\t\t}\r\n\t}\r\n}\r\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\nmodule.exports = Math.sign || function(x){\r\n\tx=+x // convert to a number\r\n\tif (x===0 || isNaN(x)) {\r\n\t\treturn x\r\n\t}\r\n\treturn x>0 ? 1 : -1\r\n}\r\n","'use strict'\r\n\r\nconst tex=require('./tex')\r\n\r\n// TODO incorporate into linear-equation-form-suite.js\r\n\r\n// terms are one of '+', '-', '=', '0', [order,factor]\r\nmodule.exports=(...terms)=>{\r\n\tlet needToCollect=true\r\n\tlet collectedTerms=terms\r\n\tif (terms[terms.length-2]=='=' && terms[terms.length-1]==0) {\r\n\t\tneedToCollect=false\r\n\t} else {\r\n\t\tcollectedTerms=[]\r\n\t\tlet flipSign=false\r\n\t\tfor (let term of terms) {\r\n\t\t\tif (Array.isArray(term)) {\r\n\t\t\t\tcollectedTerms.push(term)\r\n\t\t\t} else if (term=='=') {\r\n\t\t\t\tflipSign=true\r\n\t\t\t\tcollectedTerms.push('-')\r\n\t\t\t} else if (term=='+') {\r\n\t\t\t\tcollectedTerms.push(flipSign?'-':'+')\r\n\t\t\t} else if (term=='-') {\r\n\t\t\t\tcollectedTerms.push(flipSign?'+':'-')\r\n\t\t\t}\r\n\t\t}\r\n\t\tcollectedTerms.push('=','0')\r\n\t}\r\n\tconst lambdaPow=order=>{\r\n\t\tif (order==0) {\r\n\t\t\treturn 1\r\n\t\t} else if (order==1) {\r\n\t\t\treturn `λ`\r\n\t\t} else {\r\n\t\t\treturn `λ^{${order}}`\r\n\t\t}\r\n\t}\r\n\tconst mapTerms=(nt,terms,mapper)=>tex.blockSum([].concat(\r\n\t\t...terms.map(term=>{\r\n\t\t\tif (Array.isArray(term)) {\r\n\t\t\t\tconst [order,factor]=term\r\n\t\t\t\treturn mapper(nt,order,factor)\r\n\t\t\t} else {\r\n\t\t\t\treturn [term]\r\n\t\t\t}\r\n\t\t})\r\n\t))\r\n\tconst step1=(nt,order,factor)=>[factor,nt.dd(nt.x,'t',order)]\r\n\tconst step2=(nt,order,factor)=>[factor,nt.dd('','t',order),'e^{λ t}']\r\n\tconst step3=(nt,order,factor)=>[factor,lambdaPow(order),'e^{λ t}']\r\n\tconst step4=(nt,order,factor)=>[factor,lambdaPow(order)]\r\n\treturn nt=>[\r\n\t\t{type:'derivation',content:[\r\n\t\t\tmapTerms(nt,terms,step1),\r\n\t\t\t`substitute \\\\( ${nt.x} = e^{λ t} \\\\)`,\r\n\t\t\tmapTerms(nt,terms,step2),\r\n\t\t\tmapTerms(nt,terms,step3),\r\n\t\t\t`divide by \\\\( e^{\\\\lambda t} \\\\)`,\r\n\t\t\t...(needToCollect?[\r\n\t\t\t\tmapTerms(nt,terms,step4),\r\n\t\t\t]:[]),\r\n\t\t]},\r\n\t\tmapTerms(nt,collectedTerms,step4),\r\n\t]\r\n}\r\n","'use strict'\r\n\r\nconst traits=[\r\n\t['entity',[\r\n\t\t['associatedHomogeneousEquation'],\r\n\t\t['characteristicEquation'],\r\n\t\t['halfLife'],\r\n\t]],\r\n\t['property',[\r\n\t\t['isoclineProperty'],\r\n\t\t['solutionRelation',[\r\n\t\t\t['shiftSolutionRelation'],\r\n\t\t\t['linearitySolutionRelation',[ // linear and affine properties of solutions\r\n\t\t\t\t['solutionSpaceBasis'],\r\n\t\t\t\t['homogeneitySolutionRelation'],\r\n\t\t\t\t['additivitySolutionRelation'],\r\n\t\t\t\t['linearCombinationSolutionRelation'],\r\n\t\t\t\t['affineCombinationSolutionRelation'],\r\n\t\t\t\t['realitySolutionRelation'],\r\n\t\t\t\t['associatedSolutionRelation'],\r\n\t\t\t]]\r\n\t\t]],\r\n\t]],\r\n\t['transform',[\r\n\t\t['orderReduction'], // TODO remove\r\n\t]],\r\n\t['solutionMethod',[\r\n\t\t['generalSolutionMethod'],\r\n\t\t['phaseSolutionMethod'],\r\n\t\t['equilibriumSolutionMethod'],\r\n\t\t['testSolutionMethod'],\r\n\t]],\r\n\t['plot'],\r\n]\r\n\r\n// class entries:\r\n//\tforms = array of forms\r\n//\ttraits = dictionary of traits\r\n//\t...TODO complete...\r\n// obsolete class entries:\r\n//\tequation = tex equation of primary form\r\n//\tvectorEquation\r\n//\thasForm = use this value as form type instead of class id\r\n\r\n// form entries:\r\n//\tis = comma-separated list of form types (common types are t,x,xy,xi,X,resolved_*,system_*,vector_*)\r\n//\tequation\r\n//\tnotes = (nt => array)\r\n\r\n// trait entries:\r\n//\ttitle = redefine title\r\n//\tformType = preferred form type; defaults to last (most specific) form type of first form; this form type will be used when content is not available for requested form\r\n//\tcontent = contents for preferred form type; used to omit lengthier contents entry\r\n//\tcontents = dictionary of (form type : content)\r\n//\tclose = children don't need to inherit this trait; display it only if parents have it displayed\r\n//\tcompare = show only if other classes have this property without compare entry\r\n// obsolete trait entries:\r\n//\tform = have to present the equation in which this trait was defined\r\n//\t\tif true: form type is equal to class id\r\n//\t\totherwise: object: { formType1:true, formType2:true, ... }; usually lists children forms\r\n\r\nconst classes={}\r\nconst merge=(mergedClasses)=>{\r\n\tfor (let id in mergedClasses) {\r\n\t\tclasses[id]=mergedClasses[id]\r\n\t}\r\n}\r\nmerge(require('./data/equations-1st'))\r\nmerge(require('./data/equations-2nd'))\r\nmerge(require('./data/equations-nth'))\r\nmerge(require('./data/systems'))\r\n\r\n// preprocess data\r\nfor (let classId in classes) {\r\n\tconst classData=classes[classId]\r\n\tif (classData.htmlName===undefined) {\r\n\t\tclassData.htmlName=classData.name\r\n\t}\r\n\tif (classData.traits===undefined) {\r\n\t\tclassData.traits={}\r\n\t}\r\n\tfor (let traitId in classData.traits) {\r\n\t\tconst traitData=classData.traits[traitId]\r\n\t\tif (traitData.formType===undefined) {\r\n\t\t\ttraitData.formType=classData.forms[0].is.split(',').pop()\r\n\t\t}\r\n\t\tif (traitData.contents===undefined && traitData.content!==undefined) {\r\n\t\t\ttraitData.contents={}\r\n\t\t\ttraitData.contents[traitData.formType]=traitData.content\r\n\t\t\tdelete traitData.content\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports={traits,classes}\r\n","'use strict'\r\n\r\nconst characteristicEquationContent=require('../characteristic-equation-content')\r\n\r\nconst eqsol=(name)=>`<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>${name}</a>`\r\n\r\nconst o1_linear_generalSolutionMethod_content=isLinear=>{\r\n\tconst mvp1=isLinear?'+':'='\r\n\tconst mvp2=isLinear?'=':'+'\r\n\tconst mvp3=isLinear?'-':'+'\r\n\tconst mvpa=isLinear?'g':'a'\r\n\tconst mvpyh=nt=>(isLinear?`e^{-${nt.sint('g(t)')}}`:`e^{${nt.sint('a(t)')}}`)\r\n\treturn nt=>[\r\n\t\t{type:'case',title:\"method of <a href='https://en.wikipedia.org/wiki/Integrating_factor'>integrating factors</a>\",content:[\r\n\t\t\t{type:'derivation',content:[\r\n\t\t\t\t...(isLinear?[]:[\r\n\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\]`,\r\n\t\t\t\t\t`introduce a new function`,\r\n\t\t\t\t\t`\\\\[ g(t) = -a(t) \\\\]`,\r\n\t\t\t\t\t`rewrite the equation with \\\\( g(t) \\\\)`,\r\n\t\t\t\t]),\r\n\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = b(t) \\\\]`,\r\n\t\t\t\t`introduce the integrating factor`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) = e^{${nt.sint('g(t)')}} \\\\]`,\r\n\t\t\t\t`multiply the equation by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + \\\\mu(t) g(t) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + e^{${nt.sint('g(t)')}} g(t) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + ${nt.ddt}(e^{${nt.sint('g(t)')}}) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + ${nt.ddt}(\\\\mu(t)) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ ${nt.ddt}(\\\\mu(t) ${nt.x}) = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`integrate the equation multiplied by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.x} = ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t]},\r\n\t\t\t(isLinear\r\n\t\t\t\t?`\\\\[ \\\\mu(t) = e^{${nt.sint('g(t)')}} \\\\]`\r\n\t\t\t\t:`\\\\[ \\\\mu(t) = e^{-${nt.sint('a(t)')}} \\\\]`\r\n\t\t\t),\r\n\t\t\t`\\\\[ \\\\mu(t) ${nt.x} = ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t]},\r\n\t\t{type:'case',title:\"method of <a href='https://en.wikipedia.org/wiki/Variation_of_parameters'>variation of parameters</a>\",content:[\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`mathematically equivalent to the method of integrating factors`,\r\n\t\t\t]},\r\n\t\t\t`find the general solution \\\\( K ${nt.x}_h \\\\) of the associated homogeneous equation`,\r\n\t\t\t`\\\\[ ${nt.x}_h = ${mvpyh(nt)} \\\\]`,\r\n\t\t\t{type:'derivation',title:`find \\\\( ${nt.x} \\\\) as \\\\( ${nt.x}_h \\\\) multiplied by an unknown function`,content:[\r\n\t\t\t\t`\\\\[ ${nt.x} = u(t) ${nt.x}_h \\\\]`,\r\n\t\t\t\t`substitute \\\\( ${nt.x} \\\\) into the original equation`,\r\n\t\t\t\t`\\\\[ ${nt.ddt}(u(t) ${nt.x}_h) ${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h + u(t) ${nt.dd(`${nt.x}_h`)} ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h + u(t) ${nt.ddt}(${mvpyh(nt)}) ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h ${mvp3} u(t) ${mvpa}(t) ${mvpyh(nt)} ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h ${mvp3} u(t) ${mvpa}(t) ${nt.x}_h ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ ${nt.dd('u(t)')} ${nt.x}_h = b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ ${nt.dd('u(t)')} = \\\\frac{b(t)}{${nt.x}_h} \\\\]`,\r\n\t\t\t\t`\\\\[ u(t) = ${nt.int(`\\\\frac{b(t)}{${nt.x}_h}`)} + C \\\\]`,\r\n\t\t\t\t`substitute \\\\( u(t) \\\\) into the expression for \\\\( ${nt.x} \\\\)`,\r\n\t\t\t]},\r\n\t\t\t`\\\\[ ${nt.x} = ${nt.x}_h \\\\left( ${nt.int(`\\\\frac{b(t)}{${nt.x}_h}`)} + C \\\\right) \\\\]`,\r\n\t\t]},\r\n\t\t{type:'case',title:\"<a href='https://en.wikipedia.org/wiki/Method_of_undetermined_coefficients'>method of undetermined coefficients</a>\",content:[\r\n\t\t\t`find the general solution \\\\( K ${nt.x}_h \\\\) of the associated homogeneous equation`,\r\n\t\t\t`\\\\[ ${nt.x}_h = ${mvpyh(nt)} \\\\]`,\r\n\t\t\t{type:'derivation',title:`find a particular solution \\\\( ${nt.x}_p \\\\) of the original equation`,content:[\r\n\t\t\t\t`guess the solution form with coefficients to be solved for`,\r\n\t\t\t\t`solve for coefficients`,\r\n\t\t\t\t{type:'example',content:[\r\n\t\t\t\t\t...(isLinear?[]:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = -2 ${nt.x} + 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t\t`move all terms with \\\\( ${nt.x} \\\\) to one side`,\r\n\t\t\t\t\t]),\r\n\t\t\t\t\t`\\\\[ ${nt.dxdt} + 2 ${nt.x} = 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t`compare the terms and guess the particular solution form`,\r\n\t\t\t\t\t`\\\\[ ${nt.x}_p = \\\\alpha e^{-t/2} \\\\]`,\r\n\t\t\t\t\t`substitute \\\\( ${nt.x}_p \\\\) into the equation`,\r\n\t\t\t\t\t`\\\\[ - \\\\frac{\\\\alpha}{2} e^{-t/2} + 2 \\\\alpha e^{-t/2} = 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t`divide by \\\\( e^{-t/2} \\\\)`,\r\n\t\t\t\t\t`\\\\[ - \\\\frac{\\\\alpha}{2} + 2 \\\\alpha = 3 \\\\]`,\r\n\t\t\t\t\t`solve for \\\\( \\\\alpha \\\\)`,\r\n\t\t\t\t\t`\\\\[ \\\\alpha = 2 \\\\]`,\r\n\t\t\t\t\t`substitute \\\\( \\\\alpha \\\\) into \\\\( ${nt.x}_p \\\\)`,\r\n\t\t\t\t\t`\\\\[ ${nt.x}_p = 2 e^{-t/2} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t\t`\\\\[ ${nt.x} = K ${nt.x}_h + ${nt.x}_p \\\\]`,\r\n\t\t]},\r\n\t]\r\n}\r\n\r\nconst o1_linearHomogeneous_generalSolutionMethod_content=isLinear=>{\r\n\tconst s=isLinear?'-':''\r\n\tconst a=isLinear?'g':'a'\r\n\treturn nt=>[\r\n\t\t{type:'derivation',content:[\r\n\t\t\t`\\\\[ ${nt.dxdt} = ${s}${a}(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = ${s}${a}(t) \\\\]`,\r\n\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${s}${nt.int(`${a}(t)`)} + C \\\\]`,\r\n\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${s}${nt.int(`${a}(t)`)} + C \\\\]`,\r\n\t\t\t`\\\\[ \\\\ln|${nt.x}| = ${s}${nt.int(`${a}(t)`)} + C \\\\]`,\r\n\t\t]},\r\n\t\t`\\\\[ ${nt.x} = K \\\\cdot e^{${s}${nt.sint(`${a}(t)`)}} \\\\]`,\r\n\t\t{type:'note',content:[\r\n\t\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( K = 0 \\\\)`,\r\n\t\t]},\r\n\t]\r\n}\r\n\r\nconst o1_linearHomogeneous_equilibriumSolutionMethod_content=xMultiplier=>nt=>[\r\n\t{type:'switch',title:`\\\\( ${xMultiplier} \\\\) is`,content:[\r\n\t\t{type:'case',title:`\\\\( ${xMultiplier} = 0 \\\\)`,content:[\r\n\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t]},\r\n\t\t{type:'case',title:`\\\\( ${xMultiplier} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t]},\r\n\t]},\r\n]\r\n\r\nconst o1_linearHomogeneousConstant_generalSolutionMethod_content=(xMulSign,xMulValue)=>nt=>[\r\n\t{type:'derivation',content:[\r\n\t\t`\\\\[ ${nt.dxdt} = ${xMulSign}${xMulValue} \\\\cdot ${nt.x} \\\\]`,\r\n\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = ${xMulSign}${xMulValue} \\\\]`,\r\n\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${xMulSign}${nt.int(xMulValue)} + C \\\\]`,\r\n\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${xMulSign}${nt.int(xMulValue)} + C \\\\]`,\r\n\t\t`\\\\[ \\\\ln|${nt.x}| = ${xMulSign}${xMulValue} t + C \\\\]`,\r\n\t\t`\\\\[ ${nt.x}(t) = C_1 e^{${xMulSign}${xMulValue} t} \\\\]`,\r\n\t\t`\\\\[ ${nt.x}(0) = C_1 e^0 \\\\]`,\r\n\t\t`\\\\[ C_1 = ${nt.x}(0) \\\\]`,\r\n\t]},\r\n\t`\\\\[ ${nt.x}(t) = ${nt.x}(0) \\\\cdot e^{${xMulSign}${xMulValue} t} \\\\]`,\r\n\t{type:'note',content:[\r\n\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( ${nt.x}(0) = 0 \\\\)`,\r\n\t]},\r\n]\r\n\r\nmodule.exports={\r\n\to1: {\r\n\t\tparents: {\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"first-order\",\r\n\t\timportance: 0,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f(t,${nt.x})`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\to1_separable: {\r\n\t\tparents: {\r\n\t\t\to1: true,\r\n\t\t},\r\n\t\tname: \"first-order separable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_separable',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f_1(t) \\\\cdot f_2(${nt.x})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f_1(t) \\\\cdot f_2(${nt.x}) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{f_2(${nt.x})} \\\\cdot ${nt.dxdt} = f_1(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f_2(${nt.x})} ${nt.dxdt}`)} = ${nt.int('f_1(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f_2(${nt.x})}`,nt.x)} = ${nt.int('f_1(t)')} + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`solve \\\\( f_2(${nt.x}) = 0 \\\\) for constant \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t\t//`domain is not necessary \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)`\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_autonomous: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t},\r\n\t\tname: \"first-order autonomous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_autonomous',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f(${nt.x})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tisoclineProperty: {\r\n\t\t\t\tformType: 't',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`isoclines are horizontal`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tshiftSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p(t) \\\\) is a solution, then \\\\( ${nt.x}_p(t+C) \\\\) is a solution`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f(${nt.x}) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{f(${nt.x})} \\\\cdot ${nt.dxdt} = 1 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f(${nt.x})} ${nt.dxdt}`)} = ${nt.int(1)} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f(${nt.x})}`,nt.x)} = t + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`solve \\\\( f(${nt.x}) = 0 \\\\) for constant \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t\t//`domain is \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)` // only if f(y) is continuous\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_bernoulli: {\r\n\t\tparents: {\r\n\t\t\to1: true,\r\n\t\t},\r\n\t\tname: \"Bernoulli\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Bernoulli_differential_equation'>Bernoulli</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_bernoulli',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.x}^n`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( n \\\\neq 1 \\\\)`,\r\n\t\t\t\t\t`usually it's also defined that additionally \\\\( n \\\\neq 0 \\\\), but we ignore this requirement here`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.x}^n \\\\]`,\r\n\t\t\t\t\t\t`multiply the equation by \\\\( \\\\frac{1-n}{${nt.x}^n} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\begin{multline} `+\r\n\t\t\t\t\t\t\t`\\\\frac{1-n}{${nt.x}^n} ${nt.dxdt} = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`= \\\\frac{(1-n) a(t)}{${nt.x}^{n-1}} + (1-n) b(t) `+\r\n\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t`introduce a new variable`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.w} = \\\\frac{1}{${nt.x}^{n-1}} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.w)} = ${nt.dd(nt.w,nt.x)} ${nt.dxdt} = \\\\frac{1-n}{${nt.x}^n} ${nt.dxdt} \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.w} \\\\) and \\\\( ${nt.dd(nt.w)} \\\\) into the equation`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.w)} = (1-n) a(t) ${nt.w} + (1-n) b(t) \\\\]`,\r\n\t\t\t\t\t\t`solve this equation as a linear equation in \\\\( ${nt.w} \\\\), then return to the original variable \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.w} = (1-n) ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{(n-1)${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{\\\\mu(t)}{${nt.x}^{n-1}} = (1-n) ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`if \\\\( n>0 \\\\), there's an equilibrium solution \\\\( ${nt.x} = 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linear: {\r\n\t\tparents: {\r\n\t\t\ton_linear: true,\r\n\t\t\to1_bernoulli: true,\r\n\t\t},\r\n\t\tname: \"first-order linear\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_linear',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} + g(t) \\\\cdot ${nt.x} = b(t)`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linear',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t)`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linear: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tresolved_o1_linear: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p \\\\) is a solution`,\r\n\t\t\t\t\t`and \\\\( ${nt.x}_h \\\\) is a nonzero solution of the associated homogeneous equation`,\r\n\t\t\t\t\t`then \\\\( K ${nt.x}_h + ${nt.x}_p \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thomogeneitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\) and \\\\( ${nt.x}_1 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + (1 - K_1) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\tadditivitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 + ${nt.x}_2 - ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\tlinearCombinationSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 + (1 - K_1 - K_2) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t\t{type:'extra',title:'generalizes to \\\\( m+1 \\\\) solutions',content:[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions,`,\r\n\t\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i + (1 - \\\\sum\\\\limits_{i=1}^m K_i) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\taffineCombinationSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\) are solutions`,\r\n\t\t\t\t\t`and \\\\( K_1 + K_2 = 1 \\\\)`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t\t{type:'extra',title:'generalizes to \\\\( m \\\\) solutions',content:[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions`,\r\n\t\t\t\t\t\t`and \\\\( \\\\sum\\\\limits_{i=1}^m K_i = 1 \\\\)`,\r\n\t\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i \\\\) is a solution.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 - ${nt.x}_2 \\\\) is a solution of the associated homogeneous equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linear:   o1_linear_generalSolutionMethod_content(true),\r\n\t\t\t\t\tresolved_o1_linear: o1_linear_generalSolutionMethod_content(false),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tformType: 'resolved_o1_linear',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`Can't find equilibrium solution like in Bernoulli equation because \\\\( n = 0 \\\\).`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ton_linearHomogeneous: true,\r\n\t\t\to1_separable: true,\r\n\t\t\to1_linear: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} + g(t) \\\\cdot ${nt.x} = 0`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = a(t) \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneous: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`The equation is associated with itself.`,\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tresolved_o1_linearHomogeneous: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`The equation is associated with itself.`,\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_h \\\\) is a nonzero solution,`,\r\n\t\t\t\t\t`then \\\\( K ${nt.x}_h \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thomogeneitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) is a solution,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tadditivitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 + ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tlinearCombinationSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t\t{type:'extra',title:'generalizes to \\\\( m \\\\) solutions',content:[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions,`,\r\n\t\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i \\\\) is a solution.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\taffineCombinationSolutionRelation: {\r\n\t\t\t\tformType: 't',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`This is a special case of a linear combination.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneous:   o1_linearHomogeneous_generalSolutionMethod_content(true),\r\n\t\t\t\t\tresolved_o1_linearHomogeneous: o1_linearHomogeneous_generalSolutionMethod_content(false),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneous:   o1_linearHomogeneous_equilibriumSolutionMethod_content('g(t)'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneous: o1_linearHomogeneous_equilibriumSolutionMethod_content('a(t)'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_separableInT: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t\to1_linear: true,\r\n\t\t},\r\n\t\tname: \"first-order separable in independent variable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a> in \\\\(t\\\\)\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_separableInT',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f(t)`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\( ${nt.dxdt} = 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tisoclineProperty: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`isoclines are vertical`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: { // also shiftSolutionRelation\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p \\\\) is a solution`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_p + C \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\( ${nt.x} = C \\\\) is a solution of the associated homogeneous equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(nt.dxdt)} = ${nt.int('f(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.x} = ${nt.int('f(t)')} + C \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`Can't find equilibrium solution like in separable equation because \\\\( f_2(${nt.x}) = 1 \\\\).`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ton_linearHomogeneousConstant: true,\r\n\t\t\to1_autonomous: true,\r\n\t\t\to1_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`a \\\\cdot ${nt.dxdt} + b \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( a \\\\ne 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = k \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneousConstant:   characteristicEquationContent([1,'a'],'+',[0,'b'],'=','0'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneousConstant: characteristicEquationContent([1,1],'=',[0,'k']),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneousConstant:   o1_linearHomogeneousConstant_generalSolutionMethod_content('-','\\\\frac ba'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneousConstant: o1_linearHomogeneousConstant_generalSolutionMethod_content('','k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneousConstant:   o1_linearHomogeneous_equilibriumSolutionMethod_content('b'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneousConstant: o1_linearHomogeneous_equilibriumSolutionMethod_content('k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_expGrowth: {\r\n\t\tparents: {\r\n\t\t\to1_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"exponential (natural) growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Exponential_growth#Differential_equation'>exponential (natural) growth</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_expGrowth',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} - k \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the growth constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linearHomogeneousConstant,resolved_o1_expGrowth',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = k \\\\cdot ${nt.x}`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the growth constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expGrowth:   characteristicEquationContent([1,1],'-',[0,'k'],'=','0'),\r\n\t\t\t\t\tresolved_o1_expGrowth: characteristicEquationContent([1,1],'=',[0,'k']),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expGrowth:   o1_linearHomogeneousConstant_generalSolutionMethod_content('','k'),\r\n\t\t\t\t\tresolved_o1_expGrowth: o1_linearHomogeneousConstant_generalSolutionMethod_content('','k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expGrowth:   o1_linearHomogeneous_equilibriumSolutionMethod_content('k'),\r\n\t\t\t\t\tresolved_o1_expGrowth: o1_linearHomogeneous_equilibriumSolutionMethod_content('k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_expDecay: {\r\n\t\tparents: {\r\n\t\t\to1_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"exponential (natural) decay\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Exponential_decay'>exponential (natural) decay</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o1_expDecay,linear_o1_expDecay',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} + k \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the decay constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o1_expDecay,resolved_o1_expDecay',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = -k \\\\cdot ${nt.x}`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the decay constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expDecay:   characteristicEquationContent([1,1],'+',[0,'k'],'=','0'),\r\n\t\t\t\t\tresolved_o1_expDecay: characteristicEquationContent([1,1],'=',[0,'-k']),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thalfLife: {\r\n\t\t\t\tformType: 'scalar_o1_expDecay',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(t_{1/2}) = \\\\frac 12 \\\\cdot ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t\t`substitute general solution \\\\( ${nt.x}(t) = ${nt.x}(0) e^{-kt} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(0) e^{-kt_{1/2}} = \\\\frac 12 \\\\cdot ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ e^{-kt_{1/2}} = \\\\frac 12 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ -kt_{1/2} = -\\\\ln 2 \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ t_{1/2} = \\\\frac{\\\\ln 2}{k} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expDecay:   o1_linearHomogeneousConstant_generalSolutionMethod_content('-','k'),\r\n\t\t\t\t\tresolved_o1_expDecay: o1_linearHomogeneousConstant_generalSolutionMethod_content('-','k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expDecay:   o1_linearHomogeneous_equilibriumSolutionMethod_content('-k'),\r\n\t\t\t\t\tresolved_o1_expDecay: o1_linearHomogeneous_equilibriumSolutionMethod_content('-k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_logisticGrowth: {\r\n\t\tparents: {\r\n\t\t\to1_autonomous: true,\r\n\t\t\to1_bernoulli: true,\r\n\t\t},\r\n\t\tname: \"logistic growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Logistic_function#In_ecology:_modeling_population_growth'>logistic growth</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,o1_logisticGrowth',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = r \\\\cdot ${nt.x} \\\\cdot \\\\left(1 - \\\\frac{${nt.x}}{k}\\\\right)`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k \\\\) is the <a href='https://en.wikipedia.org/wiki/Carrying_capacity'>carrying capacity</a>`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n}\r\n","'use strict'\r\n\r\nconst TexScalarDepvar=require('../tex-scalar-depvar')\r\nconst TexSystem2Depvar=require('../tex-system2-depvar')\r\nconst TexVector2Depvar=require('../tex-vector2-depvar')\r\nconst O2LinearEquationFormSuite=require('../o2-linear-equation-form-suite')\r\nconst OscillatorLinearEquationFormSuite=require('../oscillator-linear-equation-form-suite')\r\nconst LinearEquation=require('../linear-equation')\r\nconst O2LinearConstantEquation=require('../o2-linear-constant-equation')\r\nconst O2LinearHomogeneousConstantSolution=require('../o2-linear-homogeneous-constant-solution.js')\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nconst o2_formSuite=new O2LinearEquationFormSuite('a_0','a_1','a_2','b_0','b_1')\r\nconst osc_formSuite=new OscillatorLinearEquationFormSuite('k','b','m')\r\nconst osc0_formSuite=new OscillatorLinearEquationFormSuite('k',0,'m')\r\n\r\nconst harmonicOscillatorType=(type,discriminantRelation,solutionMethodName)=>({\r\n\tparents: {\r\n\t\to2_harmonicOscillator: true,\r\n\t},\r\n\tname: `${type} harmonic oscillator`,\r\n\thtmlName: `${type} <a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator'>harmonic oscillator</a>`,\r\n\timportance: 4,\r\n\tforms: osc_formSuite.getForms(true,true,discriminantRelation),\r\n\ttraits: {\r\n\t\tgeneralSolutionMethod: {\r\n\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\tcontents: {\r\n\t\t\t\tlinear_o2_harmonicOscillator:   nt=>new O2LinearHomogeneousConstantSolution(new TexScalarDepvar(nt.x),      osc_formSuite.linear(true)  )[solutionMethodName](true)(nt),\r\n\t\t\t\tresolved_o2_harmonicOscillator: nt=>new O2LinearHomogeneousConstantSolution(new TexScalarDepvar(nt.x),      osc_formSuite.resolved(true))[solutionMethodName](true)(nt),\r\n\t\t\t\tsystem_o2_harmonicOscillator:   nt=>new O2LinearHomogeneousConstantSolution(new TexSystem2Depvar(nt.x,nt.y),osc_formSuite.system(true)  )[solutionMethodName](true)(nt),\r\n\t\t\t\tvector_o2_harmonicOscillator:   nt=>new O2LinearHomogeneousConstantSolution(new TexVector2Depvar(nt.X,nt.x),osc_formSuite.vector(true)  )[solutionMethodName](true)(nt),\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n})\r\n\r\nconst o2OrderReductionForms=(classId,resolvedFormFn)=>[ // resolvedFormFn: (x,y)=>`...`\r\n\t{\r\n\t\tis: `t,x,resolved_${classId}`,\r\n\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = `+resolvedFormFn(nt.x,nt.dxdt),\r\n\t},\r\n\t{\r\n\t\tis: 't,xy,system_${classId}',\r\n\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t`${nt.dd(nt.y)} &= `+resolvedFormFn(nt.x,nt.y)+` `+\r\n\t\t`\\\\end{aligned} \\\\right.`,\r\n\t},\r\n]\r\n\r\nmodule.exports={\r\n\to2: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"second-order\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o2',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = f(t,${nt.x},${nt.dxdt})`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= f(t,${nt.x},${nt.y}) `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\to2_autonomous: {\r\n\t\tparents: {\r\n\t\t\to2: true,\r\n\t\t\ts2_autonomous: true,\r\n\t\t},\r\n\t\tname: \"second-order autonomous\",\r\n\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o2_autonomous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = f(${nt.x},${nt.dxdt})`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_autonomous',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= f(${nt.x},${nt.y}) `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\to2_linear: {\r\n\t\tparents: {\r\n\t\t\ton_linear: true,\r\n\t\t\to2: true,\r\n\t\t},\r\n\t\tname: \"second-order linear\",\r\n\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: o2_formSuite.getForms(false,false),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: o2_formSuite.getAssociatedHomogeneousEquationTrait(false,false),\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linear:   nt=>new LinearEquation(new TexScalarDepvar(nt.x)      ,'f',o2_formSuite.linear(false)  ).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t\tresolved_o2_linear: nt=>new LinearEquation(new TexScalarDepvar(nt.x)      ,'g',o2_formSuite.resolved(false)).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t\tsystem_o2_linear:   nt=>new LinearEquation(new TexSystem2Depvar(nt.x,nt.y),'g',o2_formSuite.system(false)  ).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t\tvector_o2_linear:   nt=>new LinearEquation(new TexVector2Depvar(nt.X,nt.x),'g',o2_formSuite.vector(false)  ).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ts2_linearHomogeneous: true,\r\n\t\t\ton_linearHomogeneous: true,\r\n\t\t\to2_linear: true,\r\n\t\t},\r\n\t\tname: \"second-order linear homogeneous\",\r\n\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: o2_formSuite.getForms(false,true),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: o2_formSuite.getAssociatedHomogeneousEquationTrait(false,true),\r\n\t\t\t// TODO realitySolutionRelation, maybe not worth it\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tclose: true, // because parent doesn't specify how to solve associated eqn\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: o2_formSuite.getEquilibriumSolutionMethodTrait(false),\r\n\t\t},\r\n\t},\r\n\to2_linearConstant: {\r\n\t\tparents: {\r\n\t\t\ton_linearConstant: true,\r\n\t\t\to2_linear: true,\r\n\t\t},\r\n\t\tname: \"second-order linear with constant coefficients\",\r\n\t\timportance: 2,\r\n\t\tforms: o2_formSuite.getForms(true,false),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: o2_formSuite.getAssociatedHomogeneousEquationTrait(true,false),\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linearConstant: nt=>new O2LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexScalarDepvar(nt.x),'f',o2_formSuite.linear(true)\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\tnew O2LinearHomogeneousConstantSolution(\r\n\t\t\t\t\t\t\tnew TexScalarDepvar(nt.x)._('h'),\r\n\t\t\t\t\t\t\to2_formSuite.linear(true)\r\n\t\t\t\t\t\t).getSolution(false)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tresolved_o2_linearConstant: nt=>new O2LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexScalarDepvar(nt.x),'g',o2_formSuite.resolved(true)\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\tnew O2LinearHomogeneousConstantSolution(\r\n\t\t\t\t\t\t\tnew TexScalarDepvar(nt.x)._('h'),\r\n\t\t\t\t\t\t\to2_formSuite.resolved(true)\r\n\t\t\t\t\t\t).getSolution(false)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tsystem_o2_linearConstant: nt=>new O2LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexSystem2Depvar(nt.x,nt.y),'g',o2_formSuite.system(true)\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\tnew O2LinearHomogeneousConstantSolution(\r\n\t\t\t\t\t\t\tnew TexSystem2Depvar(nt.x,nt.y)._('h'),\r\n\t\t\t\t\t\t\to2_formSuite.system(true)\r\n\t\t\t\t\t\t).getSolution(false)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tvector_o2_linearConstant: nt=>new O2LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexVector2Depvar(nt.X,nt.x),'g',o2_formSuite.vector(true)\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\tnew O2LinearHomogeneousConstantSolution(\r\n\t\t\t\t\t\t\tnew TexVector2Depvar(nt.X,nt.x)._('h'),\r\n\t\t\t\t\t\t\to2_formSuite.vector(true)\r\n\t\t\t\t\t\t).getSolution(false)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ts2_linearHomogeneousConstant: true,\r\n\t\t\ton_linearHomogeneousConstant: true,\r\n\t\t\to2_autonomous: true,\r\n\t\t\to2_linearHomogeneous: true,\r\n\t\t\to2_linearConstant: true,\r\n\t\t},\r\n\t\tname: \"second-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: o2_formSuite.getForms(true,true),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: o2_formSuite.getAssociatedHomogeneousEquationTrait(true,true),\r\n\t\t\tcharacteristicEquation: o2_formSuite.getCharacteristicEquationTrait(),\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linearHomogeneousConstant:   nt=>new O2LinearHomogeneousConstantSolution(new TexScalarDepvar(nt.x),      o2_formSuite.linear(true)  ).getSolution(true)(nt),\r\n\t\t\t\t\tresolved_o2_linearHomogeneousConstant: nt=>new O2LinearHomogeneousConstantSolution(new TexScalarDepvar(nt.x),      o2_formSuite.resolved(true)).getSolution(true)(nt),\r\n\t\t\t\t\tsystem_o2_linearHomogeneousConstant:   nt=>new O2LinearHomogeneousConstantSolution(new TexSystem2Depvar(nt.x,nt.y),o2_formSuite.system(true)  ).getSolution(true)(nt),\r\n\t\t\t\t\tvector_o2_linearHomogeneousConstant:   nt=>new O2LinearHomogeneousConstantSolution(new TexVector2Depvar(nt.X,nt.x),o2_formSuite.vector(true)  ).getSolution(true)(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: o2_formSuite.getEquilibriumSolutionMethodTrait(true),\r\n\t\t},\r\n\t},\r\n\to2_harmonicOscillator: {\r\n\t\tparents: {\r\n\t\t\to2_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"harmonic oscillator\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator'>harmonic oscillator</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: osc_formSuite.getForms(true,true),\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: osc_formSuite.getCharacteristicEquationTrait(),\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_harmonicOscillator:   nt=>new O2LinearHomogeneousConstantSolution(new TexScalarDepvar(nt.x),      osc_formSuite.linear(true)  ).getSolution(true)(nt),\r\n\t\t\t\t\tresolved_o2_harmonicOscillator: nt=>new O2LinearHomogeneousConstantSolution(new TexScalarDepvar(nt.x),      osc_formSuite.resolved(true)).getSolution(true)(nt),\r\n\t\t\t\t\tsystem_o2_harmonicOscillator:   nt=>new O2LinearHomogeneousConstantSolution(new TexSystem2Depvar(nt.x,nt.y),osc_formSuite.system(true)  ).getSolution(true)(nt),\r\n\t\t\t\t\tvector_o2_harmonicOscillator:   nt=>new O2LinearHomogeneousConstantSolution(new TexVector2Depvar(nt.X,nt.x),osc_formSuite.vector(true)  ).getSolution(true)(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: osc_formSuite.getEquilibriumSolutionMethodTrait(true),\r\n\t\t},\r\n\t},\r\n\to2_underdampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\"underdamped\",\r\n\t\t\"&lt;\",\r\n\t\t'getSolution_Complex'\r\n\t),\r\n\to2_criticallyDampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\"critically damped\",\r\n\t\t\"=\",\r\n\t\t'getSolution_Repeated'\r\n\t),\r\n\to2_overdampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\"overdamped\",\r\n\t\t\">\",\r\n\t\t'getSolution_Real'\r\n\t),\r\n\to2_simpleHarmonicOscillator: {\r\n\t\tparents: {\r\n\t\t\to2_underdampedHarmonicOscillator: true,\r\n\t\t},\r\n\t\tname: \"simple (undamped) harmonic oscillator\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Simple_harmonic_oscillator'>simple (undamped) harmonic oscillator</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: osc0_formSuite.getForms(true,true),\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: osc0_formSuite.getCharacteristicEquationTrait(),\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_simpleHarmonicOscillator:   nt=>new O2LinearHomogeneousConstantSolution(new TexScalarDepvar(nt.x),      osc0_formSuite.linear(true)  ).getSolution_Imaginary(true)(nt),\r\n\t\t\t\t\tresolved_o2_simpleHarmonicOscillator: nt=>new O2LinearHomogeneousConstantSolution(new TexScalarDepvar(nt.x),      osc0_formSuite.resolved(true)).getSolution_Imaginary(true)(nt),\r\n\t\t\t\t\tsystem_o2_simpleHarmonicOscillator:   nt=>new O2LinearHomogeneousConstantSolution(new TexSystem2Depvar(nt.x,nt.y),osc0_formSuite.system(true)  ).getSolution_Imaginary(true)(nt),\r\n\t\t\t\t\tvector_o2_simpleHarmonicOscillator:   nt=>new O2LinearHomogeneousConstantSolution(new TexVector2Depvar(nt.X,nt.x),osc0_formSuite.vector(true)  ).getSolution_Imaginary(true)(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_vanDerPol: {\r\n\t\tparents: {\r\n\t\t\to2_autonomous: true,\r\n\t\t},\r\n\t\tname: \"Van der Pol\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Van_der_Pol_oscillator'>Van der Pol</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: o2OrderReductionForms('o2_vanDerPol',(x,y)=>`\\\\mu(1-${x}^2)${y} - ${x}`),\r\n\t},\r\n\to2_unforcedDuffing: {\r\n\t\tparents: {\r\n\t\t\to2_autonomous: true,\r\n\t\t},\r\n\t\tname: \"unforced Duffing\",\r\n\t\thtmlName: \"unforced <a href='https://en.wikipedia.org/wiki/Duffing_equation'>Duffing</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: o2OrderReductionForms('o2_unforcedDuffing',(x,y)=>`- \\\\delta ${y} - \\\\alpha ${x} - \\\\beta ${x}^3`),\r\n\t},\r\n}\r\n","'use strict'\r\n\r\nconst TexScalarDepvar=require('../tex-scalar-depvar')\r\nconst TexSystemDepvar=require('../tex-system-depvar')\r\nconst TexVectorDepvar=require('../tex-vector-depvar')\r\nconst OnLinearEquationFormSuite=require('../on-linear-equation-form-suite')\r\nconst LinearEquation=require('../linear-equation')\r\nconst LinearConstantEquation=require('../linear-constant-equation')\r\n\r\nconst on_formSuite=new OnLinearEquationFormSuite\r\n\r\nconst on_linearHomogeneousConstant_generalSolutionMethod_content=(x,form)=>nt=>[\r\n\t`solve the characteristic equation for \\\\( λ \\\\):`,\r\n\t`\\\\[ ${form.characteristicEquation(nt)} \\\\]`,\r\n\t`\\\\( λ \\\\) are:`,\r\n\t`\\\\( r \\\\) distinct real roots \\\\( λ_1, ..., λ_r \\\\) with multiplicities \\\\( p_1, ..., p_r \\\\)`,\r\n\t`\\\\( s \\\\) distinct complex conjugate root pairs \\\\( α_1 \\\\pm i β_1, ..., α_s \\\\pm i β_s \\\\) with multiplicities \\\\( q_1, ..., q_s \\\\)`,\r\n\t{type:'note',content:[\r\n\t\t`sum of multiplicities is equal to order of the equation:`,\r\n\t\t`\\\\[ \\\\sum_{i=1}^r p_i + 2 \\\\cdot \\\\sum_{i=1}^s q_i = n \\\\]`,\r\n\t]},\r\n\tx.firstComponentExpressionPreamble(\r\n\t\tc=>`${c}general solution (with arbitrary constants \\\\( K_{ij} \\\\), \\\\( A_{ij} \\\\), \\\\( B_{ij} \\\\)):`\r\n\t),\r\n\tx.firstComponentExpression(\r\n\t\tx1=>`\\\\[ \\\\begin{aligned}`+\r\n\t\t\t`${x1}`+\r\n\t\t\t` = \\\\: & \\\\sum_{i=1}^r \\\\sum_{j=1}^{p_i} K_{ij} \\\\, t^{j-1} \\\\, e^{λ_i t} + \\\\\\\\`+\r\n\t\t\t` + \\\\: & \\\\sum_{i=1}^s \\\\sum_{j=1}^{q_i} A_{ij} \\\\, t^{j-1} \\\\, e^{α_i t} \\\\, \\\\cos β_i t \\\\\\\\`+\r\n\t\t\t` + \\\\: & \\\\sum_{i=1}^s \\\\sum_{j=1}^{q_i} B_{ij} \\\\, t^{j-1} \\\\, e^{α_i t} \\\\, \\\\sin β_i t`+\r\n\t\t`\\\\end{aligned} \\\\]`\r\n\t),\r\n\t...x.restDiffComponentExpressionContent()(nt),\r\n]\r\n\r\nmodule.exports={\r\n\ton: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"nth-order\",\r\n\t\thtmlName: \"<em>n</em>th-order\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_on',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t','n')} = f(t,${nt.x},${nt.dxdt},\\\\dotsc,${nt.dd(nt.x,'t','n-1')})`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xi,system_on',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_1`)} &=& ${nt.x}_2 \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_2`)} &=& ${nt.x}_3 \\\\\\\\`+\r\n\t\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_{n-1}`)} &=& ${nt.x}_n \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_n`)} &=& f_n(t,${nt.x}_1,\\\\dotsc,${nt.x}_n)`+\r\n\t\t\t\t`\\\\end{array} \\\\right.`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`Can test if \\\\( ${nt.x}_p \\\\) is a solution by substituting \\\\( ${nt.x} = ${nt.x}_p \\\\) into the equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\ton_linear: {\r\n\t\tparents: {\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: on_formSuite.getForms(false,false),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: on_formSuite.getAssociatedHomogeneousEquationTrait(false,false),\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linear:   nt=>new LinearEquation(new TexScalarDepvar(nt.x)     ,'f',on_formSuite.linear(false)  ).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t\tresolved_on_linear: nt=>new LinearEquation(new TexScalarDepvar(nt.x)     ,'g',on_formSuite.resolved(false)).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t\tsystem_on_linear:   nt=>new LinearEquation(new TexSystemDepvar(nt.x)     ,'g',on_formSuite.system(false)  ).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t\tvector_on_linear:   nt=>new LinearEquation(new TexVectorDepvar(nt.X,nt.x),'g',on_formSuite.vector(false)  ).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ton_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ton_linear: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear homogeneous\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>linear homogeneous</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: on_formSuite.getForms(false,true),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: on_formSuite.getAssociatedHomogeneousEquationTrait(false,true),\r\n\t\t\trealitySolutionRelation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linearHomogeneous: nt=>[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_1 + i ${nt.x}_2 \\\\) is a (complex-valued) solution,`,\r\n\t\t\t\t\t\t`then \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions.`,\r\n\t\t\t\t\t\t{type:'proof',content:[\r\n\t\t\t\t\t\t\t`substitute \\\\( ${nt.x} = ${nt.x}_1 + i ${nt.x}_2 \\\\) into the equation`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\sum_{j=0}^n a_j(t) ${nt.dd('','t','j')}(${nt.x}_1 + i ${nt.x}_2) = 0 \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t       `&\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_1`,'t','j')} + {} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`{} + i &\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_2`,'t','j')} = 0 `+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t`\\\\operatorname{Re}\\\\Biggl( &\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_1`,'t','j')} + {} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t                    `{} + i &\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_2`,'t','j')} \\\\Biggr) = 0 \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`\\\\operatorname{Im}\\\\Biggl( &\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_1`,'t','j')} + {} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t                    `{} + i &\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_2`,'t','j')} \\\\Biggr) = 0 `+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t`\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_1`,'t','j')} = 0 \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_2`,'t','j')} = 0 `+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tclose: true, // because parent doesn't specify how to solve associated eqn\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: on_formSuite.getEquilibriumSolutionMethodTrait(false),\r\n\t\t},\r\n\t},\r\n\ton_linearConstant: {\r\n\t\tparents: {\r\n\t\t\ton_linear: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear with constant coefficients\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Nonhomogeneous_equation_with_constant_coefficients'>linear with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: on_formSuite.getForms(true,false),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: on_formSuite.getAssociatedHomogeneousEquationTrait(true,false),\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linearConstant: nt=>new LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexScalarDepvar(nt.x),'f',on_formSuite.linear(true)\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\ton_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\t\tnew TexScalarDepvar(nt.x)._('h'),\r\n\t\t\t\t\t\t\ton_formSuite.linear(true)\r\n\t\t\t\t\t\t)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tresolved_on_linearConstant: nt=>new LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexScalarDepvar(nt.x),'g',on_formSuite.resolved(true)\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\ton_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\t\tnew TexScalarDepvar(nt.x)._('h'),\r\n\t\t\t\t\t\t\ton_formSuite.resolved(true)\r\n\t\t\t\t\t\t)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tsystem_on_linearConstant: nt=>new LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexSystemDepvar(nt.x),'g',on_formSuite.system(true)\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\ton_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\t\tnew TexSystemDepvar(nt.x)._('h'),\r\n\t\t\t\t\t\t\ton_formSuite.system(true)\r\n\t\t\t\t\t\t)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tvector_on_linearConstant: nt=>new LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexVectorDepvar(nt.X,nt.x),'g',on_formSuite.vector(true)\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\ton_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\t\tnew TexVectorDepvar(nt.X,nt.x)._('h'),\r\n\t\t\t\t\t\t\ton_formSuite.vector(true)\r\n\t\t\t\t\t\t)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ton_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ton_linearHomogeneous: true,\r\n\t\t\ton_linearConstant: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: on_formSuite.getForms(true,true),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: on_formSuite.getAssociatedHomogeneousEquationTrait(true,true),\r\n\t\t\tcharacteristicEquation: on_formSuite.getCharacteristicEquationTrait(),\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linearHomogeneousConstant: nt=>on_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\tnew TexScalarDepvar(nt.x),\r\n\t\t\t\t\t\ton_formSuite.linear(true)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tresolved_on_linearHomogeneousConstant: nt=>on_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\tnew TexScalarDepvar(nt.x),\r\n\t\t\t\t\t\ton_formSuite.resolved(true)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tsystem_on_linearHomogeneousConstant: nt=>on_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\tnew TexSystemDepvar(nt.x),\r\n\t\t\t\t\t\ton_formSuite.system(true)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tvector_on_linearHomogeneousConstant: nt=>on_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\tnew TexVectorDepvar(nt.X,nt.x),\r\n\t\t\t\t\t\ton_formSuite.vector(true)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: on_formSuite.getEquilibriumSolutionMethodTrait(true),\r\n\t\t},\r\n\t},\r\n}\r\n","'use strict'\r\n\r\nconst LhcPlot=require('../lhc-plot')\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nconst s2_partlyDecoupled=(i)=>{\r\n\tconst ith=[,\"1st\",\"2nd\"][i]\r\n\tconst choose=[,(x,y)=>[x,y],(x,y)=>[y,x]][i]\r\n\tconst f=(x,y)=>\"f(t,\"+[,x,x+','+y][i]+\")\"\r\n\tconst g=(x,y)=>\"g(t,\"+[,x+','+y,y][i]+\")\"\r\n\tconst generalSolutionMethodContents=(nt,x,y)=>{\r\n\t\tconst [dv,cv]=choose(x,y) // decoupled/coupled variable/function\r\n\t\tconst [df,cf]=choose('f','g')\r\n\t\tconst [ex1,ex2]=choose(dv,`2 ${dv} - ${cv}`)\r\n\t\tconst [dth,cth]=choose(\"first\",\"second\")\r\n\t\treturn [\r\n\t\t\t`Solve \\\\(${nt.dd(dv)} = ${df}(t,${dv}) \\\\).`,\r\n\t\t\t`Substitute \\\\( ${dv} \\\\) into \\\\( ${nt.dd(cv)} = ${cf}(t,${x},${y}) \\\\).`,\r\n\t\t\t{type:'example',content:[\r\n\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(x)} &= ${ex1} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(y)} &= ${ex2}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t`solve the ${dth} equation`,\r\n\t\t\t\t`\\\\[ ${dv} = ${nt.sub(dv,'0')} e^t \\\\]`,\r\n\t\t\t\t`substitute \\\\( ${dv} \\\\) into the ${cth} equation`,\r\n\t\t\t\t`\\\\[ ${nt.dd(cv)} = 2 ${nt.sub(dv,'0')} e^t - ${cv} \\\\]`,\r\n\t\t\t\t{type:'derivation',title:`solve the ${cth} equation`,content:[\r\n\t\t\t\t\t`solve the associated homogeneous equation \\\\( ${nt.dd(cv)} = - ${cv} \\\\)`,\r\n\t\t\t\t\t`\\\\[ ${nt.sub(cv,'h')} = K e^{-t} \\\\]`,\r\n\t\t\t\t\t{type:'derivation',title:`find a particular solution of \\\\( ${nt.dd(nt.sub(cv,'p'))} + ${nt.sub(cv,'p')} = 2 ${nt.sub(dv,'0')} e^t \\\\)`,content:[\r\n\t\t\t\t\t\t`guess a solution`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.sub(cv,'p')} = \\\\alpha e^t \\\\]`,\r\n\t\t\t\t\t\t`substitute the guess into the equation`,\r\n\t\t\t\t\t\t`\\\\[ \\\\alpha e^t + \\\\alpha e^t = 2 ${nt.sub(dv,'0')} e^t \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\alpha = ${nt.sub(dv,'0')} \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.sub(cv,'p')} = ${nt.sub(dv,'0')} e^t \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${cv} = ${nt.sub(cv,'p')} + ${nt.sub(cv,'h')} \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${cv} = ${nt.sub(dv,'0')} e^t + K e^{-t} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t`\\\\[ ${cv} = ${nt.sub(dv,'0')} e^t + (${nt.sub(cv,'0')} - ${nt.sub(dv,'0')}) e^{-t} \\\\]`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\treturn {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: `system of 2 first-order with ${ith} variable decoupled`, // partially decoupled\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: `t,xy,system_s2_partlyDecoupled${i}`,\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${f(nt.x,nt.y)} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= ${g(nt.x,nt.y)}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,X,vector_s2_partlyDecoupled${i}`,\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = ${nt.ddt}`+nt.vec2(`${nt.x}_1`,`${nt.x}_2`)+` = `+nt.vec2(f(`${nt.x}_1`,`${nt.x}_2`),g(`${nt.x}_1`,`${nt.x}_2`)),\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\t[`system_s2_partlyDecoupled${i}`]: nt=>generalSolutionMethodContents(nt,nt.x,nt.y),\r\n\t\t\t\t\t[`vector_s2_partlyDecoupled${i}`]: nt=>generalSolutionMethodContents(nt,`${nt.x}_1`,`${nt.x}_2`),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n}\r\n\r\nconst s2_linearHomogeneousConstant_characteristicEquation=scalar=>(scalar\r\n\t? `\\\\[ \\\\lambda^2 - (a+d)\\\\lambda + ad - bc = 0 \\\\]`\r\n\t: `\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]`\r\n)\r\nconst s2_linearHomogeneousConstant_generalSolutionMethod_content=scalar=>nt=>{\r\n\tconst none=s=>(s==1 ? '' : s)\r\n\tconst generalSolutionLeadX0=`general solution (with arbitrary `+(scalar?`constants \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.y}_0 \\\\)`:`constant \\\\( ${nt.X}_0 \\\\)`)+`):`\r\n\tconst specificSolutionLeadX0=(scalar?`constants`:`constant`)+` value for ${ivp} solution: `+(scalar?`\\\\( ${nt.x}_0 = ${nt.x}(0) \\\\), \\\\( ${nt.y}_0 = ${nt.y}(0) \\\\)`:`\\\\( ${nt.X}_0 = ${nt.X}(0) \\\\)`)\r\n\tconst generalAndSpecificSolutionLeadX0=`general and ${ivp} solution (with arbitrary `+(scalar?`constants \\\\( ${nt.x}(0) \\\\), \\\\( ${nt.y}(0) \\\\)`:`constant \\\\( ${nt.X}(0) \\\\)`)+`):`\r\n\tconst findRealEigenvector=i=>[\r\n\t\t`find eigenvector \\\\( ${nt.svec2(`${nt.x}_${i}`,`${nt.y}_${i}`)} \\\\) by solving:`,\r\n\t\t(scalar\r\n\t\t\t? `\\\\[ ${nt.mat2(`a-\\\\lambda_${i}`,`b`,`c`,`d-\\\\lambda_${i}`)} ${nt.vec2(`${nt.x}_${i}`,`${nt.y}_${i}`)} = \\\\mathbf{0} \\\\]`\r\n\t\t\t: `\\\\[ (\\\\mathbf{A} - \\\\lambda_${i} \\\\mathbf{I}) ${nt.vec2(`${nt.x}_${i}`,`${nt.y}_${i}`)} = \\\\mathbf{0} \\\\]`\r\n\t\t),\r\n\t]\r\n\tconst findComplexEigenvector=()=>[\r\n\t\t`find complex-valued eigenvector \\\\( ${nt.svec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} \\\\) by solving:`,\r\n\t\t(scalar\r\n\t\t\t? `\\\\[ ${nt.mat2(`a-\\\\lambda_1`,`b`,`c`,`d-\\\\lambda_1`)} ${nt.vec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} = 0 \\\\]`\r\n\t\t\t: `\\\\[ (\\\\mathbf{A} - \\\\lambda_1 \\\\mathbf{I}) ${nt.vec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} = 0 \\\\]`\r\n\t\t),\r\n\t]\r\n\tconst generalRealSolution=(eigx1,eigx2,eigy1,eigy2)=>[\r\n\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t(scalar\r\n\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.x} &= k_1 ${none(eigx1)} e^{\\\\lambda_1 t} + k_2 ${none(eigx2)} e^{\\\\lambda_2 t} \\\\\\\\`+\r\n\t\t\t\t`${nt.y} &= k_1 ${none(eigy1)} e^{\\\\lambda_1 t} + k_2 ${none(eigy2)} e^{\\\\lambda_2 t}`+\r\n\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t: `\\\\[ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.X} &= k_1 e^{\\\\lambda_1 t} ${nt.vec2(eigx1,eigy1)} + k_2 e^{\\\\lambda_2 t} ${nt.vec2(eigx2,eigy2)} \\\\\\\\`+\r\n\t\t\t\t       ` &= ${nt.mat2(eigx1,eigx2,eigy1,eigy2)} ${nt.vec2(`k_1 e^{\\\\lambda_1 t}`,`k_2 e^{\\\\lambda_2 t}`)}`+\r\n\t\t\t`\\\\end{aligned} \\\\]`\r\n\t\t),\r\n\t]\r\n\tconst specificSolution=(eigx1,eigx2,eigy1,eigy2)=>[\r\n\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t`\\\\[ ${nt.mat2(eigx1,eigx2,eigy1,eigy2)} ${nt.vec2('k_1','k_2')} = `+(scalar?`${nt.vec2(`${nt.x}(0)`,`${nt.y}(0)`)}`:`${nt.X}(0)`)+` \\\\]`,\r\n\t]\r\n\treturn [\r\n\t\t{type:'switch',title:(scalar?`coefficients satisfy conditions`:`matrix \\\\( \\\\mathbf{A} \\\\) has a form`),content:[\r\n\t\t\t{type:'case',title:(scalar?`\\\\( b = c = 0 \\\\)`:`\\\\( \\\\mathbf{A} = ${nt.mat2('*',0,0,'*')} \\\\)`),content:[\r\n\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t`this is a completely decoupled system`,\r\n\t\t\t\t]},\r\n\t\t\t\t`the `+(scalar?`equations have`:`equation has`)+` the form:`,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t`${nt.dd(nt.x)} &= \\\\lambda_1 ${nt.x} \\\\\\\\`+\r\n\t\t\t\t\t\t`${nt.dd(nt.y)} &= \\\\lambda_2 ${nt.y}`+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t: `\\\\[ ${nt.dd(nt.X)} = ${nt.mat2('\\\\lambda_1',0,0,'\\\\lambda_2')} ${nt.X} \\\\]`\r\n\t\t\t\t),\r\n\t\t\t\tgeneralAndSpecificSolutionLeadX0,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t`${nt.x} &= ${nt.x}(0) e^{\\\\lambda_1 t} \\\\\\\\`+\r\n\t\t\t\t\t\t`${nt.y} &= ${nt.y}(0) e^{\\\\lambda_2 t}`+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t: `\\\\[ ${nt.X} = ${nt.mat2('e^{\\\\lambda_1 t}',0,0,'e^{\\\\lambda_2 t}')} ${nt.X}(0) \\\\]`\r\n\t\t\t\t),\r\n\t\t\t]},\r\n\t\t\t{type:'case',title:(scalar?`\\\\( a = 0 \\\\) and \\\\( b = 1 \\\\)`:`\\\\( \\\\mathbf{A} = ${nt.mat2(0,1,'*','*')} \\\\)`)+` (optional)`,content:[\r\n\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t`this is an optional case, you can ignore it and use <em>`+(scalar?`\\\\( b \\\\ne 0 \\\\) or \\\\( c \\\\ne 0 \\\\)`:`\\\\( \\\\mathbf{A} \\\\ne ${nt.smat2('*',0,0,'*')} \\\\)`)+`</em> case below`,\r\n\t\t\t\t\t`this is a case of second-order linear homogeneous equation with constant coefficients`,\r\n\t\t\t\t]},\r\n\t\t\t\t`the `+(scalar?`equations have`:`equation has`)+` the form:`,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\`+\r\n\t\t\t\t\t\t`${nt.dd(nt.y)} &= c ${nt.x} + d ${nt.y}`+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t: `\\\\[ ${nt.dd(nt.X)} = ${nt.mat2(0,1,'c','d')} ${nt.X} \\\\]`\r\n\t\t\t\t),\r\n\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t`eigenvector for \\\\( \\\\lambda_1 \\\\) is:`,\r\n\t\t\t\t\t`\\\\[ ${nt.vec2(`${nt.x}_1`,`${nt.y}_1`)} = ${nt.vec2(1,'\\\\lambda_1')} \\\\]`,\r\n\t\t\t\t\t`eigenvector for \\\\( \\\\lambda_2 \\\\) is:`,\r\n\t\t\t\t\t`\\\\[ ${nt.vec2(`${nt.x}_2`,`${nt.y}_2`)} = ${nt.vec2(1,'\\\\lambda_2')} \\\\]`,\r\n\t\t\t\t\t`use these eigenvectors in <em>`+(scalar?`\\\\( b \\\\ne 0 \\\\) or \\\\( c \\\\ne 0 \\\\)`:`\\\\( \\\\mathbf{A} \\\\ne ${nt.smat2('*',0,0,'*')} \\\\)`)+`</em> case below`,\r\n\t\t\t\t]},\r\n\t\t\t\t`get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\lambda^2 - d \\\\lambda - c = 0 \\\\]`\r\n\t\t\t\t\t: s2_linearHomogeneousConstant_characteristicEquation(scalar)\r\n\t\t\t\t),\r\n\t\t\t\t{type:'switch',title:`eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are`,content:[\r\n\t\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t\tgeneralSolutionLeadX0,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= ${nt.x}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.y}_0 \\\\,{-}\\\\, ${nt.x}_0 \\\\lambda) t e^{\\\\lambda t} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= ${nt.y}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.y}_0 \\\\,{-}\\\\, ${nt.x}_0 \\\\lambda) \\\\lambda t e^{\\\\lambda t}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ ${nt.X} = e^{\\\\lambda t} ${nt.X}_0 + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ${nt.X}_0 \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tspecificSolutionLeadX0,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t\t...generalRealSolution(1,1,`\\\\lambda_1`,`\\\\lambda_2`),\r\n\t\t\t\t\t\t...specificSolution(1,1,`\\\\lambda_1`,`\\\\lambda_2`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} = \\\\: & k_1 e^{\\\\alpha t} \\\\cos \\\\beta t \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} \\\\sin \\\\beta t \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} = \\\\: & k_1 e^{\\\\alpha t} (\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} (\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t)`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2('\\\\cos \\\\beta t','\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t')} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2('\\\\sin \\\\beta t','\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t')} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`= \\\\: & e^{\\\\alpha t} ${nt.smat2(1,0,'\\\\alpha','\\\\beta')} ${nt.smat2('\\\\cos \\\\beta t','\\\\sin \\\\beta t','- \\\\sin \\\\beta t','\\\\cos \\\\beta t')} ${nt.svec2('k_1','k_2')}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t...specificSolution(1,0,`\\\\alpha`,`\\\\beta`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t\t{type:'case',title:(scalar?`\\\\( b \\\\ne 0 \\\\) or \\\\( c \\\\ne 0 \\\\)`:`\\\\( \\\\mathbf{A} \\\\ne ${nt.mat2('*',0,0,'*')} \\\\)`),content:[\r\n\t\t\t\t`get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\ts2_linearHomogeneousConstant_characteristicEquation(scalar),\r\n\t\t\t\t{type:'switch',title:`eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are`,content:[\r\n\t\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t\tgeneralSolutionLeadX0,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= ${nt.x}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.x}_0 (a \\\\,{-}\\\\, \\\\lambda) \\\\,{+}\\\\, ${nt.y}_0 b) t e^{\\\\lambda t} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= ${nt.y}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.x}_0 c \\\\,{+}\\\\, ${nt.y}_0 (d \\\\,{-}\\\\, \\\\lambda)) t e^{\\\\lambda t}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ ${nt.X} = e^{\\\\lambda t} ${nt.X}_0 + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ${nt.X}_0 \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tspecificSolutionLeadX0,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t\t...findRealEigenvector(1),\r\n\t\t\t\t\t\t...findRealEigenvector(2),\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`both of those systems are linearly dependent, it's enough to find each eigenvector up to a constant factor`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t...generalRealSolution(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`),\r\n\t\t\t\t\t\t...specificSolution(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t\t`select one of eigenvalues \\\\( \\\\lambda_1 = \\\\alpha + i \\\\beta \\\\)`,\r\n\t\t\t\t\t\t...findComplexEigenvector(),\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`this system is linearly dependent, it's enough to find the eigenvector up to a constant factor`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t\t`one of complex-valued solutions:`,\r\n\t\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x}_c &{=} e^{\\\\alpha t} (\\\\cos \\\\beta t {+} i \\\\sin \\\\beta t) (${nt.x}_1 {+} i ${nt.x}_2) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`${nt.y}_c &{=} e^{\\\\alpha t} (\\\\cos \\\\beta t {+} i \\\\sin \\\\beta t) (${nt.y}_1 {+} i ${nt.y}_2)`+\r\n\t\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t\t: `\\\\[ ${nt.X}_c = e^{\\\\alpha t} (\\\\cos \\\\beta t + i \\\\sin \\\\beta t) ${nt.svec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} \\\\]`\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t`find general solution by taking real and imaginary parts of a complex-valued solution:`,\r\n\t\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x} = k_1 \\\\operatorname{Re}(${nt.x}_c) + k_2 \\\\operatorname{Im}(${nt.x}_c) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`${nt.y} = k_1 \\\\operatorname{Re}(${nt.y}_c) + k_2 \\\\operatorname{Im}(${nt.y}_c)`+\r\n\t\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t\t: `\\\\[ ${nt.X} = k_1 \\\\operatorname{Re}(${nt.X}_c) + k_2 \\\\operatorname{Im}(${nt.X}_c) \\\\]`\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} = \\\\: & k_1 e^{\\\\alpha t} (${nt.x}_1 \\\\cos \\\\beta t - ${nt.x}_2 \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} (${nt.x}_1 \\\\sin \\\\beta t + ${nt.x}_2 \\\\cos \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} = \\\\: & k_1 e^{\\\\alpha t} (${nt.y}_1 \\\\cos \\\\beta t - ${nt.y}_2 \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} (${nt.y}_1 \\\\sin \\\\beta t + ${nt.y}_2 \\\\cos \\\\beta t)`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2(`${nt.x}_1 \\\\cos \\\\beta t - ${nt.x}_2 \\\\sin \\\\beta t`,`${nt.y}_1 \\\\cos \\\\beta t - ${nt.y}_2 \\\\sin \\\\beta t`)} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2(`${nt.x}_1 \\\\sin \\\\beta t + ${nt.x}_2 \\\\cos \\\\beta t`,`${nt.y}_1 \\\\sin \\\\beta t + ${nt.y}_2 \\\\cos \\\\beta t`)} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`= \\\\: & e^{\\\\alpha t} ${nt.smat2(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`)} ${nt.smat2(`\\\\cos \\\\beta t`,`\\\\sin \\\\beta t`,`- \\\\sin \\\\beta t`,`\\\\cos \\\\beta t`)} ${nt.svec2(`k_1`,`k_2`)}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t...specificSolution(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]},\r\n\t]\r\n}\r\n\r\nmodule.exports={\r\n\tsn: {\r\n\t\tparents: {},\r\n\t\tname: \"system of n first-order\",\r\n\t\thtmlName: \"system of <em>n</em> first-order\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xi,system_sn',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{array}{c}`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_1`)} = f_1(t,${nt.x}_1,\\\\dotsc,${nt.x}_n) \\\\\\\\`+\r\n\t\t\t\t\t`\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_n`)} = f_n(t,${nt.x}_1,\\\\dotsc,${nt.x}_n)`+\r\n\t\t\t\t`\\\\end{array} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_sn',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{F}(t,${nt.X})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tformType: 'xi',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\txi: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.x}_{1,p}, ..., ${nt.x}_{n,p} \\\\) is a solution by substituting \\\\( ${nt.x}_1 = ${nt.x}_{1,p}, ..., ${nt.x}_n = ${nt.x}_{n,p} \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tX: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.X}_p \\\\) is a solution by substituting \\\\( ${nt.X} = ${nt.X}_p \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= f(t,${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= g(t,${nt.x},${nt.y})`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{F}(t,${nt.X})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tformType: 'xy',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\txy: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.x}_p, ${nt.y}_p \\\\) is a solution by substituting \\\\( ${nt.x} = ${nt.x}_p, ${nt.y} = ${nt.y}_p \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tX: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.X}_p \\\\) is a solution by substituting \\\\( ${nt.X} = ${nt.X}_p \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_partlyDecoupled1: s2_partlyDecoupled(1),\r\n\ts2_partlyDecoupled2: s2_partlyDecoupled(2),\r\n\ts2_completelyDecoupled: {\r\n\t\tparents: {\r\n\t\t\ts2_partlyDecoupled1: true,\r\n\t\t\ts2_partlyDecoupled2: true,\r\n\t\t},\r\n\t\tname: \"completely decoupled system of 2 first-order\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2_completelyDecoupled',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= f(t,${nt.x}) \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= g(t,${nt.y})`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2_completelyDecoupled',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = ${nt.ddt}`+nt.vec2(`${nt.x}_1`,`${nt.x}_2`)+` = `+nt.vec2(`f(t,${nt.x}_1)`,`g(t,${nt.x}_2)`),\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tformType: 'xy',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`Solve each equation separately.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_autonomous: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order autonomous\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: `t,xy,system_s2_autonomous`,\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= f(${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= g(${nt.x},${nt.y})`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,X,vector_s2_autonomous`,\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{F}(${nt.X})`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\ts2_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order linear homogeneous\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.y} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= c(t) \\\\cdot ${nt.x} + d(t) \\\\cdot ${nt.y}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{A}(t) \\\\, ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tformType: 'xy',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\txy: nt=>[\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t`${nt.x} &= 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${nt.y} &= 0`+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`other equilibrium solutions may be possible, depending on the functions \\\\( a(t) \\\\), \\\\( b(t) \\\\), \\\\( c(t) \\\\) and \\\\( d(t) \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tX: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.vec2(0,0)} \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`other equilibrium solutions may be possible, depending on the function \\\\( \\\\mathbf{A}(t) \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ts2_autonomous: true,\r\n\t\t\ts2_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order linear homogeneous with constant coefficients\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= a \\\\cdot ${nt.x} + b \\\\cdot ${nt.y} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= c \\\\cdot ${nt.x} + d \\\\cdot ${nt.y}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{A} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tformType: 'vector_s2_linearHomogeneousConstant',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tsystem_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\ts2_linearHomogeneousConstant_characteristicEquation(true),\r\n\t\t\t\t\t],\r\n\t\t\t\t\tvector_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\ts2_linearHomogeneousConstant_characteristicEquation(false),\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`\\\\( \\\\lambda \\\\) is an eigenvalue of \\\\( \\\\mathbf{A} \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tsystem_s2_linearHomogeneousConstant: s2_linearHomogeneousConstant_generalSolutionMethod_content(true),\r\n\t\t\t\t\tvector_s2_linearHomogeneousConstant: s2_linearHomogeneousConstant_generalSolutionMethod_content(false),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tsystem_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t`${nt.x} &= 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${nt.y} &= 0`+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t{type:'case',title:`additional nonzero equilibrium solutions are possible when \\\\( ad-bc = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`any`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= k_${nt.x} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= k_${nt.y}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t\t`s.t.:`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`a \\\\cdot k_${nt.x} + b \\\\cdot k_${nt.y} &= 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`c \\\\cdot k_${nt.x} + d \\\\cdot k_${nt.y} &= 0`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t\t`is an equilibrium solution`,\r\n\t\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t\t`this is a linearly dependent system when \\\\( ad-bc = 0 \\\\)`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`any constant multiple of an equilibrium solution is also an equilibrium solution:`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= C \\\\cdot k_${nt.x} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= C \\\\cdot k_${nt.y}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tvector_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t\t\t\t{type:'case',title:`additional nonzero equilibrium solutions are possible when \\\\( \\\\det(\\\\mathbf{A}) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`any`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{K} \\\\]`,\r\n\t\t\t\t\t\t\t`s.t.:`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\mathbf{A} \\\\mathbf{K} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t\t\t\t\t`is an equilibrium solution`,\r\n\t\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t\t`this is a linearly dependent system when \\\\( \\\\det(\\\\mathbf{A}) = 0 \\\\)`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`any constant multiple of an equilibrium solution is also an equilibrium solution:`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = C \\\\cdot \\\\mathbf{K} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tplot: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t()=>{\r\n\t\t\t\t\t\tconst plot=new LhcPlot(nt.x,nt.y)\r\n\t\t\t\t\t\treturn plot.$output\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tsn_sir: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"SIR model\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/w/index.php?title=SIR_model'>SIR</a> model\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,system_sn_sir',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd('S')} &= -\\\\alpha S I \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd('I')} &= \\\\alpha S I - \\\\beta I \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd('R')} &= \\\\beta I`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( S = \\\\) number susceptible`,\r\n\t\t\t\t\t`\\\\( I = \\\\) number infectious`,\r\n\t\t\t\t\t`\\\\( R = \\\\) number recovered (immune)`,\r\n\t\t\t\t\t`\\\\( \\\\alpha = \\\\) contact rate`,\r\n\t\t\t\t\t`\\\\( \\\\beta = \\\\) recovery rate`,\r\n\t\t\t\t\t`all quantities are nonnegative`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tphaseSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`threshold value \\\\( \\\\rho = \\\\frac\\\\beta\\\\alpha \\\\):`,\r\n\t\t\t\t\t`\\\\( I \\\\) increases when \\\\( S &gt; \\\\rho \\\\)`,\r\n\t\t\t\t\t`\\\\( S \\\\) decreases`,\r\n\t\t\t\t\t`\\\\( I \\\\) attains its maximum when \\\\( S = \\\\rho \\\\)`,\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd('S')} + ${nt.dd('I')} + ${nt.dd('R')} = 0 \\\\]`,\r\n\t\t\t\t\t\t`total population \\\\( N \\\\) is constant`,\r\n\t\t\t\t\t\t`\\\\[ S + I + R = N \\\\]`,\r\n\t\t\t\t\t\t`eliminate \\\\( R \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`${nt.dd('S')} &= -\\\\alpha S I \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`${nt.dd('I')} &= \\\\alpha S I - \\\\beta I \\\\\\\\ `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd('I','S')} = \\\\frac{\\\\alpha S I - \\\\beta I}{-\\\\alpha S I} = -1 + \\\\frac{\\\\rho}{S} \\\\]`,\r\n\t\t\t\t\t\t`integrate by \\\\( S \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ I = -S + \\\\rho \\\\ln S + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`conserved quantities:`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`S(t) + I(t) + R(t) = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= S(0) + I(0) + R(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`I(t) + S(t) - \\\\rho \\\\ln S(t) = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= I(0) + S(0) - \\\\rho \\\\ln S(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t`maximum of \\\\( I \\\\):`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`I_{max} + \\\\rho - \\\\rho \\\\ln \\\\rho = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= I(0) + S(0) - \\\\rho \\\\ln S(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\[ I = 0 \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n}\r\n","'use strict'\r\n\r\n// produces array of <tr>'s in this.$trs\r\n// currently produces only one <tr> but this is going to change if alignment options are introduced\r\nclass FormRowsOutput {\r\n\tconstructor(i18n,orderedClassSubgraph,theadLayout,classData,notation,$classHighlightables,formSelectCallback) {\r\n\t\tconst writeEquations=(classId,iColumn)=>{\r\n\t\t\tconst $cell=$(\"<td>\")\r\n\t\t\tlet $classEquations=$()\r\n\t\t\tclassData[classId].forms.forEach((formData,i)=>{\r\n\t\t\t\tif (i>0) {\r\n\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\"<div class='alt-separator'>or</div>\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tconst $equation=$(\"<div class='equation'>\").append(\"\\\\[\"+formData.equation(notation)+\"\\\\]\")\r\n\t\t\t\t$classEquations=$classEquations.add($equation)\r\n\t\t\t\t$cell.append($equation)\r\n\t\t\t\tconst select=$e=>$e.addClass('selected').removeAttr('title')\r\n\t\t\t\tconst unselect=$e=>$e.removeClass('selected').attr('title','Rewrite equation properties in terms of this form')\r\n\t\t\t\tif (i==0) {\r\n\t\t\t\t\tselect($equation)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunselect($equation)\r\n\t\t\t\t}\r\n\t\t\t\t$equation.click(function(){\r\n\t\t\t\t\tif ($equation.hasClass('selected')) return\r\n\t\t\t\t\tunselect($classEquations)\r\n\t\t\t\t\tselect($equation)\r\n\t\t\t\t\tformSelectCallback(iColumn,formData.is)\r\n\t\t\t\t})\r\n\t\t\t\tif (formData.notes!==undefined) {\r\n\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t$(\"<ul>\").append(\r\n\t\t\t\t\t\t\tformData.notes(notation).map(\r\n\t\t\t\t\t\t\t\tnoteText=>`<li><div class='note'>${noteText}</div></li>`\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tconst columnParents=orderedClassSubgraph.visibleParents[classId] // TODO use thead-layout order\r\n\t\t\tif (columnParents.length>0) {\r\n\t\t\t\t$cell.append(\r\n\t\t\t\t\t$(\"<ul>\").append(\r\n\t\t\t\t\t\t$(\"<li>\").append(\r\n\t\t\t\t\t\t\t$(\"<div class='note'>\").append(\r\n\t\t\t\t\t\t\t\t\"can also be written as and has all properties of:\",\r\n\t\t\t\t\t\t\t\t$(\"<ul>\").append(columnParents.map(pid=>{\r\n\t\t\t\t\t\t\t\t\tconst $li=$(\"<li>\").append(\r\n\t\t\t\t\t\t\t\t\t\t$(\"<em>\"+classData[pid].htmlName+\"</em>\").hover(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$classHighlightables[pid].addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t$li.addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$li.removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t$classHighlightables[pid].removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn $li\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn $cell\r\n\t\t}\r\n\t\tthis.$trs=[\r\n\t\t\t$(\"<tr>\").append(\r\n\t\t\t\ttheadLayout.columns.map(writeEquations)\r\n\t\t\t),\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=FormRowsOutput\r\n","'use strict'\r\n\r\nconst detailsPolyfill=require('crnx-base/details-polyfill')\r\nconst Matrix=require('./lhc-plot/matrix')\r\nconst TrdetCanvas=require('./lhc-plot/trdet-canvas')\r\nconst PhaseCanvas=require('./lhc-plot/phase-canvas')\r\n\r\n// works like this: http://mathlets.org/mathlets/linear-phase-portraits-matrix-entry/\r\nclass LhcPlot {\r\n\tconstructor(xLabel,yLabel) {\r\n\t\tconst matrix=new Matrix\r\n\t\tconst $numberInputs={}\r\n\t\tconst $rangeInputs={}\r\n\t\tlet $equilibriumType\r\n\t\tconst trdetCanvas=new TrdetCanvas\r\n\t\tconst phaseCanvas=new PhaseCanvas\r\n\t\tconst updateDetails=()=>{\r\n\t\t\tconst updateEquilibriumType=()=>{\r\n\t\t\t\tconst getEquilibriumType=()=>{\r\n\t\t\t\t\t// names are based on\r\n\t\t\t\t\t// http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\r\n\t\t\t\t\tconst D=matrix.det\r\n\t\t\t\t\tconst T=matrix.tr\r\n\t\t\t\t\tconst ssc=(T==0)?\"center\":((T<0)?\"sink\":\"source\")\r\n\t\t\t\t\tif (D<0) {\r\n\t\t\t\t\t\treturn `saddle`\r\n\t\t\t\t\t} else if (D==0) {\r\n\t\t\t\t\t\tif (T==0) {\r\n\t\t\t\t\t\t\tif (matrix.b==0 && matrix.c==0) {\r\n\t\t\t\t\t\t\t\treturn `degenerate everywhere fixed`\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn `degenerate parallel lines`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `degenerate comb ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (4*D<T*T) {\r\n\t\t\t\t\t\treturn `nodal (real) ${ssc}`\r\n\t\t\t\t\t} else if (4*D==T*T) {\r\n\t\t\t\t\t\tif (matrix.b==0 && matrix.c==0) {\r\n\t\t\t\t\t\t\treturn `star ${ssc}`\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `defective nodal (real) ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (T==0) {\r\n\t\t\t\t\t\t\treturn ssc\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `spiral ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$equilibriumType.text(getEquilibriumType())\r\n\t\t\t}\r\n\t\t\tmatrix.forUpdated(cf=>{\r\n\t\t\t\t$numberInputs[cf].val(matrix[cf])\r\n\t\t\t\t$rangeInputs[cf].val(matrix[cf])\r\n\t\t\t})\r\n\t\t\tupdateEquilibriumType()\r\n\t\t\ttrdetCanvas.redraw(matrix)\r\n\t\t\tphaseCanvas.redraw(matrix,xLabel,yLabel)\r\n\t\t}\r\n\t\tconst getCoefInputs=coef=>{\r\n\t\t\tconst isMatrixElement=coef.length==1\r\n\t\t\tconst valueRange=matrix.getRange(coef)\r\n\t\t\tconst initCoefInput=(type,getValue,setValue)=>{\r\n\t\t\t\tconst $input=$(`<input type='${type}'>`).attr('step','any').val(matrix[coef])\r\n\t\t\t\tif (type=='range') {\r\n\t\t\t\t\t$input.attr('min',-valueRange).attr('max',valueRange)\r\n\t\t\t\t}\r\n\t\t\t\t$input.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\tconst value=getValue()\r\n\t\t\t\t\t\tsetValue(value)\r\n\t\t\t\t\t\tmatrix[coef]=Number(value)\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $input\r\n\t\t\t}\r\n\t\t\tconst $div=$(\"<div>\")\r\n\t\t\tif (!isMatrixElement) {\r\n\t\t\t\t$div.addClass(coef)\r\n\t\t\t}\r\n\t\t\tlet label=coef\r\n\t\t\tif (coef=='tr') {\r\n\t\t\t\tlabel=`\\\\operatorname{${coef}}(\\\\mathbf{A})`\r\n\t\t\t} else if (coef=='det') {\r\n\t\t\t\tlabel=`\\\\${coef}(\\\\mathbf{A})`\r\n\t\t\t} else if (coef.slice(0,2)=='re') {\r\n\t\t\t\t//label=`\\\\lambda_${coef.charAt(2)} =`\r\n\t\t\t\tlabel=`\\\\Re \\\\lambda_${coef.charAt(2)}`\r\n\t\t\t} else if (coef.slice(0,2)=='im') {\r\n\t\t\t\t//label=`+ i \\\\cdot`\r\n\t\t\t\tlabel=`\\\\Im \\\\lambda_${coef.charAt(2)}`\r\n\t\t\t}\r\n\t\t\tlet $number,$range\r\n\t\t\t$div.append(\r\n\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t`<span class='label'>\\\\( ${label} \\\\)</span>`,\r\n\t\t\t\t\t`<span class='space'> </span>`,\r\n\t\t\t\t\t$number=initCoefInput('number',()=>$number.val(),(v)=>$range.val(v))\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$range=initCoefInput('range',()=>Number($range.val()).toFixed(2),(v)=>$number.val(v))\r\n\t\t\t)\r\n\t\t\t$numberInputs[coef]=$number\r\n\t\t\t$rangeInputs[coef]=$range\r\n\t\t\treturn $div\r\n\t\t}\r\n\t\tthis.$output=$(\"<div class='matrix'>\").append(\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"equation coefficients\"),\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('a')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('b'))\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('c')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('d'))\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t\"Set matrix to \",\r\n\t\t\t\t\t$(\"<button>zero</button>\").click(function(){\r\n\t\t\t\t\t\tmatrix.setZero()\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\t$(\"<button>associated</button>\").click(function(){\r\n\t\t\t\t\t\tmatrix.setAssociated()\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"matrix parameters\"),\r\n\t\t\t\tgetCoefInputs('tr'),\r\n\t\t\t\tgetCoefInputs('det'),\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('re1')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('im1'))\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('re2')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('im2'))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"equilibrium point type\"),\r\n\t\t\t\t$equilibriumType=$(\"<div>\")\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary class='bordered'>\").append(\"<a href='https://en.wikipedia.org/wiki/Trace_(linear_algebra)'>tr</a>-<a href='https://en.wikipedia.org/wiki/Determinant'>det</a> plane\"),\r\n\t\t\t\ttrdetCanvas.$output.on('mousedown mousemove',function(ev){\r\n\t\t\t\t\tif (!ev.buttons&1) return\r\n\t\t\t\t\tconst $canvas=$(this)\r\n\t\t\t\t\tconst w=$canvas.width()\r\n\t\t\t\t\tconst h=$canvas.height()\r\n\t\t\t\t\tconst trim=(v)=>Number(v.toFixed(2))\r\n\t\t\t\t\tconst tRange=matrix.getRange('tr')\r\n\t\t\t\t\tconst dRange=matrix.getRange('det')\r\n\t\t\t\t\tconst tClose=2*tRange/(w/2)\r\n\t\t\t\t\tconst dClose=2*dRange/(h/2)\r\n\t\t\t\t\tlet t=trim(+(ev.offsetX-w/2+0.5)/(w/2)*tRange)\r\n\t\t\t\t\tlet d=trim(-(ev.offsetY-h/2+0.5)/(h/2)*dRange)\r\n\t\t\t\t\tconst p=t*t/4\r\n\t\t\t\t\tif (Math.abs(d)<=dClose && Math.abs(t)<=tClose) {\r\n\t\t\t\t\t\tt=0\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d>0 && Math.abs(t)<=tClose) {\r\n\t\t\t\t\t\tt=0\r\n\t\t\t\t\t} else if (d<0 && d>=-dClose) {\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d-p>0 && d-p<=dClose) {\r\n\t\t\t\t\t\td=p\r\n\t\t\t\t\t} else if (d>0 && d<=dClose) {\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d-p<0 && d-p>=-dClose) {\r\n\t\t\t\t\t\td=p\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmatrix.setTrdetExternally(t,d)\r\n\t\t\t\t\tupdateDetails()\r\n\t\t\t\t})\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary class='bordered'>\").append(\"<a href='https://en.wikipedia.org/wiki/Phase_space'>phase plane</a>\"),\r\n\t\t\t\tphaseCanvas.$output\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t)\r\n\t\tupdateDetails()\r\n\t}\r\n}\r\n\r\nmodule.exports=LhcPlot\r\n","'use strict'\r\n\r\nclass Canvas {\r\n\tconstructor() {\r\n\t\tthis.width=246\r\n\t\tthis.height=246\r\n\t\tthis.$output=$(`<canvas width='${this.width}' height='${this.height}'>`)\r\n\t\tthis.ctx=this.$output[0].getContext('2d')\r\n\t}\r\n\tdrawAxes(xLabel,yLabel) {\r\n\t\tconst xAxisSize=80\r\n\t\tconst yAxisSize=80\r\n\t\tconst arrowSize=15\r\n\t\tconst ctx=this.ctx\r\n\t\tconst drawAxis=()=>{\r\n\t\t\tctx.beginPath()\r\n\t\t\tctx.moveTo(-xAxisSize,0)\r\n\t\t\tctx.lineTo(+xAxisSize,0)\r\n\t\t\tctx.moveTo(xAxisSize-arrowSize,-arrowSize)\r\n\t\t\tctx.lineTo(xAxisSize,0)\r\n\t\t\tctx.lineTo(xAxisSize-arrowSize,+arrowSize)\r\n\t\t\tctx.stroke()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.lineWidth=6\r\n\t\tctx.strokeStyle=ctx.fillStyle='#DDD'\r\n\t\tctx.font='900 30px sans-serif'\r\n\t\tdrawAxis()\r\n\t\tctx.save()\r\n\t\tctx.rotate(-Math.PI/2)\r\n\t\tdrawAxis()\r\n\t\tctx.restore()\r\n\t\tctx.textBaseline='middle'\r\n\t\tctx.fillText(xLabel,xAxisSize+10,0)\r\n\t\tctx.textBaseline='alphabetic'\r\n\t\tctx.textAlign='center'\r\n\t\tctx.fillText(yLabel,0,-yAxisSize-10)\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=Canvas\r\n","'use strict'\r\n\r\n// returns coords [x,y] of a point on x*y=C closest to (x0,y0)\r\n// could have solved x^3*(x-x0)+C*y0*x-C^2=0, y=C/x\r\n\r\nconst getClosestPointOnPositiveHyperbolaIn1stQuadrant=(C,x0,y0)=>{\r\n\tlet x=Math.sqrt(C)\r\n\tlet y=x\r\n\tconst epsilon2=1e-12\r\n\tconst iterationLimit=20\r\n\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\tif (x<=0) return [C/y0,y0]\r\n\t\tif (y<=0) return [x0,C/x0]\r\n\t\tconst yx=y0/(2*x)\r\n\t\tconst xy=x0/(2*y)\r\n\t\tconst t=yx+xy-Math.sqrt((yx-xy)*(yx-xy)+C/(x*y))\r\n\t\tlet x1=x0-y*t\r\n\t\tlet y1=y0-x*t\r\n\t\tif ((x-x1)*(x-x1)+(y-y1)*(y-y1)<=epsilon2) break\r\n\t\tx=x1\r\n\t\ty=y1\r\n\t}\r\n\treturn [x,y]\r\n}\r\n\r\nconst getClosestPointOnPositiveHyperbola=(C,x0,y0)=>{\r\n\tif (y0>=-x0) { // top-right branch\r\n\t\treturn getClosestPointOnPositiveHyperbolaIn1stQuadrant(C,x0,y0)\r\n\t} else { // bottom-left branch\r\n\t\tconst xy=getClosestPointOnPositiveHyperbolaIn1stQuadrant(C,-x0,-y0)\r\n\t\treturn [-xy[0],-xy[1]]\r\n\t}\r\n}\r\n\r\nconst getClosestPointOnHyperbola=(C,x0,y0)=>{\r\n\tif (C==0) {\r\n\t\tif (Math.abs(x0)<Math.abs(y0)) {\r\n\t\t\treturn [0,y0]\r\n\t\t} else {\r\n\t\t\treturn [x0,0]\r\n\t\t}\r\n\t} else if (C>0) {\r\n\t\treturn getClosestPointOnPositiveHyperbola(C,x0,y0)\r\n\t} else { // flip y axis\r\n\t\tconst xy=getClosestPointOnPositiveHyperbola(-C,x0,-y0)\r\n\t\treturn [xy[0],-xy[1]]\r\n\t}\r\n}\r\n\r\nmodule.exports=getClosestPointOnHyperbola\r\n","'use strict'\r\n\r\nconst getClosestPointOnHyperbola=require('./closest-point-on-hyperbola')\r\n\r\nclass Matrix {\r\n\tconstructor() {\r\n\t\tthis._updated={}\r\n\t\tthis.setZero()\r\n\t\tthis._updated={}\r\n\t}\r\n\tforUpdated(fn) {\r\n\t\tfor (let coef in this._updated) {\r\n\t\t\tfn(coef)\r\n\t\t}\r\n\t\tthis._updated={}\r\n\t}\r\n\t_computeElementsFromTrdet() {\r\n\t\tif (this._original===null) {\r\n\t\t\tthis._original={\r\n\t\t\t\ta: this._a,\r\n\t\t\t\tb: this._b,\r\n\t\t\t\tc: this._c,\r\n\t\t\t\td: this._d,\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._a=(this._original.a+this._tr-this._original.d)/2\r\n\t\tthis._d=this._tr-this._a\r\n\t\tconst bc=getClosestPointOnHyperbola(this._a*this._d-this._det,this._original.b,this._original.c)\r\n\t\tthis._b=bc[0]\r\n\t\tthis._c=bc[1]\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t}\r\n\t_computeTrdetFromElements() {\r\n\t\tthis._tr=this._a+this._d\r\n\t\tthis._det=this._a*this._d-this._b*this._c\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t}\r\n\t_computeEigenvaluesFromTrdet() {\r\n\t\tconst discr=this._tr*this._tr-4*this._det\r\n\t\tif (discr>=0) {\r\n\t\t\tconst root=Math.sqrt(discr)\r\n\t\t\tif (this._re2>=this._re1) {\r\n\t\t\t\tthis._re1=(this._tr-root)/2\r\n\t\t\t\tthis._re2=(this._tr+root)/2\r\n\t\t\t} else {\r\n\t\t\t\tthis._re2=(this._tr-root)/2\r\n\t\t\t\tthis._re1=(this._tr+root)/2\r\n\t\t\t}\r\n\t\t\tthis._im1=this._im2=0\r\n\t\t} else {\r\n\t\t\tconst root=Math.sqrt(-discr)\r\n\t\t\tthis._re1=this._re2=this._tr/2\r\n\t\t\tif (this._im2>=this._im1) {\r\n\t\t\t\tthis._im1=-root/2\r\n\t\t\t\tthis._im2=+root/2\r\n\t\t\t} else {\r\n\t\t\t\tthis._im2=-root/2\r\n\t\t\t\tthis._im1=+root/2\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._updated.re1=this._updated.re2=this._updated.im1=this._updated.im2=true\r\n\t}\r\n\t_computeTrdetFromEigenvalues() {\r\n\t\tthis._tr=this._re1+this._re2\r\n\t\tthis._det=this._re1*this._re2-this._im1*this._im2\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t}\r\n\tget a() { return this._a }\r\n\tget b() { return this._b }\r\n\tget c() { return this._c }\r\n\tget d() { return this._d }\r\n\tget tr() { return this._tr }\r\n\tget det() { return this._det }\r\n\tget re1() { return this._re1 }\r\n\tget re2() { return this._re2 }\r\n\tget im1() { return this._im1 }\r\n\tget im2() { return this._im2 }\r\n\tgetEigenvector(lambda) {\r\n\t\tif (Math.abs(this._b)+Math.abs(lambda-this._a)>=Math.abs(lambda-this._d)+Math.abs(this._c)) {\r\n\t\t\treturn [this._b,lambda-this._a]\r\n\t\t} else {\r\n\t\t\treturn [lambda-this._d,this._c]\r\n\t\t}\r\n\t}\r\n\tgetComplexEigenvector(alpha,beta) {\r\n\t\tif (Math.abs(this._b)+Math.abs(alpha-this._a)>=Math.abs(alpha-this._d)+Math.abs(this._c)) {\r\n\t\t\treturn [this._b,0,alpha-this._a,beta]\r\n\t\t} else {\r\n\t\t\treturn [alpha-this._d,beta,this._c,0]\r\n\t\t}\r\n\t}\r\n\tgetRange(coef) {\r\n\t\tif (coef=='tr') {\r\n\t\t\treturn 10\r\n\t\t} else if (coef=='det') {\r\n\t\t\treturn 50\r\n\t\t} else if (coef=='a' || coef=='b' || coef=='c' || coef=='d') {\r\n\t\t\treturn 5\r\n\t\t} else {\r\n\t\t\treturn 10 // eigenvalues\r\n\t\t}\r\n\t}\r\n\tset a(v) {\r\n\t\tthis._a=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset b(v) {\r\n\t\tthis._b=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset c(v) {\r\n\t\tthis._c=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset d(v) {\r\n\t\tthis._d=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset tr(v) {\r\n\t\tthis._tr=v\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset det(v) {\r\n\t\tthis._det=v\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tsetTrdetExternally(T,D) { // for use with clicks on tr-det plane plot\r\n\t\tthis._tr=T\r\n\t\tthis._det=D\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\t_setRe(v,i,j) {\r\n\t\tthis['_re'+i]=v\r\n\t\tif (this._im1!=0 || this._im2!=0) {\r\n\t\t\tthis['_re'+j]=v\r\n\t\t\tthis._updated['re'+j]=true\r\n\t\t}\r\n\t\tthis._computeTrdetFromEigenvalues()\r\n\t\tthis._computeElementsFromTrdet()\r\n\t}\r\n\tset re1(v) {\r\n\t\tthis._setRe(v,1,2)\r\n\t}\r\n\tset re2(v) {\r\n\t\tthis._setRe(v,2,1)\r\n\t}\r\n\t_setIm(v,i,j) {\r\n\t\tthis['_im'+i]=v\r\n\t\tthis['_im'+j]=-v\r\n\t\tthis._updated['im'+j]=true\r\n\t\tif (v!=0) {\r\n\t\t\tthis['_re'+j]=this['_re'+i]\r\n\t\t\tthis._updated['re'+j]=true\r\n\t\t}\r\n\t\tthis._computeTrdetFromEigenvalues()\r\n\t\tthis._computeElementsFromTrdet()\r\n\t}\r\n\tset im1(v) {\r\n\t\tthis._setIm(v,1,2)\r\n\t}\r\n\tset im2(v) {\r\n\t\tthis._setIm(v,2,1)\r\n\t}\r\n\tsetZero() {\r\n\t\tthis._a=this._b=this._c=this._d=0\r\n\t\tthis._tr=this._det=0\r\n\t\tthis._re1=this._re2=this._im1=this._im2=0\r\n\t\tthis._original=null\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t\tthis._updated.re1=this._updated.re2=this._updated.im1=this._updated.im2=true\r\n\t}\r\n\tsetAssociated() { // \"associated matrix\" http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\r\n\t\tthis._a=0\r\n\t\tthis._b=1\r\n\t\tthis._c=-this._det\r\n\t\tthis._d=this._tr\r\n\t\tthis._original=null\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t}\r\n}\r\n\r\nmodule.exports=Matrix\r\n","'use strict'\r\n\r\nconst Canvas=require('./canvas')\r\n\r\nclass PhaseCanvas extends Canvas {\r\n\tredraw(matrix,xLabel,yLabel) {\r\n\t\tconst ctx=this.ctx\r\n\t\tconst xRange=this.width/2\r\n\t\tconst yRange=this.height/2\r\n\t\tconst drawDirectionField=()=>{\r\n\t\t\tconst arrowSpacing=27\r\n\t\t\tconst arrowLength=5\r\n\t\t\tconst arrowWidth=2\r\n\t\t\tconst drawArrow=(x,y)=>{\r\n\t\t\t\tconst dx=matrix.a*x+matrix.b*y\r\n\t\t\t\tconst dy=matrix.c*x+matrix.d*y\r\n\t\t\t\tconst dl=Math.sqrt(dx*dx+dy*dy)\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t+(x-dx/dl*arrowLength),\r\n\t\t\t\t\t-(y-dy/dl*arrowLength)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(+x,-y)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t+(x+dx/dl*arrowLength),\r\n\t\t\t\t\t-(y+dy/dl*arrowLength)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t+(x-dy/dl*arrowWidth),\r\n\t\t\t\t\t-(y+dx/dl*arrowWidth)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t+(x+dy/dl*arrowWidth),\r\n\t\t\t\t\t-(y-dx/dl*arrowWidth)\r\n\t\t\t\t)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tctx.save()\r\n\t\t\tctx.fillStyle=ctx.strokeStyle='#888'\r\n\t\t\tconst nx=Math.floor(xRange/arrowSpacing)\r\n\t\t\tconst ny=Math.floor(yRange/arrowSpacing)\r\n\t\t\tfor (let i=-nx;i<=nx;i++) {\r\n\t\t\t\tfor (let j=-ny;j<=ny;j++) {\r\n\t\t\t\t\tdrawArrow(\r\n\t\t\t\t\t\ti*arrowSpacing+0.5*Math.sign(i),\r\n\t\t\t\t\t\tj*arrowSpacing+0.5*Math.sign(j)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawEigenline=(lambda,otherLambda)=>{\r\n\t\t\tconst iconSize=5\r\n\t\t\tlet icon\r\n\t\t\tif (lambda<0) {\r\n\t\t\t\ticon=-1-(otherLambda<0 && lambda<otherLambda)\r\n\t\t\t} else if (lambda>0) {\r\n\t\t\t\ticon=+1+(otherLambda>0 && lambda>otherLambda)\r\n\t\t\t} else {\r\n\t\t\t\ticon=0\r\n\t\t\t}\r\n\t\t\tconst xy=matrix.getEigenvector(lambda)\r\n\t\t\tlet x=xy[0], y=xy[1]\r\n\t\t\tctx.save()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tif (x<0) {\r\n\t\t\t\tx=-x\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (y<0) {\r\n\t\t\t\tctx.scale(1,-1)\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (x<y) { // TODO this will work only for square canvases, should also swap xRange and yRange\r\n\t\t\t\tctx.transform(0,1,1,0,0,0) // swap x,y\r\n\t\t\t\t;[x,y]=[y,x]\r\n\t\t\t}\r\n\t\t\tif (x>0) {\r\n\t\t\t\tconst r=Math.sqrt(x*x+y*y)\r\n\t\t\t\tconst x0=x/r\r\n\t\t\t\tconst y0=y/r\r\n\t\t\t\tconst x1=xRange\r\n\t\t\t\tconst y1=yRange*y/x\r\n\t\t\t\tconst xic=xRange/2*x0\r\n\t\t\t\tconst yic=yRange/2*y0\r\n\t\t\t\tconst xis=iconSize*x0\r\n\t\t\t\tconst yis=iconSize*y0\r\n\t\t\t\tconst drawEigenlineIcon=()=>{\r\n\t\t\t\t\tconst dir=Math.sign(icon)\r\n\t\t\t\t\tconst drawDiamond=()=>{\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(xic-xis,-(yic-yis))\r\n\t\t\t\t\t\tctx.lineTo(xic+yis,-(yic-xis))\r\n\t\t\t\t\t\tctx.lineTo(xic+xis,-(yic+yis))\r\n\t\t\t\t\t\tctx.lineTo(xic-yis,-(yic+xis))\r\n\t\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\t\tctx.fill()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst drawTriangle=(ofs)=>{\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(xic+dir*(ofs*xis-xis-yis),-(yic+dir*(ofs*yis-yis+xis)))\r\n\t\t\t\t\t\tctx.lineTo(xic+dir*(ofs*xis-xis+yis),-(yic+dir*(ofs*yis-yis-xis)))\r\n\t\t\t\t\t\tctx.lineTo(xic+dir*(ofs*xis+xis    ),-(yic+dir*(ofs*yis+yis    )))\r\n\t\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\t\tctx.fill()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dir==0) {\r\n\t\t\t\t\t\tdrawDiamond()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrawTriangle(0)\r\n\t\t\t\t\t\tif (Math.abs(icon)>=2) {\r\n\t\t\t\t\t\t\tdrawTriangle(2)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(-x1,+y1)\r\n\t\t\t\tctx.lineTo(+x1,-y1)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.save()\r\n\t\t\t\tdrawEigenlineIcon()\r\n\t\t\t\tctx.scale(-1,-1)\r\n\t\t\t\tdrawEigenlineIcon()\r\n\t\t\t\tctx.restore()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawSolution=(x0,y0,color)=>{\r\n\t\t\tconst iterationLimit=100*Math.max(xRange,yRange)\r\n\t\t\tconst fnOnFractions=(fn,xNum,xDen,yNum,yDen)=>{\r\n\t\t\t\tif (xDen!=0 && yDen!=0) {\r\n\t\t\t\t\treturn fn(xNum/xDen,yNum/yDen)\r\n\t\t\t\t} else if (xDen==0 && yDen!=0) {\r\n\t\t\t\t\treturn yNum/yDen\r\n\t\t\t\t} else if (xDen!=0 && yDen==0) {\r\n\t\t\t\t\treturn xNum/xDen\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawFixedPoint=()=>{\r\n\t\t\t\tconst fixedPointSize=3\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.arc(x0,y0,fixedPointSize,0,2*Math.PI)\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tconst drawSaddleOrNodeSolution=()=>{\r\n\t\t\t\tlet lambda1,lambda2\r\n\t\t\t\tif (matrix.re1<=matrix.re2) {\r\n\t\t\t\t\tlambda1=matrix.re1\r\n\t\t\t\t\tlambda2=matrix.re2\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlambda1=matrix.re2\r\n\t\t\t\t\tlambda2=matrix.re1\r\n\t\t\t\t}\r\n\t\t\t\tconst xy1=matrix.getEigenvector(lambda1)\r\n\t\t\t\tlet x1=xy1[0], y1=xy1[1]\r\n\t\t\t\tconst xy2=matrix.getEigenvector(lambda2)\r\n\t\t\t\tlet x2=xy2[0], y2=xy2[1]\r\n\t\t\t\tif (lambda2<=0) {\r\n\t\t\t\t\t;[lambda1,lambda2]=[-lambda2,-lambda1]\r\n\t\t\t\t\t;[x1,x2]=[x2,x1]\r\n\t\t\t\t\t;[y1,y2]=[y2,y1]\r\n\t\t\t\t}\r\n\t\t\t\tlet k1=+(x2*y0-x0*y2)/(x2*y1-x1*y2)\r\n\t\t\t\tlet k2=-(x1*y0-x0*y1)/(x2*y1-x1*y2)\r\n\t\t\t\tif ((k1==0 && k2==0) || (lambda1==0 && k2==0)) {\r\n\t\t\t\t\tdrawFixedPoint()\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else if (k1==0 && lambda2!=0) {\r\n\t\t\t\t\tlambda1=0 // trigger comb case below\r\n\t\t\t\t} else if (k2==0 && lambda1!=0) {\r\n\t\t\t\t\tlambda2=Math.abs(lambda1)\r\n\t\t\t\t\tlambda1=0 // trigger comb case below\r\n\t\t\t\t\t;[x1,x2]=[x2,x1]\r\n\t\t\t\t\t;[y1,y2]=[y2,y1]\r\n\t\t\t\t\t;[k1,k2]=[k2,k1]\r\n\t\t\t\t}\r\n\t\t\t\tif (lambda1>0) { // node\r\n\t\t\t\t\tlet T1=0\r\n\t\t\t\t\tlet T2=0\r\n\t\t\t\t\tconst dT1=1/Math.max(Math.abs(k1*x1),Math.abs(k1*y1)) // step size is controlled by slow direction\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(0,0)\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tT1+=dT1\r\n\t\t\t\t\t\tT2=Math.pow(T1,lambda2/lambda1)\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+(k1*x1*T1+k2*x2*T2),\r\n\t\t\t\t\t\t\t-(k1*y1*T1+k2*y2*T2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(k1*x1*T1+k2*x2*T2)*Math.sign(k2*x2)>xRange ||\r\n\t\t\t\t\t\t\t(k1*y1*T1+k2*y2*T2)*Math.sign(k2*y2)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else if (lambda1<0 && lambda2>0) { // saddle\r\n\t\t\t\t\tlet t=0 // assumes starting point is in viewport\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst ke1=k1*Math.exp(lambda1*t)\r\n\t\t\t\t\t\tconst ke2=k2*Math.exp(lambda2*t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(x1*ke1+x2*ke2)*Math.sign(x1*k1)>xRange ||\r\n\t\t\t\t\t\t\t(y1*ke1+y2*ke2)*Math.sign(y1*k1)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t\tconst dt=Math.min(\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke2*lambda2),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke2*lambda2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt-=dt\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst ke1=k1*Math.exp(lambda1*t)\r\n\t\t\t\t\t\tconst ke2=k2*Math.exp(lambda2*t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+(x1*ke1+x2*ke2),\r\n\t\t\t\t\t\t\t-(y1*ke1+y2*ke2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (t>0 && (\r\n\t\t\t\t\t\t\t(x1*ke1+x2*ke2)*Math.sign(x1*k2)>xRange ||\r\n\t\t\t\t\t\t\t(y1*ke1+y2*ke2)*Math.sign(y1*k2)>yRange\r\n\t\t\t\t\t\t)) break\r\n\t\t\t\t\t\tconst dt=Math.min(\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke2*lambda2),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke2*lambda2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt+=dt\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else if (lambda1==0 && lambda2>0) { // comb\r\n\t\t\t\t\tconst t=fnOnFractions(Math.min,\r\n\t\t\t\t\t\tMath.sign(x2*k2)*xRange-x1*k1, x2*k2,\r\n\t\t\t\t\t\tMath.sign(y2*k2)*yRange-y1*k1, y2*k2\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (t>0) {\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t\t\t+(x1*k1),\r\n\t\t\t\t\t\t\t-(y1*k1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+(x1*k1+x2*k2*t),\r\n\t\t\t\t\t\t\t-(y1*k1+y2*k2*t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawSpiralSolution=()=>{\r\n\t\t\t\tlet alpha=matrix.re1\r\n\t\t\t\tlet beta=matrix.im1\r\n\t\t\t\tif (beta<0) {\r\n\t\t\t\t\tbeta=-beta\r\n\t\t\t\t}\r\n\t\t\t\tconst xxyy=matrix.getComplexEigenvector(alpha,beta)\r\n\t\t\t\tif (alpha<0) {\r\n\t\t\t\t\talpha=-alpha\r\n\t\t\t\t\tbeta=-beta\r\n\t\t\t\t}\r\n\t\t\t\tconst x1=xxyy[0], x2=xxyy[1]\r\n\t\t\t\tconst y1=xxyy[2], y2=xxyy[3]\r\n\t\t\t\tconst k1=+(x2*y0-x0*y2)/(x2*y1-x1*y2)\r\n\t\t\t\tconst k2=-(x1*y0-x0*y1)/(x2*y1-x1*y2)\r\n\t\t\t\tif (k1==0 && k2==0) return\r\n\t\t\t\tconst kxc=k1*x1+k2*x2\r\n\t\t\t\tconst kxs=k2*x1-k1*x2\r\n\t\t\t\tconst kyc=k1*y1+k2*y2\r\n\t\t\t\tconst kys=k2*y1-k1*y2\r\n\t\t\t\tif (alpha==0) { // center\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tconst dt=1/Math.max(kxc,kyc,kxs,kys)\r\n\t\t\t\t\tlet t=0\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst c=Math.cos(t)\r\n\t\t\t\t\t\tconst s=Math.sin(t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+(kxc*c+kxs*s),\r\n\t\t\t\t\t\t\t-(kyc*c+kys*s)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt+=dt\r\n\t\t\t\t\t\tif (t>=2*Math.PI) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else { // spiral\r\n\t\t\t\t\tconst calculateSemiaxes=()=>{ // https://en.wikipedia.org/wiki/Ellipse#Canonical_form\r\n\t\t\t\t\t\tconst A=kys*kys+kyc*kyc, B=-2*(kxs*kys+kxc*kyc), C=kxs*kxs+kxc*kxc\r\n\t\t\t\t\t\tconst f=kxc*kys-kxs*kyc\r\n\t\t\t\t\t\tconst F=-f*f\r\n\t\t\t\t\t\tconst DIS=B*B-4*A*C\r\n\t\t\t\t\t\tconst A2=2*DIS*F*(A+C-Math.sqrt((A-C)*(A-C)+B*B))/(DIS*DIS)\r\n\t\t\t\t\t\tconst B2=2*DIS*F*(A+C+Math.sqrt((A-C)*(A-C)+B*B))/(DIS*DIS)\r\n\t\t\t\t\t\treturn [A2,B2] // TODO relative axes lengths don't depend on initial conditions, this calculation should be simpler\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst A2B2=calculateSemiaxes()\r\n\t\t\t\t\tconst A2=A2B2[0]\r\n\t\t\t\t\tconst B2=A2B2[1]\r\n\t\t\t\t\tconst B=Math.sqrt(B2)\r\n\t\t\t\t\tconst R2=xRange*xRange+yRange*yRange\r\n\t\t\t\t\t//const t0=-(Math.log(B2)/2+Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\r\n\t\t\t\t\tconst lineWidth=2\r\n\t\t\t\t\tconst t0=(Math.log(lineWidth)-Math.log(B2)/2-Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\r\n\t\t\t\t\t//const t1=(Math.log(R2)-Math.log(A2))/(2*alpha)\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tconst e0=Math.exp(alpha*t0)\r\n\t\t\t\t\tconst nSegments=Math.ceil(B*e0*2*Math.PI)\r\n\t\t\t\t\tfor (let i=0;i<nSegments;i++) {\r\n\t\t\t\t\t\tconst t=2*Math.PI*i/nSegments\r\n\t\t\t\t\t\tconst c0=Math.cos(t)\r\n\t\t\t\t\t\tconst s0=Math.sin(t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+e0*(kxc*c0+kxs*s0),\r\n\t\t\t\t\t\t\t-e0*(kyc*c0+kys*s0)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\tctx.fill()\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tlet t=t0\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst e=Math.exp(alpha*t)\r\n\t\t\t\t\t\tconst c=Math.cos(beta*t)\r\n\t\t\t\t\t\tconst s=Math.sin(beta*t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+e*(kxc*c+kxs*s),\r\n\t\t\t\t\t\t\t-e*(kyc*c+kys*s)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t//const dtTan=1/Math.abs(beta*B*e)\r\n\t\t\t\t\t\tconst dtRad=Math.log(1/(B*e)+1)/alpha\r\n\t\t\t\t\t\t//t+=Math.min(Math.max(dtTan,1/Math.abs(40*beta)),dtRad)\r\n\t\t\t\t\t\tt+=Math.min(dtRad,1/Math.abs(16*beta))\r\n\t\t\t\t\t\tif (e*e*A2>R2) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawDefectiveSolution=()=>{\r\n\t\t\t\tlet lambda=matrix.re1\r\n\t\t\t\tlet x1=(matrix.a-lambda)*x0+matrix.b*y0\r\n\t\t\t\tlet y1=matrix.c*x0+(matrix.d-lambda)*y0\r\n\t\t\t\tif (lambda<0) {\r\n\t\t\t\t\tlambda=-lambda\r\n\t\t\t\t\tx1=-x1\r\n\t\t\t\t\ty1=-y1\r\n\t\t\t\t}\r\n\t\t\t\tif (lambda==0 && x1==0 && y1==0) { // everywhere fixed\r\n\t\t\t\t\tdrawFixedPoint()\r\n\t\t\t\t} if (lambda==0) { // parallel lines\r\n\t\t\t\t\tconst t0=fnOnFractions(Math.min,\r\n\t\t\t\t\t\t-Math.sign(x1)*xRange-x0, x1,\r\n\t\t\t\t\t\t-Math.sign(y1)*yRange-y0, y1\r\n\t\t\t\t\t)\r\n\t\t\t\t\tconst t1=fnOnFractions(Math.max,\r\n\t\t\t\t\t\t+Math.sign(x1)*xRange-x0, x1,\r\n\t\t\t\t\t\t+Math.sign(y1)*yRange-y0, y1\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t\t+(x0+t0*x1),\r\n\t\t\t\t\t\t-(y0+t0*y1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t+(x0+t1*x1),\r\n\t\t\t\t\t\t-(y0+t1*y1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else { // star or defective node\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(0,0)\r\n\t\t\t\t\tlet T=0\r\n\t\t\t\t\tconst dT=1/Math.max(Math.abs(x0),Math.abs(y0))\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tT+=dT\r\n\t\t\t\t\t\tconst t=Math.log(T)/lambda\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+T*(x0+t*x1),\r\n\t\t\t\t\t\t\t-T*(y0+t*y1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tT*(x0+t*x1)*Math.sign(x0)>xRange ||\r\n\t\t\t\t\t\t\tT*(y0+t*y1)*Math.sign(y0)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.save()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tctx.strokeStyle=ctx.fillStyle=color\r\n\t\t\tif (matrix.im1==0 && matrix.re1!=matrix.re2) {\r\n\t\t\t\tdrawSaddleOrNodeSolution()\r\n\t\t\t} else if (matrix.im1==0 && matrix.re1==matrix.re2) {\r\n\t\t\t\tdrawDefectiveSolution()\r\n\t\t\t} else if (matrix.im1!=0) {\r\n\t\t\t\tdrawSpiralSolution()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.fillStyle='#FFF'\r\n\t\tctx.fillRect(0,0,this.width,this.height)\r\n\t\tctx.restore()\r\n\t\tctx.save()\r\n\t\tctx.translate(xRange,yRange)\r\n\t\tthis.drawAxes(xLabel,yLabel)\r\n\t\tdrawDirectionField()\r\n\t\tif (matrix.im1==0) {\r\n\t\t\tdrawEigenline(matrix.re1,matrix.re2)\r\n\t\t\tif (matrix.re1!=matrix.re2) {\r\n\t\t\t\tdrawEigenline(matrix.re2,matrix.re1)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawSolution(+xRange/2,0,'#08F')\r\n\t\tdrawSolution(-xRange/2,0,'#28F')\r\n\t\tdrawSolution(0,+yRange/2,'#0AF')\r\n\t\tdrawSolution(0,-yRange/2,'#08D')\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=PhaseCanvas\r\n","'use strict'\r\n\r\nconst Canvas=require('./canvas')\r\n\r\nclass TrdetCanvas extends Canvas {\r\n\tredraw(matrix) {\r\n\t\tconst crosshairSize=10\r\n\t\tconst pointerSize=5\r\n\t\tconst pointerMargin=3\r\n\t\tconst trRange=matrix.getRange('tr')\r\n\t\tconst detRange=matrix.getRange('det')\r\n\t\tconst ctx=this.ctx\r\n\t\tconst xRange=this.width/2\r\n\t\tconst yRange=this.height/2\r\n\t\tconst D=matrix.det\r\n\t\tconst T=matrix.tr\r\n\t\tconst drawRegionAreas=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tctx.fillStyle='#FCC'\r\n\t\t\tif (D<0) {\r\n\t\t\t\tctx.fillRect(-xRange,0,xRange*2,yRange)\r\n\t\t\t} else if ((D>0 && 4*D<T*T) || (4*D>T*T) && T!=0) {\r\n\t\t\t\tif (T<0) {\r\n\t\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tif (4*D>T*T) {\r\n\t\t\t\t\tctx.moveTo(xRange,-yRange)\r\n\t\t\t\t\tctx.lineTo(0,-yRange)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.moveTo(xRange,0)\r\n\t\t\t\t}\r\n\t\t\t\tfor (let x=0;x<=xRange;x++) {\r\n\t\t\t\t\tconst t=x*trRange/xRange\r\n\t\t\t\t\tconst d=t*t/4\r\n\t\t\t\t\tconst y=-d*yRange/detRange\r\n\t\t\t\t\tctx.lineTo(x,y)\r\n\t\t\t\t}\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawRegionLines=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tconst drawRegionLinesOnce=(all)=>{\r\n\t\t\t\tconst drawParabola=()=>{\r\n\t\t\t\t\tfor (let x=0;x<=+xRange;x++) {\r\n\t\t\t\t\t\tconst t=x*trRange/xRange\r\n\t\t\t\t\t\tconst d=t*t/4\r\n\t\t\t\t\t\tconst y=-d*yRange/detRange\r\n\t\t\t\t\t\tctx[x?'lineTo':'moveTo'](x,y)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tif (all || (D==0 && T<0)) {\r\n\t\t\t\t\tctx.moveTo(-xRange,0)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D==0 && T>0)) {\r\n\t\t\t\t\tctx.moveTo(+xRange,0)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D>0 && T==0)) {\r\n\t\t\t\t\tctx.moveTo(0,-yRange)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (4*D==T*T && T<0)) {\r\n\t\t\t\t\tctx.save()\r\n\t\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\t\tdrawParabola()\r\n\t\t\t\t\tctx.restore()\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (4*D==T*T && T>0)) {\r\n\t\t\t\t\tdrawParabola()\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D==0 && T==0)) {\r\n\t\t\t\t\tctx.moveTo(-2,-2)\r\n\t\t\t\t\tctx.lineTo(-2,+2)\r\n\t\t\t\t\tctx.lineTo(+2,+2)\r\n\t\t\t\t\tctx.lineTo(+2,-2)\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke()\r\n\t\t\t}\r\n\t\t\tctx.lineCap='square'\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tdrawRegionLinesOnce(true)\r\n\t\t\tctx.lineWidth=4\r\n\t\t\tctx.strokeStyle='#F88'\r\n\t\t\tdrawRegionLinesOnce()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tctx.strokeStyle='#400'\r\n\t\t\tdrawRegionLinesOnce()\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawPosition=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tctx.strokeStyle=ctx.fillStyle='#F00'\r\n\t\t\tlet x=matrix.tr/trRange*xRange\r\n\t\t\tlet y=-matrix.det/detRange*yRange\r\n\t\t\tif (x<0) {\r\n\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\tx=-x\r\n\t\t\t}\r\n\t\t\tif (y<0) {\r\n\t\t\t\tctx.scale(1,-1)\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (x>xRange) {\r\n\t\t\t\tctx.transform(0,1,1,0,0,0)\r\n\t\t\t\t;[x,y]=[y,x]\r\n\t\t\t}\r\n\t\t\tif ((x>xRange && y>yRange-pointerMargin) || (x>xRange-pointerMargin && y>yRange)) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(xRange-pointerMargin,yRange-pointerMargin)\r\n\t\t\t\tctx.lineTo(xRange-pointerMargin,yRange-pointerMargin-pointerSize*Math.SQRT2)\r\n\t\t\t\tctx.lineTo(xRange-pointerMargin-pointerSize*Math.SQRT2,yRange-pointerMargin)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t} else if (y>xRange) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(x,yRange-pointerMargin)\r\n\t\t\t\tctx.lineTo(x+pointerSize,yRange-pointerMargin-pointerSize)\r\n\t\t\t\tctx.lineTo(x-pointerSize,yRange-pointerMargin-pointerSize)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t} else {\r\n\t\t\t\tconst s=crosshairSize\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(x-s,y)\r\n\t\t\t\tctx.lineTo(x+s,y)\r\n\t\t\t\tctx.moveTo(x,y-s)\r\n\t\t\t\tctx.lineTo(x,y+s)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.fillStyle='#FFF'\r\n\t\tctx.fillRect(0,0,this.width,this.height)\r\n\t\tctx.translate(xRange,yRange)\r\n\t\tdrawRegionAreas()\r\n\t\tthis.drawAxes('tr','det')\r\n\t\tdrawRegionLines()\r\n\t\tdrawPosition()\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=TrdetCanvas\r\n","'use strict'\r\n\r\nconst LinearEquation=require('./linear-equation')\r\n\r\nclass LinearConstantEquation extends LinearEquation {\r\n\tparticularSolutionCases() {\r\n\t\tconst x=this.x\r\n\t\tconst f=this.f\r\n\t\treturn nt=>[\r\n\t\t\t...super.particularSolutionCases()(nt),\r\n\t\t\t{type:'case',title:`using time invariance when \\\\( ${f}(t) = ${f}_1(t+t_1) \\\\)`,content:[\r\n\t\t\t\t`find a particular solution \\\\( ${x._('p',1)} \\\\) of:`,\r\n\t\t\t\t`\\\\[ ${this.equation(`${f}_1`)(nt)} \\\\]`,\r\n\t\t\t\t`particular solution of the original equation is:`,\r\n\t\t\t\tx._('p').parallelExpression(xp=>`${xp}(t) &= ${xp._(1)}(t+t_1)`),\r\n\t\t\t]},\r\n\t\t\t{type:'case',title:`using exponential response formula when \\\\( ${f}(t) = 1 \\\\), \\\\( e^{α t} \\\\), \\\\( \\\\cos ω t \\\\), \\\\( \\\\sin ω t \\\\), \\\\( e^{α t} \\\\cos ω t \\\\) or \\\\( e^{α t} \\\\sin ω t \\\\)`,\r\n\t\t\t\tcontent:this.erfContent()(nt)\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n\terfContent() {\r\n\t\tconst x=this.x\r\n\t\tconst f=this.f\r\n\t\treturn nt=>[\r\n\t\t\t`define characteristic polynomial \\\\( P \\\\) as`,\r\n\t\t\t`\\\\[ P(λ) = ${this.equation.characteristicPolynomial(nt)} \\\\]`,\r\n\t\t\t`get \\\\( r \\\\in \\\\mathbb{C} \\\\) by equating \\\\( ${f}(t) \\\\) to \\\\( e^{r t} \\\\), \\\\( \\\\operatorname{Re}(e^{r t}) \\\\) or \\\\( \\\\operatorname{Im}(e^{r t}) \\\\)`,\r\n\t\t\t`\\\\[ \\\\begin{array}{cc} `+\r\n\t\t\t\t`${f}(t) & r \\\\\\\\[1em] `+\r\n\t\t\t\t`\\\\hline `+\r\n\t\t\t\t`1 & 0 \\\\\\\\`+\r\n\t\t\t\t`e^{α t} & α \\\\\\\\`+\r\n\t\t\t\t`\\\\cos ω t & i ω \\\\\\\\ `+\r\n\t\t\t\t`\\\\sin ω t & i ω \\\\\\\\ `+\r\n\t\t\t\t`e^{α t} \\\\cos ω t & α + i ω \\\\\\\\ `+\r\n\t\t\t\t`e^{α t} \\\\sin ω t & α + i ω `+\r\n\t\t\t`\\\\end{array} \\\\]`,\r\n\t\t\t{type:'derivation',content:[\r\n\t\t\t\tx.firstComponentExpressionPreamble(\r\n\t\t\t\t\tc=>`${c}the equation can be written as one of`\r\n\t\t\t\t),\r\n\t\t\t\tx.firstComponentExpression(\r\n\t\t\t\t\tx1=>`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t\t  `P\\\\left(${nt.ddt}\\\\right) ${x1} &= e^{r t} \\\\\\\\ `+\r\n\t\t\t\t\t\t`\\\\operatorname{Re}\\\\left( P\\\\left(${nt.ddt}\\\\right) ${x1} \\\\right) &= \\\\operatorname{Re}(e^{r t}) \\\\\\\\ `+\r\n\t\t\t\t\t\t`\\\\operatorname{Im}\\\\left( P\\\\left(${nt.ddt}\\\\right) ${x1} \\\\right) &= \\\\operatorname{Im}(e^{r t}) `+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\]`\r\n\t\t\t\t),\r\n\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t`the rest of this derivation uses the first form:`,\r\n\t\t\t\t\tx.firstComponentExpression(\r\n\t\t\t\t\t\tx1=>`\\\\[ P\\\\left(${nt.ddt}\\\\right) ${x1} = e^{r t} \\\\]`\r\n\t\t\t\t\t),\r\n\t\t\t\t]},\r\n\t\t\t\t`evaluate \\\\( P\\\\left(${nt.ddt}\\\\right) e^{r t} \\\\)`,\r\n\t\t\t\t`\\\\[ P\\\\left(${nt.ddt}\\\\right) e^{r t} = P(r) e^{r t} \\\\]`,\r\n\t\t\t\t{type:'switch',title:`\\\\( P(r) \\\\) is`,content:[\r\n\t\t\t\t\t{type:'case',title:`\\\\( P(r) \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t`divide by \\\\( P(r) \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ P\\\\left(${nt.ddt}\\\\right) \\\\frac{e^{r t}}{P(r)} = e^{r t} \\\\]`,\r\n\t\t\t\t\t\t`compare with`,\r\n\t\t\t\t\t\tx.firstComponentExpression(\r\n\t\t\t\t\t\t\tx1=>`\\\\[ P\\\\left(${nt.ddt}\\\\right) ${x1} = e^{r t} \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tx.firstComponentExpressionPreamble(\r\n\t\t\t\t\t\t\tc=>`to see that ${c}a particular solution is`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tx._('p').firstComponentExpression(\r\n\t\t\t\t\t\t\tx1=>`\\\\[ ${x1} = \\\\frac{e^{r t}}{P(r)} \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`\\\\( P(r) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t`assume that \\\\( r \\\\) is a variable and differentiate by it`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{\\\\partial}{\\\\partial r}\\\\left(\\\\! P\\\\left(\\\\!${nt.ddt}\\\\!\\\\right) e^{r t} \\\\!\\\\right) = \\\\frac{\\\\partial}{\\\\partial r}\\\\left( P(r) e^{r t} \\\\right) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\begin{multline} `+\r\n\t\t\t\t\t\t\t`P\\\\left(\\\\!${nt.ddt}\\\\!\\\\right) \\\\frac{\\\\partial e^{r t}}{\\\\partial r} = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`= \\\\frac{\\\\partial P(r)}{\\\\partial r} e^{r t} + P(r) \\\\frac{\\\\partial e^{r t}}{\\\\partial r} `+\r\n\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ P\\\\left(\\\\!${nt.ddt}\\\\!\\\\right) t e^{r t} = P'(r) e^{r t} + P(r) t e^{r t} \\\\]`,\r\n\t\t\t\t\t\t`treat \\\\( r \\\\) as a constant again with \\\\( P(r) = 0 \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ P\\\\left(${nt.ddt}\\\\right) t e^{r t} = P'(r) e^{r t} \\\\]`,\r\n\t\t\t\t\t\t{type:'switch',title:`\\\\( P'(r) \\\\) is`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( P'(r) \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`divide by \\\\( P'(r) \\\\)`,\r\n\t\t\t\t\t\t\t\t`\\\\[ P\\\\left(${nt.ddt}\\\\right) \\\\frac{t e^{r t}}{P'(r)} = e^{r t} \\\\]`,\r\n\t\t\t\t\t\t\t\t`compare with`,\r\n\t\t\t\t\t\t\t\tx.firstComponentExpression(\r\n\t\t\t\t\t\t\t\t\tx1=>`\\\\[ P\\\\left(${nt.ddt}\\\\right) ${x1} = e^{r t} \\\\]`\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\tx.firstComponentExpressionPreamble(\r\n\t\t\t\t\t\t\t\t\tc=>`to see that ${c}a particular solution is`\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\tx._('p').firstComponentExpression(\r\n\t\t\t\t\t\t\t\t\tx1=>`\\\\[ ${x1} = \\\\frac{t e^{r t}}{P'(r)} \\\\]`\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( P'(r) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`continue differentiating by \\\\( r \\\\)`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t\t`if`,\r\n\t\t\t`\\\\[ P(r) {=} P'(r) {=} \\\\cdots {=} P^{(m-1)}(r) {=} 0 \\\\]`,\r\n\t\t\t`and`,\r\n\t\t\t`\\\\[ P^{(m)}(r) \\\\ne 0 \\\\]`,\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`this is equivalent to:`,\r\n\t\t\t\t`if \\\\( r \\\\) is a root of \\\\( P \\\\) with multiplicity \\\\( m \\\\)`,\r\n\t\t\t\t`where \\\\( m = 0 \\\\) means \\\\( r \\\\) is not a root of \\\\( P \\\\)`,\r\n\t\t\t]},\r\n\t\t\tx._('p').firstComponentExpressionPreamble(\r\n\t\t\t\tc=>`then ${c}a particular solution is one of`\r\n\t\t\t),\r\n\t\t\tx._('p').firstComponentExpression(\r\n\t\t\t\tx1=>`\\\\[ \\\\begin{array}{cc} `+\r\n\t\t\t\t\t`${f}(t) & ${x1} \\\\\\\\[1em] `+\r\n\t\t\t\t\t`\\\\hline `+\r\n\t\t\t\t\t`1 & \\\\dfrac{t^m}{P^{(m)}(0)} \\\\\\\\`+\r\n\t\t\t\t\t`e^{α t} & \\\\dfrac{t^m \\\\cdot e^{α t}}{P^{(m)}(α)} \\\\\\\\`+\r\n\t\t\t\t\t`\\\\cos ω t & \\\\operatorname{Re}\\\\left(\\\\! \\\\dfrac{t^m \\\\cdot e^{i ω t}}{P^{(m)}(i ω)} \\\\!\\\\right) \\\\\\\\ `+\r\n\t\t\t\t\t`\\\\sin ω t & \\\\operatorname{Im}\\\\left(\\\\! \\\\dfrac{t^m \\\\cdot e^{i ω t}}{P^{(m)}(i ω)} \\\\!\\\\right) \\\\\\\\ `+\r\n\t\t\t\t\t`e^{α t} \\\\cos ω t & \\\\operatorname{Re}\\\\left(\\\\! \\\\dfrac{t^m \\\\cdot e^{(α {+} i ω) t}}{P^{(m)}(α {+} i ω)} \\\\!\\\\right) \\\\\\\\ `+\r\n\t\t\t\t\t`e^{α t} \\\\sin ω t & \\\\operatorname{Im}\\\\left(\\\\! \\\\dfrac{t^m \\\\cdot e^{(α {+} i ω) t}}{P^{(m)}(α {+} i ω)} \\\\!\\\\right) `+\r\n\t\t\t\t`\\\\end{array} \\\\]`\r\n\t\t\t),\r\n\t\t\t...x._('p').restDiffComponentExpressionContent()(nt),\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=LinearConstantEquation\r\n","'use strict'\r\n\r\n// const characteristicEquationContent=require('./characteristic-equation-content')\r\n\r\nclass LinearEquationFormSuite {\r\n\tmakeConstantForm(equationFn,characteristicPolynomialFn,equationCoefs) {\r\n\t\tconst form1=input=>equationFn(true)(input)\r\n\t\tform1.equationCoefs=equationCoefs\r\n\t\tform1.characteristicPolynomial=characteristicPolynomialFn\r\n\t\tform1.characteristicEquation=nt=>characteristicPolynomialFn(nt)+` = 0`\r\n\t\treturn form1\r\n\t}\r\n\tmakeForm(equationFn,characteristicPolynomialFn,equationCoefs) {\r\n\t\treturn isConstant=>{\r\n\t\t\tif (isConstant) {\r\n\t\t\t\treturn this.makeConstantForm(equationFn,characteristicPolynomialFn,equationCoefs)\r\n\t\t\t} else {\r\n\t\t\t\treturn equationFn(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// abstract get classIdPrefix\r\n\tgetClassId(isConstant,isHomogeneous) {\r\n\t\tlet classId=this.classIdPrefix+'_linear'\r\n\t\tif (isHomogeneous) classId+='Homogeneous'\r\n\t\tif (isConstant) classId+='Constant'\r\n\t\treturn classId\r\n\t}\r\n\t// abstract get highestOrderCoefficient()\r\n\t// abstract get systemFormType()\r\n\tgetForms(isConstant,isHomogeneous) {\r\n\t\tconst classId=this.getClassId(isConstant,isHomogeneous)\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tis: `t,x,linear_${classId}`,\r\n\t\t\t\tequation: this.linear(isConstant)(isHomogeneous?0:'f'),\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( `+this.highestOrderCoefficient+(isConstant?``:`(t)`)+` \\\\ne 0 \\\\)`+(isConstant?``:` on the entire interval of interest`),\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,x,resolved_${classId}`,\r\n\t\t\t\tequation: this.resolved(isConstant)(isHomogeneous?0:'g'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,${this.systemFormType},system_${classId}`,\r\n\t\t\t\tequation: this.system(isConstant)(isHomogeneous?0:'g'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,X,vector_${classId}`,\r\n\t\t\t\tequation: this.vector(isConstant)(isHomogeneous?0:'g'),\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n\tgetAssociatedHomogeneousEquationTrait(isConstant,isHomogeneous) {\r\n\t\tconst classId=this.getClassId(isConstant,isHomogeneous)\r\n\t\tconst note=isHomogeneous?[\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`the equation is associated with itself`,\r\n\t\t\t]},\r\n\t\t]:[]\r\n\t\tconst trait={\r\n\t\t\tcontents: {\r\n\t\t\t\t[`linear_${classId}`]: nt=>[\r\n\t\t\t\t\t`\\\\[ `+this.linear(isConstant)(0)(nt)+` \\\\]`,\r\n\t\t\t\t\t...note,\r\n\t\t\t\t],\r\n\t\t\t\t[`resolved_${classId}`]: nt=>[\r\n\t\t\t\t\t`\\\\[ `+this.resolved(isConstant)(0)(nt)+` \\\\]`,\r\n\t\t\t\t\t...note,\r\n\t\t\t\t],\r\n\t\t\t\t[`system_${classId}`]: nt=>[\r\n\t\t\t\t\t`\\\\[ `+this.system(isConstant)(0)(nt)+` \\\\]`,\r\n\t\t\t\t\t...note,\r\n\t\t\t\t],\r\n\t\t\t\t[`vector_${classId}`]: nt=>[\r\n\t\t\t\t\t`\\\\[ `+this.vector(isConstant)(0)(nt)+` \\\\]`,\r\n\t\t\t\t\t...note,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t}\r\n\t\tif (isHomogeneous) {\r\n\t\t\ttrait.close=true\r\n\t\t}\r\n\t\treturn trait\r\n\t}\r\n\t// abstract getEquilibriumSolutionMethodTrait(isConstant) // assumed to be homogeneous\r\n}\r\n\r\nmodule.exports=LinearEquationFormSuite\r\n","'use strict'\r\n\r\nclass LinearEquation {\r\n\tconstructor(x,f,equation) {\r\n\t\tthis.x=x\r\n\t\tthis.f=f\r\n\t\tthis.equation=equation\r\n\t}\r\n\tgetContentFor_generalSolutionMethod(homogeneousGeneralSolution) {\r\n\t\tconst x=this.x\r\n\t\tconst extraSection=(title,content)=>(content!==undefined\r\n\t\t\t? {type:'extra',title,content}\r\n\t\t\t: title\r\n\t\t)\r\n\t\treturn nt=>[\r\n\t\t\textraSection(`find the general solution \\\\( ${x._('h')} \\\\) of the associated homogeneous equation`,homogeneousGeneralSolution),\r\n\t\t\t{type:'switch',title:`find a particular solution \\\\( ${x._('p')} \\\\) of the original equation`,\r\n\t\t\t\tcontent:this.particularSolutionCases()(nt)\r\n\t\t\t},\r\n\t\t\t`general solution (with arbitrary constants included in \\\\( ${x._('h')}) \\\\):`,\r\n\t\t\tx.parallelExpression(x=>`${x} &= ${x._('h')} + ${x._('p')}`)\r\n\t\t]\r\n\t}\r\n\tparticularSolutionCases() {\r\n\t\tconst x=this.x\r\n\t\tconst f=this.f\r\n\t\treturn nt=>[\r\n\t\t\t// TODO guess coefficients - needs example\r\n\t\t\t{type:'case',title:`using superposition when \\\\( ${f}(t) = k_1 ${f}_1(t) + k_2 ${f}_2(t) + \\\\cdots \\\\)`,content:[\r\n\t\t\t\t`for each term \\\\( k_j ${f}_j(t) \\\\), find a particular solution \\\\( ${x._('p','j')} \\\\) of:`,\r\n\t\t\t\t`\\\\[ ${this.equation(`${f}_j`)(nt)} \\\\]`,\r\n\t\t\t\t`particular solution of the original equation is a linear combinations of these solutions:`,\r\n\t\t\t\tx._('p').parallelExpression(xp=>`${xp} &= k_1 ${xp._(1)} + k_2 ${xp._(2)} + \\\\cdots`),\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=LinearEquation\r\n","'use strict'\r\n\r\nconst UnorderedClassSubgraph=require('./unordered-class-subgraph')\r\nconst OrderedClassSubgraph=require('./ordered-class-subgraph')\r\nconst TheadLayout=require('./thead-layout')\r\nconst TrLayout=require('./tr-layout')\r\nconst Notation=require('./notation')\r\nconst data=require('./data')\r\nconst FormRowsOutput=require('./form-rows-output')\r\nconst TraitRowsOutput=require('./trait-rows-output')\r\n\r\nconst i18n=(id)=>{\r\n\tconst strings={\r\n\t\t'trait.entity': \"Associated entities\",\r\n\t\t'trait.associatedHomogeneousEquation': \"Associated homogeneous equation\",\r\n\t\t'trait.characteristicEquation': \"<a href='https://en.wikipedia.org/wiki/Characteristic_equation_(calculus)'>Characteristic equation</a>\",\r\n\t\t'trait.halfLife': \"<a href='https://en.wikipedia.org/wiki/Half-life'>Half-life</a>\",\r\n\r\n\t\t'trait.property': \"Properties\",\r\n\t\t'trait.isoclineProperty': \"Property of <a href='https://en.wikipedia.org/wiki/Isocline'>isoclines</a>\",\r\n\t\t'trait.solutionRelation': \"Solution relation properties\",\r\n\t\t'trait.shiftSolutionRelation': \"Time/value shifts of solutions\",\r\n\t\t'trait.linearitySolutionRelation': \"Linear/affine properties of solutions\",\r\n\t\t'trait.solutionSpaceBasis': \"Basis of the solution space\",\r\n\t\t'trait.homogeneitySolutionRelation': \"Homogeneity of solutions\",\r\n\t\t'trait.additivitySolutionRelation': \"Additivity of solutions\",\r\n\t\t'trait.linearCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Linear_combination'>Linear combination</a> property of solutions\",\r\n\t\t'trait.affineCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Affine_combination'>Affine combination</a> property of solutions\",\r\n\t\t'trait.realitySolutionRelation': \"Reality principle\", // https://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_6.pdf\r\n\t\t'trait.associatedSolutionRelation': \"Associated homogeneous equation solution\",\r\n\r\n\t\t// TODO remove\r\n\t\t'trait.transform': \"Transforms to different types\",\r\n\t\t'trait.orderReduction': \"Order reduction\",\r\n\r\n\t\t'trait.solutionMethod': \"Solutions\",\r\n\t\t'trait.generalSolutionMethod': \"General solution\",\r\n\t\t'trait.phaseSolutionMethod': \"<a href='https://en.wikipedia.org/wiki/Phase_space'>Phase space</a> trajectory\",\r\n\t\t'trait.equilibriumSolutionMethod': \"<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>Equilibrium solutions</a>\",\r\n\t\t'trait.testSolutionMethod': \"Solution testing\",\r\n\r\n\t\t'trait.plot': \"Plot\",\r\n\t}\r\n\treturn strings[id]\r\n}\r\n\r\n$(function(){\r\n\t$('.crnx-ode-properties').each(function(){\r\n\t\tconst $container=$(this).empty()\r\n\t\tconst selectedNodes={} // visible nodes // TODO rename to visibleNodes\r\n\r\n\t\t// options\r\n\t\tlet traitAlignmentLevel=1\r\n\t\tconst maxTraitAlignmentLevel=4\r\n\t\tlet dependentVariables='yvz'\r\n\t\tconst availableDependentVariables=['xyw','yvz']\r\n\t\tconst viewDependentVariables={\r\n\t\t\txyw: `\\\\( x \\\\), \\\\( y \\\\), \\\\( w \\\\)`,\r\n\t\t\tyvz: `\\\\( y \\\\), \\\\( v \\\\), \\\\( z \\\\)`,\r\n\t\t}\r\n\t\tlet notation=new Notation(dependentVariables)\r\n\r\n\t\tfor (let id in data.classes) {\r\n\t\t\tif (data.classes[id].importance<=1) {\r\n\t\t\t\tselectedNodes[id]=true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet unorderedClassSubgraph,theadLayout,orderedClassSubgraph,trLayout\r\n\t\tconst recomputeLayouts=()=>{\r\n\t\t\tunorderedClassSubgraph=new UnorderedClassSubgraph(data.classes,selectedNodes)\r\n\t\t\ttheadLayout=new TheadLayout(unorderedClassSubgraph)\r\n\t\t\torderedClassSubgraph=new OrderedClassSubgraph(unorderedClassSubgraph,theadLayout.columns)\r\n\t\t\ttrLayout=new TrLayout(unorderedClassSubgraph,data.classes,theadLayout.columns)\r\n\t\t}\r\n\t\trecomputeLayouts()\r\n\r\n\t\t// TODO put into classSubgraph\r\n\t\tconst breadthWalk=(graph,id)=>{\r\n\t\t\tconst result=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst queue=[id]\r\n\t\t\twhile (queue.length>0) {\r\n\t\t\t\tid=queue.shift()\r\n\t\t\t\tif (visited[id]) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tif (!selectedNodes[id]) {\r\n\t\t\t\t\tresult.push(id)\r\n\t\t\t\t}\r\n\t\t\t\tqueue.push(...Object.keys(graph[id]).sort())\r\n\t\t\t}\r\n\t\t\treturn result\r\n\t\t}\r\n\t\tconst writeButton=(text,tip)=>{\r\n\t\t\tconst $button=$(`<button type='button'><span>${text}</span></button>`)\r\n\t\t\tif (tip!==undefined) {\r\n\t\t\t\t$button.attr('title',tip)\r\n\t\t\t}\r\n\t\t\treturn $button\r\n\t\t}\r\n\r\n\t\tlet $tableContainer,$quickSelect,$quickSelectButton\r\n\t\tconst updateQuickSelectButton=()=>{\r\n\t\t\tconst id=$quickSelect.val()\r\n\t\t\t$quickSelectButton.text(selectedNodes[id]\r\n\t\t\t\t? \"Delete\"\r\n\t\t\t\t: \"Add\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tconst deleteNode=id=>{\r\n\t\t\tdelete selectedNodes[id]\r\n\t\t\t$quickSelect.children(`[value=\"${id}\"]`).removeClass('added')\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\trecomputeLayouts()\r\n\t\t\twriteTable()\r\n\t\t}\r\n\t\tconst addNode=id=>{\r\n\t\t\tselectedNodes[id]=true\r\n\t\t\t$quickSelect.children(`[value=\"${id}\"]`).addClass('added')\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\trecomputeLayouts()\r\n\t\t\twriteTable()\r\n\t\t}\r\n\t\tconst writeQuickSelectControls=()=>{\r\n\t\t\tconst $div=$(\"<div>\").append(\r\n\t\t\t\t$quickSelect=$(\"<select>\").append(\r\n\t\t\t\t\tObject.keys(data.classes).sort().map(id=>{\r\n\t\t\t\t\t\tconst $option=$(\"<option>\").val(id).text(data.classes[id].name)\r\n\t\t\t\t\t\tif (selectedNodes[id]) {\r\n\t\t\t\t\t\t\t$option.addClass('added')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $option\r\n\t\t\t\t\t})\r\n\t\t\t\t).change(function(){\r\n\t\t\t\t\tupdateQuickSelectButton()\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$quickSelectButton=$(\"<button>\").click(function(){\r\n\t\t\t\t\tconst id=$quickSelect.val()\r\n\t\t\t\t\tif (selectedNodes[id]) {\r\n\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button>Clear all</button>\").click(function(){\r\n\t\t\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\t\t\tdelete selectedNodes[id]\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$quickSelect.children().removeClass('added')\r\n\t\t\t\t\tupdateQuickSelectButton()\r\n\t\t\t\t\trecomputeLayouts()\r\n\t\t\t\t\twriteTable()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\treturn $div\r\n\t\t}\r\n\t\tconst writeTable=()=>{ // TODO rename (doesn't return object)\r\n\t\t\tconst visibleAncestors={} // including self\r\n\t\t\tconst computeVisibleAncestors=(id,aid)=>{\r\n\t\t\t\tvisibleAncestors[id][aid]=true\r\n\t\t\t\tfor (let naid in unorderedClassSubgraph.visibleParents[aid]) {\r\n\t\t\t\t\tcomputeVisibleAncestors(id,naid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\tvisibleAncestors[id]={}\r\n\t\t\t\tcomputeVisibleAncestors(id,id)\r\n\t\t\t}\r\n\t\t\tconst $classHighlightables={}\r\n\t\t\tlet $attachedMenu, $attachedToButton, attachedDirection, attachTimeoutId\r\n\t\t\tconst setCellClasses=($cell,cell)=>{\r\n\t\t\t\tfor (let dir of ['b','t','bt','rl','rt','bl']) {\r\n\t\t\t\t\tif (cell[dir]) {\r\n\t\t\t\t\t\t$cell.addClass(dir)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst writeTheadButton=($cell,text,tip,dir,nodes)=>{\r\n\t\t\t\tconst keyCodeEnter=13\r\n\t\t\t\tconst keyCodeSpace=32\r\n\t\t\t\tconst keyCodeUp=38\r\n\t\t\t\tconst keyCodeDown=40\r\n\t\t\t\tconst $button=writeButton(text,tip).addClass(dir).click(function(){\r\n\t\t\t\t\tconst removeAttachedMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton.removeClass('attached-t attached-b')\r\n\t\t\t\t\t\t$attachedMenu.remove()\r\n\t\t\t\t\t\tclearTimeout(attachTimeoutId)\r\n\t\t\t\t\t\t$attachedToButton=undefined\r\n\t\t\t\t\t\t$attachedMenu=undefined\r\n\t\t\t\t\t\tattachedDirection=undefined\r\n\t\t\t\t\t\tattachTimeoutId=undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst startAttachingMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton=$button\r\n\t\t\t\t\t\t$attachedMenu=$(\"<ul>\").append(nodes.map(\r\n\t\t\t\t\t\t\tid=>$(\"<li tabindex='0'>\"+data.classes[id].name+\"</li>\").click(function(){\r\n\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\t\t\t\tif (!attachedDirection) return // not yet decided on attach direction (this can't happen)\r\n\t\t\t\t\t\t\t\tif (ev.keyCode==keyCodeUp) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).prev()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='b') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).next()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='t') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace) {\r\n\t\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t\t$cell.append($attachedMenu)\r\n\t\t\t\t\t\tattachTimeoutId=setTimeout(()=>{ // can calculate height only after it's displayed\r\n\t\t\t\t\t\t\tconst mh=$attachedMenu.outerHeight()\r\n\t\t\t\t\t\t\tconst mo=$attachedMenu.offset()\r\n\t\t\t\t\t\t\tconst bh=$button.outerHeight()\r\n\t\t\t\t\t\t\tconst bo=$button.offset()\r\n\t\t\t\t\t\t\tlet t=bo.top-mh+1\r\n\t\t\t\t\t\t\tif (dir!='t' || t<0) { // want below or doesn't fit to screen above the button\r\n\t\t\t\t\t\t\t\tt=bo.top+bh-1\r\n\t\t\t\t\t\t\t\tattachedDirection='b'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$attachedMenu.insertBefore($button)\r\n\t\t\t\t\t\t\t\tattachedDirection='t'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$attachedMenu.offset({\r\n\t\t\t\t\t\t\t\ttop: t,\r\n\t\t\t\t\t\t\t\tleft: mo.left,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t$attachedMenu.addClass('attached')\r\n\t\t\t\t\t\t\t$button.addClass('attached-'+attachedDirection)\r\n\t\t\t\t\t\t},0)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!$button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif ($attachedToButton) {\r\n\t\t\t\t\t\t\tremoveAttachedMenu() // close menu opened elsewhere\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstartAttachingMenu()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tremoveAttachedMenu() // close menu here\r\n\t\t\t\t\t}\r\n\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\tif ($button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif (ev.keyCode==keyCodeUp && attachedDirection=='t') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().last().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown && attachedDirection=='b') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().first().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $button\r\n\t\t\t}\r\n\t\t\tconst writeTheadCell=cell=>{\r\n\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\tif (cell.node!==undefined) {\r\n\t\t\t\t\tconst id=cell.node\r\n\t\t\t\t\t$classHighlightables[id]=$cell\r\n\t\t\t\t\t$cell.append(data.classes[id].htmlName)\r\n\t\t\t\t\tconst ancestors=breadthWalk(unorderedClassSubgraph.allParents,id).reverse()\r\n\t\t\t\t\tif (ancestors.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add ancestor\",\"Add one of supertypes of this equation type\",'t',ancestors)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst descendants=breadthWalk(unorderedClassSubgraph.allChildren,id)\r\n\t\t\t\t\tif (descendants.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add descendant\",\"Add one of subtypes of this equation type\",'b',descendants)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$cell.hover(function(){\r\n\t\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t\t$classHighlightables[aid].addClass('highlight')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t\t$classHighlightables[aid].removeClass('highlight')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn $cell\r\n\t\t\t}\r\n\t\t\tconst writeThead=()=>{\r\n\t\t\t\tconst $thead=$(\"<thead>\")\r\n\t\t\t\tfor (let i=0;i<theadLayout.nodeLayers.length;i++) {\r\n\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t$(\"<tr class='nodes'>\").append(\r\n\t\t\t\t\t\t\ttheadLayout.nodeLayers[i].map(writeTheadCell)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (i<theadLayout.arcLayers.length) {\r\n\t\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t\ttheadLayout.arcLayers[i].map(row=>$(\"<tr class='arcs'>\").append(\r\n\t\t\t\t\t\t\t\trow.map(cell=>{\r\n\t\t\t\t\t\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\t\t\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\t\t\t\t\t\treturn $cell\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $thead\r\n\t\t\t}\r\n\t\t\tconst writeTfoot=()=>{\r\n\t\t\t\treturn $(\"<tfoot>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\ttheadLayout.columns.map(id=>$(\"<td>\").append(\r\n\t\t\t\t\t\t\twriteButton(\"Delete\",\"Delete this equation type\").click(function(){\r\n\t\t\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tconst writeTraitAlignmentControls=()=>{\r\n\t\t\t\tconst $container=$(\"<form>Trait alignment level:</form>\")\r\n\t\t\t\tfor (let i=0;i<=maxTraitAlignmentLevel;i++) {\r\n\t\t\t\t\t$container.append(\r\n\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t\t$(\"<input type='radio' name='trait-alignment-level'>\").prop('checked',i==traitAlignmentLevel).click(function(){\r\n\t\t\t\t\t\t\t\ttraitAlignmentLevel=i\r\n\t\t\t\t\t\t\t\twriteTable()\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\" \"+i\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn $container\r\n\t\t\t}\r\n\t\t\tconst writeDependentVariablesControls=()=>{\r\n\t\t\t\t// TODO text inputs with\r\n\t\t\t\t//\tsuggested names: u, v, w, x, y, z\r\n\t\t\t\t//\texamples: x,y,w; y,v,z\r\n\t\t\t\tconst $container=$(\"<form>Dependent variables notation (main variable, second variable in 2d system, substitution variable):</form>\")\r\n\t\t\t\tfor (let dvs of availableDependentVariables) {\r\n\t\t\t\t\t$container.append(\r\n\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t\t$(\"<input type='radio' name='dependent-variables'>\").prop('checked',dvs==dependentVariables).click(function(){\r\n\t\t\t\t\t\t\t\tdependentVariables=dvs\r\n\t\t\t\t\t\t\t\tnotation=new Notation(dependentVariables)\r\n\t\t\t\t\t\t\t\twriteTable()\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\" \"+viewDependentVariables[dvs]\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn $container\r\n\t\t\t}\r\n\t\t\tconst writeGeneralNotes=()=>{\r\n\t\t\t\tconst nt=notation\r\n\t\t\t\treturn $(\"<ul>\").append(\r\n\t\t\t\t\t`<li>how to read the diagram: <ul>`+\r\n\t\t\t\t\t\t`<li>equation type names are written among arrows that show the relationship between types</li>`+\r\n\t\t\t\t\t\t`<li>properties of an equation type are listed in the table column below its name</li>`+\r\n\t\t\t\t\t\t`<li>every property of the equation type on the tip of the arrow <span class='arrow'></span> is also true for the equation type on the other end of the arrow (like <a href='https://en.wikipedia.org/wiki/Class_diagram'>class diagram</a>)</li>`+\r\n\t\t\t\t\t`</ul></li>`,\r\n\t\t\t\t\t`<li>all functions have to be continuous on the interval of interest</li>`,\r\n\t\t\t\t\t`<li>\\\\( ${nt.x} \\\\), \\\\( ${nt.y} \\\\) or \\\\( ${nt.w} \\\\) possibly with a subscript is a function of \\\\( t \\\\); other functions are written with an argument like this: \\\\( f(t) \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( C \\\\), \\\\( K \\\\) and other uppercase letters are arbitrary constants</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t + C \\\\) is a family of antiderivatives of \\\\( f(t) \\\\) with parameter \\\\( C \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t \\\\) is any single antiderivative of \\\\( f(t) \\\\)`\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t$tableContainer.empty()\r\n\t\t\tconst traitRowsOutput=new TraitRowsOutput(\r\n\t\t\t\ti18n,theadLayout,trLayout,\r\n\t\t\t\tdata.traits,data.classes, // TODO pass data before layouts\r\n\t\t\t\ttraitAlignmentLevel,notation\r\n\t\t\t)\r\n\t\t\tconst formRowsOutput=new FormRowsOutput(\r\n\t\t\t\ti18n,orderedClassSubgraph,theadLayout,\r\n\t\t\t\tdata.classes,\r\n\t\t\t\tnotation,\r\n\t\t\t\t$classHighlightables,\r\n\t\t\t\t(classId,form)=>traitRowsOutput.updateForm(classId,form)\r\n\t\t\t)\r\n\t\t\tif (Object.keys(selectedNodes).length>0) $tableContainer.append(\r\n\t\t\t\t$(\"<table class='classes'>\").append(\r\n\t\t\t\t\twriteThead(),\r\n\t\t\t\t\twriteTfoot(),\r\n\t\t\t\t\t$(\"<tbody>\").append(\r\n\t\t\t\t\t\tformRowsOutput.$trs,\r\n\t\t\t\t\t\ttraitRowsOutput.$trs\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t$tableContainer.append(\r\n\t\t\t\twriteTraitAlignmentControls(),\r\n\t\t\t\twriteDependentVariablesControls(),\r\n\t\t\t\t\"<p>General notes:</p>\",\r\n\t\t\t\twriteGeneralNotes()\r\n\t\t\t)\r\n\t\t\tMathJax.Hub.Queue([\"Typeset\",MathJax.Hub]) // TODO pass table container\r\n\t\t}\r\n\t\t$container.append(\r\n\t\t\twriteQuickSelectControls(),\r\n\t\t\t$tableContainer=$(\"<div>\")\r\n\t\t)\r\n\t\twriteTable()\r\n\t})\r\n})\r\n","'use strict'\r\n\r\n// TODO replace with:\r\n//\tsymbols table\r\n//\ttex helpers\r\n\r\nclass Notation {\r\n\tconstructor(dependentVariables) {\r\n\t\tthis.dependentVariables=dependentVariables // main variable, second variable in 2d system, substitution variable\r\n\t}\r\n\r\n\t// variable names\r\n\tget x() { // main dependent variable\r\n\t\treturn this.dependentVariables.charAt(0)\r\n\t}\r\n\tget X() { // vector of dependent variables\r\n\t\treturn '\\\\mathbf{'+this.dependentVariables.charAt(0).toUpperCase()+'}'\r\n\t}\r\n\tget y() { // second dependent variable for systems of 2 equations\r\n\t\treturn this.dependentVariables.charAt(1)\r\n\t}\r\n\tget w() { // substituted variable\r\n\t\treturn this.dependentVariables.charAt(2)\r\n\t}\r\n\r\n\t// tex shortcuts\r\n\tdd(a,b,n) {\r\n\t\tif (a===undefined) a=''\r\n\t\tif (b===undefined) b='t'\r\n\t\tif (n===undefined) n=1\r\n\t\tif (n==0) {\r\n\t\t\treturn a\r\n\t\t} else if (n==1) {\r\n\t\t\treturn `\\\\frac{\\\\mathrm{d}${a}}{\\\\mathrm{d}${b}}`\r\n\t\t} else {\r\n\t\t\treturn `\\\\frac{\\\\mathrm{d}^{${n}}${a}}{\\\\mathrm{d}${b}^{${n}}}`\r\n\t\t}\r\n\t}\r\n\tget ddt() {\r\n\t\treturn this.dd()\r\n\t}\r\n\tget dxdt() {\r\n\t\treturn this.dd(this.x)\r\n\t}\r\n\tsint(f,t) { // short integral = with no spacing before dt\r\n\t\tif (t===undefined) t='t'\r\n\t\treturn `\\\\int\\\\!${f}\\\\mathrm{d}${t}`\r\n\t}\r\n\tint(f,t) {\r\n\t\treturn this.sint(f+'\\\\,',t)\r\n\t}\r\n\tsys2(a,b) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned} ${a} \\\\\\\\ ${b} \\\\end{aligned} \\\\right.`\r\n\t}\r\n\tvec2(a,b) {\r\n\t\treturn `\\\\begin{bmatrix} ${a} \\\\\\\\ ${b} \\\\end{bmatrix}`\r\n\t}\r\n\tsvec2(a,b) {\r\n\t\treturn `\\\\left[ \\\\begin{smallmatrix} ${a} \\\\\\\\ ${b} \\\\end{smallmatrix} \\\\right]`\r\n\t}\r\n\tmat2(a,b,c,d) {\r\n\t\treturn `\\\\begin{bmatrix} ${a} & ${b} \\\\\\\\ ${c} & ${d} \\\\end{bmatrix}`\r\n\t}\r\n\tsmat2(a,b,c,d) {\r\n\t\treturn `\\\\left[ \\\\begin{smallmatrix} ${a} & ${b} \\\\\\\\ ${c} & ${d} \\\\end{smallmatrix} \\\\right]`\r\n\t}\r\n\tsub(x,s) {\r\n\t\tconst i=x.indexOf('_')\r\n\t\tif (i<0) {\r\n\t\t\treturn x+'_'+s\r\n\t\t} else {\r\n\t\t\treturn x.slice(0,i)+'_{'+x.slice(i+1)+','+s+'}'\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Notation\r\n","'use strict'\r\n\r\nconst tex=require('./tex')\r\nconst LinearConstantEquation=require('./linear-constant-equation')\r\n\r\nclass O2LinearConstantEquation extends LinearConstantEquation {\r\n\terfContent() {\r\n\t\tconst a0=this.equation.equationCoefs[0]\r\n\t\tconst a1=this.equation.equationCoefs[1]\r\n\t\tconst a2=this.equation.equationCoefs[2]\r\n\t\tconst x=this.x\r\n\t\tconst f=this.f\r\n\t\tconst expr=(...args)=>tex.sum(args)\r\n\t\tconst sexpr=(...args)=>tex.sum(args,o=>'{'+o+'}')\r\n\t\tconst cosCase=(xp,fa,fb,op)=>(\r\n\t\t\t{type:'case',title:`\\\\( ${f}(t) = \\\\${fa} ω t \\\\), \\\\( ω ≠ 0 \\\\)`,content:[\r\n\t\t\t\t{type:'switch',title:`coefficients satisfy`,content:[\r\n\t\t\t\t\t{type:'case',title:`\\\\( `+expr(a1,'≠',0)+` \\\\) or \\\\( `+expr(a0,'≠',a2,'ω^2')+` \\\\)`,content:[\r\n\t\t\t\t\t\t`\\\\[ ${xp} {=} \\\\frac{`+\r\n\t\t\t\t\t\t\tsexpr('('+sexpr(a0,'-',a2,'ω^2')+')',`\\\\${fa} ω t`,op,a1,'ω',`\\\\${fb} ω t`)+\r\n\t\t\t\t\t\t`}{`+\r\n\t\t\t\t\t\t\tsexpr(a2,'^2','ω^4','+','('+sexpr(a1,'^2','-',2,a0,a2)+')','ω^2','+',a0,'^2')+\r\n\t\t\t\t\t\t`} \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`\\\\( `+expr(a1,'=',0)+` \\\\) and \\\\( `+expr(a0,'=',a2,'ω^2')+` \\\\)`,content:[\r\n\t\t\t\t\t\ttex.blockSum([xp,'=',op,`\\\\frac{t \\\\${fb} ω t}{`+expr(2,a2,'ω')+`}`]),\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t]}\r\n\t\t)\r\n\t\tconst expCosCase=(xp,fa,fb,op)=>(\r\n\t\t\t{type:'case',title:`\\\\( ${f}(t) = e^{α t} \\\\${fa} ω t \\\\), \\\\( ω ≠ 0 \\\\)`,content:[\r\n\t\t\t\t{type:'switch',title:`coefficients satisfy`,content:[\r\n\t\t\t\t\t{type:'case',title:`\\\\( `+expr(2,a2,'α','+',a1,'≠',0)+` \\\\) or \\\\( `+expr(a0,'≠',a2,'(α^2 + ω^2)')+` \\\\)`,content:[\r\n\t\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`A &= `+expr(a2,'(α^2 - ω^2)','+',a1,'α','+',a0)+` \\\\\\\\`+\r\n\t\t\t\t\t\t\t`B &= (`+expr(2,a2,'α','+',a1)+`) ω \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${xp} &= e^{α t} \\\\frac{A \\\\${fa} ω t ${op} B \\\\${fb} ω t}{A^2 + B^2} `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`\\\\( `+expr(2,a2,'α','+',a1,'=',0)+` \\\\) and \\\\( `+expr(a0,'=',a2,'(α^2 + ω^2)')+` \\\\)`,content:[\r\n\t\t\t\t\t\ttex.blockSum([xp,'=',op,`\\\\frac{t e^{α t} \\\\${fb} ω t}{`+expr(2,a2,'ω')+`}`]),\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t]}\r\n\t\t)\r\n\t\treturn nt=>[\r\n\t\t\tx._('p').firstComponentExpressionPreamble(\r\n\t\t\t\tc=>`${c}a particular solution is one of the following, depending on \\\\( ${f}(t) \\\\) and the equation coefficients`\r\n\t\t\t),\r\n\t\t\tx._('p').firstComponentExpression(xp=>(\r\n\t\t\t\t{type:'switch',title:`\\\\( ${f}(t) \\\\) is`,content:[\r\n\t\t\t\t\t{type:'case',title:`\\\\( ${f}(t) = 1 \\\\)`,content:[\r\n\t\t\t\t\t\t{type:'switch',title:`coefficients satisfy`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( `+expr(a0,'≠',0)+` \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${xp} = `+tex.frac([1],[a0])+` \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( `+expr(a0,'=',0)+` \\\\) and \\\\( `+expr(a1,'≠',0)+` \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${xp} = `+tex.frac(['t'],[a1])+` \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( `+expr(a0,'=',0)+` \\\\) and \\\\( `+expr(a1,'=',0)+` \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${xp} = `+tex.frac(['t^2'],[2,a2])+` \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`\\\\( ${f}(t) = e^{α t} \\\\)`,content:[\r\n\t\t\t\t\t\t{type:'switch',title:`coefficients satisfy`,content:[\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( `+expr(a2,'α^2','+',a1,'α','+',a0,'≠',0)+` \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${xp} = \\\\frac{e^{α t}}{`+expr(a2,'α^2','+',a1,'α','+',a0)+`} \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( `+expr(a2,'α^2','+',a1,'α','+',a0,'=',0)+` \\\\) and \\\\( `+expr(2,a2,'α','+',a1,'≠',0)+` \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${xp} = \\\\frac{t e^{α t}}{`+expr(2,a2,'α','+',a1)+`} \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t{type:'case',title:`\\\\( `+expr(a2,'α^2','+',a1,'α','+',a0,'=',0)+` \\\\) and \\\\( `+expr(2,a2,'α','+',a1,'=',0)+` \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t`\\\\[ ${xp} = \\\\frac{t^2 e^{α t}}{`+expr(2,a2)+`} \\\\]`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t\tcosCase(xp,'cos','sin','+'),\r\n\t\t\t\t\tcosCase(xp,'sin','cos','-'),\r\n\t\t\t\t\texpCosCase(xp,'cos','sin','+'),\r\n\t\t\t\t\texpCosCase(xp,'sin','cos','-'),\r\n\t\t\t\t]}\r\n\t\t\t)),\r\n\t\t\t...x._('p').restDiffComponentExpressionContent()(nt),\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=O2LinearConstantEquation\r\n","'use strict'\r\n\r\nconst tex=require('./tex')\r\nconst characteristicEquationContent=require('./characteristic-equation-content')\r\nconst LinearEquationFormSuite=require('./linear-equation-form-suite')\r\n\r\nclass O2LinearEquationFormSuite extends LinearEquationFormSuite {\r\n\tconstructor(a0,a1,a2,b0,b1) {\r\n\t\tsuper()\r\n\t\tconst initBi=(bi,ai)=>{\r\n\t\t\tif (bi!==undefined) return bi\r\n\t\t\tif (ai==0) return 0\r\n\t\t\treturn `-\\\\frac{${ai}}{${a2}}` // TODO will need special handling in getEquilibriumSolutionMethodTrait()\r\n\t\t}\r\n\t\tthis.a0=a0; this.a1=a1; this.a2=a2\r\n\t\tthis.b0=initBi(b0,a0); this.b1=initBi(b1,a1)\r\n\t}\r\n\tget linear() {\r\n\t\treturn this.makeForm(\r\n\t\t\tisConstant=>input=>nt=>{\r\n\t\t\t\tconst t=(isConstant?``:`(t)`)\r\n\t\t\t\treturn tex.sum(\r\n\t\t\t\t\t[this.a2+t,nt.dd(nt.x,'t',2),'+',this.a1+t,nt.dxdt,'+',this.a0+t,nt.x,'=',input?`${input}(t)`:0],\r\n\t\t\t\t\tisConstant?(o=>' '+o+' '):(o=>' {'+o+'} ')\r\n\t\t\t\t)\r\n\t\t\t},\r\n\t\t\tnt=>tex.sum([this.a2,`λ^2`,'+',this.a1,`λ`,'+',this.a0]),\r\n\t\t\t[this.a0,this.a1,this.a2]\r\n\t\t)\r\n\t}\r\n\tget resolved() {\r\n\t\treturn this.makeForm(\r\n\t\t\tisConstant=>input=>nt=>{\r\n\t\t\t\tconst t=(isConstant?``:`(t)`)\r\n\t\t\t\treturn tex.sum([nt.dd(nt.x,'t','2'),'=',this.b1+t,nt.dxdt,'+',this.b0+t,nt.x,'+',input?`${input}(t)`:0])\r\n\t\t\t},\r\n\t\t\tnt=>tex.sum([`λ^2`,'-',this.b1,`λ`,'-',this.b0]),\r\n\t\t\t[tex.sum(['-',this.b0]),tex.sum(['-',this.b1]),1]\r\n\t\t)\r\n\t}\r\n\tget system() {\r\n\t\treturn this.makeForm(\r\n\t\t\tisConstant=>input=>nt=>{\r\n\t\t\t\tconst t=(isConstant?``:`(t)`)\r\n\t\t\t\treturn nt.sys2(\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y}`,\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= `+tex.sum([this.b0+t,nt.x,'+',this.b1+t,nt.y,'+',input?`${input}(t)`:0])\r\n\t\t\t\t)\r\n\t\t\t},\r\n\t\t\tnt=>tex.sum([`λ^2`,'-',this.b1,`λ`,'-',this.b0]),\r\n\t\t\t[tex.sum(['-',this.b0]),tex.sum(['-',this.b1]),1]\r\n\t\t)\r\n\t}\r\n\tget vector() {\r\n\t\treturn this.makeForm(\r\n\t\t\tisConstant=>input=>nt=>{\r\n\t\t\t\tconst t=(isConstant?``:`(t)`)\r\n\t\t\t\tconst pl=(isConstant||!input?`+`:`{+}`)\r\n\t\t\t\tconst eq=(isConstant||!input?`=`:`{=}`)\r\n\t\t\t\treturn `${nt.dd(nt.X)} ${eq} `+nt.mat2(0,1,this.b0+t,this.b1+t)+` ${nt.X} `+(input?` ${pl} `+nt.vec2(0,`${input}(t)`):``)\r\n\t\t\t},\r\n\t\t\tnt=>`\\\\det\\\\left(${nt.mat2('-λ',1,this.b0,tex.sum([this.b1,'-','λ']))}\\\\right)`,\r\n\t\t\t[tex.sum(['-',this.b0]),tex.sum(['-',this.b1]),1]\r\n\t\t)\r\n\t}\r\n\tget classIdPrefix() {\r\n\t\treturn 'o2'\r\n\t}\r\n\tget highestOrderCoefficient() {\r\n\t\treturn this.a2\r\n\t}\r\n\tget systemFormType() {\r\n\t\treturn 'xy'\r\n\t}\r\n\tgetCharacteristicEquationTrait() {\r\n\t\tconst classId=this.getClassId(true,true)\r\n\t\treturn {\r\n\t\t\tcontents: {\r\n\t\t\t\t[`linear_${classId}`]: characteristicEquationContent([2,this.a2],'+',[1,this.a1],'+',[0,this.a0],'=','0'),\r\n\t\t\t\t[`resolved_${classId}`]: characteristicEquationContent([2,1],'=',[1,this.b1],'+',[0,this.b0]),\r\n\t\t\t\t[`system_${classId}`]: nt=>[`\\\\[ ${this.system(true).characteristicEquation(nt)} \\\\]`],\r\n\t\t\t\t[`vector_${classId}`]: nt=>[`\\\\[ ${this.vector(true).characteristicEquation(nt)} \\\\]`],\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\tgetEquilibriumSolutionMethodTrait(isConstant) {\r\n\t\tconst classId=this.getClassId(isConstant,true)\r\n\t\tconst t=isConstant?'':'(t)'\r\n\t\treturn {\r\n\t\t\tcontents: {\r\n\t\t\t\t[`linear_${classId}`]: nt=>[\r\n\t\t\t\t\t{type:'switch',title:`\\\\( ${this.a0}${t} \\\\) is`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( ${this.a0}${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( ${this.a0}${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\t[`resolved_${classId}`]: nt=>[\r\n\t\t\t\t\t{type:'switch',title:`\\\\( ${this.b0}${t} \\\\) is`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( ${this.b0}${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( ${this.b0}${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\t[`system_${classId}`]: nt=>[\r\n\t\t\t\t\t{type:'switch',title:`\\\\( ${this.b0}${t} \\\\) is`,content:[ // 'c_1' -> 'b_0'\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( ${this.b0}${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &=& K \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`\\\\end{array} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( ${this.b0}${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`\\\\end{array} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\t[`vector_${classId}`]: nt=>[\r\n\t\t\t\t\t{type:'switch',title:`\\\\( ${this.b0}${t} \\\\) is`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( ${this.b0}${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\begin{bmatrix} K \\\\\\\\ 0 \\\\end{bmatrix} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( ${this.b0}${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\begin{bmatrix} 0 \\\\\\\\ 0 \\\\end{bmatrix} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=O2LinearEquationFormSuite\r\n","'use strict'\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nclass O2LinearHomogeneousConstantSolution {\r\n\tconstructor(x,form) {\r\n\t\tthis.x=x\r\n\t\tthis.form=form\r\n\t}\r\n\tgetSolution(solveIvp) {\r\n\t\treturn this.frameSolution(nt=>[\r\n\t\t\t{type:'switch',title:`roots \\\\( λ \\\\) are`,content:[\r\n\t\t\t\t{type:'case',title:`repeated \\\\( ( λ_1 = λ_2 = λ ) \\\\)`,\r\n\t\t\t\t\tcontent:this.getSolutionCase_Repeated(solveIvp)(nt)\r\n\t\t\t\t},\r\n\t\t\t\t{type:'case',title:`real distinct \\\\( ( λ_1 \\\\ne λ_2; λ_1, λ_2 \\\\in \\\\mathbb{R} ) \\\\)`,\r\n\t\t\t\t\tcontent:this.getSolutionCase_Real(solveIvp)(nt)\r\n\t\t\t\t},\r\n\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( λ = α \\\\pm i β; β \\\\ne 0 ) \\\\)`,\r\n\t\t\t\t\tcontent:this.getSolutionCase_Complex(solveIvp)(nt)\r\n\t\t\t\t},\r\n\t\t\t]},\r\n\t\t])\r\n\t}\r\n\tgetSolution_Repeated(solveIvp) {\r\n\t\treturn this.frameSolution(nt=>[\r\n\t\t\t`roots \\\\( λ \\\\) are going to be repeated:`,\r\n\t\t\t`\\\\[ λ_1 = λ_2 = λ \\\\]`,\r\n\t\t\t...this.getSolutionCase_Repeated(solveIvp)(nt)\r\n\t\t])\r\n\t}\r\n\tgetSolution_Real(solveIvp) {\r\n\t\treturn this.frameSolution(nt=>[\r\n\t\t\t`roots \\\\( λ \\\\) are going to be real distinct:`,\r\n\t\t\t`\\\\[ λ_1 \\\\ne λ_2 \\\\]`,\r\n\t\t\t`\\\\[ λ_1, λ_2 \\\\in \\\\mathbb{R} \\\\]`,\r\n\t\t\t...this.getSolutionCase_Real(solveIvp)(nt)\r\n\t\t])\r\n\t}\r\n\tgetSolution_Complex(solveIvp) {\r\n\t\treturn this.frameSolution(nt=>[\r\n\t\t\t`roots \\\\( λ \\\\) are going to be complex conjugate:`,\r\n\t\t\t`\\\\[ λ = α \\\\pm i β \\\\]`,\r\n\t\t\t`\\\\[ β \\\\ne 0 \\\\]`,\r\n\t\t\t...this.getSolutionCase_Complex(solveIvp)(nt)\r\n\t\t])\r\n\t}\r\n\tgetSolution_Imaginary(solveIvp) {\r\n\t\treturn this.frameSolution(nt=>[\r\n\t\t\t`roots \\\\( λ \\\\) are going to be complex conjugate:`,\r\n\t\t\t`\\\\[ λ = \\\\pm i β = \\\\pm ${this.form.naturalFrequency} \\\\]`,\r\n\t\t\t...this.getSolutionCase_Imaginary(solveIvp)(nt)\r\n\t\t])\r\n\t}\r\n\r\n\t// private:\r\n\tframeSolution(specificLines) {\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( λ \\\\):`,\r\n\t\t\t`\\\\[ ${this.form.characteristicEquation(nt)} \\\\]`,\r\n\t\t\t...specificLines(nt)\r\n\t\t]\r\n\t}\r\n\tgetSolutionCase_Repeated(solveIvp) {\r\n\t\treturn this.frameSolutionCase(\r\n\t\t\t['e^{λ t}','e^{λ t}'],[1,0,'λ',1],[1,'t',0,1]\r\n\t\t)(false,false)(solveIvp,[1,0,'λ',1])\r\n\t}\r\n\tgetSolutionCase_Real(solveIvp) {\r\n\t\treturn this.frameSolutionCase(\r\n\t\t\t['e^{λ_1 t}','e^{λ_2 t}'],[1,1,'λ_1','λ_2']\r\n\t\t)(false,false)(solveIvp,[1,1,'λ_1','λ_2'])\r\n\t}\r\n\tgetSolutionCase_Complex(solveIvp) {\r\n\t\treturn this.frameSolutionCase(\r\n\t\t\t['e^{α t}','e^{α t}'],[1,0,'α','β'],['\\\\cos β t','\\\\sin β t','-\\\\sin β t','\\\\cos β t']\r\n\t\t)(true,true,true)(solveIvp,[1,0,'α','β'])\r\n\t}\r\n\tgetSolutionCase_Imaginary(solveIvp) {\r\n\t\treturn this.frameSolutionCase(\r\n\t\t\t[1,1],[1,0,0,'β'],['\\\\cos β t','\\\\sin β t','-\\\\sin β t','\\\\cos β t']\r\n\t\t)(false,true,true)(solveIvp,[1,0,0,'β'])\r\n\t}\r\n\tframeSolutionCase(solutionExpVector,solutionCoefMatrix1,solutionCoefMatrix2) {\r\n\t\treturn (...solutionFormatting)=>(solveIvp,ivpMatrix)=>nt=>[\r\n\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t...this.x.generalLinearSolution(\r\n\t\t\t\t['k_1','k_2'],solutionExpVector,solutionCoefMatrix1,solutionCoefMatrix2\r\n\t\t\t)(...solutionFormatting)(nt),\r\n\t\t\t...(solveIvp?[\r\n\t\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t\t...this.x.ICLinearSystemSolution(ivpMatrix,['k_1','k_2'])(nt),\r\n\t\t\t]:[]),\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=O2LinearHomogeneousConstantSolution\r\n","'use strict'\r\n\r\nconst characteristicEquationContent=require('./characteristic-equation-content')\r\nconst LinearEquationFormSuite=require('./linear-equation-form-suite')\r\n\r\nclass OnLinearEquationFormSuite extends LinearEquationFormSuite {\r\n\tget linear() {\r\n\t\treturn this.makeForm(isConstant=>input=>nt=>(\r\n\t\t\t`\\\\sum_{i=0}^n a_i`+(isConstant?``:`(t)`)+` ${nt.dd(nt.x,'t','i')} = `+(input?`${input}(t)`:`0`)\r\n\t\t),nt=>`\\\\sum_{i=0}^n a_i λ^i`)\r\n\t}\r\n\tget resolved() {\r\n\t\treturn this.makeForm(isConstant=>input=>nt=>(\r\n\t\t\t`${nt.dd(nt.x,'t','n')} = \\\\sum_{i=0}^{n-1} b_i`+(isConstant?``:`(t)`)+` ${nt.dd(nt.x,'t','i')}`+(input?` + ${input}(t)`:``)\r\n\t\t),nt=>`λ^n - \\\\sum_{i=0}^{n-1} b_i λ^i`)\r\n\t}\r\n\tget system() {\r\n\t\treturn this.makeForm(isConstant=>input=>nt=>(\r\n\t\t\t`\\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t`${nt.dd(`${nt.x}_1`)} &=& ${nt.x}_2 \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(`${nt.x}_2`)} &=& ${nt.x}_3 \\\\\\\\`+\r\n\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(`${nt.x}_{n-1}`)} &=& ${nt.x}_n \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(`${nt.x}_n`)} &=& \\\\sum_{i=1}^{n} c_i`+(isConstant?``:`(t)`)+` ${nt.x}_i`+(input?` + ${input}(t)`:``)+\r\n\t\t\t`\\\\end{array} \\\\right.`\r\n\t\t),nt=>`λ^n - \\\\sum_{i=0}^{n-1} c_{i+1} λ^i`)\r\n\t}\r\n\tget vector() {\r\n\t\treturn this.makeForm(isConstant=>input=>nt=>(\r\n\t\t\t`${nt.dd(nt.X)} {=} `+\r\n\t\t\t((input||!isConstant)?`\\\\! \\\\left[ \\\\begin{smallmatrix}`:`\\\\begin{bmatrix}`)+\r\n\t\t\t\t(isConstant\r\n\t\t\t\t\t?`0 & 1 & 0 & \\\\cdots & 0 \\\\\\\\`+\r\n\t\t\t\t\t `0 & 0 & 1 & \\\\cdots & 0 \\\\\\\\`+\r\n\t\t\t\t\t `\\\\vdots & \\\\vdots & \\\\vdots & \\\\ddots & \\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t `0 & 0 & 0 & \\\\cdots & 1 \\\\\\\\`+\r\n\t\t\t\t\t `c_1 & c_2 & c_3 & \\\\cdots & c_n`\r\n\t\t\t\t\t:`0 & 1 & \\\\cdots & 0 \\\\\\\\`+\r\n\t\t\t\t\t `\\\\vdots & \\\\vdots & \\\\ddots & \\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t `0 & 0 & \\\\cdots & 1 \\\\\\\\`+\r\n\t\t\t\t\t `c_1\\\\mspace{-2mu}(t) & c_2\\\\mspace{-2mu}(t) & \\\\cdots & c_n\\\\mspace{-2mu}(t)`\r\n\t\t\t\t)+\r\n\t\t\t((input||!isConstant)?`\\\\end{smallmatrix} \\\\right] \\\\!`:`\\\\end{bmatrix}`)+\r\n\t\t\t` ${nt.X}`+\r\n\t\t\t(input?` {+} \\\\! \\\\left[ \\\\begin{smallmatrix}`+\r\n\t\t\t\t`0 \\\\\\\\`+(isConstant?` 0 \\\\\\\\`:``)+` \\\\vdots \\\\\\\\ 0 \\\\\\\\ ${input}(t)`+\r\n\t\t\t`\\\\end{smallmatrix} \\\\right]`:``)\r\n\t\t),nt=>`λ^n - \\\\sum_{i=0}^{n-1} c_{i+1} λ^i`)\r\n\t}\r\n\tget classIdPrefix() {\r\n\t\treturn 'on'\r\n\t}\r\n\tget highestOrderCoefficient() {\r\n\t\treturn 'a_n'\r\n\t}\r\n\tget systemFormType() {\r\n\t\treturn 'xi'\r\n\t}\r\n\tgetCharacteristicEquationTrait() {\r\n\t\tconst classId=this.getClassId(true,true)\r\n\t\treturn {\r\n\t\t\tcontents: {\r\n\t\t\t\t[`linear_${classId}`]: characteristicEquationContent(['i','\\\\sum_{i=0}^n a_i'],'=','0'),\r\n\t\t\t\t[`resolved_${classId}`]: characteristicEquationContent(['n',1],'=',['i','\\\\sum_{i=0}^{n-1} b_i']),\r\n\t\t\t\t[`system_${classId}`]: nt=>[`\\\\[ ${this.system(true).characteristicEquation(nt)} \\\\]`],\r\n\t\t\t\t[`vector_${classId}`]: nt=>[`\\\\[ ${this.vector(true).characteristicEquation(nt)} \\\\]`],\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\tgetEquilibriumSolutionMethodTrait(isConstant) {\r\n\t\tconst classId=this.getClassId(isConstant,true)\r\n\t\tconst t=isConstant?'':'(t)'\r\n\t\treturn {\r\n\t\t\tcontents: {\r\n\t\t\t\t[`linear_${classId}`]: nt=>[\r\n\t\t\t\t\t{type:'switch',title:`\\\\( a_0${t} \\\\) is`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( a_0${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( a_0${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\t[`resolved_${classId}`]: nt=>[\r\n\t\t\t\t\t{type:'switch',title:`\\\\( b_0${t} \\\\) is`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( b_0${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( b_0${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\t[`system_${classId}`]: nt=>[\r\n\t\t\t\t\t{type:'switch',title:`\\\\( c_1${t} \\\\) is`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( c_1${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t\t\t\t`${nt.x}_1 &=& K \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.x}_2 &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.x}_n &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`\\\\end{array} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( c_1${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t\t\t\t`${nt.x}_1 &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.x}_n &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`\\\\end{array} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\t[`vector_${classId}`]: nt=>[\r\n\t\t\t\t\t{type:'switch',title:`\\\\( c_1${t} \\\\) is`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( c_1${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\begin{bmatrix} K \\\\\\\\ 0 \\\\\\\\ \\\\vdots \\\\\\\\ 0 \\\\end{bmatrix} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( c_1${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\begin{bmatrix} 0 \\\\\\\\ \\\\vdots \\\\\\\\ 0 \\\\end{bmatrix} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=OnLinearEquationFormSuite\r\n","'use strict'\r\n\r\n// TODO maybe don't need this class - use iterators on unordered subgraph instead?\r\nclass OrderedClassGraph {\r\n\tconstructor(unorderedClassGraph,orderedClasses) {\r\n\t\tconst ranks={}\r\n\t\torderedClasses.forEach((id,i)=>{\r\n\t\t\tranks[id]=i\r\n\t\t})\r\n\t\tthis.visibleParents={}\r\n\t\tfor (let id in unorderedClassGraph.visibleParents) {\r\n\t\t\tthis.visibleParents[id]=Object.keys(unorderedClassGraph.visibleParents[id]).sort((id1,id2)=>ranks[id1]-ranks[id2])\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=OrderedClassGraph\r\n","'use strict'\r\n\r\nconst O2LinearEquationFormSuite=require('./o2-linear-equation-form-suite')\r\n\r\nclass OscillatorLinearEquationFormSuite extends O2LinearEquationFormSuite {\r\n\tmakeConstantForm(equationFn,characteristicPolynomialFn) {\r\n\t\tconst form1=super.makeConstantForm(equationFn,characteristicPolynomialFn)\r\n\t\tform1.naturalFrequency=`\\\\sqrt{\\\\frac{${this.a0}}{${this.a2}}}`\r\n\t\treturn form1\r\n\t}\r\n\tgetClassId(isConstant,isHomogeneous) { // TODO forced/unforced\r\n\t\tif (this.a1!=0) {\r\n\t\t\treturn 'o2_harmonicOscillator'\r\n\t\t} else {\r\n\t\t\treturn 'o2_simpleHarmonicOscillator'\r\n\t\t}\r\n\t}\r\n\tgetForms(isConstant,isHomogeneous,discriminantRelation) {\r\n\t\tconst classId=this.getClassId(isConstant,isHomogeneous)\r\n\t\tconst simpleClassId='o2_simpleHarmonicOscillator'\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tis: `t,x,`+(classId!=simpleClassId?`linear_${simpleClassId},`:``)+`,linear_${classId}`,\r\n\t\t\t\tequation: this.linear(isConstant)(isHomogeneous?0:'f'),\r\n\t\t\t\tnotes: nt=>[ // TODO all-forms notes\r\n\t\t\t\t\t...(discriminantRelation!==undefined?[\r\n\t\t\t\t\t\t`\\\\[ ${this.a1}^2 ${discriminantRelation} 4 ${this.a2} ${this.a0} \\\\]`\r\n\t\t\t\t\t]:[]),\r\n\t\t\t\t\t`\\\\( ${this.a2} > 0 \\\\) is the mass`,\r\n\t\t\t\t\t...(this.a1!=0?[\r\n\t\t\t\t\t\t`\\\\( ${this.a1} \\\\ge 0 \\\\) is the viscous damping coefficient`,\r\n\t\t\t\t\t]:[]),\r\n\t\t\t\t\t`\\\\( ${this.a0} > 0 \\\\) is the spring constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,x,`+(classId!=simpleClassId?`resolved_${simpleClassId},`:``)+`,resolved_${classId}`,\r\n\t\t\t\tequation: this.resolved(isConstant)(isHomogeneous?0:'g'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,${this.systemFormType},`+(classId!=simpleClassId?`system_${simpleClassId},`:``)+`system_${classId}`,\r\n\t\t\t\tequation: this.system(isConstant)(isHomogeneous?0:'g'),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,X,`+(classId!=simpleClassId?`vector_${simpleClassId},`:``)+`vector_${classId}`,\r\n\t\t\t\tequation: this.vector(isConstant)(isHomogeneous?0:'g'),\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n\tgetEquilibriumSolutionMethodTrait(isConstant) {\r\n\t\tconst simpleClassId='o2_simpleHarmonicOscillator'\r\n\t\tconst t=isConstant?'':'(t)'\r\n\t\treturn {\r\n\t\t\tcontents: {\r\n\t\t\t\t[`linear_${simpleClassId}`]: nt=>[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`no other equilibrium solution is possible because \\\\( ${this.a0}${t} \\\\ne 0 \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\t[`resolved_${simpleClassId}`]: nt=>[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`no other equilibrium solution is possible because \\\\( ${this.b0}${t} \\\\ne 0 \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\t[`system_${simpleClassId}`]: nt=>[\r\n\t\t\t\t\t`\\\\[ ${nt.sys2(`${nt.x} &= 0`,`${nt.y} &= 0`)} \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`no other equilibrium solution is possible because \\\\( ${this.b0}${t} \\\\ne 0 \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\t[`vector_${simpleClassId}`]: nt=>[\r\n\t\t\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`no other equilibrium solution is possible because \\\\( ${this.b0}${t} \\\\ne 0 \\\\)`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=OscillatorLinearEquationFormSuite\r\n","'use strict'\r\n\r\n// TODO include in notation.js\r\n\r\nconst tex=require('./tex')\r\n\r\nclass TexDepvar {\r\n\t//abstract:\r\n\t// _(...ii)\r\n\t// toString()\r\n\t// parallelExpression(template)\r\n\t// firstComponentExpressionPreamble(template)\r\n\t// firstComponentExpression(template)\r\n\t// restDiffComponentExpressionContent()(nt) // TODO remove nt\r\n\t// ICLinearSystemSolution([a,b,c,d],[k1,k2])(nt)\r\n\t// generalLinearSolution([k1,k2],[exp1,exp2],[a11,a12,a21,a22],[b11,b12,b21,b22])(systemLineBreak,vectorLineBreak,expInFront)(nt)\r\n\tmatMul(mata,matb) {\r\n\t\tif (matb!==undefined) {\r\n\t\t\tconst [a11,a12,a21,a22]=mata\r\n\t\t\tconst [b11,b12,b21,b22]=matb\r\n\t\t\treturn [\r\n\t\t\t\ttex.sum([a11,b11,'+',a12,b21],o=>'{'+o+'}'),\r\n\t\t\t\ttex.sum([a11,b12,'+',a12,b22],o=>'{'+o+'}'),\r\n\t\t\t\ttex.sum([a21,b11,'+',a22,b21],o=>'{'+o+'}'),\r\n\t\t\t\ttex.sum([a21,b12,'+',a22,b22],o=>'{'+o+'}'),\r\n\t\t\t]\r\n\t\t} else {\r\n\t\t\treturn mata\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TexDepvar\r\n","'use strict'\r\n\r\n// TODO include in notation.js\r\n\r\nconst tex=require('./tex')\r\nconst TexDepvar=require('./tex-depvar')\r\n\r\nclass TexScalarDepvar extends TexDepvar {\r\n\tconstructor(x,subscripts=[]) {\r\n\t\tsuper()\r\n\t\tthis.x=x\r\n\t\tthis.subscripts=subscripts\r\n\t}\r\n\t_(...ii) {\r\n\t\treturn new TexScalarDepvar(this.x,[...this.subscripts,...ii])\r\n\t}\r\n\ttoString() {\r\n\t\tif (this.subscripts.length>0) {\r\n\t\t\treturn `${this.x}_{${this.subscripts.join()}}` // TODO comma-less joins like ij\r\n\t\t} else {\r\n\t\t\treturn this.x\r\n\t\t}\r\n\t}\r\n\tparallelExpression(template) {\r\n\t\treturn `\\\\[ ${template(this).replace(/&/g,'')} \\\\]`\r\n\t}\r\n\tfirstComponentExpressionPreamble(template) {\r\n\t\treturn template(``,this)\r\n\t}\r\n\tfirstComponentExpression(template) {\r\n\t\treturn template(this)\r\n\t}\r\n\trestDiffComponentExpressionContent() {\r\n\t\treturn nt=>[]\r\n\t}\r\n\tICLinearSystemSolution([a,b,c,d],[k1,k2]) {\r\n\t\tconst x=`${this}(0)`\r\n\t\tconst y=`${this}'(0)`\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${nt.mat2(a,b,c,d)} ${nt.vec2(k1,k2)} = ${nt.vec2(x,y)} \\\\]`,\r\n\t\t\t`\\\\begin{aligned} `+\r\n\t\t\t\t`${k1} &= ${tex.frac([d,x,'-',b,y],[a,d,'-',b,c])} \\\\\\\\ `+\r\n\t\t\t\t`${k2} &= ${tex.frac([a,y,'-',c,x],[a,d,'-',b,c])} \\\\\\\\ `+\r\n\t\t\t`\\\\end{aligned}`,\r\n\t\t]\r\n\t}\r\n\tgeneralLinearSolution([k1,k2],[exp1,exp2],mata,matb) {\r\n\t\tconst [c11,c12,c21,c22]=this.matMul(mata,matb).map(s=>{\r\n\t\t\ts=''+s\r\n\t\t\tif (s.indexOf('-',1)>0 || s.indexOf('+',1)>0) return '('+s+')' // -a -> -a; a-b -> (a-b)\r\n\t\t\treturn s\r\n\t\t})\r\n\t\treturn (systemLineBreak,vectorLineBreak,expInFront=false)=>(nt)=>[\r\n\t\t\t`\\\\[ ${this} = `+tex.sum([\r\n\t\t\t\tk1,...(expInFront?[exp1,c11]:[c11,exp1]),'+',\r\n\t\t\t\tk2,...(expInFront?[exp2,c12]:[c12,exp2])\r\n\t\t\t])+` \\\\]`\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=TexScalarDepvar\r\n","'use strict'\r\n\r\n// TODO include in notation.js\r\n\r\nconst TexDepvar=require('./tex-depvar')\r\nconst TexScalarDepvar=require('./tex-scalar-depvar')\r\n\r\nclass TexSystemDepvar extends TexDepvar {\r\n\tconstructor(x,subscripts=[]) {\r\n\t\tsuper()\r\n\t\tthis.x=x\r\n\t\tthis.subscripts=subscripts\r\n\t}\r\n\tcomponent(i) {\r\n\t\treturn new TexScalarDepvar(this.x,[i,...this.subscripts])\r\n\t}\r\n\t_(...ii) {\r\n\t\treturn new TexSystemDepvar(this.x,[...this.subscripts,...ii])\r\n\t}\r\n\ttoString() {\r\n\t\treturn `{\\\\scriptstyle \\\\left\\\\{ \\\\begin{array}{c} `+\r\n\t\t\t`${this.component(1)} \\\\\\\\[-1em] `+\r\n\t\t\t`\\\\cdots \\\\\\\\[-1em] `+\r\n\t\t\t`${this.component('n')} `+\r\n\t\t`\\\\end{array} \\\\right.}`\r\n\t}\r\n\tparallelExpression(template) {\r\n\t\treturn `\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t`${template(this.component(1))} \\\\\\\\ `+\r\n\t\t\t`\\\\vdots \\\\\\\\ `+\r\n\t\t\t`${template(this.component('n'))} `+\r\n\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t}\r\n\tfirstComponentExpressionPreamble(template) {\r\n\t\treturn template(`first component of `,this.component(1))\r\n\t}\r\n\tfirstComponentExpression(template) {\r\n\t\treturn template(this.component(1))\r\n\t}\r\n\trestDiffComponentExpressionContent() {\r\n\t\treturn nt=>[\r\n\t\t\t`find other components by differentiating \\\\( ${this.component(1)} \\\\):`,\r\n\t\t\t`\\\\[ \\\\begin{array}{rcl}`+\r\n\t\t\t\t`${this.component(2)} &=& ${nt.dd(this.component(1),'t',1)} \\\\\\\\`+\r\n\t\t\t\t`${this.component(3)} &=& ${nt.dd(this.component(1),'t',2)} \\\\\\\\`+\r\n\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t`${this.component('n')} &=& ${nt.dd(this.component(1),'t','n-1')}`+\r\n\t\t\t`\\\\end{array} \\\\]`,\r\n\t\t]\r\n\t}\r\n\t// ICLinearSystemSolution([a,b,c,d],[k1,k2]) only for 2d systems\r\n\t// generalLinearSolution([k1,k2],[exp1,exp2],[a11,a12,a21,a22],[b11,b12,b21,b22]) only for 2d systems\r\n}\r\n\r\nmodule.exports=TexSystemDepvar\r\n","'use strict'\r\n\r\n// TODO include in notation.js\r\n\r\nconst tex=require('./tex')\r\nconst TexDepvar=require('./tex-depvar')\r\nconst TexScalarDepvar=require('./tex-scalar-depvar')\r\n\r\nclass TexSystem2Depvar extends TexDepvar {\r\n\tconstructor(x,y,subscripts=[]) {\r\n\t\tsuper()\r\n\t\tthis.x=x\r\n\t\tthis.y=y\r\n\t\tthis.subscripts=subscripts\r\n\t}\r\n\tcomponentX() {\r\n\t\treturn new TexScalarDepvar(this.x,this.subscripts)\r\n\t}\r\n\tcomponentY() {\r\n\t\treturn new TexScalarDepvar(this.y,this.subscripts)\r\n\t}\r\n\t_(...ii) {\r\n\t\treturn new TexSystem2Depvar(this.x,this.y,[...this.subscripts,...ii])\r\n\t}\r\n\ttoString() {\r\n\t\treturn `{\\\\scriptstyle \\\\left\\\\{ \\\\begin{array}{c} `+\r\n\t\t\t`${this.componentX()} \\\\\\\\ `+\r\n\t\t\t`${this.componentY()} `+\r\n\t\t`\\\\end{array} \\\\right.}`\r\n\t}\r\n\tparallelExpression(template) {\r\n\t\treturn `\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t`${template(this.componentX())} \\\\\\\\ `+\r\n\t\t\t`${template(this.componentY())} `+\r\n\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t}\r\n\tfirstComponentExpressionPreamble(template) {\r\n\t\treturn template(`first component of `,this.componentX())\r\n\t}\r\n\tfirstComponentExpression(template) {\r\n\t\treturn template(this.componentX())\r\n\t}\r\n\trestDiffComponentExpressionContent() {\r\n\t\treturn nt=>[\r\n\t\t\t`find \\\\( ${this.componentY()} \\\\) by differentiating \\\\( ${this.componentX()} \\\\):`,\r\n\t\t\t`\\\\[ ${this.componentY()} = ${nt.dd(this.componentX(),'t',1)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tICLinearSystemSolution([a,b,c,d],[k1,k2]) {\r\n\t\tconst x=`${this.componentX()}(0)`\r\n\t\tconst y=`${this.componentY()}(0)`\r\n\t\treturn nt=>[ // copypaste from tex-scalar-depvar.js\r\n\t\t\t`\\\\[ ${nt.mat2(a,b,c,d)} ${nt.vec2(k1,k2)} = ${nt.vec2(x,y)} \\\\]`,\r\n\t\t\t`\\\\begin{aligned} `+\r\n\t\t\t\t`${k1} &= ${tex.frac([d,x,'-',b,y],[a,d,'-',b,c])} \\\\\\\\ `+\r\n\t\t\t\t`${k2} &= ${tex.frac([a,y,'-',c,x],[a,d,'-',b,c])} \\\\\\\\ `+\r\n\t\t\t`\\\\end{aligned}`,\r\n\t\t]\r\n\t}\r\n\tgeneralLinearSolution([k1,k2],[exp1,exp2],mata,matb) {\r\n\t\tconst [c11,c12,c21,c22]=this.matMul(mata,matb).map(s=>{\r\n\t\t\ts=''+s\r\n\t\t\tif (s.indexOf('-',1)>0 || s.indexOf('+',1)>0) return '('+s+')' // -a -> -a; a-b -> (a-b)\r\n\t\t\treturn s\r\n\t\t})\r\n\t\treturn (systemLineBreak,vectorLineBreak,expInFront=false)=>nt=>{\r\n\t\t\tconst eq=(systemLineBreak ? '= \\\\: &' : '&=')\r\n\t\t\tconst pl=(systemLineBreak ? '\\\\\\\\ + \\\\: &' : '+')\r\n\t\t\treturn [\r\n\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${this.componentX()} ${eq} `+tex.sum(expInFront?[k1,exp1,c11]:[k1,c11,exp1])+\r\n\t\t\t\t\t                    ` ${pl} `+tex.sum(expInFront?[k2,exp2,c12]:[k2,c12,exp2])+` \\\\\\\\ `+\r\n\t\t\t\t\t`${this.componentY()} ${eq} `+tex.sum(expInFront?[k1,exp1,c21]:[k1,c21,exp1])+\r\n\t\t\t\t\t                    ` ${pl} `+tex.sum(expInFront?[k2,exp2,c22]:[k2,c22,exp2])+\r\n\t\t\t\t` \\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TexSystem2Depvar\r\n","'use strict'\r\n\r\n// TODO include in notation.js\r\n\r\nconst tex=require('./tex')\r\nconst TexDepvar=require('./tex-depvar')\r\nconst TexScalarDepvar=require('./tex-scalar-depvar')\r\n\r\nclass TexVectorDepvar extends TexDepvar {\r\n\tconstructor(X,x,subscripts=[]) {\r\n\t\tsuper()\r\n\t\tthis.X=X\r\n\t\tthis.x=x\r\n\t\tthis.subscripts=subscripts\r\n\t}\r\n\t_(...ii) {\r\n\t\treturn new TexVectorDepvar(this.X,this.x,[...this.subscripts,...ii])\r\n\t}\r\n\ttoString() {\r\n\t\tif (this.subscripts.length>0) {\r\n\t\t\treturn `${this.X}_{${this.subscripts.join()}}` // TODO comma-less joins like ij\r\n\t\t} else {\r\n\t\t\treturn this.X\r\n\t\t}\r\n\t}\r\n\tparallelExpression(template) {\r\n\t\treturn `\\\\[ ${template(this).replace(/&/g,'')} \\\\]`\r\n\t}\r\n\tfirstComponentExpressionPreamble(template) {\r\n\t\tconst x=new TexScalarDepvar(this.x,this.subscripts)\r\n\t\treturn template(`first component of `,x)\r\n\t}\r\n\tfirstComponentExpression(template) {\r\n\t\tconst x=new TexScalarDepvar(this.x,this.subscripts)\r\n\t\treturn template(x)\r\n\t}\r\n\trestDiffComponentExpressionContent() {\r\n\t\tconst x=new TexScalarDepvar(this.x,this.subscripts)\r\n\t\treturn nt=>[\r\n\t\t\t`find other components by differentiating \\\\( ${x} \\\\):`,\r\n\t\t\t`\\\\[ ${this} = \\\\begin{bmatrix}`+\r\n\t\t\t\t`${x} \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(x,'t',1)} \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(x,'t',2)} \\\\\\\\`+\r\n\t\t\t\t`\\\\vdots \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(x,'t','n-1')}`+\r\n\t\t\t`\\\\end{bmatrix} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tICLinearSystemSolution([a,b,c,d],[k1,k2]) {\r\n\t\tconst det=tex.sum([a,d,'-',b,c],o=>'{'+o+'}')\r\n\t\tconst matrixPrefix=(det=='1' ? '' : `\\\\frac1{${det}} `)\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${nt.mat2(a,b,c,d)} ${nt.vec2(k1,k2)} = ${this}(0) \\\\]`,\r\n\t\t\t`\\\\[ ${nt.vec2(k1,k2)} = ${matrixPrefix}${nt.mat2(d,tex.sum(['-',b]),tex.sum(['-',c]),a)} ${this}(0) \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgeneralLinearSolution([k1,k2],[exp1,exp2],mata,matb) {\r\n\t\tconst [c11,c12,c21,c22]=this.matMul(mata,matb)\r\n\t\treturn (systemLineBreak,vectorLineBreak,expInFront=false)=>nt=>{\r\n\t\t\tconst eq=(vectorLineBreak ? '= \\\\: &' : '&=')\r\n\t\t\tconst pl=(vectorLineBreak ? '\\\\\\\\ + \\\\: &' : '+')\r\n\t\t\tconst vec=(vectorLineBreak ? nt.svec2 : nt.vec2)\r\n\t\t\tconst mat=(vectorLineBreak ? nt.smat2 : nt.mat2)\r\n\t\t\tconst v1=nt.vec2(c11,c21)\r\n\t\t\tconst v2=nt.vec2(c12,c22)\r\n\t\t\tconst lastLineTerms=[mat(...mata)]\r\n\t\t\tif (matb!==undefined) lastLineTerms.push(mat(...matb))\r\n\t\t\tif (exp1==exp2) {\r\n\t\t\t\tlastLineTerms.push(vec(k1,k2))\r\n\t\t\t\tif (expInFront) {\r\n\t\t\t\t\tlastLineTerms.unshift(exp1)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlastLineTerms.push(exp1)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tlastLineTerms.push(vec(tex.sum([k1,exp1]),tex.sum([k2,exp2])))\r\n\t\t\t}\r\n\t\t\treturn [\r\n\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${this} ${eq} `+tex.sum(expInFront?[k1,exp1,v1]:[k1,v1,exp1])+\r\n\t\t\t\t\t       ` ${pl} `+tex.sum(expInFront?[k2,exp2,v2]:[k2,v2,exp2])+` \\\\\\\\`+\r\n\t\t\t\t\t       ` ${eq} `+tex.sum(lastLineTerms)+\r\n\t\t\t\t` \\\\end{aligned} \\\\]`\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TexVectorDepvar\r\n","'use strict'\r\n\r\n// TODO include in notation.js\r\n\r\nconst TexScalarDepvar=require('./tex-scalar-depvar')\r\nconst TexVectorDepvar=require('./tex-vector-depvar')\r\n\r\nclass TexVector2Depvar extends TexVectorDepvar {\r\n\t_(...ii) {\r\n\t\treturn new TexVector2Depvar(this.X,this.x,[...this.subscripts,...ii])\r\n\t}\r\n\trestDiffComponentExpressionContent() {\r\n\t\tconst x=new TexScalarDepvar(this.x,this.subscripts)\r\n\t\treturn nt=>[\r\n\t\t\t`find other component by differentiating \\\\( ${x} \\\\):`,\r\n\t\t\t`\\\\[ ${this} = \\\\begin{bmatrix}`+\r\n\t\t\t\t`${x} \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(x,'t',1)}`+\r\n\t\t\t`\\\\end{bmatrix} \\\\]`,\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=TexVector2Depvar\r\n","'use strict'\r\n\r\nconst makeTerms=(items)=>{\r\n\tconst terms=[[true,[]]]\r\n\tconst lastFactors=()=>terms[terms.length-1][1]\r\n\tfor (let item of items) {\r\n\t\tif (item=='+' || item=='-') {\r\n\t\t\tterms.push([item=='+',[]])\r\n\t\t} else if (item=='^2') {\r\n\t\t\tconst factor=lastFactors().pop()\r\n\t\t\tif (factor=='1') {\r\n\t\t\t\tlastFactors().push(factor)\r\n\t\t\t} else if (factor[0]=='-') {\r\n\t\t\t\tlastFactors().push(factor.slice(1)+'^2')\r\n\t\t\t} else {\r\n\t\t\t\tlastFactors().push(factor+'^2')\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlastFactors().push(''+item)\r\n\t\t}\r\n\t}\r\n\treturn terms.map(([isPositive,factors])=>{ // merge signs\r\n\t\tfactors=factors.map(factor=>{\r\n\t\t\tif (factor[0]=='-') {\r\n\t\t\t\tisPositive=!isPositive\r\n\t\t\t\treturn factor.slice(1)\r\n\t\t\t} else {\r\n\t\t\t\treturn factor\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn [isPositive,factors]\r\n\t}).filter(([isPositive,factors])=>{ // remove zero terms\r\n\t\treturn !(factors.length==0 || factors.indexOf('0')>=0)\r\n\t}).map(([isPositive,factors])=>{ // remove 1 factors\r\n\t\treturn [isPositive,factors.filter(factor=>factor!='1')]\r\n\t})\r\n}\r\n\r\nconst renderTerms=(terms,wrapOp=o=>' '+o+' ')=>{\r\n\tif (terms.length==0) return '0'\r\n\treturn terms.map(([isPositive,factors],i)=>{\r\n\t\tlet sign=''\r\n\t\tif (isPositive) {\r\n\t\t\tif (i>0) {\r\n\t\t\t\tsign=wrapOp('+')\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (i>0) {\r\n\t\t\t\tsign=wrapOp('-')\r\n\t\t\t} else {\r\n\t\t\t\tsign='-'\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (factors.length==0) {\r\n\t\t\treturn sign+'1'\r\n\t\t} else {\r\n\t\t\treturn sign+factors.join(' ')\r\n\t\t}\r\n\t}).join('')\r\n}\r\n\r\nconst sum=(items,wrapOp=o=>' '+o+' ')=>{\r\n\tlet equalityItems=[]\r\n\tlet sumSide=[]\r\n\tconst doSumSide=()=>{\r\n\t\tequalityItems.push(makeTerms(sumSide))\r\n\t\tsumSide=[]\r\n\t}\r\n\tfor (let item of items) {\r\n\t\tif (item=='=' || item=='≠') {\r\n\t\t\tdoSumSide()\r\n\t\t\tequalityItems.push(item)\r\n\t\t} else {\r\n\t\t\tsumSide.push(item)\r\n\t\t}\r\n\t}\r\n\tdoSumSide()\r\n\tif (equalityItems.length==3 && equalityItems[0].length==1 && equalityItems[2].length==0) { // single-term (in)equality to 0\r\n\t\tequalityItems[0][0][0]=true // set sign to positive\r\n\t}\r\n\treturn equalityItems.map(equalityItem=>{\r\n\t\tif (Array.isArray(equalityItem)) {\r\n\t\t\treturn renderTerms(equalityItem,wrapOp)\r\n\t\t} else {\r\n\t\t\treturn wrapOp(equalityItem)\r\n\t\t}\r\n\t}).join('')\r\n}\r\n\r\nconst blockSum=(...args)=>`\\\\[ `+sum(...args)+` \\\\]`\r\n\r\nconst isOne=(terms)=>{\r\n\tif (terms.length!=1) return false\r\n\tconst [isPositive,factors]=terms[0]\r\n\treturn isPositive && factors.length==0\r\n}\r\n\r\nconst frac=(numer,denom)=>{\r\n\tlet leadNegation=false\r\n\tlet numerTerms=makeTerms(numer)\r\n\tlet denomTerms=makeTerms(denom)\r\n\tif (denomTerms.length==1) {\r\n\t\tif (!denomTerms[0][0]) {\r\n\t\t\tdenomTerms[0][0]=true\r\n\t\t\tleadNegation=true\r\n\t\t}\r\n\t\tdenomTerms[0][1]=denomTerms[0][1].filter(denomFactor=>{\r\n\t\t\tconst canSimplify=numerTerms.every(([isPositive,factors])=>factors.indexOf(denomFactor)>=0)\r\n\t\t\tif (!canSimplify) return true\r\n\t\t\tnumerTerms=numerTerms.map(([isPositive,factors])=>{\r\n\t\t\t\tconst i=factors.indexOf(denomFactor)\r\n\t\t\t\tconst newFactors=[...factors]\r\n\t\t\t\tnewFactors.splice(i,1)\r\n\t\t\t\treturn [isPositive,newFactors]\r\n\t\t\t})\r\n\t\t\treturn false\r\n\t\t})\r\n\t}\r\n\tif (isOne(denomTerms)) {\r\n\t\treturn (leadNegation?'-(':'')+renderTerms(numerTerms)+(leadNegation?')':'')\r\n\t} else {\r\n\t\treturn (leadNegation?'-':'')+`\\\\frac{${renderTerms(numerTerms)}}{${renderTerms(denomTerms)}}`\r\n\t}\r\n}\r\n\r\nmodule.exports={sum,blockSum,frac}\r\n","'use strict'\r\n\r\nconst makeNodeLabelLayers=require('./thead-layout/node-layers')\r\nconst makeArcLocationLayers=require('./thead-layout/arc-layers')\r\nconst makeLayoutLayers=require('./thead-layout/cell-layers')\r\n\r\nclass TheadLayout {\r\n\tconstructor(unorderedClassGraph) {\r\n\t\tconst orderedVisibleDepthNodes=makeNodeLabelLayers(unorderedClassGraph.visibleParents,unorderedClassGraph.visibleDepthNodes)\r\n\t\tconst arcLocationLayers=makeArcLocationLayers(orderedVisibleDepthNodes,unorderedClassGraph.visibleParents)\r\n\t\tconst t=makeLayoutLayers(orderedVisibleDepthNodes,arcLocationLayers)\r\n\t\tthis.columns=[].concat(...orderedVisibleDepthNodes)\r\n\t\tthis.nodeLayers=t[0]\r\n\t\tthis.arcLayers=t[1]\r\n\t}\r\n}\r\n\r\nmodule.exports=TheadLayout\r\n","'use strict'\r\n\r\nmodule.exports=(depthList,parents)=>{ // TODO would prefer ordered parents list\r\n\tconst merge=(a,b)=>{ // can also use lodash union and sort\r\n\t\tconst c=[]\r\n\t\tlet i=0, j=0\r\n\t\twhile (i<a.length || j<b.length) {\r\n\t\t\tif (j>=b.length) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (i>=a.length) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else if (a[i]<b[j]) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (a[i]>b[j]) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t\tj++\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn c\r\n\t}\r\n\tconst arcRows=[]\r\n\tconst xs={}\r\n\tlet x=0\r\n\tfor (let i=0;i<depthList.length;i++) {\r\n\t\tfor (const node of depthList[i]) {\r\n\t\t\txs[node]=x++\r\n\t\t}\r\n\t\tif (i>0) {\r\n\t\t\tconst arcs=[]\r\n\t\t\tfor (let j=depthList[i].length-1;j>=0;j--) {\r\n\t\t\t\tconst node=depthList[i][j]\r\n\t\t\t\tconst parentXs=Object.keys(parents[node]).map(parentNode=>xs[parentNode]).sort((a,b)=>a-b)\r\n\t\t\t\tarcs.push([parentXs,[xs[node]]])\r\n\t\t\t}\r\n\t\t\tfor (let j=1;j<arcs.length;j++) {\r\n\t\t\t\tif (String(arcs[j-1][0])===String(arcs[j][0])) { // sloppy but should be ok for numbers\r\n\t\t\t\t\tarcs[j-1][1]=merge(arcs[j-1][1],arcs[j][1]) // merge children - parents already merged\r\n\t\t\t\t\tarcs.splice(j,1)\r\n\t\t\t\t\tj-=1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tarcRows.push(arcs)\r\n\t\t}\r\n\t}\r\n\treturn arcRows\r\n}\r\n","'use strict'\r\n\r\n// TODO fake lodash\r\nconst sum=arr=>arr.reduce((a,b)=>a+b,0)\r\n//const times=(n,fn)=>Array(n).map((v,i)=>fn(i))\r\nconst times=(n,fn)=>{\r\n\tvar arr=Array(n)\r\n\tfor (var i=0;i<n;i++) {\r\n\t\tarr[i]=fn(i)\r\n\t}\r\n\treturn arr\r\n}\r\nconst head=arr=>arr[0]\r\nconst last=arr=>arr[arr.length-1]\r\n\r\nmodule.exports=(nodeLabelLayers,arcLocationLayers)=>{\r\n\tconst layoutWidth=sum(nodeLabelLayers.map(x=>x.length))\r\n\tconst makeBlankRow=()=>times(layoutWidth,()=>({}))\r\n\tconst nodeLayoutLayers=[], arcLayoutLayers=[]\r\n\tconst drawArcUp=(i,j,k)=>{\r\n\t\tfor (;i>=0;i--) {\r\n\t\t\tfor (j-=1;j>=0;j--) {\r\n\t\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t\t}\r\n\t\t\tif (nodeLayoutLayers[i][k].node!==undefined) {\r\n\t\t\t\tnodeLayoutLayers[i][k].b=true\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tnodeLayoutLayers[i][k].bt=true\r\n\t\t\tif (i<=0) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tj=arcLayoutLayers[i-1].length\r\n\t\t}\r\n\t}\r\n\tconst drawArcDown=(i,j,k)=>{\r\n\t\tfor (j+=1;j<arcLayoutLayers[i].length;j++) {\r\n\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t}\r\n\t\tnodeLayoutLayers[i+1][k].t=true\r\n\t}\r\n\t// create empty cells\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tnodeLayoutLayers.push(makeBlankRow())\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tarcLayoutLayers.push(arcLocationLayers[i].map(makeBlankRow))\r\n\t}\r\n\t// fill cells\r\n\tlet x=0\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tfor (const node of nodeLabelLayers[i]) {\r\n\t\t\tnodeLayoutLayers[i][x++].node=node\r\n\t\t}\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tfor (let j=0;j<arcLocationLayers[i].length;j++) {\r\n\t\t\tconst parentLocations=arcLocationLayers[i][j][0]\r\n\t\t\tconst childLocations=arcLocationLayers[i][j][1]\r\n\t\t\tlet pi=0, ci=0\r\n\t\t\tfor (let k=0;k<layoutWidth;k++) {\r\n\t\t\t\tif (k>head(parentLocations) && k<last(childLocations)) {\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rl=true\r\n\t\t\t\t}\r\n\t\t\t\tif (k==parentLocations[pi]) {\r\n\t\t\t\t\tpi++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rt=true\r\n\t\t\t\t\tdrawArcUp(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t\tif (k==childLocations[ci]) {\r\n\t\t\t\t\tci++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].bl=true\r\n\t\t\t\t\tdrawArcDown(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn [nodeLayoutLayers,arcLayoutLayers]\r\n}\r\n","'use strict'\r\n\r\n// dag = {nodeLabel:{parentLabel:true,...},...}\r\n// nodes = {nodeLabel:true,...}\r\nmodule.exports=(visibleParents,visibleDepthNodes)=>{\r\n\t// sort nodes at each depth by\r\n\t//\tlexicographic parent order\r\n\t//\tlabel\r\n\tconst orderedVisibleDepthNodes=[]\r\n\tlet nextParentOrder=0\r\n\tconst parentOrder={}\r\n\tfor (let depth in visibleDepthNodes) {\r\n\t\torderedVisibleDepthNodes[depth]=Object.keys(visibleDepthNodes[depth])\r\n\t\tconst sortedParents={}\r\n\t\tfor (let node in visibleDepthNodes[depth]) {\r\n\t\t\tsortedParents[node]=Object.keys(visibleParents[node]).map(\r\n\t\t\t\tparentNode=>parentOrder[parentNode]\r\n\t\t\t).sort((a,b)=>a-b)\r\n\t\t}\r\n\t\torderedVisibleDepthNodes[depth].sort((node0,node1)=>{\r\n\t\t\tconst p0=sortedParents[node0]\r\n\t\t\tconst p1=sortedParents[node1]\r\n\t\t\tfor (let i=0;i<p0.length||i<p1.length;i++) {\r\n\t\t\t\tconst cmpLen=(i<p0.length)-(i<p1.length)\r\n\t\t\t\tif (cmpLen!=0) {\r\n\t\t\t\t\treturn cmpLen\r\n\t\t\t\t}\r\n\t\t\t\tconst cmpOrd=p0[i]-p1[i]\r\n\t\t\t\tif (cmpOrd!=0) {\r\n\t\t\t\t\treturn cmpOrd\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (node0<node1) {\r\n\t\t\t\treturn -1\r\n\t\t\t} else if (node0>node1) {\r\n\t\t\t\treturn +1\r\n\t\t\t} else {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t})\r\n\t\tfor (const node of orderedVisibleDepthNodes[depth]) {\r\n\t\t\tparentOrder[node]=nextParentOrder++\r\n\t\t}\r\n\t}\r\n\treturn orderedVisibleDepthNodes\r\n}\r\n","'use strict'\r\n\r\nclass TrLayout {\r\n\tconstructor(classSubgraph,classData,classColumns) {\r\n\t\tthis.classSubgraph=classSubgraph\r\n\t\tthis.classData=classData\r\n\t\tthis.classColumns=classColumns\r\n\t}\r\n\r\n\t// returns list of cells: list of (class id, trait id)\r\n\t// \tclass id = which class to take property from\r\n\t// returns null if row is to be skipped\r\n\tgetSubtreeLayout(traitSubtree) {\r\n\t\tconst ancestorsHaveIntegratedTrait=(classId,traitId)=>{\r\n\t\t\tconst visited={}\r\n\t\t\tconst walk=classId=>{\r\n\t\t\t\tif (visited[classId]) return false\r\n\t\t\t\tvisited[classId]=true\r\n\t\t\t\tif (getIntegratedClassesForTrait(classId,traitId).length>0) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\tfor (let vpid in this.classSubgraph.visibleParents[classId]) {\r\n\t\t\t\t\tif (walk(vpid)) {\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tfor (let vpid in this.classSubgraph.visibleParents[classId]) {\r\n\t\t\t\tif (walk(vpid)) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tconst getIntegratedClassesForTrait=(classId,traitId)=>{ // TODO memoize?\r\n\t\t\tconst integratedClassIds=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst walk=id=>{\r\n\t\t\t\tif (visited[id]) return\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tconst trait=this.classData[id].traits[traitId]\r\n\t\t\t\tif (trait) {\r\n\t\t\t\t\tif (!trait.close || ancestorsHaveIntegratedTrait(classId,traitId)) {\r\n\t\t\t\t\t\tintegratedClassIds.push(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tObject.keys(this.classSubgraph.integratedAncestors[classId][id]).sort().forEach(walk)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twalk(classId)\r\n\t\t\treturn integratedClassIds\r\n\t\t}\r\n\r\n\t\tconst cells=this.classColumns.map(classId=>{\r\n\t\t\tconst cell=[]\r\n\t\t\tconst walkTraits=(traitSubtree)=>{\r\n\t\t\t\tconst traitId=traitSubtree[0]\r\n\t\t\t\tconst traitChildren=traitSubtree[1]\r\n\t\t\t\tif (traitChildren) {\r\n\t\t\t\t\ttraitChildren.forEach(walkTraits)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (const id of getIntegratedClassesForTrait(classId,traitId)) {\r\n\t\t\t\t\t\tcell.push([id,traitId])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twalkTraits(traitSubtree)\r\n\t\t\treturn cell\r\n\t\t})\r\n\r\n\t\t// compared traits filtering\r\n\t\tconst keepTraits={}\r\n\t\tfor (const cell of cells) {\r\n\t\t\tfor (const classTraitId of cell) {\r\n\t\t\t\tconst classId=classTraitId[0]\r\n\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\tconst trait=this.classData[classId].traits[traitId]\r\n\t\t\t\tif (!trait.compare) {\r\n\t\t\t\t\tkeepTraits[traitId]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i=0;i<cells.length;i++) {\r\n\t\t\tcells[i]=cells[i].filter(classTraitId=>{\r\n\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\treturn keepTraits[traitId]\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// empty row detection\r\n\t\tif (cells.some(cell=>cell.length>0)) {\r\n\t\t\treturn cells\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TrLayout\r\n","'use strict'\r\n\r\nconst detailsPolyfill=require('crnx-base/details-polyfill')\r\n\r\nconst mathjaxDetailsFixAndPolyfill=function(){\r\n\tdetailsPolyfill.apply(this)\r\n\t$(this).on('toggle',function(){\r\n\t\t// mathjax common html renderer needs this to set correct font size\r\n\t\t// have to do it on every details opening, not just once b/c user can request redraw at any time\r\n\t\t// closed <details> behave like display:none; see http://stackoverflow.com/questions/36779037/mathjax-2-6-font-size-in-hidden-elements\r\n\t\tif ($(this).attr('open')) { // can't test for prop('open') when it's polyfilled\r\n\t\t\tMathJax.Hub.Queue([\"Rerender\",MathJax.Hub,this])\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// produces array of <tr>'s in this.$trs\r\nclass TraitRowsOutput {\r\n\tconstructor(i18n,theadLayout,trLayout,traitData,classData,traitAlignmentLevel,notation) {\r\n\t\tthis.columnTraitCells=theadLayout.columns.map(()=>[])\r\n\t\tconst writeTraitItem=(forClassId,fromClassId,traitId,selectedForm)=>{\r\n\t\t\tconst trait=classData[fromClassId].traits[traitId]\r\n\t\t\tif (!trait.contents) return // when trait is closed w/o contents\r\n\t\t\tconst getTitle=()=>{\r\n\t\t\t\tif (trait.title!==undefined) {\r\n\t\t\t\t\treturn trait.title\r\n\t\t\t\t} else if (trait.compare) {\r\n\t\t\t\t\treturn \"Property comparable to <em>\"+i18n('trait.'+traitId)+\"</em>\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn i18n('trait.'+traitId)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst $trait=$(\"<details class='trait'>\").append(\r\n\t\t\t\t$(\"<summary>\").append(getTitle())\r\n\t\t\t).each(mathjaxDetailsFixAndPolyfill)\r\n\t\t\tconst rec=(line)=>{\r\n\t\t\t\tif (typeof line == 'string') {\r\n\t\t\t\t\treturn $(\"<div class='line'>\").append(line)\r\n\t\t\t\t} else if (typeof line == 'function') {\r\n\t\t\t\t\treturn line()\r\n\t\t\t\t} else if (line.type=='derivation' || line.type=='proof' || line.type=='example' || line.type=='case' || line.type=='extra') {\r\n\t\t\t\t\treturn $(\"<details>\").append(\r\n\t\t\t\t\t\t$(\"<summary>\").append(line.title!==undefined ? line.title : line.type),\r\n\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t).each(mathjaxDetailsFixAndPolyfill)\r\n\t\t\t\t} else if (line.type=='switch') {\r\n\t\t\t\t\treturn $(\"<div class='\"+line.type+\"'>\").append(\r\n\t\t\t\t\t\t$(\"<div class='condition'>\").append(line.title!==undefined ? line.title : line.type,':'),\r\n\t\t\t\t\t\t$(\"<div class='cases'>\").append(\r\n\t\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn $(\"<div class='\"+line.type+\"'>\").append(\r\n\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet hasSelectedForm=false\r\n\t\t\tfor (let selectedFormType of selectedForm.split(',')) {\r\n\t\t\t\tif (trait.contents[selectedFormType]!==undefined) {\r\n\t\t\t\t\t$trait.append(trait.contents[selectedFormType](notation).map(rec))\r\n\t\t\t\t\thasSelectedForm=true\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!hasSelectedForm) {\r\n\t\t\t\tlet preferredForm\r\n\t\t\t\tfor (let form of classData[fromClassId].forms) {\r\n\t\t\t\t\tif (form.is.split(',')/*:Array*/.includes(trait.formType)) {\r\n\t\t\t\t\t\tpreferredForm=form\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$trait.append(\r\n\t\t\t\t\trec({type:'note',content:[\r\n\t\t\t\t\t\t\"when equation is written as\"+(forClassId!=fromClassId ? \" <em>\"+classData[fromClassId].htmlName+\"</em>:\" : \":\"),\r\n\t\t\t\t\t\t\"\\\\[\"+preferredForm.equation(notation)+\"\\\\]\",\r\n\t\t\t\t\t]}),\r\n\t\t\t\t\ttrait.contents[trait.formType](notation).map(rec)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn $trait\r\n\t\t}\r\n\t\tconst writeTraitCell=(forClassId,traitCell,selectedForm)=>{\r\n\t\t\tconst $cell=$(\"<td>\")\r\n\t\t\tif (traitCell.length>0) {\r\n\t\t\t\t// TODO put trait+form logic into TrLayout\r\n\t\t\t\t// ..or not - not sure if it's useful\r\n\t\t\t\t//const selectedFormTypes=selectedForm.split(',')\r\n\t\t\t\t//let traitCellFitting=traitCell.filter(([fromClassId,traitId])=>{\r\n\t\t\t\t//\tconst trait=classData[fromClassId].traits[traitId]\r\n\t\t\t\t//\treturn selectedFormTypes.some(selectedFormType=>trait.contents[selectedFormType]!==undefined)\r\n\t\t\t\t//})\r\n\t\t\t\t//if (traitCellFitting.length==0) { // TODO wrong! need to have at least one of each trait\r\n\t\t\t\t//\ttraitCellFitting=traitCell\r\n\t\t\t\t//}\r\n\t\t\t\t//$cell.append(traitCellFitting.map(([fromClassId,traitId])=>{\r\n\t\t\t\t//\treturn writeTraitItem(forClassId,fromClassId,traitId,selectedForm)\r\n\t\t\t\t//}))\r\n\t\t\t\t$cell.append(traitCell.map(([fromClassId,traitId])=>{\r\n\t\t\t\t\treturn writeTraitItem(forClassId,fromClassId,traitId,selectedForm)\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t\treturn $cell\r\n\t\t}\r\n\t\tconst writeTraitRow=(traitSubtree)=>{\r\n\t\t\tconst traitCells=trLayout.getSubtreeLayout(traitSubtree)\r\n\t\t\tif (!traitCells) return null\r\n\t\t\treturn $(\"<tr>\").append(traitCells.map(\r\n\t\t\t\t(traitCell,iColumn)=>{\r\n\t\t\t\t\tconst forClassId=theadLayout.columns[iColumn]\r\n\t\t\t\t\tconst selectedForm=classData[forClassId].forms[0].is\r\n\t\t\t\t\tconst cellWriterForForm=form=>writeTraitCell(forClassId,traitCell,form)\r\n\t\t\t\t\tconst $cell=cellWriterForForm(selectedForm)\r\n\t\t\t\t\tthis.columnTraitCells[iColumn].push([$cell,cellWriterForForm])\r\n\t\t\t\t\treturn $cell\r\n\t\t\t\t}\r\n\t\t\t))\r\n\t\t}\r\n\t\tthis.$trs=[]\r\n\t\tconst rec=(traitSubtree,depth)=>{\r\n\t\t\tconst traitId=traitSubtree[0]\r\n\t\t\tconst traitChildren=traitSubtree[1]\r\n\t\t\tif (depth>=traitAlignmentLevel || !traitChildren) {\r\n\t\t\t\tthis.$trs.push(writeTraitRow(traitSubtree))\r\n\t\t\t} else {\r\n\t\t\t\ttraitChildren.forEach(traitChild=>rec(traitChild,depth+1))\r\n\t\t\t}\r\n\t\t}\r\n\t\trec(['root',traitData],0)\r\n\t}\r\n\tupdateForm(iColumn,form) {\r\n\t\tfor (let i=0;i<this.columnTraitCells[iColumn].length;i++) {\r\n\t\t\tconst [$oldCell,cellWriterForForm]=this.columnTraitCells[iColumn][i]\r\n\t\t\tconst $newCell=cellWriterForForm(form)\r\n\t\t\t$oldCell.replaceWith($newCell)\r\n\t\t\tthis.columnTraitCells[iColumn][i][0]=$newCell\r\n\t\t\tMathJax.Hub.Queue([\"Typeset\",MathJax.Hub,$newCell[0]])\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TraitRowsOutput\r\n","'use strict'\r\n\r\nclass UnorderedClassGraph {\r\n\tconstructor(classData,visibleClasses) {\r\n\t\tconst invertGraph=(graph)=>{\r\n\t\t\tconst igraph={}\r\n\t\t\tfor (let id in graph) {\r\n\t\t\t\tigraph[id]={}\r\n\t\t\t}\r\n\t\t\tfor (let id in graph) {\r\n\t\t\t\tfor (let pid in graph[id]) {\r\n\t\t\t\t\tigraph[pid][id]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn igraph\r\n\t\t}\r\n\r\n\t\t// this.allParents and this.allChildren\r\n\t\tthis.allParents={}\r\n\t\tfor (let id in classData) {\r\n\t\t\tthis.allParents[id]=classData[id].parents\r\n\t\t}\r\n\t\tthis.allChildren=invertGraph(this.allParents)\r\n\r\n\t\t// this.visibleParents, this.visibleChildren, this.visibleDepthNodes\r\n\t\tconst ancestorDistances={} // {node:{ancestorNode:distance,...},...}; node is any node, ancestorNode is one of selectedNodes\r\n\t\tconst addAncestorDistance=(fromNode,toNode,distance)=>{\r\n\t\t\tconst oldDistance=ancestorDistances[fromNode][toNode]\r\n\t\t\tconst newDistance=(oldDistance===undefined\r\n\t\t\t\t? distance\r\n\t\t\t\t: Math.max(distance,oldDistance)\r\n\t\t\t)\r\n\t\t\tancestorDistances[fromNode][toNode]=newDistance\r\n\t\t}\r\n\t\tconst traverseNode=node=>{\r\n\t\t\tif (ancestorDistances[node]) {\r\n\t\t\t\treturn // already visited\r\n\t\t\t}\r\n\t\t\tancestorDistances[node]={}\r\n\t\t\tfor (let parentNode in this.allParents[node]) {\r\n\t\t\t\ttraverseNode(parentNode)\r\n\t\t\t\tif (visibleClasses[parentNode]) {\r\n\t\t\t\t\taddAncestorDistance(node,parentNode,1)\r\n\t\t\t\t}\r\n\t\t\t\tfor (let ancestorNode in ancestorDistances[parentNode]) {\r\n\t\t\t\t\tconst parentDistance=ancestorDistances[parentNode][ancestorNode]\r\n\t\t\t\t\taddAncestorDistance(node,ancestorNode,parentDistance+!!visibleClasses[parentNode])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.visibleDepthNodes=[]\r\n\t\tthis.visibleParents={}\r\n\t\tfor (let node in visibleClasses) {\r\n\t\t\ttraverseNode(node)\r\n\t\t\tlet depth=0\r\n\t\t\tthis.visibleParents[node]={}\r\n\t\t\tfor (let ancestorNode in ancestorDistances[node]) {\r\n\t\t\t\tconst distance=ancestorDistances[node][ancestorNode]\r\n\t\t\t\tif (distance>depth) {\r\n\t\t\t\t\tdepth=distance\r\n\t\t\t\t}\r\n\t\t\t\tif (distance==1) {\r\n\t\t\t\t\tthis.visibleParents[node][ancestorNode]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.visibleDepthNodes[depth]===undefined) {\r\n\t\t\t\tthis.visibleDepthNodes[depth]={}\r\n\t\t\t}\r\n\t\t\tthis.visibleDepthNodes[depth][node]=true\r\n\t\t}\r\n\t\tthis.visibleChildren=invertGraph(this.visibleParents)\r\n\r\n\t\t// this.integratedAncestors = ancestors that are not (visible parents and/or ancestors of visible parents)\r\n\t\tthis.integratedAncestors={}\r\n\t\tfor (let cid in visibleClasses) {\r\n\t\t\tconst masked={}\r\n\t\t\tconst maskAncestors=id=>{\r\n\t\t\t\tif (masked[id]) return\r\n\t\t\t\tmasked[id]=true\r\n\t\t\t\tfor (let pid in this.allParents[id]) {\r\n\t\t\t\t\tmaskAncestors(pid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let pid in this.visibleParents[cid]) {\r\n\t\t\t\tmaskAncestors(pid)\r\n\t\t\t}\r\n\t\t\tthis.integratedAncestors[cid]={}\r\n\t\t\tconst integrateAncestors=id=>{\r\n\t\t\t\tif (this.integratedAncestors[cid][id]) return\r\n\t\t\t\tthis.integratedAncestors[cid][id]={}\r\n\t\t\t\tfor (let pid in this.allParents[id]) {\r\n\t\t\t\t\tif (!masked[pid]) {\r\n\t\t\t\t\t\tthis.integratedAncestors[cid][id][pid]=true\r\n\t\t\t\t\t\tintegrateAncestors(pid)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tintegrateAncestors(cid)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=UnorderedClassGraph\r\n"],"sourceRoot":"."}