{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/crnx-base/details-polyfill.js","crnx-ode-properties.js","node_modules/crnx-build/babel-helpers/arraylike-prototype-includes.es5","node_modules/crnx-build/babel-helpers/math-sign.es5","src/characteristic-equation-content.js","src/data.js","src/data/equations-1st.js","src/data/equations-2nd.js","src/data/equations-nth.js","src/data/systems.js","src/form-rows-output.js","src/lhc-content-classes.js","src/lhc-param-classes.js","src/lhc-plot.js","src/lhc-plot/canvas.js","src/lhc-plot/closest-point-on-hyperbola.js","src/lhc-plot/matrix.js","src/lhc-plot/phase-canvas.js","src/lhc-plot/trdet-canvas.js","src/linear-constant-equation.js","src/linear-equation.js","src/main.js","src/notation.js","src/ordered-class-subgraph.js","src/tex-depvar.js","src/tex-scalar-depvar.js","src/tex-system-depvar.js","src/tex-vector-depvar.js","src/tex.js","src/thead-layout.js","src/thead-layout/arc-layers.js","src/thead-layout/cell-layers.js","src/thead-layout/node-layers.js","src/tr-layout.js","src/trait-rows-output.js","src/unordered-class-subgraph.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","detailsSupported","document","createElement","$details","$","this","on","ev","preventDefault","toggleOpen","attr","removeAttr","trigger","keyCodeEnter","keyCodeSpace","handleEvent","target","closest","is","addClass","children","click","keydown","keyCode",2,"haystack","needle","start","undefined","includes","Array","isArray","indexOf",3,"Math","sign","x","isNaN",4,"tex","_len","arguments","terms","_key","needToCollect","collectedTerms","flipSign","_i","term","push","lambdaPow","order","mapTerms","nt","mapper","blockSum","apply","map","factor","step1","dd","step2","step3","step4","type","content","concat","28",5,"traits","classes","merge","mergedClasses","id","classId","classData","htmlName","name","traitId","traitData","formType","forms","split","pop","contents","6","7","8","9","characteristicEquationContent","eqsol","o1_linear_generalSolutionMethod_content","isLinear","mvp1","mvp2","mvp3","mvpa","mvpyh","sint","title","dxdt","ddt","int","o1_linearHomogeneous_generalSolutionMethod_content","o1_linearHomogeneous_equilibriumSolutionMethod_content","xMultiplier","o1_linearHomogeneousConstant_generalSolutionMethod_content","xMulSign","xMulValue","o1","parents","importance","equation","o1_separable","generalSolutionMethod","equilibriumSolutionMethod","o1_autonomous","isoclineProperty","shiftSolutionRelation","o1_bernoulli","notes","w","o1_linear","on_linear","associatedHomogeneousEquation","linear_o1_linear","resolved_o1_linear","solutionSpaceBasis","homogeneitySolutionRelation","compare","additivitySolutionRelation","linearCombinationSolutionRelation","affineCombinationSolutionRelation","associatedSolutionRelation","close","o1_linearHomogeneous","on_linearHomogeneous","linear_o1_linearHomogeneous","resolved_o1_linearHomogeneous","o1_separableInT","o1_linearHomogeneousConstant","on_linearHomogeneousConstant","characteristicEquation","linear_o1_linearHomogeneousConstant","resolved_o1_linearHomogeneousConstant","o1_expGrowth","linear_o1_expGrowth","resolved_o1_expGrowth","o1_expDecay","linear_o1_expDecay","resolved_o1_expDecay","halfLife","o1_logisticGrowth","LhcParam","LhcContent","ivp","harmonicOscillatorType","discriminantRelation","contentMethodName","o2_harmonicOscillator","y","X","linear_o2_harmonicOscillator","Linear","resolved_o2_harmonicOscillator","Resolved","system_o2_harmonicOscillator","ReducedSystem","vector_o2_harmonicOscillator","ReducedVector","o2OrderReductionForms","resolvedFormFn","o2","s2","o2_autonomous","s2_autonomous","o2_linearHomogeneous","s2_linearHomogeneous","linear_o2_linearHomogeneous","getContentFor_equilibriumSolutionMethod","resolved_o2_linearHomogeneous","system_o2_linearHomogeneous","vector_o2_linearHomogeneous","o2_linearHomogeneousConstant","s2_linearHomogeneousConstant","linear_o2_linearHomogeneousConstant","getContentFor_characteristicEquation","resolved_o2_linearHomogeneousConstant","system_o2_linearHomogeneousConstant","vector_o2_linearHomogeneousConstant","getContentFor_generalSolutionMethod","scalar_o2_simpleHarmonicOscillator","getContentFor_equilibriumSolutionMethod0","system_o2_simpleHarmonicOscillator","vector_o2_simpleHarmonicOscillator","o2_underdampedHarmonicOscillator","o2_criticallyDampedHarmonicOscillator","o2_overdampedHarmonicOscillator","o2_simpleHarmonicOscillator","linear_o2_simpleHarmonicOscillator","resolved_o2_simpleHarmonicOscillator","getContentFor_generalSolutionMethod_Imaginary","o2_vanDerPol","o2_unforcedDuffing","11","12","TexScalarDepvar","TexSystemDepvar","TexVectorDepvar","LinearEquation","LinearConstantEquation","on_linear_linear_equation","isConstant","input","on_linear_resolved_equation","on_linear_system_equation","on_linear_vector_equation","on_linear_forms","isHomogeneous","on_linearHomogeneousConstant_generalSolutionMethod_content","charEqn","firstComponentExpressionPreamble","c","firstComponentExpression","x1","restDiffComponentExpressionContent","on_linear_associatedHomogeneousEquation_trait","isClosed","_contents","note","trait","on_linearHomogeneous_equilibriumSolutionMethod_trait","_contents2","sn","testSolutionMethod","linear_on_linear","resolved_on_linear","system_on_linear","vector_on_linear","realitySolutionRelation","linear_on_linearHomogeneous","on_linearConstant","linear_on_linearConstant","_","resolved_on_linearConstant","system_on_linearConstant","vector_on_linearConstant","linear_on_linearHomogeneousConstant","resolved_on_linearHomogeneousConstant","system_on_linearHomogeneousConstant","vector_on_linearHomogeneousConstant","19","20","25","26","LhcPlot","s2_partlyDecoupled","ith","choose","g","generalSolutionMethodContents","_choose","dv","cv","_choose2","df","cf","_choose3","ex1","ex2","_choose4","dth","cth","sub","vec2","s2_linearHomogeneousConstant_characteristicEquation","scalar","s2_linearHomogeneousConstant_generalSolutionMethod_content","none","generalSolutionLeadX0","specificSolutionLeadX0","generalAndSpecificSolutionLeadX0","findRealEigenvector","svec2","mat2","findComplexEigenvector","generalRealSolution","eigx1","eigx2","eigy1","eigy2","specificSolution","smat2","xi","xy","s2_partlyDecoupled1","s2_partlyDecoupled2","s2_completelyDecoupled","system_s2_linearHomogeneousConstant","vector_s2_linearHomogeneousConstant","plot","$output","sn_sir","phaseSolutionMethod","13",10,"FormRowsOutput","i18n","orderedClassSubgraph","theadLayout","notation","$classHighlightables","formSelectCallback","___babelHelper___classCallCheck","writeEquations","iColumn","$cell","$classEquations","forEach","formData","append","$equation","add","select","$e","unselect","removeClass","hasClass","noteText","columnParents","visibleParents","pid","$li","hover","$trs","columns","Base","_class","param","prototype","getGeneralSolutionConstantsEquation","getX0","getGeneralSolutionConstantsSolution","kmatlead","kx1","ky1","kx2","ky2","eqn1","eqn2","getGeneralSolutionRepeatedCase","x0","getx0","y0","gety0","getRepeatedGeneralSolution","getGeneralSolutionRealCase","getRealGeneralSolution","getGeneralSolutionComplexCase","getComplexGeneralSolution","getGeneralSolutionImaginaryCase","getImaginaryGeneralSolution","getContentFor_generalSolutionMethod_Repeated","_this","getCharacteristicEquation","getContentFor_generalSolutionMethod_Real","_this2","getContentFor_generalSolutionMethod_Complex","_this3","_this4","linear","_this5","Scalar","_LhcContent$Base","_class2","___babelHelper___possibleConstructorReturn","___babelHelper___inherits","_LhcContent$Scalar","_class3","_this8","sum","_this9","_this10","_this11","_LhcContent$Scalar2","_class4","_this13","b","resolved","_this14","_this15","_this16","_LhcContent$Base2","_class5","system","d","_this18","sys2","_LhcContent$Base3","_class6","_this20","a2","a1","a0","j","b1","b0","A","detailsPolyfill","Matrix","TrdetCanvas","PhaseCanvas","xLabel","yLabel","matrix","$numberInputs","$rangeInputs","$equilibriumType","trdetCanvas","phaseCanvas","updateDetails","updateEquilibriumType","getEquilibriumType","D","det","T","tr","ssc","text","forUpdated","val","redraw","getCoefInputs","coef","isMatrixElement","valueRange","getRange","initCoefInput","getValue","setValue","$input","checkValidity","value","Number","$div","label","slice","charAt","$number","$range","v","toFixed","setZero","setAssociated","each","buttons","$canvas","width","h","height","trim","tRange","dRange","tClose","dClose","offsetX","offsetY","p","abs","setTrdetExternally","16","17","18","Canvas","ctx","getContext","drawAxes","xAxisSize","yAxisSize","arrowSize","drawAxis","beginPath","moveTo","lineTo","stroke","save","lineWidth","strokeStyle","fillStyle","font","rotate","PI","restore","textBaseline","fillText","textAlign",15,"getClosestPointOnPositiveHyperbolaIn1stQuadrant","C","sqrt","epsilon2","iterationLimit","yx","y1","getClosestPointOnPositiveHyperbola","getClosestPointOnHyperbola","_updated","fn","_computeElementsFromTrdet","_original","_a","_b","_c","_d","_tr","bc","_det","_computeTrdetFromElements","_computeEigenvaluesFromTrdet","discr","root","_re2","_re1","_im1","_im2","_root","re1","re2","im1","im2","_computeTrdetFromEigenvalues","getEigenvector","lambda","getComplexEigenvector","alpha","beta","_setRe","_setIm","___babelHelper___createClass","key","get","set","_Canvas","xRange","yRange","drawDirectionField","arrowSpacing","arrowLength","arrowWidth","drawArrow","dx","dy","dl","closePath","fill","nx","floor","ny","drawEigenline","otherLambda","iconSize","icon","scale","transform","_ref","xic","yic","xis","yis","drawEigenlineIcon","dir","drawDiamond","drawTriangle","ofs","drawSolution","color","max","fnOnFractions","xNum","xDen","yNum","yDen","drawFixedPoint","fixedPointSize","arc","drawSaddleOrNodeSolution","lambda1","lambda2","xy1","xy2","x2","y2","_ref2","_ref3","_ref4","k1","k2","_ref5","_ref6","_ref7","T1","T2","dT1","pow","ke1","exp","ke2","dt","min","_i2","_ke","_ke2","_dt","_t","drawSpiralSolution","xxyy","kxc","kxs","kyc","kys","cos","sin","calculateSemiaxes","B","F","DIS","A2","B2","A2B2","R2","t0","log","e0","nSegments","ceil","_i3","_t3","c0","s0","_t2","_i4","_s","dtRad","drawDefectiveSolution","t1","dT","fillRect","translate",14,"crosshairSize","pointerSize","pointerMargin","trRange","detRange","drawRegionAreas","drawRegionLines","drawRegionLinesOnce","all","drawParabola","lineCap","drawPosition","SQRT2","_LinearEquation","charPoly","particularSolutionCases","parallelExpression","xp","homogeneousGeneralSolution","extraSection",21,"UnorderedClassSubgraph","OrderedClassSubgraph","TheadLayout","TrLayout","Notation","data","TraitRowsOutput","strings","trait.entity","trait.associatedHomogeneousEquation","trait.characteristicEquation","trait.halfLife","trait.property","trait.isoclineProperty","trait.solutionRelation","trait.shiftSolutionRelation","trait.linearitySolutionRelation","trait.solutionSpaceBasis","trait.homogeneitySolutionRelation","trait.additivitySolutionRelation","trait.linearCombinationSolutionRelation","trait.affineCombinationSolutionRelation","trait.realitySolutionRelation","trait.associatedSolutionRelation","trait.transform","trait.orderReduction","trait.solutionMethod","trait.generalSolutionMethod","trait.phaseSolutionMethod","trait.equilibriumSolutionMethod","trait.testSolutionMethod","trait.plot","$container","empty","selectedNodes","traitAlignmentLevel","maxTraitAlignmentLevel","dependentVariables","availableDependentVariables","viewDependentVariables","xyw","yvz","unorderedClassSubgraph","trLayout","recomputeLayouts","breadthWalk","graph","result","visited","queue","shift","Object","keys","sort","writeButton","tip","$button","$tableContainer","$quickSelect","$quickSelectButton","updateQuickSelectButton","deleteNode","writeTable","addNode","writeQuickSelectControls","$option","change","_id","visibleAncestors","computeVisibleAncestors","aid","naid","_id2","$attachedMenu","$attachedToButton","attachedDirection","attachTimeoutId","setCellClasses","cell","_arr","writeTheadButton","nodes","keyCodeUp","keyCodeDown","removeAttachedMenu","remove","clearTimeout","startAttachingMenu","$toFocus","prev","focus","_$toFocus","next","setTimeout","mh","outerHeight","mo","offset","bh","bo","top","insertBefore","left","last","first","writeTheadCell","node","ancestors","allParents","reverse","descendants","allChildren","writeThead","$thead","nodeLayers","arcLayers","row","writeTfoot","writeTraitAlignmentControls","_loop","prop","writeDependentVariablesControls","_loop2","dvs","writeGeneralNotes","traitRowsOutput","formRowsOutput","form","updateForm","MathJax","Hub","Queue","22","23","29","33","34","35","toUpperCase","OrderedClassGraph","unorderedClassGraph","orderedClasses","ranks","id1","id2",24,"TexDepvar","_TexDepvar","subscripts","ii","toString","join","template","replace","component","27","mergeSign","alterSign","filter","_mergeSign","_alterSign","makeNodeLabelLayers","makeArcLocationLayers","makeLayoutLayers","orderedVisibleDepthNodes","visibleDepthNodes","arcLocationLayers","30","31","32","depthList","arcRows","xs","_node","arcs","parentXs","parentNode","_j","String","splice","arr","reduce","times","head","nodeLabelLayers","layoutWidth","makeBlankRow","nodeLayoutLayers","arcLayoutLayers","drawArcUp","k","bt","drawArcDown","parentLocations","childLocations","pi","ci","rl","rt","bl","nextParentOrder","parentOrder","depth","sortedParents","node0","node1","p0","p1","cmpLen","cmpOrd","classSubgraph","classColumns","getSubtreeLayout","traitSubtree","ancestorsHaveIntegratedTrait","walk","getIntegratedClassesForTrait","vpid","integratedClassIds","integratedAncestors","cells","walkTraits","traitChildren","keepTraits","classTraitId","some","mathjaxDetailsFixAndPolyfill","columnTraitCells","writeTraitItem","forClassId","fromClassId","selectedForm","getTitle","$trait","rec","line","hasSelectedForm","selectedFormType","preferredForm","_arr2","writeTraitCell","traitCell","writeTraitRow","traitCells","cellWriterForForm","traitChild","_columnTraitCells$iCo","$oldCell","$newCell","replaceWith","UnorderedClassGraph","visibleClasses","invertGraph","igraph","ancestorDistances","addAncestorDistance","fromNode","toNode","distance","oldDistance","newDistance","traverseNode","ancestorNode","parentDistance","visibleChildren","cid","masked","maskAncestors","integrateAncestors","_pid"],"mappings":"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","file":"crnx-ode-properties.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\r\n\r\nconst detailsSupported=('open' in document.createElement('details')) // http://thenewcode.com/680/Feature-Detection-and-Styling-For-The-HTML5-details-Element\r\n\r\nmodule.exports=function(){ // to be called in .each()\r\n\tconst $details=$(this)\r\n\t$details.on('click','summary :input, summary a[href]',function(ev){ // firefox lets those events through\r\n\t\tev.preventDefault()\r\n\t})\r\n\tif (detailsSupported) return\r\n\tconst toggleOpen=()=>{\r\n\t\tif (!$details.attr('open')) {\r\n\t\t\t$details.attr('open','')\r\n\t\t} else {\r\n\t\t\t$details.removeAttr('open')\r\n\t\t}\r\n\t\t$details.trigger('toggle') // TODO coalesce toggle events\r\n\t}\r\n\tconst keyCodeEnter=13\r\n\tconst keyCodeSpace=32\r\n\tconst handleEvent=ev=>$(ev.target).closest('summary, :input, a[href]').is('summary') // check if event target is not an input/link, also check its ancestors (jQuery doesn't include <option> in :input selector)\r\n\t$details.addClass('polyfill').children('summary').attr('tabindex',0).click(function(ev){\r\n\t\tif (handleEvent(ev)) {\r\n\t\t\ttoggleOpen()\r\n\t\t}\r\n\t}).keydown(function(ev){\r\n\t\tif (handleEvent(ev) && (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace)) {\r\n\t\t\ttoggleOpen()\r\n\t\t\treturn false\r\n\t\t}\r\n\t})\r\n}\r\n",null,"module.exports = function(haystack){\r\n\treturn function(needle,start){\r\n\t\tif (\r\n\t\t\t(haystack!=null && haystack.includes!==undefined) ||\r\n\t\t\t!((typeof haystack === 'string') || (Array.isArray(haystack)))\r\n\t\t) {\r\n\t\t\treturn haystack.includes(needle,start)\r\n\t\t} else {\r\n\t\t\treturn haystack.indexOf(needle,start) !== -1\r\n\t\t}\r\n\t}\r\n}\r\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\nmodule.exports = Math.sign || function(x){\r\n\tx=+x // convert to a number\r\n\tif (x===0 || isNaN(x)) {\r\n\t\treturn x\r\n\t}\r\n\treturn x>0 ? 1 : -1\r\n}\r\n","'use strict'\r\n\r\nconst tex=require('./tex')\r\n\r\n// terms are one of '+', '-', '=', '0', [order,factor]\r\nmodule.exports=(...terms)=>{\r\n\tlet needToCollect=true\r\n\tlet collectedTerms=terms\r\n\tif (terms[terms.length-2]=='=' && terms[terms.length-1]==0) {\r\n\t\tneedToCollect=false\r\n\t} else {\r\n\t\tcollectedTerms=[]\r\n\t\tlet flipSign=false\r\n\t\tfor (let term of terms) {\r\n\t\t\tif (Array.isArray(term)) {\r\n\t\t\t\tcollectedTerms.push(term)\r\n\t\t\t} else if (term=='=') {\r\n\t\t\t\tflipSign=true\r\n\t\t\t\tcollectedTerms.push('-')\r\n\t\t\t} else if (term=='+') {\r\n\t\t\t\tcollectedTerms.push(flipSign?'-':'+')\r\n\t\t\t} else if (term=='-') {\r\n\t\t\t\tcollectedTerms.push(flipSign?'+':'-')\r\n\t\t\t}\r\n\t\t}\r\n\t\tcollectedTerms.push('=','0')\r\n\t}\r\n\tconst lambdaPow=order=>{\r\n\t\tif (order==0) {\r\n\t\t\treturn 1\r\n\t\t} else if (order==1) {\r\n\t\t\treturn `λ`\r\n\t\t} else {\r\n\t\t\treturn `λ^{${order}}`\r\n\t\t}\r\n\t}\r\n\tconst mapTerms=(nt,terms,mapper)=>tex.blockSum(...(\r\n\t\tterms.map(term=>{\r\n\t\t\tif (Array.isArray(term)) {\r\n\t\t\t\tconst [order,factor]=term\r\n\t\t\t\treturn mapper(nt,order,factor)\r\n\t\t\t} else {\r\n\t\t\t\treturn term\r\n\t\t\t}\r\n\t\t})\r\n\t))\r\n\tconst step1=(nt,order,factor)=>[factor,nt.dd(nt.x,'t',order)]\r\n\tconst step2=(nt,order,factor)=>[factor,nt.dd('','t',order),'e^{λ t}']\r\n\tconst step3=(nt,order,factor)=>[factor,lambdaPow(order),'e^{λ t}']\r\n\tconst step4=(nt,order,factor)=>[factor,lambdaPow(order)]\r\n\treturn nt=>[\r\n\t\t{type:'derivation',content:[\r\n\t\t\tmapTerms(nt,terms,step1),\r\n\t\t\t`substitute \\\\( ${nt.x} = e^{λ t} \\\\)`,\r\n\t\t\tmapTerms(nt,terms,step2),\r\n\t\t\tmapTerms(nt,terms,step3),\r\n\t\t\t`divide by \\\\( e^{\\\\lambda t} \\\\)`,\r\n\t\t\t...(needToCollect?[\r\n\t\t\t\tmapTerms(nt,terms,step4),\r\n\t\t\t]:[]),\r\n\t\t]},\r\n\t\tmapTerms(nt,collectedTerms,step4),\r\n\t]\r\n}\r\n","'use strict'\r\n\r\nconst traits=[\r\n\t['entity',[\r\n\t\t['associatedHomogeneousEquation'],\r\n\t\t['characteristicEquation'],\r\n\t\t['halfLife'],\r\n\t]],\r\n\t['property',[\r\n\t\t['isoclineProperty'],\r\n\t\t['solutionRelation',[\r\n\t\t\t['shiftSolutionRelation'],\r\n\t\t\t['linearitySolutionRelation',[ // linear and affine properties of solutions\r\n\t\t\t\t['solutionSpaceBasis'],\r\n\t\t\t\t['homogeneitySolutionRelation'],\r\n\t\t\t\t['additivitySolutionRelation'],\r\n\t\t\t\t['linearCombinationSolutionRelation'],\r\n\t\t\t\t['affineCombinationSolutionRelation'],\r\n\t\t\t\t['realitySolutionRelation'],\r\n\t\t\t\t['associatedSolutionRelation'],\r\n\t\t\t]]\r\n\t\t]],\r\n\t]],\r\n\t['transform',[\r\n\t\t['orderReduction'], // TODO remove\r\n\t]],\r\n\t['solutionMethod',[\r\n\t\t['generalSolutionMethod'],\r\n\t\t['phaseSolutionMethod'],\r\n\t\t['equilibriumSolutionMethod'],\r\n\t\t['testSolutionMethod'],\r\n\t]],\r\n\t['plot'],\r\n]\r\n\r\n// class entries:\r\n//\tforms = array of forms\r\n//\ttraits = dictionary of traits\r\n//\t...TODO complete...\r\n// obsolete class entries:\r\n//\tequation = tex equation of primary form\r\n//\tvectorEquation\r\n//\thasForm = use this value as form type instead of class id\r\n\r\n// form entries:\r\n//\tis = comma-separated list of form types (common types are t,x,xy,xi,X,resolved_*,system_*,vector_*)\r\n//\tequation\r\n//\tnotes = (nt => array)\r\n\r\n// trait entries:\r\n//\ttitle = redefine title\r\n//\tformType = preferred form type; defaults to last (most specific) form type of first form; this form type will be used when content is not available for requested form\r\n//\tcontent = contents for preferred form type; used to omit lengthier contents entry\r\n//\tcontents = dictionary of (form type : content)\r\n//\tclose = children don't need to inherit this trait; display it only if parents have it displayed\r\n//\tcompare = show only if other classes have this property without compare entry\r\n// obsolete trait entries:\r\n//\tform = have to present the equation in which this trait was defined\r\n//\t\tif true: form type is equal to class id\r\n//\t\totherwise: object: { formType1:true, formType2:true, ... }; usually lists children forms\r\n\r\nconst classes={}\r\nconst merge=(mergedClasses)=>{\r\n\tfor (let id in mergedClasses) {\r\n\t\tclasses[id]=mergedClasses[id]\r\n\t}\r\n}\r\nmerge(require('./data/equations-1st'))\r\nmerge(require('./data/equations-2nd'))\r\nmerge(require('./data/equations-nth'))\r\nmerge(require('./data/systems'))\r\n\r\n// preprocess data\r\nfor (let classId in classes) {\r\n\tconst classData=classes[classId]\r\n\tif (classData.htmlName===undefined) {\r\n\t\tclassData.htmlName=classData.name\r\n\t}\r\n\tif (classData.traits===undefined) {\r\n\t\tclassData.traits={}\r\n\t}\r\n\tfor (let traitId in classData.traits) {\r\n\t\tconst traitData=classData.traits[traitId]\r\n\t\tif (traitData.formType===undefined) {\r\n\t\t\ttraitData.formType=classData.forms[0].is.split(',').pop()\r\n\t\t}\r\n\t\tif (traitData.contents===undefined && traitData.content!==undefined) {\r\n\t\t\ttraitData.contents={}\r\n\t\t\ttraitData.contents[traitData.formType]=traitData.content\r\n\t\t\tdelete traitData.content\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports={traits,classes}\r\n","'use strict'\r\n\r\nconst characteristicEquationContent=require('../characteristic-equation-content')\r\n\r\nconst eqsol=(name)=>`<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>${name}</a>`\r\n\r\nconst o1_linear_generalSolutionMethod_content=isLinear=>{\r\n\tconst mvp1=isLinear?'+':'='\r\n\tconst mvp2=isLinear?'=':'+'\r\n\tconst mvp3=isLinear?'-':'+'\r\n\tconst mvpa=isLinear?'g':'a'\r\n\tconst mvpyh=nt=>(isLinear?`e^{-${nt.sint('g(t)')}}`:`e^{${nt.sint('a(t)')}}`)\r\n\treturn nt=>[\r\n\t\t{type:'case',title:\"method of <a href='https://en.wikipedia.org/wiki/Integrating_factor'>integrating factors</a>\",content:[\r\n\t\t\t{type:'derivation',content:[\r\n\t\t\t\t...(isLinear?[]:[\r\n\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\]`,\r\n\t\t\t\t\t`introduce a new function`,\r\n\t\t\t\t\t`\\\\[ g(t) = -a(t) \\\\]`,\r\n\t\t\t\t\t`rewrite the equation with \\\\( g(t) \\\\)`,\r\n\t\t\t\t]),\r\n\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = b(t) \\\\]`,\r\n\t\t\t\t`introduce the integrating factor`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) = e^{${nt.sint('g(t)')}} \\\\]`,\r\n\t\t\t\t`multiply the equation by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + \\\\mu(t) g(t) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + e^{${nt.sint('g(t)')}} g(t) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + ${nt.ddt}(e^{${nt.sint('g(t)')}}) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.dxdt} + ${nt.ddt}(\\\\mu(t)) ${nt.x} = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ ${nt.ddt}(\\\\mu(t) ${nt.x}) = \\\\mu(t) b(t) \\\\]`,\r\n\t\t\t\t`integrate the equation multiplied by \\\\( \\\\mu(t) \\\\)`,\r\n\t\t\t\t`\\\\[ \\\\mu(t) ${nt.x} = ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t]},\r\n\t\t\t(isLinear\r\n\t\t\t\t?`\\\\[ \\\\mu(t) = e^{${nt.sint('g(t)')}} \\\\]`\r\n\t\t\t\t:`\\\\[ \\\\mu(t) = e^{-${nt.sint('a(t)')}} \\\\]`\r\n\t\t\t),\r\n\t\t\t`\\\\[ \\\\mu(t) ${nt.x} = ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t]},\r\n\t\t{type:'case',title:\"method of <a href='https://en.wikipedia.org/wiki/Variation_of_parameters'>variation of parameters</a>\",content:[\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`mathematically equivalent to the method of integrating factors`,\r\n\t\t\t]},\r\n\t\t\t`find the general solution \\\\( K ${nt.x}_h \\\\) of the associated homogeneous equation`,\r\n\t\t\t`\\\\[ ${nt.x}_h = ${mvpyh(nt)} \\\\]`,\r\n\t\t\t{type:'derivation',title:`find \\\\( ${nt.x} \\\\) as \\\\( ${nt.x}_h \\\\) multiplied by an unknown function`,content:[\r\n\t\t\t\t`\\\\[ ${nt.x} = u(t) ${nt.x}_h \\\\]`,\r\n\t\t\t\t`substitute \\\\( ${nt.x} \\\\) into the original equation`,\r\n\t\t\t\t`\\\\[ ${nt.ddt}(u(t) ${nt.x}_h) ${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h + u(t) ${nt.dd(`${nt.x}_h`)} ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h + u(t) ${nt.ddt}(${mvpyh(nt)}) ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h ${mvp3} u(t) ${mvpa}(t) ${mvpyh(nt)} ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t`${nt.dd('u(t)')} ${nt.x}_h ${mvp3} u(t) ${mvpa}(t) ${nt.x}_h ${mvp1} \\\\\\\\ `+\r\n\t\t\t\t\t`${mvp1} ${mvpa}(t) u(t) ${nt.x}_h ${mvp2} b(t) `+\r\n\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t`\\\\[ ${nt.dd('u(t)')} ${nt.x}_h = b(t) \\\\]`,\r\n\t\t\t\t`\\\\[ ${nt.dd('u(t)')} = \\\\frac{b(t)}{${nt.x}_h} \\\\]`,\r\n\t\t\t\t`\\\\[ u(t) = ${nt.int(`\\\\frac{b(t)}{${nt.x}_h}`)} + C \\\\]`,\r\n\t\t\t\t`substitute \\\\( u(t) \\\\) into the expression for \\\\( ${nt.x} \\\\)`,\r\n\t\t\t]},\r\n\t\t\t`\\\\[ ${nt.x} = ${nt.x}_h \\\\left( ${nt.int(`\\\\frac{b(t)}{${nt.x}_h}`)} + C \\\\right) \\\\]`,\r\n\t\t]},\r\n\t\t{type:'case',title:\"<a href='https://en.wikipedia.org/wiki/Method_of_undetermined_coefficients'>method of undetermined coefficients</a>\",content:[\r\n\t\t\t`find the general solution \\\\( K ${nt.x}_h \\\\) of the associated homogeneous equation`,\r\n\t\t\t`\\\\[ ${nt.x}_h = ${mvpyh(nt)} \\\\]`,\r\n\t\t\t{type:'derivation',title:`find a particular solution \\\\( ${nt.x}_p \\\\) of the original equation`,content:[\r\n\t\t\t\t`guess the solution form with coefficients to be solved for`,\r\n\t\t\t\t`solve for coefficients`,\r\n\t\t\t\t{type:'example',content:[\r\n\t\t\t\t\t...(isLinear?[]:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = -2 ${nt.x} + 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t\t`move all terms with \\\\( ${nt.x} \\\\) to one side`,\r\n\t\t\t\t\t]),\r\n\t\t\t\t\t`\\\\[ ${nt.dxdt} + 2 ${nt.x} = 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t`compare the terms and guess the particular solution form`,\r\n\t\t\t\t\t`\\\\[ ${nt.x}_p = \\\\alpha e^{-t/2} \\\\]`,\r\n\t\t\t\t\t`substitute \\\\( ${nt.x}_p \\\\) into the equation`,\r\n\t\t\t\t\t`\\\\[ - \\\\frac{\\\\alpha}{2} e^{-t/2} + 2 \\\\alpha e^{-t/2} = 3 e^{-t/2} \\\\]`,\r\n\t\t\t\t\t`divide by \\\\( e^{-t/2} \\\\)`,\r\n\t\t\t\t\t`\\\\[ - \\\\frac{\\\\alpha}{2} + 2 \\\\alpha = 3 \\\\]`,\r\n\t\t\t\t\t`solve for \\\\( \\\\alpha \\\\)`,\r\n\t\t\t\t\t`\\\\[ \\\\alpha = 2 \\\\]`,\r\n\t\t\t\t\t`substitute \\\\( \\\\alpha \\\\) into \\\\( ${nt.x}_p \\\\)`,\r\n\t\t\t\t\t`\\\\[ ${nt.x}_p = 2 e^{-t/2} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t\t`\\\\[ ${nt.x} = K ${nt.x}_h + ${nt.x}_p \\\\]`,\r\n\t\t]},\r\n\t]\r\n}\r\n\r\nconst o1_linearHomogeneous_generalSolutionMethod_content=isLinear=>{\r\n\tconst s=isLinear?'-':''\r\n\tconst a=isLinear?'g':'a'\r\n\treturn nt=>[\r\n\t\t{type:'derivation',content:[\r\n\t\t\t`\\\\[ ${nt.dxdt} = ${s}${a}(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = ${s}${a}(t) \\\\]`,\r\n\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${s}${nt.int(`${a}(t)`)} + C \\\\]`,\r\n\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${s}${nt.int(`${a}(t)`)} + C \\\\]`,\r\n\t\t\t`\\\\[ \\\\ln|${nt.x}| = ${s}${nt.int(`${a}(t)`)} + C \\\\]`,\r\n\t\t]},\r\n\t\t`\\\\[ ${nt.x} = K \\\\cdot e^{${s}${nt.sint(`${a}(t)`)}} \\\\]`,\r\n\t\t{type:'note',content:[\r\n\t\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( K = 0 \\\\)`,\r\n\t\t]},\r\n\t]\r\n}\r\n\r\nconst o1_linearHomogeneous_equilibriumSolutionMethod_content=xMultiplier=>nt=>[\r\n\t{type:'switch',title:`\\\\( ${xMultiplier} \\\\) is`,content:[\r\n\t\t{type:'case',title:`\\\\( ${xMultiplier} = 0 \\\\)`,content:[\r\n\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t]},\r\n\t\t{type:'case',title:`\\\\( ${xMultiplier} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t]},\r\n\t]},\r\n]\r\n\r\nconst o1_linearHomogeneousConstant_generalSolutionMethod_content=(xMulSign,xMulValue)=>nt=>[\r\n\t{type:'derivation',content:[\r\n\t\t`\\\\[ ${nt.dxdt} = ${xMulSign}${xMulValue} \\\\cdot ${nt.x} \\\\]`,\r\n\t\t`\\\\[ \\\\frac{1}{${nt.x}} \\\\cdot ${nt.dxdt} = ${xMulSign}${xMulValue} \\\\]`,\r\n\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}} ${nt.dxdt}`)} = ${xMulSign}${nt.int(xMulValue)} + C \\\\]`,\r\n\t\t`\\\\[ ${nt.int(`\\\\frac{1}{${nt.x}}`,nt.x)} = ${xMulSign}${nt.int(xMulValue)} + C \\\\]`,\r\n\t\t`\\\\[ \\\\ln|${nt.x}| = ${xMulSign}${xMulValue} t + C \\\\]`,\r\n\t\t`\\\\[ ${nt.x}(t) = C_1 e^{${xMulSign}${xMulValue} t} \\\\]`,\r\n\t\t`\\\\[ ${nt.x}(0) = C_1 e^0 \\\\]`,\r\n\t\t`\\\\[ C_1 = ${nt.x}(0) \\\\]`,\r\n\t]},\r\n\t`\\\\[ ${nt.x}(t) = ${nt.x}(0) \\\\cdot e^{${xMulSign}${xMulValue} t} \\\\]`,\r\n\t{type:'note',content:[\r\n\t\t`includes ${eqsol(\"equilibrium solution\")} when \\\\( ${nt.x}(0) = 0 \\\\)`,\r\n\t]},\r\n]\r\n\r\nmodule.exports={\r\n\to1: {\r\n\t\tparents: {\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"first-order\",\r\n\t\timportance: 0,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f(t,${nt.x})`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\to1_separable: {\r\n\t\tparents: {\r\n\t\t\to1: true,\r\n\t\t},\r\n\t\tname: \"first-order separable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_separable',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f_1(t) \\\\cdot f_2(${nt.x})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f_1(t) \\\\cdot f_2(${nt.x}) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{f_2(${nt.x})} \\\\cdot ${nt.dxdt} = f_1(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f_2(${nt.x})} ${nt.dxdt}`)} = ${nt.int('f_1(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f_2(${nt.x})}`,nt.x)} = ${nt.int('f_1(t)')} + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`solve \\\\( f_2(${nt.x}) = 0 \\\\) for constant \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t\t//`domain is not necessary \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)`\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_autonomous: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t},\r\n\t\tname: \"first-order autonomous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_autonomous',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f(${nt.x})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tisoclineProperty: {\r\n\t\t\t\tformType: 't',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`isoclines are horizontal`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tshiftSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p(t) \\\\) is a solution, then \\\\( ${nt.x}_p(t+C) \\\\) is a solution`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f(${nt.x}) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\frac{1}{f(${nt.x})} \\\\cdot ${nt.dxdt} = 1 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f(${nt.x})} ${nt.dxdt}`)} = ${nt.int(1)} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.int(`\\\\frac{1}{f(${nt.x})}`,nt.x)} = t + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`solve \\\\( f(${nt.x}) = 0 \\\\) for constant \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t\t//`domain is \\\\( -\\\\infty &lt; t &lt; +\\\\infty \\\\)` // only if f(y) is continuous\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_bernoulli: {\r\n\t\tparents: {\r\n\t\t\to1: true,\r\n\t\t},\r\n\t\tname: \"Bernoulli\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Bernoulli_differential_equation'>Bernoulli</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_bernoulli',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.x}^n`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( n \\\\neq 1 \\\\)`,\r\n\t\t\t\t\t`usually it's also defined that additionally \\\\( n \\\\neq 0 \\\\), but we ignore this requirement here`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.x}^n \\\\]`,\r\n\t\t\t\t\t\t`multiply the equation by \\\\( \\\\frac{1-n}{${nt.x}^n} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\begin{multline} `+\r\n\t\t\t\t\t\t\t`\\\\frac{1-n}{${nt.x}^n} ${nt.dxdt} = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`= \\\\frac{(1-n) a(t)}{${nt.x}^{n-1}} + (1-n) b(t) `+\r\n\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t`introduce a new variable`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.w} = \\\\frac{1}{${nt.x}^{n-1}} \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.w)} = ${nt.dd(nt.w,nt.x)} ${nt.dxdt} = \\\\frac{1-n}{${nt.x}^n} ${nt.dxdt} \\\\]`,\r\n\t\t\t\t\t\t`substitute \\\\( ${nt.w} \\\\) and \\\\( ${nt.dd(nt.w)} \\\\) into the equation`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd(nt.w)} = (1-n) a(t) ${nt.w} + (1-n) b(t) \\\\]`,\r\n\t\t\t\t\t\t`solve this equation as a linear equation in \\\\( ${nt.w} \\\\), then return to the original variable \\\\( ${nt.x} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\mu(t) ${nt.w} = (1-n) ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ \\\\mu(t) = e^{(n-1)${nt.sint('a(t)')}} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\frac{\\\\mu(t)}{${nt.x}^{n-1}} = (1-n) ${nt.int('\\\\mu(t) b(t)')} + C \\\\]`,\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`this may or may not include ${eqsol(\"equilibrium solutions\")}`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`if \\\\( n>0 \\\\), there's an equilibrium solution \\\\( ${nt.x} = 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linear: {\r\n\t\tparents: {\r\n\t\t\ton_linear: true,\r\n\t\t\to1_bernoulli: true,\r\n\t\t},\r\n\t\tname: \"first-order linear\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_linear',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} + g(t) \\\\cdot ${nt.x} = b(t)`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linear',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = a(t) \\\\cdot ${nt.x} + b(t)`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linear: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tresolved_o1_linear: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p \\\\) is a solution`,\r\n\t\t\t\t\t`and \\\\( ${nt.x}_h \\\\) is a nonzero solution of the associated homogeneous equation`,\r\n\t\t\t\t\t`then \\\\( K ${nt.x}_h + ${nt.x}_p \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thomogeneitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\) and \\\\( ${nt.x}_1 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + (1 - K_1) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\tadditivitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 + ${nt.x}_2 - ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\tlinearCombinationSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 + (1 - K_1 - K_2) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t\t{type:'extra',title:'generalizes to \\\\( m+1 \\\\) solutions',content:[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions,`,\r\n\t\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i + (1 - \\\\sum\\\\limits_{i=1}^m K_i) ${nt.x}_0 \\\\) is a solution.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tcompare: true,\r\n\t\t\t},\r\n\t\t\taffineCombinationSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\) are solutions`,\r\n\t\t\t\t\t`and \\\\( K_1 + K_2 = 1 \\\\)`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t\t{type:'extra',title:'generalizes to \\\\( m \\\\) solutions',content:[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions`,\r\n\t\t\t\t\t\t`and \\\\( \\\\sum\\\\limits_{i=1}^m K_i = 1 \\\\)`,\r\n\t\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i \\\\) is a solution.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 - ${nt.x}_2 \\\\) is a solution of the associated homogeneous equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linear:   o1_linear_generalSolutionMethod_content(true),\r\n\t\t\t\t\tresolved_o1_linear: o1_linear_generalSolutionMethod_content(false),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tformType: 'resolved_o1_linear',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`Can't find equilibrium solution like in Bernoulli equation because \\\\( n = 0 \\\\).`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ton_linearHomogeneous: true,\r\n\t\t\to1_separable: true,\r\n\t\t\to1_linear: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\timportance: 1,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} + g(t) \\\\cdot ${nt.x} = 0`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = a(t) \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneous: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} + g(t) \\\\cdot ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`The equation is associated with itself.`,\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tresolved_o1_linearHomogeneous: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = a(t) \\\\cdot ${nt.x} \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`The equation is associated with itself.`,\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_h \\\\) is a nonzero solution,`,\r\n\t\t\t\t\t`then \\\\( K ${nt.x}_h \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\thomogeneitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) is a solution,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tadditivitySolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_1 + ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tlinearCombinationSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions,`,\r\n\t\t\t\t\t`then \\\\( K_1 ${nt.x}_1 + K_2 ${nt.x}_2 \\\\) is a solution.`,\r\n\t\t\t\t\t{type:'extra',title:'generalizes to \\\\( m \\\\) solutions',content:[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_1 \\\\), \\\\( ${nt.x}_2 \\\\), ..., \\\\( ${nt.x}_m \\\\) are solutions,`,\r\n\t\t\t\t\t\t`then \\\\( \\\\sum\\\\limits_{i=1}^m K_i ${nt.x}_i \\\\) is a solution.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\taffineCombinationSolutionRelation: {\r\n\t\t\t\tformType: 't',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`This is a special case of a linear combination.`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneous:   o1_linearHomogeneous_generalSolutionMethod_content(true),\r\n\t\t\t\t\tresolved_o1_linearHomogeneous: o1_linearHomogeneous_generalSolutionMethod_content(false),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneous:   o1_linearHomogeneous_equilibriumSolutionMethod_content('g(t)'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneous: o1_linearHomogeneous_equilibriumSolutionMethod_content('a(t)'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_separableInT: {\r\n\t\tparents: {\r\n\t\t\to1_separable: true,\r\n\t\t\to1_linear: true,\r\n\t\t},\r\n\t\tname: \"first-order separable in independent variable\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Separation_of_variables#Ordinary_differential_equations_.28ODE.29'>separable</a> in \\\\(t\\\\)\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_separableInT',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = f(t)`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\( ${nt.dxdt} = 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tisoclineProperty: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`isoclines are vertical`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tsolutionSpaceBasis: { // also shiftSolutionRelation\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`If \\\\( ${nt.x}_p \\\\) is a solution`,\r\n\t\t\t\t\t`then \\\\( ${nt.x}_p + C \\\\) is a general solution.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tassociatedSolutionRelation: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\( ${nt.x} = C \\\\) is a solution of the associated homogeneous equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dxdt} = f(t) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.int(nt.dxdt)} = ${nt.int('f(t)')} + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.x} = ${nt.int('f(t)')} + C \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`Can't find equilibrium solution like in separable equation because \\\\( f_2(${nt.x}) = 1 \\\\).`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t],\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ton_linearHomogeneousConstant: true,\r\n\t\t\to1_autonomous: true,\r\n\t\t\to1_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"first-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"first-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`a \\\\cdot ${nt.dxdt} + b \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( a \\\\ne 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = k \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneousConstant:   characteristicEquationContent([1,'a'],'+',[0,'b'],'=','0'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneousConstant: characteristicEquationContent([1,1],'=',[0,'k']),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneousConstant:   o1_linearHomogeneousConstant_generalSolutionMethod_content('-','\\\\frac ba'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneousConstant: o1_linearHomogeneousConstant_generalSolutionMethod_content('','k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_linearHomogeneousConstant:   o1_linearHomogeneous_equilibriumSolutionMethod_content('b'),\r\n\t\t\t\t\tresolved_o1_linearHomogeneousConstant: o1_linearHomogeneous_equilibriumSolutionMethod_content('k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_expGrowth: {\r\n\t\tparents: {\r\n\t\t\to1_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"exponential (natural) growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Exponential_growth#Differential_equation'>exponential (natural) growth</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o1_expGrowth',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} - k \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the growth constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o1_linearHomogeneousConstant,resolved_o1_expGrowth',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = k \\\\cdot ${nt.x}`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the growth constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expGrowth:   characteristicEquationContent([1,1],'-',[0,'k'],'=','0'),\r\n\t\t\t\t\tresolved_o1_expGrowth: characteristicEquationContent([1,1],'=',[0,'k']),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expGrowth:   o1_linearHomogeneousConstant_generalSolutionMethod_content('','k'),\r\n\t\t\t\t\tresolved_o1_expGrowth: o1_linearHomogeneousConstant_generalSolutionMethod_content('','k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expGrowth:   o1_linearHomogeneous_equilibriumSolutionMethod_content('k'),\r\n\t\t\t\t\tresolved_o1_expGrowth: o1_linearHomogeneous_equilibriumSolutionMethod_content('k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_expDecay: {\r\n\t\tparents: {\r\n\t\t\to1_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"exponential (natural) decay\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Exponential_decay'>exponential (natural) decay</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o1_expDecay,linear_o1_expDecay',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} + k \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the decay constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o1_expDecay,resolved_o1_expDecay',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = -k \\\\cdot ${nt.x}`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the decay constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expDecay:   characteristicEquationContent([1,1],'+',[0,'k'],'=','0'),\r\n\t\t\t\t\tresolved_o1_expDecay: characteristicEquationContent([1,1],'=',[0,'-k']),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thalfLife: {\r\n\t\t\t\tformType: 'scalar_o1_expDecay',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(t_{1/2}) = \\\\frac 12 \\\\cdot ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t\t`substitute general solution \\\\( ${nt.x}(t) = ${nt.x}(0) e^{-kt} \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.x}(0) e^{-kt_{1/2}} = \\\\frac 12 \\\\cdot ${nt.x}(0) \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ e^{-kt_{1/2}} = \\\\frac 12 \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ -kt_{1/2} = -\\\\ln 2 \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ t_{1/2} = \\\\frac{\\\\ln 2}{k} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expDecay:   o1_linearHomogeneousConstant_generalSolutionMethod_content('-','k'),\r\n\t\t\t\t\tresolved_o1_expDecay: o1_linearHomogeneousConstant_generalSolutionMethod_content('-','k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o1_expDecay:   o1_linearHomogeneous_equilibriumSolutionMethod_content('-k'),\r\n\t\t\t\t\tresolved_o1_expDecay: o1_linearHomogeneous_equilibriumSolutionMethod_content('-k'),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to1_logisticGrowth: {\r\n\t\tparents: {\r\n\t\t\to1_autonomous: true,\r\n\t\t\to1_bernoulli: true,\r\n\t\t},\r\n\t\tname: \"logistic growth\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Logistic_function#In_ecology:_modeling_population_growth'>logistic growth</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,o1_logisticGrowth',\r\n\t\t\t\tequation: nt=>`${nt.dxdt} = r \\\\cdot ${nt.x} \\\\cdot \\\\left(1 - \\\\frac{${nt.x}}{k}\\\\right)`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( k \\\\) is the <a href='https://en.wikipedia.org/wiki/Carrying_capacity'>carrying capacity</a>`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${nt.x} = k \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n}\r\n","'use strict'\r\n\r\nconst LhcParam=require('../lhc-param-classes')\r\nconst LhcContent=require('../lhc-content-classes')\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nconst harmonicOscillatorType=(type,discriminantRelation,contentMethodName)=>({\r\n\tparents: {\r\n\t\to2_harmonicOscillator: true,\r\n\t},\r\n\tname: `${type} harmonic oscillator`,\r\n\thtmlName: `${type} <a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator'>harmonic oscillator</a>`,\r\n\timportance: 4,\r\n\tforms: [\r\n\t\t{\r\n\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,scalar_o2_harmonicOscillator,linear_o2_harmonicOscillator',\r\n\t\t\tequation: nt=>`m \\\\cdot ${nt.dd(nt.x,'t',2)} + b \\\\cdot ${nt.dxdt} + k \\\\cdot ${nt.x} = 0`,\r\n\t\t\tnotes: nt=>[\r\n\t\t\t\t`\\\\[ b^2 - 4 m k ${discriminantRelation} 0 \\\\]`,\r\n\t\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t\t`\\\\( b \\\\ge 0 \\\\) is the viscous damping coefficient`,\r\n\t\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t\t],\r\n\t\t},\r\n\t\t// copypasted from harmonic oscillator\r\n\t\t{\r\n\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,scalar_o2_harmonicOscillator,resolved_o2_harmonicOscillator',\r\n\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = - \\\\frac bm \\\\cdot ${nt.dxdt} - \\\\frac km \\\\cdot ${nt.x}`,\r\n\t\t},\r\n\t\t{\r\n\t\t\tis: 't,xy,system_o2_simpleHarmonicOscillator,system_o2_harmonicOscillator',\r\n\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t`${nt.dd(nt.y)} &= - \\\\frac km \\\\cdot ${nt.x} - \\\\frac bm \\\\cdot ${nt.y} `+\r\n\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t},\r\n\t\t{\r\n\t\t\tis: 't,X,vector_o2_simpleHarmonicOscillator,vector_o2_harmonicOscillator',\r\n\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\begin{bmatrix}`+\r\n\t\t\t\t`0 & 1 \\\\\\\\`+\r\n\t\t\t\t`- \\\\frac km & - \\\\frac bm`+\r\n\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t},\r\n\t],\r\n\ttraits: {\r\n\t\tgeneralSolutionMethod: {\r\n\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\tcontents: {\r\n\t\t\t\tlinear_o2_harmonicOscillator:   new LhcContent.Linear(new LhcParam.Linear('m','b','k'))[contentMethodName](),\r\n\t\t\t\tresolved_o2_harmonicOscillator: new LhcContent.Resolved(new LhcParam.Linear('m','b','k'))[contentMethodName](),\r\n\t\t\t\tsystem_o2_harmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m','b','k'))[contentMethodName](),\r\n\t\t\t\tvector_o2_harmonicOscillator:   new LhcContent.ReducedVector(new LhcParam.Linear('m','b','k'))[contentMethodName](),\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n})\r\n\r\nconst o2OrderReductionForms=(classId,resolvedFormFn)=>[ // resolvedFormFn: (x,y)=>`...`\r\n\t{\r\n\t\tis: `t,x,resolved_${classId}`,\r\n\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = `+resolvedFormFn(nt.x,nt.dxdt),\r\n\t},\r\n\t{\r\n\t\tis: 't,xy,system_${classId}',\r\n\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t`${nt.dd(nt.y)} &= `+resolvedFormFn(nt.x,nt.y)+` `+\r\n\t\t`\\\\end{aligned} \\\\right.`,\r\n\t},\r\n]\r\n\r\nmodule.exports={\r\n\to2: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"second-order\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o2',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = f(t,${nt.x},${nt.dxdt})`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= f(t,${nt.x},${nt.y}) `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\to2_autonomous: {\r\n\t\tparents: {\r\n\t\t\to2: true,\r\n\t\t\ts2_autonomous: true,\r\n\t\t},\r\n\t\tname: \"second-order autonomous\",\r\n\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Autonomous_system_%28mathematics%29'>autonomous</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o2_autonomous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = f(${nt.x},${nt.dxdt})`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_autonomous',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= f(${nt.x},${nt.y}) `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\to2_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ts2_linearHomogeneous: true,\r\n\t\t\ton_linearHomogeneous: true,\r\n\t\t\to2: true,\r\n\t\t},\r\n\t\tname: \"second-order linear homogeneous\",\r\n\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a> <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>homogeneous</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} + p(t) \\\\cdot ${nt.dxdt} + q(t) \\\\cdot ${nt.x} = 0`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = a(t) \\\\cdot ${nt.dxdt} + b(t) \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= c(t) \\\\cdot ${nt.x} + d(t) \\\\cdot ${nt.y} `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_o2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\begin{bmatrix}`+\r\n\t\t\t\t\t`0 & 1 \\\\\\\\`+\r\n\t\t\t\t\t`c(t) & d(t)`+\r\n\t\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linearHomogeneous:   new LhcContent.Linear(new LhcParam.Linear(1,'p(t)','q(t)')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tresolved_o2_linearHomogeneous: new LhcContent.Resolved(new LhcParam.Resolved('a(t)','b(t)')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tsystem_o2_linearHomogeneous:   new LhcContent.ReducedSystem(new LhcParam.ReducedSystem('c(t)','d(t)')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tvector_o2_linearHomogeneous:   new LhcContent.ReducedVector(new LhcParam.ReducedSystem('c(t)','d(t)')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ts2_linearHomogeneousConstant: true,\r\n\t\t\ton_linearHomogeneousConstant: true,\r\n\t\t\to2_autonomous: true,\r\n\t\t\to2_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"second-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"second-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,linear_o2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`a_2 \\\\cdot ${nt.dd(nt.x,'t',2)} + a_1 \\\\cdot ${nt.dxdt} + a_0 \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( a_2 \\\\ne 0 \\\\)`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_o2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = b_1 \\\\cdot ${nt.dxdt} + b_0 \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= c \\\\cdot ${nt.x} + d \\\\cdot ${nt.y} `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_o2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\begin{bmatrix}`+\r\n\t\t\t\t\t`0 & 1 \\\\\\\\`+\r\n\t\t\t\t\t`c & d`+\r\n\t\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linearHomogeneousConstant:   new LhcContent.Linear(new LhcParam.Linear('a_2','a_1','a_0')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tresolved_o2_linearHomogeneousConstant: new LhcContent.Resolved(new LhcParam.Resolved('b_1','b_0')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tsystem_o2_linearHomogeneousConstant:   new LhcContent.ReducedSystem(new LhcParam.ReducedSystem('c','d')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tvector_o2_linearHomogeneousConstant:   new LhcContent.ReducedVector(new LhcParam.ReducedSystem('c','d')).getContentFor_characteristicEquation(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linearHomogeneousConstant:   new LhcContent.Linear(new LhcParam.Linear('a_2','a_1','a_0')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tresolved_o2_linearHomogeneousConstant: new LhcContent.Resolved(new LhcParam.Resolved('b_1','b_0')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tsystem_o2_linearHomogeneousConstant:   new LhcContent.ReducedSystem(new LhcParam.ReducedSystem('c','d')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tvector_o2_linearHomogeneousConstant:   new LhcContent.ReducedVector(new LhcParam.ReducedSystem('c','d')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_linearHomogeneousConstant:   new LhcContent.Linear(new LhcParam.Linear('a_2','a_1','a_0')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tresolved_o2_linearHomogeneousConstant: new LhcContent.Resolved(new LhcParam.Resolved('b_1','b_0')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tsystem_o2_linearHomogeneousConstant:   new LhcContent.ReducedSystem(new LhcParam.ReducedSystem('c','d')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t\tvector_o2_linearHomogeneousConstant:   new LhcContent.ReducedVector(new LhcParam.ReducedSystem('c','d')).getContentFor_equilibriumSolutionMethod(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_harmonicOscillator: {\r\n\t\tparents: {\r\n\t\t\to2_linearHomogeneousConstant: true,\r\n\t\t},\r\n\t\tname: \"harmonic oscillator\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator'>harmonic oscillator</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,scalar_o2_harmonicOscillator,linear_o2_harmonicOscillator',\r\n\t\t\t\tequation: nt=>`m \\\\cdot ${nt.dd(nt.x,'t',2)} + b \\\\cdot ${nt.dxdt} + k \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[ // TODO all-forms notes\r\n\t\t\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t\t\t`\\\\( b \\\\ge 0 \\\\) is the viscous damping coefficient`,\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,scalar_o2_harmonicOscillator,resolved_o2_harmonicOscillator',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = - \\\\frac bm \\\\cdot ${nt.dxdt} - \\\\frac km \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_simpleHarmonicOscillator,system_o2_harmonicOscillator',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= - \\\\frac km \\\\cdot ${nt.x} - \\\\frac bm \\\\cdot ${nt.y} `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_o2_simpleHarmonicOscillator,vector_o2_harmonicOscillator',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\begin{bmatrix}`+\r\n\t\t\t\t\t`0 & 1 \\\\\\\\`+\r\n\t\t\t\t\t`- \\\\frac km & - \\\\frac bm`+\r\n\t\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_harmonicOscillator:   new LhcContent.Linear(new LhcParam.Linear('m','b','k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tresolved_o2_harmonicOscillator: new LhcContent.Resolved(new LhcParam.Linear('m','b','k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tsystem_o2_harmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m','b','k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tvector_o2_harmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m','b','k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_harmonicOscillator:   new LhcContent.Linear(new LhcParam.Linear('m','b','k')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tresolved_o2_harmonicOscillator: new LhcContent.Resolved(new LhcParam.Linear('m','b','k')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tsystem_o2_harmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m','b','k')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t\tvector_o2_harmonicOscillator:   new LhcContent.ReducedVector(new LhcParam.Linear('m','b','k')).getContentFor_generalSolutionMethod(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tformType: 'scalar_o2_simpleHarmonicOscillator',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tscalar_o2_simpleHarmonicOscillator: new LhcContent.Linear(new LhcParam.Linear('m','b','k')).getContentFor_equilibriumSolutionMethod0(),\r\n\t\t\t\t\tsystem_o2_simpleHarmonicOscillator: new LhcContent.ReducedSystem(new LhcParam.Linear('m','b','k')).getContentFor_equilibriumSolutionMethod0(),\r\n\t\t\t\t\tvector_o2_simpleHarmonicOscillator: new LhcContent.ReducedVector(new LhcParam.Linear('m','b','k')).getContentFor_equilibriumSolutionMethod0(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_underdampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\"underdamped\",\r\n\t\t\"&lt;\",\r\n\t\t'getContentFor_generalSolutionMethod_Complex'\r\n\t),\r\n\to2_criticallyDampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\"critically damped\",\r\n\t\t\"=\",\r\n\t\t'getContentFor_generalSolutionMethod_Repeated'\r\n\t),\r\n\to2_overdampedHarmonicOscillator: harmonicOscillatorType(\r\n\t\t\"overdamped\",\r\n\t\t\">\",\r\n\t\t'getContentFor_generalSolutionMethod_Real'\r\n\t),\r\n\to2_simpleHarmonicOscillator: {\r\n\t\tparents: {\r\n\t\t\to2_underdampedHarmonicOscillator: true,\r\n\t\t},\r\n\t\tname: \"simple (undamped) harmonic oscillator\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Harmonic_oscillator#Simple_harmonic_oscillator'>simple (undamped) harmonic oscillator</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,linear_o2_simpleHarmonicOscillator',\r\n\t\t\t\tequation: nt=>`m \\\\cdot ${nt.dd(nt.x,'t',2)} + k \\\\cdot ${nt.x} = 0`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( m > 0 \\\\) is the mass`,\r\n\t\t\t\t\t`\\\\( k > 0 \\\\) is the spring constant`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,scalar_o2_simpleHarmonicOscillator,resolved_o2_simpleHarmonicOscillator',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t',2)} = - \\\\frac km \\\\cdot ${nt.x}`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_o2_simpleHarmonicOscillator',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= - \\\\frac km \\\\cdot ${nt.x} `+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_o2_simpleHarmonicOscillator',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\begin{bmatrix}`+\r\n\t\t\t\t\t`0 & 1 \\\\\\\\`+\r\n\t\t\t\t\t`- \\\\frac km & 0`+\r\n\t\t\t\t`\\\\end{bmatrix} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_simpleHarmonicOscillator:   new LhcContent.Linear(new LhcParam.Linear('m',0,'k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tresolved_o2_simpleHarmonicOscillator: new LhcContent.Resolved(new LhcParam.Linear('m',0,'k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tsystem_o2_simpleHarmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m',0,'k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t\tvector_o2_simpleHarmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m',0,'k')).getContentFor_characteristicEquation(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_o2_simpleHarmonicOscillator:   new LhcContent.Linear(new LhcParam.Linear('m',0,'k')).getContentFor_generalSolutionMethod_Imaginary(),\r\n\t\t\t\t\tresolved_o2_simpleHarmonicOscillator: new LhcContent.Resolved(new LhcParam.Linear('m',0,'k')).getContentFor_generalSolutionMethod_Imaginary(),\r\n\t\t\t\t\tsystem_o2_simpleHarmonicOscillator:   new LhcContent.ReducedSystem(new LhcParam.Linear('m',0,'k')).getContentFor_generalSolutionMethod_Imaginary(),\r\n\t\t\t\t\tvector_o2_simpleHarmonicOscillator:   new LhcContent.ReducedVector(new LhcParam.Linear('m',0,'k')).getContentFor_generalSolutionMethod_Imaginary(),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\to2_vanDerPol: {\r\n\t\tparents: {\r\n\t\t\to2_autonomous: true,\r\n\t\t},\r\n\t\tname: \"Van der Pol\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/wiki/Van_der_Pol_oscillator'>Van der Pol</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: o2OrderReductionForms('o2_vanDerPol',(x,y)=>`\\\\mu(1-${x}^2)${y} - ${x}`),\r\n\t},\r\n\to2_unforcedDuffing: {\r\n\t\tparents: {\r\n\t\t\to2_autonomous: true,\r\n\t\t},\r\n\t\tname: \"unforced Duffing\",\r\n\t\thtmlName: \"unforced <a href='https://en.wikipedia.org/wiki/Duffing_equation'>Duffing</a>\",\r\n\t\timportance: 3,\r\n\t\tforms: o2OrderReductionForms('o2_unforcedDuffing',(x,y)=>`- \\\\delta ${y} - \\\\alpha ${x} - \\\\beta ${x}^3`),\r\n\t},\r\n}\r\n","'use strict'\r\n\r\nconst TexScalarDepvar=require('../tex-scalar-depvar')\r\nconst TexSystemDepvar=require('../tex-system-depvar')\r\nconst TexVectorDepvar=require('../tex-vector-depvar')\r\nconst characteristicEquationContent=require('../characteristic-equation-content')\r\nconst LinearEquation=require('../linear-equation')\r\nconst LinearConstantEquation=require('../linear-constant-equation')\r\n\r\nconst on_linear_linear_equation=isConstant=>input=>nt=>(\r\n\t`\\\\sum_{i=0}^n a_i`+(isConstant?``:`(t)`)+` ${nt.dd(nt.x,'t','i')} = `+(input?`${input}(t)`:`0`)\r\n)\r\nconst on_linear_resolved_equation=isConstant=>input=>nt=>(\r\n\t`${nt.dd(nt.x,'t','n')} = \\\\sum_{i=0}^{n-1} b_i`+(isConstant?``:`(t)`)+` ${nt.dd(nt.x,'t','i')}`+(input?` + ${input}(t)`:``)\r\n)\r\nconst on_linear_system_equation=isConstant=>input=>nt=>(\r\n\t`\\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t`${nt.dd(`${nt.x}_1`)} &=& ${nt.x}_2 \\\\\\\\`+\r\n\t\t`${nt.dd(`${nt.x}_2`)} &=& ${nt.x}_3 \\\\\\\\`+\r\n\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t`${nt.dd(`${nt.x}_{n-1}`)} &=& ${nt.x}_n \\\\\\\\`+\r\n\t\t`${nt.dd(`${nt.x}_n`)} &=& \\\\sum_{i=1}^{n} c_i`+(isConstant?``:`(t)`)+` ${nt.x}_i`+(input?` + ${input}(t)`:``)+\r\n\t`\\\\end{array} \\\\right.`\r\n)\r\nconst on_linear_vector_equation=isConstant=>input=>nt=>(\r\n\t`${nt.dd(nt.X)} {=} `+\r\n\t((input||!isConstant)?`\\\\! \\\\left[ \\\\begin{smallmatrix}`:`\\\\begin{bmatrix}`)+\r\n\t\t(isConstant\r\n\t\t\t?`0 & 1 & 0 & \\\\cdots & 0 \\\\\\\\`+\r\n\t\t\t `0 & 0 & 1 & \\\\cdots & 0 \\\\\\\\`+\r\n\t\t\t `\\\\vdots & \\\\vdots & \\\\vdots & \\\\ddots & \\\\vdots \\\\\\\\`+\r\n\t\t\t `0 & 0 & 0 & \\\\cdots & 1 \\\\\\\\`+\r\n\t\t\t `c_1 & c_2 & c_3 & \\\\cdots & c_n`\r\n\t\t\t:`0 & 1 & \\\\cdots & 0 \\\\\\\\`+\r\n\t\t\t `\\\\vdots & \\\\vdots & \\\\ddots & \\\\vdots \\\\\\\\`+\r\n\t\t\t `0 & 0 & \\\\cdots & 1 \\\\\\\\`+\r\n\t\t\t `c_1\\\\mspace{-2mu}(t) & c_2\\\\mspace{-2mu}(t) & \\\\cdots & c_n\\\\mspace{-2mu}(t)`\r\n\t\t)+\r\n\t((input||!isConstant)?`\\\\end{smallmatrix} \\\\right] \\\\!`:`\\\\end{bmatrix}`)+\r\n\t` ${nt.X}`+\r\n\t(input?` {+} \\\\! \\\\left[ \\\\begin{smallmatrix}`+\r\n\t\t`0 \\\\\\\\`+(isConstant?` 0 \\\\\\\\`:``)+` \\\\vdots \\\\\\\\ 0 \\\\\\\\ ${input}(t)`+\r\n\t`\\\\end{smallmatrix} \\\\right]`:``)\r\n)\r\n\r\nconst on_linear_forms=(classId,isConstant,isHomogeneous)=>[\r\n\t{\r\n\t\tis: `t,x,linear_${classId}`,\r\n\t\tequation: on_linear_linear_equation(isConstant)(isHomogeneous?0:'f'),\r\n\t\tnotes: nt=>[\r\n\t\t\t`\\\\( a_n`+(isConstant?``:`(t)`)+` \\\\ne 0 \\\\)`+(isConstant?``:` on the entire interval of interest`),\r\n\t\t],\r\n\t},\r\n\t{\r\n\t\tis: `t,x,resolved_${classId}`,\r\n\t\tequation: on_linear_resolved_equation(isConstant)(isHomogeneous?0:'g'),\r\n\t},\r\n\t{\r\n\t\tis: `t,xi,system_${classId}`,\r\n\t\tequation: on_linear_system_equation(isConstant)(isHomogeneous?0:'g'),\r\n\t},\r\n\t{\r\n\t\tis: `t,X,vector_${classId}`,\r\n\t\tequation: on_linear_vector_equation(isConstant)(isHomogeneous?0:'g'),\r\n\t},\r\n]\r\n\r\nconst on_linearHomogeneousConstant_generalSolutionMethod_content=(x,charEqn)=>nt=>[\r\n\t`solve the characteristic equation for \\\\( λ \\\\):`,\r\n\t`\\\\[ ${charEqn} \\\\]`,\r\n\t`\\\\( λ \\\\) are:`,\r\n\t`\\\\( r \\\\) distinct real roots \\\\( λ_1, ..., λ_r \\\\) with multiplicities \\\\( p_1, ..., p_r \\\\)`,\r\n\t`\\\\( s \\\\) distinct complex conjugate root pairs \\\\( α_1 \\\\pm i β_1, ..., α_s \\\\pm i β_s \\\\) with multiplicities \\\\( q_1, ..., q_s \\\\)`,\r\n\t{type:'note',content:[\r\n\t\t`sum of multiplicities is equal to order of the equation:`,\r\n\t\t`\\\\[ \\\\sum_{i=1}^r p_i + 2 \\\\cdot \\\\sum_{i=1}^s q_i = n \\\\]`,\r\n\t]},\r\n\tx.firstComponentExpressionPreamble(\r\n\t\tc=>`${c}general solution (with arbitrary constants \\\\( K_{ij} \\\\), \\\\( A_{ij} \\\\), \\\\( B_{ij} \\\\)):`\r\n\t),\r\n\tx.firstComponentExpression(\r\n\t\tx1=>`\\\\begin{aligned}`+\r\n\t\t\t`${x1}`+\r\n\t\t\t` = \\\\: & \\\\sum_{i=1}^r \\\\sum_{j=1}^{p_i} K_{ij} \\\\, t^{j-1} \\\\, e^{λ_i t} + \\\\\\\\`+\r\n\t\t\t` + \\\\: & \\\\sum_{i=1}^s \\\\sum_{j=1}^{q_i} A_{ij} \\\\, t^{j-1} \\\\, e^{α_i t} \\\\, \\\\cos β_i t \\\\\\\\`+\r\n\t\t\t` + \\\\: & \\\\sum_{i=1}^s \\\\sum_{j=1}^{q_i} B_{ij} \\\\, t^{j-1} \\\\, e^{α_i t} \\\\, \\\\sin β_i t`+\r\n\t\t`\\\\end{aligned}`\r\n\t),\r\n\t...x.restDiffComponentExpressionContent()(nt),\r\n]\r\n\r\nconst on_linear_associatedHomogeneousEquation_trait=(classId,isConstant,isClosed)=>{\r\n\tconst note=isClosed?[\r\n\t\t{type:'note',content:[\r\n\t\t\t`the equation is associated with itself`,\r\n\t\t]},\r\n\t]:[]\r\n\tconst trait={\r\n\t\tcontents: {\r\n\t\t\t[`linear_${classId}`]: nt=>[\r\n\t\t\t\t`\\\\[ `+on_linear_linear_equation(isConstant)(0)(nt)+` \\\\]`,\r\n\t\t\t\t...note,\r\n\t\t\t],\r\n\t\t\t[`resolved_${classId}`]: nt=>[\r\n\t\t\t\t`\\\\[ `+on_linear_resolved_equation(isConstant)(0)(nt)+` \\\\]`,\r\n\t\t\t\t...note,\r\n\t\t\t],\r\n\t\t\t[`system_${classId}`]: nt=>[\r\n\t\t\t\t`\\\\[ `+on_linear_system_equation(isConstant)(0)(nt)+` \\\\]`,\r\n\t\t\t\t...note,\r\n\t\t\t],\r\n\t\t\t[`vector_${classId}`]: nt=>[\r\n\t\t\t\t`\\\\[ `+on_linear_vector_equation(isConstant)(0)(nt)+` \\\\]`,\r\n\t\t\t\t...note,\r\n\t\t\t],\r\n\t\t},\r\n\t}\r\n\tif (isClosed) {\r\n\t\ttrait.close=true\r\n\t}\r\n\treturn trait\r\n}\r\n\r\nconst on_linearHomogeneous_equilibriumSolutionMethod_trait=(classId,isConstant)=>{\r\n\tconst t=isConstant?'':'(t)'\r\n\treturn {\r\n\t\tcontents: {\r\n\t\t\t[`linear_${classId}`]: nt=>[\r\n\t\t\t\t{type:'switch',title:`\\\\( a_0${t} \\\\) is`,content:[\r\n\t\t\t\t\t{type:'case',title:`\\\\( a_0${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`\\\\( a_0${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t],\r\n\t\t\t[`resolved_${classId}`]: nt=>[\r\n\t\t\t\t{type:'switch',title:`\\\\( b_0${t} \\\\) is`,content:[\r\n\t\t\t\t\t{type:'case',title:`\\\\( b_0${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`\\\\( b_0${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t],\r\n\t\t\t[`system_${classId}`]: nt=>[\r\n\t\t\t\t{type:'switch',title:`\\\\( c_1${t} \\\\) is`,content:[\r\n\t\t\t\t\t{type:'case',title:`\\\\( c_1${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t\t\t`${nt.x}_1 &=& K \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${nt.x}_2 &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${nt.x}_n &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t`\\\\end{array} \\\\right. \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`\\\\( c_1${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t\t\t`${nt.x}_1 &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${nt.x}_n &=& 0 \\\\\\\\`+\r\n\t\t\t\t\t\t`\\\\end{array} \\\\right. \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t],\r\n\t\t\t[`vector_${classId}`]: nt=>[\r\n\t\t\t\t{type:'switch',title:`\\\\( c_1${t} \\\\) is`,content:[\r\n\t\t\t\t\t{type:'case',title:`\\\\( c_1${t} = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\begin{bmatrix} K \\\\\\\\ 0 \\\\\\\\ \\\\vdots \\\\\\\\ 0 \\\\end{bmatrix} \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`\\\\( c_1${t} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\begin{bmatrix} 0 \\\\\\\\ \\\\vdots \\\\\\\\ 0 \\\\end{bmatrix} \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t],\r\n\t\t},\r\n\t}\r\n}\r\n\r\nmodule.exports={\r\n\ton: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"nth-order\",\r\n\t\thtmlName: \"<em>n</em>th-order\",\r\n\t\timportance: 2,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,x,resolved_on',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.x,'t','n')} = f(t,${nt.x},${nt.dxdt},\\\\dotsc,${nt.dd(nt.x,'t','n-1')})`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,xi,system_on',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{array}{rcl}`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_1`)} &=& ${nt.x}_2 \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_2`)} &=& ${nt.x}_3 \\\\\\\\`+\r\n\t\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_{n-1}`)} &=& ${nt.x}_n \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_n`)} &=& f_n(t,${nt.x}_1,\\\\dotsc,${nt.x}_n)`+\r\n\t\t\t\t`\\\\end{array} \\\\right.`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tformType: 'x',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`Can test if \\\\( ${nt.x}_p \\\\) is a solution by substituting \\\\( ${nt.x} = ${nt.x}_p \\\\) into the equation.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\ton_linear: {\r\n\t\tparents: {\r\n\t\t\ton: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation'>linear</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: on_linear_forms('on_linear',false,false),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: on_linear_associatedHomogeneousEquation_trait('on_linear',false,false),\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linear:   nt=>new LinearEquation(new TexScalarDepvar(nt.x)     ,'f',on_linear_linear_equation(false)  ).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t\tresolved_on_linear: nt=>new LinearEquation(new TexScalarDepvar(nt.x)     ,'g',on_linear_resolved_equation(false)).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t\tsystem_on_linear:   nt=>new LinearEquation(new TexSystemDepvar(nt.x)     ,'g',on_linear_system_equation(false)  ).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t\tvector_on_linear:   nt=>new LinearEquation(new TexVectorDepvar(nt.X,nt.x),'g',on_linear_vector_equation(false)  ).getContentFor_generalSolutionMethod()(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ton_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ton_linear: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear homogeneous\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Homogeneous_differential_equation#Homogeneous_linear_differential_equations'>linear homogeneous</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: on_linear_forms('on_linearHomogeneous',false,true),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: on_linear_associatedHomogeneousEquation_trait('on_linearHomogeneous',false,true),\r\n\t\t\trealitySolutionRelation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linearHomogeneous: nt=>[\r\n\t\t\t\t\t\t`If \\\\( ${nt.x}_1 + i ${nt.x}_2 \\\\) is a (complex-valued) solution,`,\r\n\t\t\t\t\t\t`then \\\\( ${nt.x}_1 \\\\) and \\\\( ${nt.x}_2 \\\\) are solutions.`,\r\n\t\t\t\t\t\t{type:'proof',content:[\r\n\t\t\t\t\t\t\t`substitute \\\\( ${nt.x} = ${nt.x}_1 + i ${nt.x}_2 \\\\) into the equation`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\sum_{j=0}^n a_j(t) ${nt.dd('','t','j')}(${nt.x}_1 + i ${nt.x}_2) = 0 \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t       `&\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_1`,'t','j')} + {} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`{} + i &\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_2`,'t','j')} = 0 `+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t`\\\\operatorname{Re}\\\\Biggl( &\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_1`,'t','j')} + {} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t                    `{} + i &\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_2`,'t','j')} \\\\Biggr) = 0 \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`\\\\operatorname{Im}\\\\Biggl( &\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_1`,'t','j')} + {} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t                    `{} + i &\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_2`,'t','j')} \\\\Biggr) = 0 `+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t`\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_1`,'t','j')} = 0 \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`\\\\sum_{j=0}^n a_j(t) ${nt.dd(`${nt.x}_2`,'t','j')} = 0 `+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tclose: true,\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: on_linearHomogeneous_equilibriumSolutionMethod_trait('on_linearHomogeneous',false),\r\n\t\t},\r\n\t},\r\n\ton_linearConstant: {\r\n\t\tparents: {\r\n\t\t\ton_linear: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear with constant coefficients\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Nonhomogeneous_equation_with_constant_coefficients'>linear with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: on_linear_forms('on_linearConstant',true,false),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: on_linear_associatedHomogeneousEquation_trait('on_linearConstant',true,false),\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linearConstant: nt=>new LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexScalarDepvar(nt.x),'f',on_linear_linear_equation(true),\r\n\t\t\t\t\t\t`\\\\sum_{i=0}^n a_i λ^i`\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\ton_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\t\tnew TexScalarDepvar(nt.x)._('h'),\r\n\t\t\t\t\t\t\t`\\\\sum_{i=0}^n a_i λ^i = 0`\r\n\t\t\t\t\t\t)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tresolved_on_linearConstant: nt=>new LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexScalarDepvar(nt.x),'g',on_linear_resolved_equation(true),\r\n\t\t\t\t\t\t`λ^n - \\\\sum_{i=0}^{n-1} b_i λ^i`\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\ton_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\t\tnew TexScalarDepvar(nt.x)._('h'),\r\n\t\t\t\t\t\t\t`λ^n - \\\\sum_{i=0}^{n-1} b_i λ^i = 0`\r\n\t\t\t\t\t\t)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tsystem_on_linearConstant: nt=>new LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexSystemDepvar(nt.x),'g',on_linear_system_equation(true),\r\n\t\t\t\t\t\t`λ^n - \\\\sum_{i=0}^{n-1} c_{i+1} λ^i`\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\ton_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\t\tnew TexSystemDepvar(nt.x)._('h'),\r\n\t\t\t\t\t\t\t`λ^n - \\\\sum_{i=0}^{n-1} c_{i+1} λ^i = 0`\r\n\t\t\t\t\t\t)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tvector_on_linearConstant: nt=>new LinearConstantEquation(\r\n\t\t\t\t\t\tnew TexVectorDepvar(nt.X,nt.x),'g',on_linear_vector_equation(true),\r\n\t\t\t\t\t\t`λ^n - \\\\sum_{i=0}^{n-1} c_{i+1} λ^i`\r\n\t\t\t\t\t).getContentFor_generalSolutionMethod(\r\n\t\t\t\t\t\ton_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\t\tnew TexVectorDepvar(nt.X,nt.x)._('h'),\r\n\t\t\t\t\t\t\t`λ^n - \\\\sum_{i=0}^{n-1} c_{i+1} λ^i = 0`\r\n\t\t\t\t\t\t)(nt)\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ton_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ton_linearHomogeneous: true,\r\n\t\t\ton_linearConstant: true,\r\n\t\t},\r\n\t\tname: \"nth-order linear homogeneous with constant coefficients\",\r\n\t\thtmlName: \"<em>n</em>th-order <a href='https://en.wikipedia.org/wiki/Linear_differential_equation#Homogeneous_equations_with_constant_coefficients'>linear homogeneous with constant coefficients</a>\",\r\n\t\timportance: 2,\r\n\t\tforms: on_linear_forms('on_linearHomogeneousConstant',true,true),\r\n\t\ttraits: {\r\n\t\t\tassociatedHomogeneousEquation: on_linear_associatedHomogeneousEquation_trait('on_linearHomogeneousConstant',true,true),\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linearHomogeneousConstant: characteristicEquationContent(['i','\\\\sum_{i=0}^n a_i'],'=','0'),\r\n\t\t\t\t\tresolved_on_linearHomogeneousConstant: characteristicEquationContent(['n',1],'=',['i','\\\\sum_{i=0}^{n-1} b_i']),\r\n\t\t\t\t\tsystem_on_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t`\\\\[ λ^n - \\\\sum_{i=0}^{n-1} c_{i+1} λ^i = 0 \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tvector_on_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t`\\\\[ λ^n - \\\\sum_{i=0}^{n-1} c_{i+1} λ^i = 0 \\\\]`,\r\n\t\t\t\t\t],\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tlinear_on_linearHomogeneousConstant: nt=>on_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\tnew TexScalarDepvar(nt.x),\r\n\t\t\t\t\t\t`\\\\sum_{i=0}^n a_i λ^i = 0`\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tresolved_on_linearHomogeneousConstant: nt=>on_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\tnew TexScalarDepvar(nt.x),\r\n\t\t\t\t\t\t`λ^n - \\\\sum_{i=0}^{n-1} b_i λ^i = 0`\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tsystem_on_linearHomogeneousConstant: nt=>on_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\tnew TexSystemDepvar(nt.x),\r\n\t\t\t\t\t\t`λ^n - \\\\sum_{i=0}^{n-1} c_{i+1} λ^i = 0`\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t\tvector_on_linearHomogeneousConstant: nt=>on_linearHomogeneousConstant_generalSolutionMethod_content(\r\n\t\t\t\t\t\tnew TexVectorDepvar(nt.X,nt.x),\r\n\t\t\t\t\t\t`λ^n - \\\\sum_{i=0}^{n-1} c_{i+1} λ^i = 0`\r\n\t\t\t\t\t)(nt),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: on_linearHomogeneous_equilibriumSolutionMethod_trait('on_linearHomogeneousConstant',true),\r\n\t\t},\r\n\t},\r\n}\r\n","'use strict'\r\n\r\nconst LhcPlot=require('../lhc-plot')\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nconst s2_partlyDecoupled=(i)=>{\r\n\tconst ith=[,\"1st\",\"2nd\"][i]\r\n\tconst choose=[,(x,y)=>[x,y],(x,y)=>[y,x]][i]\r\n\tconst f=(x,y)=>\"f(t,\"+[,x,x+','+y][i]+\")\"\r\n\tconst g=(x,y)=>\"g(t,\"+[,x+','+y,y][i]+\")\"\r\n\tconst generalSolutionMethodContents=(nt,x,y)=>{\r\n\t\tconst [dv,cv]=choose(x,y) // decoupled/coupled variable/function\r\n\t\tconst [df,cf]=choose('f','g')\r\n\t\tconst [ex1,ex2]=choose(dv,`2 ${dv} - ${cv}`)\r\n\t\tconst [dth,cth]=choose(\"first\",\"second\")\r\n\t\treturn [\r\n\t\t\t`Solve \\\\(${nt.dd(dv)} = ${df}(t,${dv}) \\\\).`,\r\n\t\t\t`Substitute \\\\( ${dv} \\\\) into \\\\( ${nt.dd(cv)} = ${cf}(t,${x},${y}) \\\\).`,\r\n\t\t\t{type:'example',content:[\r\n\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(x)} &= ${ex1} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(y)} &= ${ex2}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t`solve the ${dth} equation`,\r\n\t\t\t\t`\\\\[ ${dv} = ${nt.sub(dv,'0')} e^t \\\\]`,\r\n\t\t\t\t`substitute \\\\( ${dv} \\\\) into the ${cth} equation`,\r\n\t\t\t\t`\\\\[ ${nt.dd(cv)} = 2 ${nt.sub(dv,'0')} e^t - ${cv} \\\\]`,\r\n\t\t\t\t{type:'derivation',title:`solve the ${cth} equation`,content:[\r\n\t\t\t\t\t`solve the associated homogeneous equation \\\\( ${nt.dd(cv)} = - ${cv} \\\\)`,\r\n\t\t\t\t\t`\\\\[ ${nt.sub(cv,'h')} = K e^{-t} \\\\]`,\r\n\t\t\t\t\t{type:'derivation',title:`find a particular solution of \\\\( ${nt.dd(nt.sub(cv,'p'))} + ${nt.sub(cv,'p')} = 2 ${nt.sub(dv,'0')} e^t \\\\)`,content:[\r\n\t\t\t\t\t\t`guess a solution`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.sub(cv,'p')} = \\\\alpha e^t \\\\]`,\r\n\t\t\t\t\t\t`substitute the guess into the equation`,\r\n\t\t\t\t\t\t`\\\\[ \\\\alpha e^t + \\\\alpha e^t = 2 ${nt.sub(dv,'0')} e^t \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ \\\\alpha = ${nt.sub(dv,'0')} \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`\\\\[ ${nt.sub(cv,'p')} = ${nt.sub(dv,'0')} e^t \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${cv} = ${nt.sub(cv,'p')} + ${nt.sub(cv,'h')} \\\\]`,\r\n\t\t\t\t\t`\\\\[ ${cv} = ${nt.sub(dv,'0')} e^t + K e^{-t} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t`\\\\[ ${cv} = ${nt.sub(dv,'0')} e^t + (${nt.sub(cv,'0')} - ${nt.sub(dv,'0')}) e^{-t} \\\\]`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\treturn {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: `system of 2 first-order with ${ith} variable decoupled`, // partially decoupled\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: `t,xy,system_s2_partlyDecoupled${i}`,\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= ${f(nt.x,nt.y)} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= ${g(nt.x,nt.y)}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,X,vector_s2_partlyDecoupled${i}`,\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = ${nt.ddt}`+nt.vec2(`${nt.x}_1`,`${nt.x}_2`)+` = `+nt.vec2(f(`${nt.x}_1`,`${nt.x}_2`),g(`${nt.x}_1`,`${nt.x}_2`)),\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\t[`system_s2_partlyDecoupled${i}`]: nt=>generalSolutionMethodContents(nt,nt.x,nt.y),\r\n\t\t\t\t\t[`vector_s2_partlyDecoupled${i}`]: nt=>generalSolutionMethodContents(nt,`${nt.x}_1`,`${nt.x}_2`),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n}\r\n\r\nconst s2_linearHomogeneousConstant_characteristicEquation=scalar=>(scalar\r\n\t? `\\\\[ \\\\lambda^2 - (a+d)\\\\lambda + ad - bc = 0 \\\\]`\r\n\t: `\\\\[ \\\\det(\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) = 0 \\\\]`\r\n)\r\nconst s2_linearHomogeneousConstant_generalSolutionMethod_content=scalar=>nt=>{\r\n\tconst none=s=>(s==1 ? '' : s)\r\n\tconst generalSolutionLeadX0=`general solution (with arbitrary `+(scalar?`constants \\\\( ${nt.x}_0 \\\\), \\\\( ${nt.y}_0 \\\\)`:`constant \\\\( ${nt.X}_0 \\\\)`)+`):`\r\n\tconst specificSolutionLeadX0=(scalar?`constants`:`constant`)+` value for ${ivp} solution: `+(scalar?`\\\\( ${nt.x}_0 = ${nt.x}(0) \\\\), \\\\( ${nt.y}_0 = ${nt.y}(0) \\\\)`:`\\\\( ${nt.X}_0 = ${nt.X}(0) \\\\)`)\r\n\tconst generalAndSpecificSolutionLeadX0=`general and ${ivp} solution (with arbitrary `+(scalar?`constants \\\\( ${nt.x}(0) \\\\), \\\\( ${nt.y}(0) \\\\)`:`constant \\\\( ${nt.X}(0) \\\\)`)+`):`\r\n\tconst findRealEigenvector=i=>[\r\n\t\t`find eigenvector \\\\( ${nt.svec2(`${nt.x}_${i}`,`${nt.y}_${i}`)} \\\\) by solving:`,\r\n\t\t(scalar\r\n\t\t\t? `\\\\[ ${nt.mat2(`a-\\\\lambda_${i}`,`b`,`c`,`d-\\\\lambda_${i}`)} ${nt.vec2(`${nt.x}_${i}`,`${nt.y}_${i}`)} = \\\\mathbf{0} \\\\]`\r\n\t\t\t: `\\\\[ (\\\\mathbf{A} - \\\\lambda_${i} \\\\mathbf{I}) ${nt.vec2(`${nt.x}_${i}`,`${nt.y}_${i}`)} = \\\\mathbf{0} \\\\]`\r\n\t\t),\r\n\t]\r\n\tconst findComplexEigenvector=()=>[\r\n\t\t`find complex-valued eigenvector \\\\( ${nt.svec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} \\\\) by solving:`,\r\n\t\t(scalar\r\n\t\t\t? `\\\\[ ${nt.mat2(`a-\\\\lambda_1`,`b`,`c`,`d-\\\\lambda_1`)} ${nt.vec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} = 0 \\\\]`\r\n\t\t\t: `\\\\[ (\\\\mathbf{A} - \\\\lambda_1 \\\\mathbf{I}) ${nt.vec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} = 0 \\\\]`\r\n\t\t),\r\n\t]\r\n\tconst generalRealSolution=(eigx1,eigx2,eigy1,eigy2)=>[\r\n\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t(scalar\r\n\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.x} &= k_1 ${none(eigx1)} e^{\\\\lambda_1 t} + k_2 ${none(eigx2)} e^{\\\\lambda_2 t} \\\\\\\\`+\r\n\t\t\t\t`${nt.y} &= k_1 ${none(eigy1)} e^{\\\\lambda_1 t} + k_2 ${none(eigy2)} e^{\\\\lambda_2 t}`+\r\n\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t: `\\\\[ \\\\begin{aligned}`+\r\n\t\t\t\t`${nt.X} &= k_1 e^{\\\\lambda_1 t} ${nt.vec2(eigx1,eigy1)} + k_2 e^{\\\\lambda_2 t} ${nt.vec2(eigx2,eigy2)} \\\\\\\\`+\r\n\t\t\t\t       ` &= ${nt.mat2(eigx1,eigx2,eigy1,eigy2)} ${nt.vec2(`k_1 e^{\\\\lambda_1 t}`,`k_2 e^{\\\\lambda_2 t}`)}`+\r\n\t\t\t`\\\\end{aligned} \\\\]`\r\n\t\t),\r\n\t]\r\n\tconst specificSolution=(eigx1,eigx2,eigy1,eigy2)=>[\r\n\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t`\\\\[ ${nt.mat2(eigx1,eigx2,eigy1,eigy2)} ${nt.vec2('k_1','k_2')} = `+(scalar?`${nt.vec2(`${nt.x}(0)`,`${nt.y}(0)`)}`:`${nt.X}(0)`)+` \\\\]`,\r\n\t]\r\n\treturn [\r\n\t\t{type:'switch',title:(scalar?`coefficients satisfy conditions`:`matrix \\\\( \\\\mathbf{A} \\\\) has a form`),content:[\r\n\t\t\t{type:'case',title:(scalar?`\\\\( b = c = 0 \\\\)`:`\\\\( \\\\mathbf{A} = ${nt.mat2('*',0,0,'*')} \\\\)`),content:[\r\n\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t`this is a completely decoupled system`,\r\n\t\t\t\t]},\r\n\t\t\t\t`the `+(scalar?`equations have`:`equation has`)+` the form:`,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t`${nt.dd(nt.x)} &= \\\\lambda_1 ${nt.x} \\\\\\\\`+\r\n\t\t\t\t\t\t`${nt.dd(nt.y)} &= \\\\lambda_2 ${nt.y}`+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t: `\\\\[ ${nt.dd(nt.X)} = ${nt.mat2('\\\\lambda_1',0,0,'\\\\lambda_2')} ${nt.X} \\\\]`\r\n\t\t\t\t),\r\n\t\t\t\tgeneralAndSpecificSolutionLeadX0,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t`${nt.x} &= ${nt.x}(0) e^{\\\\lambda_1 t} \\\\\\\\`+\r\n\t\t\t\t\t\t`${nt.y} &= ${nt.y}(0) e^{\\\\lambda_2 t}`+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t: `\\\\[ ${nt.X} = ${nt.mat2('e^{\\\\lambda_1 t}',0,0,'e^{\\\\lambda_2 t}')} ${nt.X}(0) \\\\]`\r\n\t\t\t\t),\r\n\t\t\t]},\r\n\t\t\t{type:'case',title:(scalar?`\\\\( a = 0 \\\\) and \\\\( b = 1 \\\\)`:`\\\\( \\\\mathbf{A} = ${nt.mat2(0,1,'*','*')} \\\\)`)+` (optional)`,content:[\r\n\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t`this is an optional case, you can ignore it and use <em>`+(scalar?`\\\\( b \\\\ne 0 \\\\) or \\\\( c \\\\ne 0 \\\\)`:`\\\\( \\\\mathbf{A} \\\\ne ${nt.smat2('*',0,0,'*')} \\\\)`)+`</em> case below`,\r\n\t\t\t\t\t`this is a case of second-order linear homogeneous equation with constant coefficients`,\r\n\t\t\t\t]},\r\n\t\t\t\t`the `+(scalar?`equations have`:`equation has`)+` the form:`,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t`${nt.dd(nt.x)} &= ${nt.y} \\\\\\\\`+\r\n\t\t\t\t\t\t`${nt.dd(nt.y)} &= c ${nt.x} + d ${nt.y}`+\r\n\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t: `\\\\[ ${nt.dd(nt.X)} = ${nt.mat2(0,1,'c','d')} ${nt.X} \\\\]`\r\n\t\t\t\t),\r\n\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t`eigenvector for \\\\( \\\\lambda_1 \\\\) is:`,\r\n\t\t\t\t\t`\\\\[ ${nt.vec2(`${nt.x}_1`,`${nt.y}_1`)} = ${nt.vec2(1,'\\\\lambda_1')} \\\\]`,\r\n\t\t\t\t\t`eigenvector for \\\\( \\\\lambda_2 \\\\) is:`,\r\n\t\t\t\t\t`\\\\[ ${nt.vec2(`${nt.x}_2`,`${nt.y}_2`)} = ${nt.vec2(1,'\\\\lambda_2')} \\\\]`,\r\n\t\t\t\t\t`use these eigenvectors in <em>`+(scalar?`\\\\( b \\\\ne 0 \\\\) or \\\\( c \\\\ne 0 \\\\)`:`\\\\( \\\\mathbf{A} \\\\ne ${nt.smat2('*',0,0,'*')} \\\\)`)+`</em> case below`,\r\n\t\t\t\t]},\r\n\t\t\t\t`get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\t(scalar\r\n\t\t\t\t\t? `\\\\[ \\\\lambda^2 - d \\\\lambda - c = 0 \\\\]`\r\n\t\t\t\t\t: s2_linearHomogeneousConstant_characteristicEquation(scalar)\r\n\t\t\t\t),\r\n\t\t\t\t{type:'switch',title:`eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are`,content:[\r\n\t\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t\tgeneralSolutionLeadX0,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= ${nt.x}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.y}_0 \\\\,{-}\\\\, ${nt.x}_0 \\\\lambda) t e^{\\\\lambda t} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= ${nt.y}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.y}_0 \\\\,{-}\\\\, ${nt.x}_0 \\\\lambda) \\\\lambda t e^{\\\\lambda t}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ ${nt.X} = e^{\\\\lambda t} ${nt.X}_0 + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ${nt.X}_0 \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tspecificSolutionLeadX0,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t\t...generalRealSolution(1,1,`\\\\lambda_1`,`\\\\lambda_2`),\r\n\t\t\t\t\t\t...specificSolution(1,1,`\\\\lambda_1`,`\\\\lambda_2`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} = \\\\: & k_1 e^{\\\\alpha t} \\\\cos \\\\beta t \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} \\\\sin \\\\beta t \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} = \\\\: & k_1 e^{\\\\alpha t} (\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} (\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t)`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2('\\\\cos \\\\beta t','\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t')} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2('\\\\sin \\\\beta t','\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t')} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`= \\\\: & e^{\\\\alpha t} ${nt.smat2(1,0,'\\\\alpha','\\\\beta')} ${nt.smat2('\\\\cos \\\\beta t','\\\\sin \\\\beta t','- \\\\sin \\\\beta t','\\\\cos \\\\beta t')} ${nt.svec2('k_1','k_2')}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t...specificSolution(1,0,`\\\\alpha`,`\\\\beta`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t\t{type:'case',title:(scalar?`\\\\( b \\\\ne 0 \\\\) or \\\\( c \\\\ne 0 \\\\)`:`\\\\( \\\\mathbf{A} \\\\ne ${nt.mat2('*',0,0,'*')} \\\\)`),content:[\r\n\t\t\t\t`get eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) by solving the characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t\ts2_linearHomogeneousConstant_characteristicEquation(scalar),\r\n\t\t\t\t{type:'switch',title:`eigenvalues \\\\( \\\\lambda_1 \\\\), \\\\( \\\\lambda_2 \\\\) are`,content:[\r\n\t\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,content:[\r\n\t\t\t\t\t\tgeneralSolutionLeadX0,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= ${nt.x}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.x}_0 (a \\\\,{-}\\\\, \\\\lambda) \\\\,{+}\\\\, ${nt.y}_0 b) t e^{\\\\lambda t} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= ${nt.y}_0 e^{\\\\lambda t} \\\\,{+}\\\\, (${nt.x}_0 c \\\\,{+}\\\\, ${nt.y}_0 (d \\\\,{-}\\\\, \\\\lambda)) t e^{\\\\lambda t}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ ${nt.X} = e^{\\\\lambda t} ${nt.X}_0 + t e^{\\\\lambda t} (\\\\mathbf{A} - \\\\lambda \\\\mathbf{I}) ${nt.X}_0 \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tspecificSolutionLeadX0,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,content:[\r\n\t\t\t\t\t\t...findRealEigenvector(1),\r\n\t\t\t\t\t\t...findRealEigenvector(2),\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`both of those systems are linearly dependent, it's enough to find each eigenvector up to a constant factor`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t...generalRealSolution(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`),\r\n\t\t\t\t\t\t...specificSolution(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,content:[\r\n\t\t\t\t\t\t`select one of eigenvalues \\\\( \\\\lambda_1 = \\\\alpha + i \\\\beta \\\\)`,\r\n\t\t\t\t\t\t...findComplexEigenvector(),\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`this system is linearly dependent, it's enough to find the eigenvector up to a constant factor`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t\t`one of complex-valued solutions:`,\r\n\t\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x}_c &{=} e^{\\\\alpha t} (\\\\cos \\\\beta t {+} i \\\\sin \\\\beta t) (${nt.x}_1 {+} i ${nt.x}_2) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`${nt.y}_c &{=} e^{\\\\alpha t} (\\\\cos \\\\beta t {+} i \\\\sin \\\\beta t) (${nt.y}_1 {+} i ${nt.y}_2)`+\r\n\t\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t\t: `\\\\[ ${nt.X}_c = e^{\\\\alpha t} (\\\\cos \\\\beta t + i \\\\sin \\\\beta t) ${nt.svec2(`${nt.x}_1 + i ${nt.x}_2`,`${nt.y}_1 + i ${nt.y}_2`)} \\\\]`\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t`find general solution by taking real and imaginary parts of a complex-valued solution:`,\r\n\t\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t\t`${nt.x} = k_1 \\\\operatorname{Re}(${nt.x}_c) + k_2 \\\\operatorname{Im}(${nt.x}_c) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`${nt.y} = k_1 \\\\operatorname{Re}(${nt.y}_c) + k_2 \\\\operatorname{Im}(${nt.y}_c)`+\r\n\t\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t\t: `\\\\[ ${nt.X} = k_1 \\\\operatorname{Re}(${nt.X}_c) + k_2 \\\\operatorname{Im}(${nt.X}_c) \\\\]`\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t\t\t\t(scalar\r\n\t\t\t\t\t\t\t? `\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} = \\\\: & k_1 e^{\\\\alpha t} (${nt.x}_1 \\\\cos \\\\beta t - ${nt.x}_2 \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} (${nt.x}_1 \\\\sin \\\\beta t + ${nt.x}_2 \\\\cos \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} = \\\\: & k_1 e^{\\\\alpha t} (${nt.y}_1 \\\\cos \\\\beta t - ${nt.y}_2 \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} (${nt.y}_1 \\\\sin \\\\beta t + ${nt.y}_2 \\\\cos \\\\beta t)`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t\t\t\t\t\t\t: `\\\\[ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2(`${nt.x}_1 \\\\cos \\\\beta t - ${nt.x}_2 \\\\sin \\\\beta t`,`${nt.y}_1 \\\\cos \\\\beta t - ${nt.y}_2 \\\\sin \\\\beta t`)} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2(`${nt.x}_1 \\\\sin \\\\beta t + ${nt.x}_2 \\\\cos \\\\beta t`,`${nt.y}_1 \\\\sin \\\\beta t + ${nt.y}_2 \\\\cos \\\\beta t`)} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t\t`= \\\\: & e^{\\\\alpha t} ${nt.smat2(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`)} ${nt.smat2(`\\\\cos \\\\beta t`,`\\\\sin \\\\beta t`,`- \\\\sin \\\\beta t`,`\\\\cos \\\\beta t`)} ${nt.svec2(`k_1`,`k_2`)}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\]`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t...specificSolution(`${nt.x}_1`,`${nt.x}_2`,`${nt.y}_1`,`${nt.y}_2`),\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]},\r\n\t]\r\n}\r\n\r\nmodule.exports={\r\n\tsn: {\r\n\t\tparents: {},\r\n\t\tname: \"system of n first-order\",\r\n\t\thtmlName: \"system of <em>n</em> first-order\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xi,system_sn',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{array}{c}`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_1`)} = f_1(t,${nt.x}_1,\\\\dotsc,${nt.x}_n) \\\\\\\\`+\r\n\t\t\t\t\t`\\\\vdots \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(`${nt.x}_n`)} = f_n(t,${nt.x}_1,\\\\dotsc,${nt.x}_n)`+\r\n\t\t\t\t`\\\\end{array} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_sn',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{F}(t,${nt.X})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tformType: 'xi',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\txi: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.x}_{1,p}, ..., ${nt.x}_{n,p} \\\\) is a solution by substituting \\\\( ${nt.x}_1 = ${nt.x}_{1,p}, ..., ${nt.x}_n = ${nt.x}_{n,p} \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tX: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.X}_p \\\\) is a solution by substituting \\\\( ${nt.X} = ${nt.X}_p \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= f(t,${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= g(t,${nt.x},${nt.y})`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{F}(t,${nt.X})`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\ttestSolutionMethod: {\r\n\t\t\t\tformType: 'xy',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\txy: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.x}_p, ${nt.y}_p \\\\) is a solution by substituting \\\\( ${nt.x} = ${nt.x}_p, ${nt.y} = ${nt.y}_p \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t\tX: nt=>[\r\n\t\t\t\t\t\t`Can test if \\\\( ${nt.X}_p \\\\) is a solution by substituting \\\\( ${nt.X} = ${nt.X}_p \\\\) into the equation.`,\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_partlyDecoupled1: s2_partlyDecoupled(1),\r\n\ts2_partlyDecoupled2: s2_partlyDecoupled(2),\r\n\ts2_completelyDecoupled: {\r\n\t\tparents: {\r\n\t\t\ts2_partlyDecoupled1: true,\r\n\t\t\ts2_partlyDecoupled2: true,\r\n\t\t},\r\n\t\tname: \"completely decoupled system of 2 first-order\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2_completelyDecoupled',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= f(t,${nt.x}) \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= g(t,${nt.y})`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2_completelyDecoupled',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = ${nt.ddt}`+nt.vec2(`${nt.x}_1`,`${nt.x}_2`)+` = `+nt.vec2(`f(t,${nt.x}_1)`,`g(t,${nt.x}_2)`),\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\tformType: 'xy',\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`Solve each equation separately.`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_autonomous: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order autonomous\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: `t,xy,system_s2_autonomous`,\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= f(${nt.x},${nt.y}) \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= g(${nt.x},${nt.y})`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: `t,X,vector_s2_autonomous`,\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{F}(${nt.X})`,\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\ts2_linearHomogeneous: {\r\n\t\tparents: {\r\n\t\t\ts2: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order linear homogeneous\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= a(t) \\\\cdot ${nt.x} + b(t) \\\\cdot ${nt.y} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= c(t) \\\\cdot ${nt.x} + d(t) \\\\cdot ${nt.y}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2_linearHomogeneous',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{A}(t) \\\\, ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tformType: 'xy',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\txy: nt=>[\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t`${nt.x} &= 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${nt.y} &= 0`+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`other equilibrium solutions may be possible, depending on the functions \\\\( a(t) \\\\), \\\\( b(t) \\\\), \\\\( c(t) \\\\) and \\\\( d(t) \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tX: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.vec2(0,0)} \\\\]`,\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`other equilibrium solutions may be possible, depending on the function \\\\( \\\\mathbf{A}(t) \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\ts2_linearHomogeneousConstant: {\r\n\t\tparents: {\r\n\t\t\ts2_autonomous: true,\r\n\t\t\ts2_linearHomogeneous: true,\r\n\t\t},\r\n\t\tname: \"system of 2 first-order linear homogeneous with constant coefficients\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,xy,system_s2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd(nt.x)} &= a \\\\cdot ${nt.x} + b \\\\cdot ${nt.y} \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd(nt.y)} &= c \\\\cdot ${nt.x} + d \\\\cdot ${nt.y}`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tis: 't,X,vector_s2_linearHomogeneousConstant',\r\n\t\t\t\tequation: nt=>`${nt.dd(nt.X)} = \\\\mathbf{A} ${nt.X}`,\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tcharacteristicEquation: {\r\n\t\t\t\tformType: 'vector_s2_linearHomogeneousConstant',\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tsystem_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\ts2_linearHomogeneousConstant_characteristicEquation(true),\r\n\t\t\t\t\t],\r\n\t\t\t\t\tvector_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\ts2_linearHomogeneousConstant_characteristicEquation(false),\r\n\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t`\\\\( \\\\lambda \\\\) is an eigenvalue of \\\\( \\\\mathbf{A} \\\\)`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tgeneralSolutionMethod: {\r\n\t\t\t\ttitle: `General and ${ivp} solution`,\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tsystem_s2_linearHomogeneousConstant: s2_linearHomogeneousConstant_generalSolutionMethod_content(true),\r\n\t\t\t\t\tvector_s2_linearHomogeneousConstant: s2_linearHomogeneousConstant_generalSolutionMethod_content(false),\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontents: {\r\n\t\t\t\t\tsystem_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t`${nt.x} &= 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t`${nt.y} &= 0`+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t{type:'case',title:`additional nonzero equilibrium solutions are possible when \\\\( ad-bc = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`any`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= k_${nt.x} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= k_${nt.y}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t\t`s.t.:`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`a \\\\cdot k_${nt.x} + b \\\\cdot k_${nt.y} &= 0 \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`c \\\\cdot k_${nt.x} + d \\\\cdot k_${nt.y} &= 0`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t\t`is an equilibrium solution`,\r\n\t\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t\t`this is a linearly dependent system when \\\\( ad-bc = 0 \\\\)`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`any constant multiple of an equilibrium solution is also an equilibrium solution:`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t\t\t\t`${nt.x} &= C \\\\cdot k_${nt.x} \\\\\\\\`+\r\n\t\t\t\t\t\t\t\t`${nt.y} &= C \\\\cdot k_${nt.y}`+\r\n\t\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tvector_s2_linearHomogeneousConstant: nt=>[\r\n\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t\t\t\t{type:'case',title:`additional nonzero equilibrium solutions are possible when \\\\( \\\\det(\\\\mathbf{A}) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`any`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{K} \\\\]`,\r\n\t\t\t\t\t\t\t`s.t.:`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\mathbf{A} \\\\mathbf{K} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t\t\t\t\t`is an equilibrium solution`,\r\n\t\t\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t\t\t`this is a linearly dependent system when \\\\( \\\\det(\\\\mathbf{A}) = 0 \\\\)`,\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t`any constant multiple of an equilibrium solution is also an equilibrium solution:`,\r\n\t\t\t\t\t\t\t`\\\\[ ${nt.X} = C \\\\cdot \\\\mathbf{K} \\\\]`,\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tplot: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t()=>{\r\n\t\t\t\t\t\tconst plot=new LhcPlot(nt.x,nt.y)\r\n\t\t\t\t\t\treturn plot.$output\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tsn_sir: {\r\n\t\tparents: {\r\n\t\t\tsn: true,\r\n\t\t},\r\n\t\tname: \"SIR model\",\r\n\t\thtmlName: \"<a href='https://en.wikipedia.org/w/index.php?title=SIR_model'>SIR</a> model\",\r\n\t\timportance: 3,\r\n\t\tforms: [\r\n\t\t\t{\r\n\t\t\t\tis: 't,system_sn_sir',\r\n\t\t\t\tequation: nt=>`\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t\t\t`${nt.dd('S')} &= -\\\\alpha S I \\\\\\\\`+\r\n\t\t\t\t\t`${nt.dd('I')} &= \\\\alpha S I - \\\\beta I \\\\\\\\ `+\r\n\t\t\t\t\t`${nt.dd('R')} &= \\\\beta I`+\r\n\t\t\t\t`\\\\end{aligned} \\\\right.`,\r\n\t\t\t\tnotes: nt=>[\r\n\t\t\t\t\t`\\\\( S = \\\\) number susceptible`,\r\n\t\t\t\t\t`\\\\( I = \\\\) number infectious`,\r\n\t\t\t\t\t`\\\\( R = \\\\) number recovered (immune)`,\r\n\t\t\t\t\t`\\\\( \\\\alpha = \\\\) contact rate`,\r\n\t\t\t\t\t`\\\\( \\\\beta = \\\\) recovery rate`,\r\n\t\t\t\t\t`all quantities are nonnegative`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t\ttraits: {\r\n\t\t\tphaseSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`threshold value \\\\( \\\\rho = \\\\frac\\\\beta\\\\alpha \\\\):`,\r\n\t\t\t\t\t`\\\\( I \\\\) increases when \\\\( S &gt; \\\\rho \\\\)`,\r\n\t\t\t\t\t`\\\\( S \\\\) decreases`,\r\n\t\t\t\t\t`\\\\( I \\\\) attains its maximum when \\\\( S = \\\\rho \\\\)`,\r\n\t\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd('S')} + ${nt.dd('I')} + ${nt.dd('R')} = 0 \\\\]`,\r\n\t\t\t\t\t\t`total population \\\\( N \\\\) is constant`,\r\n\t\t\t\t\t\t`\\\\[ S + I + R = N \\\\]`,\r\n\t\t\t\t\t\t`eliminate \\\\( R \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t`${nt.dd('S')} &= -\\\\alpha S I \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`${nt.dd('I')} &= \\\\alpha S I - \\\\beta I \\\\\\\\ `+\r\n\t\t\t\t\t\t`\\\\end{aligned} \\\\right. \\\\]`,\r\n\t\t\t\t\t\t`\\\\[ ${nt.dd('I','S')} = \\\\frac{\\\\alpha S I - \\\\beta I}{-\\\\alpha S I} = -1 + \\\\frac{\\\\rho}{S} \\\\]`,\r\n\t\t\t\t\t\t`integrate by \\\\( S \\\\)`,\r\n\t\t\t\t\t\t`\\\\[ I = -S + \\\\rho \\\\ln S + C \\\\]`,\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`conserved quantities:`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`S(t) + I(t) + R(t) = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= S(0) + I(0) + R(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`I(t) + S(t) - \\\\rho \\\\ln S(t) = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= I(0) + S(0) - \\\\rho \\\\ln S(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t`maximum of \\\\( I \\\\):`,\r\n\t\t\t\t\t`\\\\[ \\\\begin{multline}`+\r\n\t\t\t\t\t\t`I_{max} + \\\\rho - \\\\rho \\\\ln \\\\rho = \\\\\\\\ `+\r\n\t\t\t\t\t\t`= I(0) + S(0) - \\\\rho \\\\ln S(0) `+\r\n\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\tequilibriumSolutionMethod: {\r\n\t\t\t\tcontent: nt=>[\r\n\t\t\t\t\t`\\\\[ I = 0 \\\\]`,\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n}\r\n","'use strict'\r\n\r\n// produces array of <tr>'s in this.$trs\r\n// currently produces only one <tr> but this is going to change if alignment options are introduced\r\nclass FormRowsOutput {\r\n\tconstructor(i18n,orderedClassSubgraph,theadLayout,classData,notation,$classHighlightables,formSelectCallback) {\r\n\t\tconst writeEquations=(classId,iColumn)=>{\r\n\t\t\tconst $cell=$(\"<td>\")\r\n\t\t\tlet $classEquations=$()\r\n\t\t\tclassData[classId].forms.forEach((formData,i)=>{\r\n\t\t\t\tif (i>0) {\r\n\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\"<div class='alt-separator'>or</div>\"\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tconst $equation=$(\"<div class='equation'>\").append(\"\\\\[\"+formData.equation(notation)+\"\\\\]\")\r\n\t\t\t\t$classEquations=$classEquations.add($equation)\r\n\t\t\t\t$cell.append($equation)\r\n\t\t\t\tconst select=$e=>$e.addClass('selected').removeAttr('title')\r\n\t\t\t\tconst unselect=$e=>$e.removeClass('selected').attr('title','Rewrite equation properties in terms of this form')\r\n\t\t\t\tif (i==0) {\r\n\t\t\t\t\tselect($equation)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunselect($equation)\r\n\t\t\t\t}\r\n\t\t\t\t$equation.click(function(){\r\n\t\t\t\t\tif ($equation.hasClass('selected')) return\r\n\t\t\t\t\tunselect($classEquations)\r\n\t\t\t\t\tselect($equation)\r\n\t\t\t\t\tformSelectCallback(iColumn,formData.is)\r\n\t\t\t\t})\r\n\t\t\t\tif (formData.notes!==undefined) {\r\n\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t$(\"<ul>\").append(\r\n\t\t\t\t\t\t\tformData.notes(notation).map(\r\n\t\t\t\t\t\t\t\tnoteText=>`<li><div class='note'>${noteText}</div></li>`\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tconst columnParents=orderedClassSubgraph.visibleParents[classId] // TODO use thead-layout order\r\n\t\t\tif (columnParents.length>0) {\r\n\t\t\t\t$cell.append(\r\n\t\t\t\t\t$(\"<ul>\").append(\r\n\t\t\t\t\t\t$(\"<li>\").append(\r\n\t\t\t\t\t\t\t$(\"<div class='note'>\").append(\r\n\t\t\t\t\t\t\t\t\"can also be written as and has all properties of:\",\r\n\t\t\t\t\t\t\t\t$(\"<ul>\").append(columnParents.map(pid=>{\r\n\t\t\t\t\t\t\t\t\tconst $li=$(\"<li>\").append(\r\n\t\t\t\t\t\t\t\t\t\t$(\"<em>\"+classData[pid].htmlName+\"</em>\").hover(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$classHighlightables[pid].addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t$li.addClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$li.removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t\t$classHighlightables[pid].removeClass('highlight')\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\treturn $li\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn $cell\r\n\t\t}\r\n\t\tthis.$trs=[\r\n\t\t\t$(\"<tr>\").append(\r\n\t\t\t\ttheadLayout.columns.map(writeEquations)\r\n\t\t\t),\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=FormRowsOutput\r\n","'use strict'\r\n\r\nconst tex=require('./tex')\r\nconst characteristicEquationContent=require('./characteristic-equation-content')\r\n\r\nconst ivp=\"<a href='https://en.wikipedia.org/wiki/Initial_value_problem'>initial value problem</a>\"\r\n\r\nconst LhcContent={}\r\n\r\nLhcContent.Base = class {\r\n\tconstructor(param) {\r\n\t\tthis.param=param\r\n\t}\r\n\tgetGeneralSolutionConstantsEquation(nt,eigx1,eigx2,eigy1,eigy2) {\r\n\t\treturn `${nt.mat2(eigx1,eigx2,eigy1,eigy2)} ${nt.vec2('k_1','k_2')} = ${this.getX0(nt)}`\r\n\t}\r\n\tgetGeneralSolutionConstantsSolution(nt,kmatlead,kx1,ky1,kx2,ky2,eqn1,eqn2) {\r\n\t\tif (!(this instanceof LhcContent.ReducedVector)) {\r\n\t\t\treturn `\\\\begin{aligned} `+\r\n\t\t\t\t`k_1 &= ${eqn1} \\\\\\\\ `+\r\n\t\t\t\t`k_2 &= ${eqn2} `+\r\n\t\t\t`\\\\end{aligned}`\r\n\t\t} else {\r\n\t\t\treturn `${nt.vec2('k_1','k_2')} = ${kmatlead} ${nt.mat2(kx1,ky1,kx2,ky2)} ${this.getX0(nt)}`\r\n\t\t}\r\n\t}\r\n\tgetGeneralSolutionRepeatedCase(nt) {\r\n\t\tconst x0=this.getx0(nt)\r\n\t\tconst y0=this.gety0(nt)\r\n\t\treturn [\r\n\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t`\\\\[ ${this.getRepeatedGeneralSolution(nt)} \\\\]`,\r\n\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsEquation(nt,1,0,'\\\\lambda',1)} \\\\]`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsSolution(nt,'',1,0,'-\\\\lambda',1,x0,`${y0} - \\\\lambda \\\\cdot ${x0}`)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetGeneralSolutionRealCase(nt) {\r\n\t\tconst x0=this.getx0(nt)\r\n\t\tconst y0=this.gety0(nt)\r\n\t\treturn [\r\n\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t`\\\\[ ${this.getRealGeneralSolution(nt)} \\\\]`,\r\n\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsEquation(nt,1,1,'\\\\lambda_1','\\\\lambda_2')} \\\\]`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsSolution(nt,'\\\\frac1{λ_2{-}λ_1}','λ_2',-1,'-λ_1',1,`\\\\frac{λ_2 \\\\cdot ${x0} - ${y0}}{λ_2 - λ_1}`,`\\\\frac{λ_1 \\\\cdot ${x0} - ${y0}}{λ_1 - λ_2}`)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetGeneralSolutionComplexCase(nt) {\r\n\t\tconst x0=this.getx0(nt)\r\n\t\tconst y0=this.gety0(nt)\r\n\t\treturn [\r\n\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t`\\\\[ ${this.getComplexGeneralSolution(nt)} \\\\]`,\r\n\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsEquation(nt,1,0,'\\\\alpha','\\\\beta')} \\\\]`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsSolution(nt,'\\\\frac1{\\\\beta}','\\\\beta',0,'-\\\\alpha',1,x0,`\\\\frac{${y0} - α \\\\cdot ${x0}}{β}`)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetGeneralSolutionImaginaryCase(nt) {\r\n\t\tconst x0=this.getx0(nt)\r\n\t\tconst y0=this.gety0(nt)\r\n\t\treturn [\r\n\t\t\t`general solution (with arbitrary constants \\\\( k_1 \\\\), \\\\( k_2 \\\\)):`,\r\n\t\t\t`\\\\[ ${this.getImaginaryGeneralSolution(nt)} \\\\]`,\r\n\t\t\t`get constants \\\\( k_1 \\\\), \\\\( k_2 \\\\) for ${ivp} solution by solving:`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsEquation(nt,1,0,0,'\\\\beta')} \\\\]`,\r\n\t\t\t`\\\\[ ${this.getGeneralSolutionConstantsSolution(nt,'',1,0,0,'β^{-1}',x0,`\\\\frac{${y0}}{β}`)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetContentFor_generalSolutionMethod_Repeated() {\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t\t`roots \\\\( \\\\lambda \\\\) are going to be repeated:`,\r\n\t\t\t`\\\\[ \\\\lambda_1 = \\\\lambda_2 = \\\\lambda \\\\]`,\r\n\t\t\t...this.getGeneralSolutionRepeatedCase(nt),\r\n\t\t]\r\n\t}\r\n\tgetContentFor_generalSolutionMethod_Real() {\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t\t`roots \\\\( \\\\lambda \\\\) are going to be real distinct:`,\r\n\t\t\t`\\\\[ \\\\lambda_1 \\\\ne \\\\lambda_2 \\\\]`,\r\n\t\t\t`\\\\[ \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} \\\\]`,\r\n\t\t\t...this.getGeneralSolutionRealCase(nt),\r\n\t\t]\r\n\t}\r\n\tgetContentFor_generalSolutionMethod_Complex() {\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t\t`roots \\\\( \\\\lambda \\\\) are going to be complex conjugate:`,\r\n\t\t\t`\\\\[ \\\\lambda = \\\\alpha \\\\pm i \\\\beta \\\\]`,\r\n\t\t\t`\\\\[ \\\\beta \\\\ne 0 \\\\]`,\r\n\t\t\t...this.getGeneralSolutionComplexCase(nt),\r\n\t\t]\r\n\t}\r\n\tgetContentFor_generalSolutionMethod_Imaginary() {\r\n\t\tconst a=i=>this.param.linear(i)\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t\t`roots \\\\( \\\\lambda \\\\) are going to be complex conjugate:`,\r\n\t\t\t`\\\\[ \\\\lambda = \\\\pm i \\\\beta = \\\\pm \\\\sqrt{\\\\frac{${a(0)}}{${a(2)}}} \\\\]`,\r\n\t\t\t...this.getGeneralSolutionImaginaryCase(nt),\r\n\t\t]\r\n\t}\r\n\tgetContentFor_generalSolutionMethod() {\r\n\t\treturn nt=>[\r\n\t\t\t`solve characteristic equation for \\\\( \\\\lambda \\\\):`,\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t\t{type:'switch',title:`roots \\\\( \\\\lambda \\\\) are`,content:[\r\n\t\t\t\t{type:'case',title:`repeated \\\\( ( \\\\lambda_1 = \\\\lambda_2 = \\\\lambda ) \\\\)`,\r\n\t\t\t\t\tcontent:this.getGeneralSolutionRepeatedCase(nt)\r\n\t\t\t\t},\r\n\t\t\t\t{type:'case',title:`real distinct \\\\( ( \\\\lambda_1 \\\\ne \\\\lambda_2; \\\\lambda_1, \\\\lambda_2 \\\\in \\\\mathbb{R} ) \\\\)`,\r\n\t\t\t\t\tcontent:this.getGeneralSolutionRealCase(nt)\r\n\t\t\t\t},\r\n\t\t\t\t{type:'case',title:`complex conjugate pair \\\\( ( \\\\lambda = \\\\alpha \\\\pm i \\\\beta; \\\\beta \\\\ne 0 ) \\\\)`,\r\n\t\t\t\t\tcontent:this.getGeneralSolutionComplexCase(nt)\r\n\t\t\t\t},\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nLhcContent.Scalar = class extends LhcContent.Base {\r\n\tgetX0(nt) {\r\n\t\treturn nt.vec2(`${nt.x}(0)`,`${nt.x}'(0)`)\r\n\t}\r\n\tgetx0(nt) {\r\n\t\treturn `${nt.x}(0)`\r\n\t}\r\n\tgety0(nt) {\r\n\t\treturn `${nt.x}'(0)`\r\n\t}\r\n\tgetRepeatedGeneralSolution(nt) {\r\n\t\treturn `${nt.x} = k_1 e^{\\\\lambda t} + k_2 t e^{\\\\lambda t}`\r\n\t}\r\n\tgetRealGeneralSolution(nt) {\r\n\t\treturn `${nt.x} = k_1 e^{\\\\lambda_1 t} + k_2 e^{\\\\lambda_2 t}`\r\n\t}\r\n\tgetComplexGeneralSolution(nt) {\r\n\t\treturn `${nt.x} = k_1 e^{\\\\alpha t} \\\\cos \\\\beta t + k_2 e^{\\\\alpha t} \\\\sin \\\\beta t`\r\n\t}\r\n\tgetImaginaryGeneralSolution(nt) {\r\n\t\treturn `${nt.x} = k_1 \\\\cos \\\\beta t + k_2 \\\\sin \\\\beta t`\r\n\t}\r\n}\r\n\r\nLhcContent.Linear = class extends LhcContent.Scalar {\r\n\tgetCharacteristicEquation(nt) {\r\n\t\tconst a=i=>this.param.linear(i)\r\n\t\treturn tex.sum([a(2),`\\\\lambda^2`],'+',[a(1),`\\\\lambda`],'+',[a(0)],'=',[0])\r\n\t}\r\n\tgetContentFor_characteristicEquation() {\r\n\t\tconst a=i=>this.param.linear(i)\r\n\t\treturn characteristicEquationContent([2,a(2)],'+',[1,a(1)],'+',[0,a(0)],'=','0')\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod() {\r\n\t\tconst a=i=>this.param.linear(i)\r\n\t\treturn nt=>[\r\n\t\t\t{type:'switch',title:`\\\\( ${a(0)} \\\\) is`,content:[\r\n\t\t\t\t{type:'case',title:`\\\\( ${a(0)} = 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`\\\\( ${a(0)} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod0() {\r\n\t\tconst a=i=>this.param.linear(i)\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`no other equilibrium solution is possible because \\\\( ${a(0)} \\\\ne 0 \\\\)`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nLhcContent.Resolved = class extends LhcContent.Scalar {\r\n\tgetCharacteristicEquation(nt) {\r\n\t\tconst b=i=>this.param.resolved(i)\r\n\t\treturn tex.sum([`\\\\lambda^2`],'-',[b(1),`\\\\lambda`],'-',[b(0)],'=',[0])\r\n\t}\r\n\tgetContentFor_characteristicEquation() {\r\n\t\tconst b=i=>this.param.resolved(i)\r\n\t\treturn characteristicEquationContent([2,1],'=',[1,b(1)],'+',[0,b(0)])\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod() {\r\n\t\tconst b=i=>this.param.resolved(i)\r\n\t\treturn nt=>[\r\n\t\t\t{type:'switch',title:`\\\\( ${b(0)} \\\\) is`,content:[\r\n\t\t\t\t{type:'case',title:`\\\\( ${b(0)} = 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = K \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`\\\\( ${b(0)} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod0() {\r\n\t\tconst b=i=>this.param.resolved(i)\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${nt.x} = 0 \\\\]`,\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`no other equilibrium solution is possible because \\\\( ${b(0)} \\\\ne 0 \\\\)`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nLhcContent.ReducedSystem = class extends LhcContent.Base {\r\n\tgetX0(nt) {\r\n\t\treturn nt.vec2(`${nt.x}(0)`,`${nt.y}(0)`)\r\n\t}\r\n\tgetx0(nt) {\r\n\t\treturn `${nt.x}(0)`\r\n\t}\r\n\tgety0(nt) {\r\n\t\treturn `${nt.y}(0)`\r\n\t}\r\n\tgetCharacteristicEquation(nt) {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\tconst d=this.param.system(2,2)\r\n\t\treturn tex.sum([`\\\\lambda^2`],'-',[d,`\\\\lambda`],'-',[c],'=',[0])\r\n\t}\r\n\tgetRepeatedGeneralSolution(nt) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t`${nt.x} &= k_1 e^{\\\\lambda t} + k_2 t e^{\\\\lambda t} \\\\\\\\`+\r\n\t\t\t`${nt.y} &= (k_1 \\\\lambda + k_2) e^{\\\\lambda t} + k_2 \\\\lambda t e^{\\\\lambda t}`+\r\n\t\t`\\\\end{aligned} \\\\right.`\r\n\t}\r\n\tgetRealGeneralSolution(nt) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t`${nt.x} &= k_1 e^{\\\\lambda_1 t} + k_2 e^{\\\\lambda_2 t} \\\\\\\\`+\r\n\t\t\t`${nt.y} &= k_1 \\\\lambda_1 e^{\\\\lambda_1 t} + k_2 \\\\lambda_2 e^{\\\\lambda_2 t}`+\r\n\t\t`\\\\end{aligned} \\\\right.`\r\n\t}\r\n\tgetComplexGeneralSolution(nt) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t`${nt.x} = \\\\: & k_1 e^{\\\\alpha t} \\\\cos \\\\beta t \\\\\\\\`+\r\n\t\t\t\t`+ \\\\: & k_2 e^{\\\\alpha t} \\\\sin \\\\beta t \\\\\\\\`+\r\n\t\t\t`${nt.y} = \\\\: & k_1 e^{\\\\alpha t} (\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t) \\\\\\\\`+\r\n\t\t\t\t`+ \\\\: & k_2 e^{\\\\alpha t} (\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t)`+\r\n\t\t`\\\\end{aligned} \\\\right.`\r\n\t}\r\n\tgetImaginaryGeneralSolution(nt) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned}`+\r\n\t\t\t`${nt.x} &= k_1 \\\\cos \\\\beta t + k_2 \\\\sin \\\\beta t \\\\\\\\`+\r\n\t\t\t`${nt.y} &= k_2 \\\\beta \\\\cos \\\\beta t - k_1 \\\\beta \\\\sin \\\\beta t`+\r\n\t\t`\\\\end{aligned} \\\\right.`\r\n\t}\r\n\tgetContentFor_characteristicEquation() {\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod() {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\treturn nt=>[\r\n\t\t\t{type:'switch',title:`\\\\( ${c} \\\\) is`,content:[\r\n\t\t\t\t{type:'case',title:`\\\\( ${c} = 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ `+nt.sys2(`${nt.x} &= K`,`${nt.y} &= 0`)+` \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`\\\\( ${c} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ `+nt.sys2(`${nt.x} &= 0`,`${nt.y} &= 0`)+` \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod0() {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${nt.sys2(`${nt.x} &= 0`,`${nt.y} &= 0`)} \\\\]`,\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`no other equilibrium solution is possible because \\\\( ${c} \\\\ne 0 \\\\)`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nLhcContent.ReducedVector = class extends LhcContent.Base {\r\n\tgetX0(nt) {\r\n\t\treturn `${nt.X}(0)`\r\n\t}\r\n\tgetx0(nt) {\r\n\t\treturn `${nt.X}_1(0)`\r\n\t}\r\n\tgety0(nt) {\r\n\t\treturn `${nt.X}_2(0)`\r\n\t}\r\n\tgetCharacteristicEquation(nt) {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\tconst d=this.param.system(2,2)\r\n\t\treturn `\\\\det\\\\left(${nt.mat2('-\\\\lambda',1,c,`${d}-\\\\lambda`)}\\\\right) = 0`\r\n\t}\r\n\tgetRepeatedGeneralSolution(nt) {\r\n\t\treturn `\\\\begin{aligned} `+\r\n\t\t\t`${nt.X} &= k_1 ${nt.vec2(1,'λ')} e^{λt} + k_2 ${nt.vec2('t','1{+}λt')} e^{λt} \\\\\\\\`+\r\n\t\t\t        `&= ${nt.mat2(1,'t','λ','1{+}λt')} ${nt.vec2('k_1','k_2')} e^{λt}`+\r\n\t\t`\\\\end{aligned}`\r\n\t}\r\n\tgetRealGeneralSolution(nt) {\r\n\t\treturn `\\\\begin{aligned}`+\r\n\t\t\t`${nt.X} &= k_1 ${nt.vec2(1,'λ_1')} e^{λ_1 t} + k_2 ${nt.vec2(1,'λ_2')} e^{λ_2 t} \\\\\\\\`+\r\n\t\t\t        `&= ${nt.mat2(1,1,'λ_1','λ_2')} ${nt.vec2(`k_1 e^{λ_1 t}`,`k_2 e^{λ_2 t}`)}`+\r\n\t\t`\\\\end{aligned}`\r\n\t}\r\n\tgetComplexGeneralSolution(nt) {\r\n\t\treturn `\\\\begin{aligned} `+\r\n\t\t\t`${nt.X} = \\\\: & k_1 e^{\\\\alpha t} ${nt.vec2('\\\\cos \\\\beta t','\\\\alpha \\\\cos \\\\beta t - \\\\beta \\\\sin \\\\beta t')} \\\\\\\\`+\r\n\t\t\t        `+ \\\\: & k_2 e^{\\\\alpha t} ${nt.vec2('\\\\sin \\\\beta t','\\\\alpha \\\\sin \\\\beta t + \\\\beta \\\\cos \\\\beta t')} \\\\\\\\`+\r\n\t\t\t        `= \\\\: & e^{\\\\alpha t} ${nt.smat2(1,0,'\\\\alpha','\\\\beta')} ${nt.smat2('\\\\cos \\\\beta t','\\\\sin \\\\beta t','- \\\\sin \\\\beta t','\\\\cos \\\\beta t')} ${nt.svec2('k_1','k_2')}`+\r\n\t\t`\\\\end{aligned}`\r\n\t}\r\n\tgetImaginaryGeneralSolution(nt) {\r\n\t\treturn `\\\\begin{aligned} `+\r\n\t\t\t`${nt.X} = \\\\: & k_1 ${nt.vec2('\\\\cos \\\\beta t','-\\\\beta \\\\sin \\\\beta t')} \\\\\\\\`+\r\n\t\t\t        `+ \\\\: & k_2 ${nt.vec2('\\\\sin \\\\beta t', '\\\\beta \\\\cos \\\\beta t')} \\\\\\\\`+\r\n\t\t\t        `= \\\\: & ${nt.smat2(1,0,0,'\\\\beta')} ${nt.smat2('\\\\cos \\\\beta t','\\\\sin \\\\beta t','- \\\\sin \\\\beta t','\\\\cos \\\\beta t')} ${nt.svec2('k_1','k_2')}`+\r\n\t\t`\\\\end{aligned}`\r\n\t}\r\n\tgetContentFor_characteristicEquation() {\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${this.getCharacteristicEquation(nt)} \\\\]`,\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod() {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\treturn nt=>[\r\n\t\t\t{type:'switch',title:`\\\\( ${c} \\\\) is`,content:[\r\n\t\t\t\t{type:'case',title:`\\\\( ${c} = 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.X} = ${nt.vec2('K',0)} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t\t{type:'case',title:`\\\\( ${c} \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t\t]},\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n\tgetContentFor_equilibriumSolutionMethod0() {\r\n\t\tconst c=this.param.system(2,1)\r\n\t\treturn nt=>[\r\n\t\t\t`\\\\[ ${nt.X} = \\\\mathbf{0} \\\\]`,\r\n\t\t\t{type:'note',content:[\r\n\t\t\t\t`no other equilibrium solution is possible because \\\\( ${c} \\\\ne 0 \\\\)`,\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=LhcContent\r\n","'use strict'\r\n\r\nconst LhcParam={}\r\n\r\nLhcParam.Linear = class {\r\n\tconstructor(a2,a1,a0) {\r\n\t\tthis.a=[a0,a1,a2]\r\n\t}\r\n\tlinear(i) {\r\n\t\treturn this.a[i]\r\n\t}\r\n\tresolved(i) {\r\n\t\tif (this.a[i]!=0) {\r\n\t\t\treturn `-\\\\frac{${this.a[i]}}{${this.a[2]}}`\r\n\t\t} else {\r\n\t\t\treturn 0\r\n\t\t}\r\n\t}\r\n\tsystem(i,j) {\r\n\t\tif (i==1) {\r\n\t\t\tif (j==1) {\r\n\t\t\t\treturn 0\r\n\t\t\t} else if (j==2) {\r\n\t\t\t\treturn 1\r\n\t\t\t}\r\n\t\t} else if (i==2) {\r\n\t\t\treturn this.resolved(j-1)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nLhcParam.Resolved = class {\r\n\tconstructor(b1,b0) {\r\n\t\tthis.b=[b0,b1]\r\n\t}\r\n\tresolved(i) {\r\n\t\treturn this.b[i]\r\n\t}\r\n}\r\n\r\nLhcParam.ReducedSystem = class {\r\n\tconstructor(c,d) {\r\n\t\tthis.A=[[0,1],[c,d]]\r\n\t}\r\n\tsystem(i,j) {\r\n\t\treturn this.A[i-1][j-1]\r\n\t}\r\n}\r\n\r\nmodule.exports=LhcParam\r\n","'use strict'\r\n\r\nconst detailsPolyfill=require('crnx-base/details-polyfill')\r\nconst Matrix=require('./lhc-plot/matrix')\r\nconst TrdetCanvas=require('./lhc-plot/trdet-canvas')\r\nconst PhaseCanvas=require('./lhc-plot/phase-canvas')\r\n\r\n// works like this: http://mathlets.org/mathlets/linear-phase-portraits-matrix-entry/\r\nclass LhcPlot {\r\n\tconstructor(xLabel,yLabel) {\r\n\t\tconst matrix=new Matrix\r\n\t\tconst $numberInputs={}\r\n\t\tconst $rangeInputs={}\r\n\t\tlet $equilibriumType\r\n\t\tconst trdetCanvas=new TrdetCanvas\r\n\t\tconst phaseCanvas=new PhaseCanvas\r\n\t\tconst updateDetails=()=>{\r\n\t\t\tconst updateEquilibriumType=()=>{\r\n\t\t\t\tconst getEquilibriumType=()=>{\r\n\t\t\t\t\t// names are based on\r\n\t\t\t\t\t// http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\r\n\t\t\t\t\tconst D=matrix.det\r\n\t\t\t\t\tconst T=matrix.tr\r\n\t\t\t\t\tconst ssc=(T==0)?\"center\":((T<0)?\"sink\":\"source\")\r\n\t\t\t\t\tif (D<0) {\r\n\t\t\t\t\t\treturn `saddle`\r\n\t\t\t\t\t} else if (D==0) {\r\n\t\t\t\t\t\tif (T==0) {\r\n\t\t\t\t\t\t\tif (matrix.b==0 && matrix.c==0) {\r\n\t\t\t\t\t\t\t\treturn `degenerate everywhere fixed`\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn `degenerate parallel lines`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `degenerate comb ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (4*D<T*T) {\r\n\t\t\t\t\t\treturn `nodal (real) ${ssc}`\r\n\t\t\t\t\t} else if (4*D==T*T) {\r\n\t\t\t\t\t\tif (matrix.b==0 && matrix.c==0) {\r\n\t\t\t\t\t\t\treturn `star ${ssc}`\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `defective nodal (real) ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (T==0) {\r\n\t\t\t\t\t\t\treturn ssc\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn `spiral ${ssc}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$equilibriumType.text(getEquilibriumType())\r\n\t\t\t}\r\n\t\t\tmatrix.forUpdated(cf=>{\r\n\t\t\t\t$numberInputs[cf].val(matrix[cf])\r\n\t\t\t\t$rangeInputs[cf].val(matrix[cf])\r\n\t\t\t})\r\n\t\t\tupdateEquilibriumType()\r\n\t\t\ttrdetCanvas.redraw(matrix)\r\n\t\t\tphaseCanvas.redraw(matrix,xLabel,yLabel)\r\n\t\t}\r\n\t\tconst getCoefInputs=coef=>{\r\n\t\t\tconst isMatrixElement=coef.length==1\r\n\t\t\tconst valueRange=matrix.getRange(coef)\r\n\t\t\tconst initCoefInput=(type,getValue,setValue)=>{\r\n\t\t\t\tconst $input=$(`<input type='${type}'>`).attr('step','any').val(matrix[coef])\r\n\t\t\t\tif (type=='range') {\r\n\t\t\t\t\t$input.attr('min',-valueRange).attr('max',valueRange)\r\n\t\t\t\t}\r\n\t\t\t\t$input.on('input change',function(){\r\n\t\t\t\t\tif (this.checkValidity()) {\r\n\t\t\t\t\t\tconst value=getValue()\r\n\t\t\t\t\t\tsetValue(value)\r\n\t\t\t\t\t\tmatrix[coef]=Number(value)\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $input\r\n\t\t\t}\r\n\t\t\tconst $div=$(\"<div>\")\r\n\t\t\tif (!isMatrixElement) {\r\n\t\t\t\t$div.addClass(coef)\r\n\t\t\t}\r\n\t\t\tlet label=coef\r\n\t\t\tif (coef=='tr') {\r\n\t\t\t\tlabel=`\\\\operatorname{${coef}}(\\\\mathbf{A})`\r\n\t\t\t} else if (coef=='det') {\r\n\t\t\t\tlabel=`\\\\${coef}(\\\\mathbf{A})`\r\n\t\t\t} else if (coef.slice(0,2)=='re') {\r\n\t\t\t\t//label=`\\\\lambda_${coef.charAt(2)} =`\r\n\t\t\t\tlabel=`\\\\Re \\\\lambda_${coef.charAt(2)}`\r\n\t\t\t} else if (coef.slice(0,2)=='im') {\r\n\t\t\t\t//label=`+ i \\\\cdot`\r\n\t\t\t\tlabel=`\\\\Im \\\\lambda_${coef.charAt(2)}`\r\n\t\t\t}\r\n\t\t\tlet $number,$range\r\n\t\t\t$div.append(\r\n\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t`<span class='label'>\\\\( ${label} \\\\)</span>`,\r\n\t\t\t\t\t`<span class='space'> </span>`,\r\n\t\t\t\t\t$number=initCoefInput('number',()=>$number.val(),(v)=>$range.val(v))\r\n\t\t\t\t),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$range=initCoefInput('range',()=>Number($range.val()).toFixed(2),(v)=>$number.val(v))\r\n\t\t\t)\r\n\t\t\t$numberInputs[coef]=$number\r\n\t\t\t$rangeInputs[coef]=$range\r\n\t\t\treturn $div\r\n\t\t}\r\n\t\tthis.$output=$(\"<div class='matrix'>\").append(\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"equation coefficients\"),\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('a')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('b'))\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('c')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('d'))\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\t$(\"<div>\").append(\r\n\t\t\t\t\t\"Set matrix to \",\r\n\t\t\t\t\t$(\"<button>zero</button>\").click(function(){\r\n\t\t\t\t\t\tmatrix.setZero()\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t}),\r\n\t\t\t\t\t\" \",\r\n\t\t\t\t\t$(\"<button>associated</button>\").click(function(){\r\n\t\t\t\t\t\tmatrix.setAssociated()\r\n\t\t\t\t\t\tupdateDetails()\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"matrix parameters\"),\r\n\t\t\t\tgetCoefInputs('tr'),\r\n\t\t\t\tgetCoefInputs('det'),\r\n\t\t\t\t$(\"<table>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('re1')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('im1'))\r\n\t\t\t\t\t),\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('re2')),\r\n\t\t\t\t\t\t$(\"<td>\").append(getCoefInputs('im2'))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary>\").append(\"equilibrium point type\"),\r\n\t\t\t\t$equilibriumType=$(\"<div>\")\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary class='bordered'>\").append(\"<a href='https://en.wikipedia.org/wiki/Trace_(linear_algebra)'>tr</a>-<a href='https://en.wikipedia.org/wiki/Determinant'>det</a> plane\"),\r\n\t\t\t\ttrdetCanvas.$output.on('mousedown mousemove',function(ev){\r\n\t\t\t\t\tif (!ev.buttons&1) return\r\n\t\t\t\t\tconst $canvas=$(this)\r\n\t\t\t\t\tconst w=$canvas.width()\r\n\t\t\t\t\tconst h=$canvas.height()\r\n\t\t\t\t\tconst trim=(v)=>Number(v.toFixed(2))\r\n\t\t\t\t\tconst tRange=matrix.getRange('tr')\r\n\t\t\t\t\tconst dRange=matrix.getRange('det')\r\n\t\t\t\t\tconst tClose=2*tRange/(w/2)\r\n\t\t\t\t\tconst dClose=2*dRange/(h/2)\r\n\t\t\t\t\tlet t=trim(+(ev.offsetX-w/2+0.5)/(w/2)*tRange)\r\n\t\t\t\t\tlet d=trim(-(ev.offsetY-h/2+0.5)/(h/2)*dRange)\r\n\t\t\t\t\tconst p=t*t/4\r\n\t\t\t\t\tif (Math.abs(d)<=dClose && Math.abs(t)<=tClose) {\r\n\t\t\t\t\t\tt=0\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d>0 && Math.abs(t)<=tClose) {\r\n\t\t\t\t\t\tt=0\r\n\t\t\t\t\t} else if (d<0 && d>=-dClose) {\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d-p>0 && d-p<=dClose) {\r\n\t\t\t\t\t\td=p\r\n\t\t\t\t\t} else if (d>0 && d<=dClose) {\r\n\t\t\t\t\t\td=0\r\n\t\t\t\t\t} else if (d-p<0 && d-p>=-dClose) {\r\n\t\t\t\t\t\td=p\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmatrix.setTrdetExternally(t,d)\r\n\t\t\t\t\tupdateDetails()\r\n\t\t\t\t})\r\n\t\t\t).each(detailsPolyfill),\r\n\t\t\t$(\"<details>\").append(\r\n\t\t\t\t$(\"<summary class='bordered'>\").append(\"<a href='https://en.wikipedia.org/wiki/Phase_space'>phase plane</a>\"),\r\n\t\t\t\tphaseCanvas.$output\r\n\t\t\t).each(detailsPolyfill)\r\n\t\t)\r\n\t\tupdateDetails()\r\n\t}\r\n}\r\n\r\nmodule.exports=LhcPlot\r\n","'use strict'\r\n\r\nclass Canvas {\r\n\tconstructor() {\r\n\t\tthis.width=246\r\n\t\tthis.height=246\r\n\t\tthis.$output=$(`<canvas width='${this.width}' height='${this.height}'>`)\r\n\t\tthis.ctx=this.$output[0].getContext('2d')\r\n\t}\r\n\tdrawAxes(xLabel,yLabel) {\r\n\t\tconst xAxisSize=80\r\n\t\tconst yAxisSize=80\r\n\t\tconst arrowSize=15\r\n\t\tconst ctx=this.ctx\r\n\t\tconst drawAxis=()=>{\r\n\t\t\tctx.beginPath()\r\n\t\t\tctx.moveTo(-xAxisSize,0)\r\n\t\t\tctx.lineTo(+xAxisSize,0)\r\n\t\t\tctx.moveTo(xAxisSize-arrowSize,-arrowSize)\r\n\t\t\tctx.lineTo(xAxisSize,0)\r\n\t\t\tctx.lineTo(xAxisSize-arrowSize,+arrowSize)\r\n\t\t\tctx.stroke()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.lineWidth=6\r\n\t\tctx.strokeStyle=ctx.fillStyle='#DDD'\r\n\t\tctx.font='900 30px sans-serif'\r\n\t\tdrawAxis()\r\n\t\tctx.save()\r\n\t\tctx.rotate(-Math.PI/2)\r\n\t\tdrawAxis()\r\n\t\tctx.restore()\r\n\t\tctx.textBaseline='middle'\r\n\t\tctx.fillText(xLabel,xAxisSize+10,0)\r\n\t\tctx.textBaseline='alphabetic'\r\n\t\tctx.textAlign='center'\r\n\t\tctx.fillText(yLabel,0,-yAxisSize-10)\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=Canvas\r\n","'use strict'\r\n\r\n// returns coords [x,y] of a point on x*y=C closest to (x0,y0)\r\n// could have solved x^3*(x-x0)+C*y0*x-C^2=0, y=C/x\r\n\r\nconst getClosestPointOnPositiveHyperbolaIn1stQuadrant=(C,x0,y0)=>{\r\n\tlet x=Math.sqrt(C)\r\n\tlet y=x\r\n\tconst epsilon2=1e-12\r\n\tconst iterationLimit=20\r\n\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\tif (x<=0) return [C/y0,y0]\r\n\t\tif (y<=0) return [x0,C/x0]\r\n\t\tconst yx=y0/(2*x)\r\n\t\tconst xy=x0/(2*y)\r\n\t\tconst t=yx+xy-Math.sqrt((yx-xy)*(yx-xy)+C/(x*y))\r\n\t\tlet x1=x0-y*t\r\n\t\tlet y1=y0-x*t\r\n\t\tif ((x-x1)*(x-x1)+(y-y1)*(y-y1)<=epsilon2) break\r\n\t\tx=x1\r\n\t\ty=y1\r\n\t}\r\n\treturn [x,y]\r\n}\r\n\r\nconst getClosestPointOnPositiveHyperbola=(C,x0,y0)=>{\r\n\tif (y0>=-x0) { // top-right branch\r\n\t\treturn getClosestPointOnPositiveHyperbolaIn1stQuadrant(C,x0,y0)\r\n\t} else { // bottom-left branch\r\n\t\tconst xy=getClosestPointOnPositiveHyperbolaIn1stQuadrant(C,-x0,-y0)\r\n\t\treturn [-xy[0],-xy[1]]\r\n\t}\r\n}\r\n\r\nconst getClosestPointOnHyperbola=(C,x0,y0)=>{\r\n\tif (C==0) {\r\n\t\tif (Math.abs(x0)<Math.abs(y0)) {\r\n\t\t\treturn [0,y0]\r\n\t\t} else {\r\n\t\t\treturn [x0,0]\r\n\t\t}\r\n\t} else if (C>0) {\r\n\t\treturn getClosestPointOnPositiveHyperbola(C,x0,y0)\r\n\t} else { // flip y axis\r\n\t\tconst xy=getClosestPointOnPositiveHyperbola(-C,x0,-y0)\r\n\t\treturn [xy[0],-xy[1]]\r\n\t}\r\n}\r\n\r\nmodule.exports=getClosestPointOnHyperbola\r\n","'use strict'\r\n\r\nconst getClosestPointOnHyperbola=require('./closest-point-on-hyperbola')\r\n\r\nclass Matrix {\r\n\tconstructor() {\r\n\t\tthis._updated={}\r\n\t\tthis.setZero()\r\n\t\tthis._updated={}\r\n\t}\r\n\tforUpdated(fn) {\r\n\t\tfor (let coef in this._updated) {\r\n\t\t\tfn(coef)\r\n\t\t}\r\n\t\tthis._updated={}\r\n\t}\r\n\t_computeElementsFromTrdet() {\r\n\t\tif (this._original===null) {\r\n\t\t\tthis._original={\r\n\t\t\t\ta: this._a,\r\n\t\t\t\tb: this._b,\r\n\t\t\t\tc: this._c,\r\n\t\t\t\td: this._d,\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._a=(this._original.a+this._tr-this._original.d)/2\r\n\t\tthis._d=this._tr-this._a\r\n\t\tconst bc=getClosestPointOnHyperbola(this._a*this._d-this._det,this._original.b,this._original.c)\r\n\t\tthis._b=bc[0]\r\n\t\tthis._c=bc[1]\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t}\r\n\t_computeTrdetFromElements() {\r\n\t\tthis._tr=this._a+this._d\r\n\t\tthis._det=this._a*this._d-this._b*this._c\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t}\r\n\t_computeEigenvaluesFromTrdet() {\r\n\t\tconst discr=this._tr*this._tr-4*this._det\r\n\t\tif (discr>=0) {\r\n\t\t\tconst root=Math.sqrt(discr)\r\n\t\t\tif (this._re2>=this._re1) {\r\n\t\t\t\tthis._re1=(this._tr-root)/2\r\n\t\t\t\tthis._re2=(this._tr+root)/2\r\n\t\t\t} else {\r\n\t\t\t\tthis._re2=(this._tr-root)/2\r\n\t\t\t\tthis._re1=(this._tr+root)/2\r\n\t\t\t}\r\n\t\t\tthis._im1=this._im2=0\r\n\t\t} else {\r\n\t\t\tconst root=Math.sqrt(-discr)\r\n\t\t\tthis._re1=this._re2=this._tr/2\r\n\t\t\tif (this._im2>=this._im1) {\r\n\t\t\t\tthis._im1=-root/2\r\n\t\t\t\tthis._im2=+root/2\r\n\t\t\t} else {\r\n\t\t\t\tthis._im2=-root/2\r\n\t\t\t\tthis._im1=+root/2\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._updated.re1=this._updated.re2=this._updated.im1=this._updated.im2=true\r\n\t}\r\n\t_computeTrdetFromEigenvalues() {\r\n\t\tthis._tr=this._re1+this._re2\r\n\t\tthis._det=this._re1*this._re2-this._im1*this._im2\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t}\r\n\tget a() { return this._a }\r\n\tget b() { return this._b }\r\n\tget c() { return this._c }\r\n\tget d() { return this._d }\r\n\tget tr() { return this._tr }\r\n\tget det() { return this._det }\r\n\tget re1() { return this._re1 }\r\n\tget re2() { return this._re2 }\r\n\tget im1() { return this._im1 }\r\n\tget im2() { return this._im2 }\r\n\tgetEigenvector(lambda) {\r\n\t\tif (Math.abs(this._b)+Math.abs(lambda-this._a)>=Math.abs(lambda-this._d)+Math.abs(this._c)) {\r\n\t\t\treturn [this._b,lambda-this._a]\r\n\t\t} else {\r\n\t\t\treturn [lambda-this._d,this._c]\r\n\t\t}\r\n\t}\r\n\tgetComplexEigenvector(alpha,beta) {\r\n\t\tif (Math.abs(this._b)+Math.abs(alpha-this._a)>=Math.abs(alpha-this._d)+Math.abs(this._c)) {\r\n\t\t\treturn [this._b,0,alpha-this._a,beta]\r\n\t\t} else {\r\n\t\t\treturn [alpha-this._d,beta,this._c,0]\r\n\t\t}\r\n\t}\r\n\tgetRange(coef) {\r\n\t\tif (coef=='tr') {\r\n\t\t\treturn 10\r\n\t\t} else if (coef=='det') {\r\n\t\t\treturn 50\r\n\t\t} else if (coef=='a' || coef=='b' || coef=='c' || coef=='d') {\r\n\t\t\treturn 5\r\n\t\t} else {\r\n\t\t\treturn 10 // eigenvalues\r\n\t\t}\r\n\t}\r\n\tset a(v) {\r\n\t\tthis._a=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset b(v) {\r\n\t\tthis._b=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset c(v) {\r\n\t\tthis._c=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset d(v) {\r\n\t\tthis._d=v\r\n\t\tthis._original=null\r\n\t\tthis._computeTrdetFromElements()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset tr(v) {\r\n\t\tthis._tr=v\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tset det(v) {\r\n\t\tthis._det=v\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\tsetTrdetExternally(T,D) { // for use with clicks on tr-det plane plot\r\n\t\tthis._tr=T\r\n\t\tthis._det=D\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t\tthis._computeElementsFromTrdet()\r\n\t\tthis._computeEigenvaluesFromTrdet()\r\n\t}\r\n\t_setRe(v,i,j) {\r\n\t\tthis['_re'+i]=v\r\n\t\tif (this._im1!=0 || this._im2!=0) {\r\n\t\t\tthis['_re'+j]=v\r\n\t\t\tthis._updated['re'+j]=true\r\n\t\t}\r\n\t\tthis._computeTrdetFromEigenvalues()\r\n\t\tthis._computeElementsFromTrdet()\r\n\t}\r\n\tset re1(v) {\r\n\t\tthis._setRe(v,1,2)\r\n\t}\r\n\tset re2(v) {\r\n\t\tthis._setRe(v,2,1)\r\n\t}\r\n\t_setIm(v,i,j) {\r\n\t\tthis['_im'+i]=v\r\n\t\tthis['_im'+j]=-v\r\n\t\tthis._updated['im'+j]=true\r\n\t\tif (v!=0) {\r\n\t\t\tthis['_re'+j]=this['_re'+i]\r\n\t\t\tthis._updated['re'+j]=true\r\n\t\t}\r\n\t\tthis._computeTrdetFromEigenvalues()\r\n\t\tthis._computeElementsFromTrdet()\r\n\t}\r\n\tset im1(v) {\r\n\t\tthis._setIm(v,1,2)\r\n\t}\r\n\tset im2(v) {\r\n\t\tthis._setIm(v,2,1)\r\n\t}\r\n\tsetZero() {\r\n\t\tthis._a=this._b=this._c=this._d=0\r\n\t\tthis._tr=this._det=0\r\n\t\tthis._re1=this._re2=this._im1=this._im2=0\r\n\t\tthis._original=null\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t\tthis._updated.tr=this._updated.det=true\r\n\t\tthis._updated.re1=this._updated.re2=this._updated.im1=this._updated.im2=true\r\n\t}\r\n\tsetAssociated() { // \"associated matrix\" http://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_26.pdf\r\n\t\tthis._a=0\r\n\t\tthis._b=1\r\n\t\tthis._c=-this._det\r\n\t\tthis._d=this._tr\r\n\t\tthis._original=null\r\n\t\tthis._updated.a=this._updated.b=this._updated.c=this._updated.d=true\r\n\t}\r\n}\r\n\r\nmodule.exports=Matrix\r\n","'use strict'\r\n\r\nconst Canvas=require('./canvas')\r\n\r\nclass PhaseCanvas extends Canvas {\r\n\tredraw(matrix,xLabel,yLabel) {\r\n\t\tconst ctx=this.ctx\r\n\t\tconst xRange=this.width/2\r\n\t\tconst yRange=this.height/2\r\n\t\tconst drawDirectionField=()=>{\r\n\t\t\tconst arrowSpacing=27\r\n\t\t\tconst arrowLength=5\r\n\t\t\tconst arrowWidth=2\r\n\t\t\tconst drawArrow=(x,y)=>{\r\n\t\t\t\tconst dx=matrix.a*x+matrix.b*y\r\n\t\t\t\tconst dy=matrix.c*x+matrix.d*y\r\n\t\t\t\tconst dl=Math.sqrt(dx*dx+dy*dy)\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t+(x-dx/dl*arrowLength),\r\n\t\t\t\t\t-(y-dy/dl*arrowLength)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(+x,-y)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t+(x+dx/dl*arrowLength),\r\n\t\t\t\t\t-(y+dy/dl*arrowLength)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t+(x-dy/dl*arrowWidth),\r\n\t\t\t\t\t-(y+dx/dl*arrowWidth)\r\n\t\t\t\t)\r\n\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t+(x+dy/dl*arrowWidth),\r\n\t\t\t\t\t-(y-dx/dl*arrowWidth)\r\n\t\t\t\t)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tctx.save()\r\n\t\t\tctx.fillStyle=ctx.strokeStyle='#888'\r\n\t\t\tconst nx=Math.floor(xRange/arrowSpacing)\r\n\t\t\tconst ny=Math.floor(yRange/arrowSpacing)\r\n\t\t\tfor (let i=-nx;i<=nx;i++) {\r\n\t\t\t\tfor (let j=-ny;j<=ny;j++) {\r\n\t\t\t\t\tdrawArrow(\r\n\t\t\t\t\t\ti*arrowSpacing+0.5*Math.sign(i),\r\n\t\t\t\t\t\tj*arrowSpacing+0.5*Math.sign(j)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawEigenline=(lambda,otherLambda)=>{\r\n\t\t\tconst iconSize=5\r\n\t\t\tlet icon\r\n\t\t\tif (lambda<0) {\r\n\t\t\t\ticon=-1-(otherLambda<0 && lambda<otherLambda)\r\n\t\t\t} else if (lambda>0) {\r\n\t\t\t\ticon=+1+(otherLambda>0 && lambda>otherLambda)\r\n\t\t\t} else {\r\n\t\t\t\ticon=0\r\n\t\t\t}\r\n\t\t\tconst xy=matrix.getEigenvector(lambda)\r\n\t\t\tlet x=xy[0], y=xy[1]\r\n\t\t\tctx.save()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tif (x<0) {\r\n\t\t\t\tx=-x\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (y<0) {\r\n\t\t\t\tctx.scale(1,-1)\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (x<y) { // TODO this will work only for square canvases, should also swap xRange and yRange\r\n\t\t\t\tctx.transform(0,1,1,0,0,0) // swap x,y\r\n\t\t\t\t;[x,y]=[y,x]\r\n\t\t\t}\r\n\t\t\tif (x>0) {\r\n\t\t\t\tconst r=Math.sqrt(x*x+y*y)\r\n\t\t\t\tconst x0=x/r\r\n\t\t\t\tconst y0=y/r\r\n\t\t\t\tconst x1=xRange\r\n\t\t\t\tconst y1=yRange*y/x\r\n\t\t\t\tconst xic=xRange/2*x0\r\n\t\t\t\tconst yic=yRange/2*y0\r\n\t\t\t\tconst xis=iconSize*x0\r\n\t\t\t\tconst yis=iconSize*y0\r\n\t\t\t\tconst drawEigenlineIcon=()=>{\r\n\t\t\t\t\tconst dir=Math.sign(icon)\r\n\t\t\t\t\tconst drawDiamond=()=>{\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(xic-xis,-(yic-yis))\r\n\t\t\t\t\t\tctx.lineTo(xic+yis,-(yic-xis))\r\n\t\t\t\t\t\tctx.lineTo(xic+xis,-(yic+yis))\r\n\t\t\t\t\t\tctx.lineTo(xic-yis,-(yic+xis))\r\n\t\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\t\tctx.fill()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst drawTriangle=(ofs)=>{\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(xic+dir*(ofs*xis-xis-yis),-(yic+dir*(ofs*yis-yis+xis)))\r\n\t\t\t\t\t\tctx.lineTo(xic+dir*(ofs*xis-xis+yis),-(yic+dir*(ofs*yis-yis-xis)))\r\n\t\t\t\t\t\tctx.lineTo(xic+dir*(ofs*xis+xis    ),-(yic+dir*(ofs*yis+yis    )))\r\n\t\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\t\tctx.fill()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dir==0) {\r\n\t\t\t\t\t\tdrawDiamond()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrawTriangle(0)\r\n\t\t\t\t\t\tif (Math.abs(icon)>=2) {\r\n\t\t\t\t\t\t\tdrawTriangle(2)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(-x1,+y1)\r\n\t\t\t\tctx.lineTo(+x1,-y1)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t\tctx.save()\r\n\t\t\t\tdrawEigenlineIcon()\r\n\t\t\t\tctx.scale(-1,-1)\r\n\t\t\t\tdrawEigenlineIcon()\r\n\t\t\t\tctx.restore()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawSolution=(x0,y0,color)=>{\r\n\t\t\tconst iterationLimit=100*Math.max(xRange,yRange)\r\n\t\t\tconst fnOnFractions=(fn,xNum,xDen,yNum,yDen)=>{\r\n\t\t\t\tif (xDen!=0 && yDen!=0) {\r\n\t\t\t\t\treturn fn(xNum/xDen,yNum/yDen)\r\n\t\t\t\t} else if (xDen==0 && yDen!=0) {\r\n\t\t\t\t\treturn yNum/yDen\r\n\t\t\t\t} else if (xDen!=0 && yDen==0) {\r\n\t\t\t\t\treturn xNum/xDen\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawFixedPoint=()=>{\r\n\t\t\t\tconst fixedPointSize=3\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.arc(x0,y0,fixedPointSize,0,2*Math.PI)\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tconst drawSaddleOrNodeSolution=()=>{\r\n\t\t\t\tlet lambda1,lambda2\r\n\t\t\t\tif (matrix.re1<=matrix.re2) {\r\n\t\t\t\t\tlambda1=matrix.re1\r\n\t\t\t\t\tlambda2=matrix.re2\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlambda1=matrix.re2\r\n\t\t\t\t\tlambda2=matrix.re1\r\n\t\t\t\t}\r\n\t\t\t\tconst xy1=matrix.getEigenvector(lambda1)\r\n\t\t\t\tlet x1=xy1[0], y1=xy1[1]\r\n\t\t\t\tconst xy2=matrix.getEigenvector(lambda2)\r\n\t\t\t\tlet x2=xy2[0], y2=xy2[1]\r\n\t\t\t\tif (lambda2<=0) {\r\n\t\t\t\t\t;[lambda1,lambda2]=[-lambda2,-lambda1]\r\n\t\t\t\t\t;[x1,x2]=[x2,x1]\r\n\t\t\t\t\t;[y1,y2]=[y2,y1]\r\n\t\t\t\t}\r\n\t\t\t\tlet k1=+(x2*y0-x0*y2)/(x2*y1-x1*y2)\r\n\t\t\t\tlet k2=-(x1*y0-x0*y1)/(x2*y1-x1*y2)\r\n\t\t\t\tif ((k1==0 && k2==0) || (lambda1==0 && k2==0)) {\r\n\t\t\t\t\tdrawFixedPoint()\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else if (k1==0 && lambda2!=0) {\r\n\t\t\t\t\tlambda1=0 // trigger comb case below\r\n\t\t\t\t} else if (k2==0 && lambda1!=0) {\r\n\t\t\t\t\tlambda2=Math.abs(lambda1)\r\n\t\t\t\t\tlambda1=0 // trigger comb case below\r\n\t\t\t\t\t;[x1,x2]=[x2,x1]\r\n\t\t\t\t\t;[y1,y2]=[y2,y1]\r\n\t\t\t\t\t;[k1,k2]=[k2,k1]\r\n\t\t\t\t}\r\n\t\t\t\tif (lambda1>0) { // node\r\n\t\t\t\t\tlet T1=0\r\n\t\t\t\t\tlet T2=0\r\n\t\t\t\t\tconst dT1=1/Math.max(Math.abs(k1*x1),Math.abs(k1*y1)) // step size is controlled by slow direction\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(0,0)\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tT1+=dT1\r\n\t\t\t\t\t\tT2=Math.pow(T1,lambda2/lambda1)\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+(k1*x1*T1+k2*x2*T2),\r\n\t\t\t\t\t\t\t-(k1*y1*T1+k2*y2*T2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(k1*x1*T1+k2*x2*T2)*Math.sign(k2*x2)>xRange ||\r\n\t\t\t\t\t\t\t(k1*y1*T1+k2*y2*T2)*Math.sign(k2*y2)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else if (lambda1<0 && lambda2>0) { // saddle\r\n\t\t\t\t\tlet t=0 // assumes starting point is in viewport\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst ke1=k1*Math.exp(lambda1*t)\r\n\t\t\t\t\t\tconst ke2=k2*Math.exp(lambda2*t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t(x1*ke1+x2*ke2)*Math.sign(x1*k1)>xRange ||\r\n\t\t\t\t\t\t\t(y1*ke1+y2*ke2)*Math.sign(y1*k1)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t\tconst dt=Math.min(\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke2*lambda2),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke2*lambda2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt-=dt\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst ke1=k1*Math.exp(lambda1*t)\r\n\t\t\t\t\t\tconst ke2=k2*Math.exp(lambda2*t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+(x1*ke1+x2*ke2),\r\n\t\t\t\t\t\t\t-(y1*ke1+y2*ke2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (t>0 && (\r\n\t\t\t\t\t\t\t(x1*ke1+x2*ke2)*Math.sign(x1*k2)>xRange ||\r\n\t\t\t\t\t\t\t(y1*ke1+y2*ke2)*Math.sign(y1*k2)>yRange\r\n\t\t\t\t\t\t)) break\r\n\t\t\t\t\t\tconst dt=Math.min(\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke1*lambda1),\r\n\t\t\t\t\t\t\t1/Math.abs(x1*ke2*lambda2),\r\n\t\t\t\t\t\t\t1/Math.abs(y1*ke2*lambda2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt+=dt\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else if (lambda1==0 && lambda2>0) { // comb\r\n\t\t\t\t\tconst t=fnOnFractions(Math.min,\r\n\t\t\t\t\t\tMath.sign(x2*k2)*xRange-x1*k1, x2*k2,\r\n\t\t\t\t\t\tMath.sign(y2*k2)*yRange-y1*k1, y2*k2\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (t>0) {\r\n\t\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t\t\t+(x1*k1),\r\n\t\t\t\t\t\t\t-(y1*k1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+(x1*k1+x2*k2*t),\r\n\t\t\t\t\t\t\t-(y1*k1+y2*k2*t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawSpiralSolution=()=>{\r\n\t\t\t\tlet alpha=matrix.re1\r\n\t\t\t\tlet beta=matrix.im1\r\n\t\t\t\tif (beta<0) {\r\n\t\t\t\t\tbeta=-beta\r\n\t\t\t\t}\r\n\t\t\t\tconst xxyy=matrix.getComplexEigenvector(alpha,beta)\r\n\t\t\t\tif (alpha<0) {\r\n\t\t\t\t\talpha=-alpha\r\n\t\t\t\t\tbeta=-beta\r\n\t\t\t\t}\r\n\t\t\t\tconst x1=xxyy[0], x2=xxyy[1]\r\n\t\t\t\tconst y1=xxyy[2], y2=xxyy[3]\r\n\t\t\t\tconst k1=+(x2*y0-x0*y2)/(x2*y1-x1*y2)\r\n\t\t\t\tconst k2=-(x1*y0-x0*y1)/(x2*y1-x1*y2)\r\n\t\t\t\tif (k1==0 && k2==0) return\r\n\t\t\t\tconst kxc=k1*x1+k2*x2\r\n\t\t\t\tconst kxs=k2*x1-k1*x2\r\n\t\t\t\tconst kyc=k1*y1+k2*y2\r\n\t\t\t\tconst kys=k2*y1-k1*y2\r\n\t\t\t\tif (alpha==0) { // center\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tconst dt=1/Math.max(kxc,kyc,kxs,kys)\r\n\t\t\t\t\tlet t=0\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst c=Math.cos(t)\r\n\t\t\t\t\t\tconst s=Math.sin(t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+(kxc*c+kxs*s),\r\n\t\t\t\t\t\t\t-(kyc*c+kys*s)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tt+=dt\r\n\t\t\t\t\t\tif (t>=2*Math.PI) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else { // spiral\r\n\t\t\t\t\tconst calculateSemiaxes=()=>{ // https://en.wikipedia.org/wiki/Ellipse#Canonical_form\r\n\t\t\t\t\t\tconst A=kys*kys+kyc*kyc, B=-2*(kxs*kys+kxc*kyc), C=kxs*kxs+kxc*kxc\r\n\t\t\t\t\t\tconst f=kxc*kys-kxs*kyc\r\n\t\t\t\t\t\tconst F=-f*f\r\n\t\t\t\t\t\tconst DIS=B*B-4*A*C\r\n\t\t\t\t\t\tconst A2=2*DIS*F*(A+C-Math.sqrt((A-C)*(A-C)+B*B))/(DIS*DIS)\r\n\t\t\t\t\t\tconst B2=2*DIS*F*(A+C+Math.sqrt((A-C)*(A-C)+B*B))/(DIS*DIS)\r\n\t\t\t\t\t\treturn [A2,B2] // TODO relative axes lengths don't depend on initial conditions, this calculation should be simpler\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst A2B2=calculateSemiaxes()\r\n\t\t\t\t\tconst A2=A2B2[0]\r\n\t\t\t\t\tconst B2=A2B2[1]\r\n\t\t\t\t\tconst B=Math.sqrt(B2)\r\n\t\t\t\t\tconst R2=xRange*xRange+yRange*yRange\r\n\t\t\t\t\t//const t0=-(Math.log(B2)/2+Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\r\n\t\t\t\t\tconst lineWidth=2\r\n\t\t\t\t\tconst t0=(Math.log(lineWidth)-Math.log(B2)/2-Math.log(Math.exp(2*Math.PI*alpha/Math.abs(beta))-1))/alpha\r\n\t\t\t\t\t//const t1=(Math.log(R2)-Math.log(A2))/(2*alpha)\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tconst e0=Math.exp(alpha*t0)\r\n\t\t\t\t\tconst nSegments=Math.ceil(B*e0*2*Math.PI)\r\n\t\t\t\t\tfor (let i=0;i<nSegments;i++) {\r\n\t\t\t\t\t\tconst t=2*Math.PI*i/nSegments\r\n\t\t\t\t\t\tconst c0=Math.cos(t)\r\n\t\t\t\t\t\tconst s0=Math.sin(t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+e0*(kxc*c0+kxs*s0),\r\n\t\t\t\t\t\t\t-e0*(kyc*c0+kys*s0)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\tctx.fill()\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tlet t=t0\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tconst e=Math.exp(alpha*t)\r\n\t\t\t\t\t\tconst c=Math.cos(beta*t)\r\n\t\t\t\t\t\tconst s=Math.sin(beta*t)\r\n\t\t\t\t\t\tctx[i?'lineTo':'moveTo'](\r\n\t\t\t\t\t\t\t+e*(kxc*c+kxs*s),\r\n\t\t\t\t\t\t\t-e*(kyc*c+kys*s)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t//const dtTan=1/Math.abs(beta*B*e)\r\n\t\t\t\t\t\tconst dtRad=Math.log(1/(B*e)+1)/alpha\r\n\t\t\t\t\t\t//t+=Math.min(Math.max(dtTan,1/Math.abs(40*beta)),dtRad)\r\n\t\t\t\t\t\tt+=Math.min(dtRad,1/Math.abs(16*beta))\r\n\t\t\t\t\t\tif (e*e*A2>R2) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst drawDefectiveSolution=()=>{\r\n\t\t\t\tlet lambda=matrix.re1\r\n\t\t\t\tlet x1=(matrix.a-lambda)*x0+matrix.b*y0\r\n\t\t\t\tlet y1=matrix.c*x0+(matrix.d-lambda)*y0\r\n\t\t\t\tif (lambda<0) {\r\n\t\t\t\t\tlambda=-lambda\r\n\t\t\t\t\tx1=-x1\r\n\t\t\t\t\ty1=-y1\r\n\t\t\t\t}\r\n\t\t\t\tif (lambda==0 && x1==0 && y1==0) { // everywhere fixed\r\n\t\t\t\t\tdrawFixedPoint()\r\n\t\t\t\t} if (lambda==0) { // parallel lines\r\n\t\t\t\t\tconst t0=fnOnFractions(Math.min,\r\n\t\t\t\t\t\t-Math.sign(x1)*xRange-x0, x1,\r\n\t\t\t\t\t\t-Math.sign(y1)*yRange-y0, y1\r\n\t\t\t\t\t)\r\n\t\t\t\t\tconst t1=fnOnFractions(Math.max,\r\n\t\t\t\t\t\t+Math.sign(x1)*xRange-x0, x1,\r\n\t\t\t\t\t\t+Math.sign(y1)*yRange-y0, y1\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(\r\n\t\t\t\t\t\t+(x0+t0*x1),\r\n\t\t\t\t\t\t-(y0+t0*y1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t+(x0+t1*x1),\r\n\t\t\t\t\t\t-(y0+t1*y1)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t} else { // star or defective node\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.moveTo(0,0)\r\n\t\t\t\t\tlet T=0\r\n\t\t\t\t\tconst dT=1/Math.max(Math.abs(x0),Math.abs(y0))\r\n\t\t\t\t\tfor (let i=0;i<iterationLimit;i++) {\r\n\t\t\t\t\t\tT+=dT\r\n\t\t\t\t\t\tconst t=Math.log(T)/lambda\r\n\t\t\t\t\t\tctx.lineTo(\r\n\t\t\t\t\t\t\t+T*(x0+t*x1),\r\n\t\t\t\t\t\t\t-T*(y0+t*y1)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tT*(x0+t*x1)*Math.sign(x0)>xRange ||\r\n\t\t\t\t\t\t\tT*(y0+t*y1)*Math.sign(y0)>yRange\r\n\t\t\t\t\t\t) break\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctx.save()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tctx.strokeStyle=ctx.fillStyle=color\r\n\t\t\tif (matrix.im1==0 && matrix.re1!=matrix.re2) {\r\n\t\t\t\tdrawSaddleOrNodeSolution()\r\n\t\t\t} else if (matrix.im1==0 && matrix.re1==matrix.re2) {\r\n\t\t\t\tdrawDefectiveSolution()\r\n\t\t\t} else if (matrix.im1!=0) {\r\n\t\t\t\tdrawSpiralSolution()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.fillStyle='#FFF'\r\n\t\tctx.fillRect(0,0,this.width,this.height)\r\n\t\tctx.restore()\r\n\t\tctx.save()\r\n\t\tctx.translate(xRange,yRange)\r\n\t\tthis.drawAxes(xLabel,yLabel)\r\n\t\tdrawDirectionField()\r\n\t\tif (matrix.im1==0) {\r\n\t\t\tdrawEigenline(matrix.re1,matrix.re2)\r\n\t\t\tif (matrix.re1!=matrix.re2) {\r\n\t\t\t\tdrawEigenline(matrix.re2,matrix.re1)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawSolution(+xRange/2,0,'#08F')\r\n\t\tdrawSolution(-xRange/2,0,'#28F')\r\n\t\tdrawSolution(0,+yRange/2,'#0AF')\r\n\t\tdrawSolution(0,-yRange/2,'#08D')\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=PhaseCanvas\r\n","'use strict'\r\n\r\nconst Canvas=require('./canvas')\r\n\r\nclass TrdetCanvas extends Canvas {\r\n\tredraw(matrix) {\r\n\t\tconst crosshairSize=10\r\n\t\tconst pointerSize=5\r\n\t\tconst pointerMargin=3\r\n\t\tconst trRange=matrix.getRange('tr')\r\n\t\tconst detRange=matrix.getRange('det')\r\n\t\tconst ctx=this.ctx\r\n\t\tconst xRange=this.width/2\r\n\t\tconst yRange=this.height/2\r\n\t\tconst D=matrix.det\r\n\t\tconst T=matrix.tr\r\n\t\tconst drawRegionAreas=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tctx.fillStyle='#FCC'\r\n\t\t\tif (D<0) {\r\n\t\t\t\tctx.fillRect(-xRange,0,xRange*2,yRange)\r\n\t\t\t} else if ((D>0 && 4*D<T*T) || (4*D>T*T) && T!=0) {\r\n\t\t\t\tif (T<0) {\r\n\t\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tif (4*D>T*T) {\r\n\t\t\t\t\tctx.moveTo(xRange,-yRange)\r\n\t\t\t\t\tctx.lineTo(0,-yRange)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.moveTo(xRange,0)\r\n\t\t\t\t}\r\n\t\t\t\tfor (let x=0;x<=xRange;x++) {\r\n\t\t\t\t\tconst t=x*trRange/xRange\r\n\t\t\t\t\tconst d=t*t/4\r\n\t\t\t\t\tconst y=-d*yRange/detRange\r\n\t\t\t\t\tctx.lineTo(x,y)\r\n\t\t\t\t}\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawRegionLines=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tconst drawRegionLinesOnce=(all)=>{\r\n\t\t\t\tconst drawParabola=()=>{\r\n\t\t\t\t\tfor (let x=0;x<=+xRange;x++) {\r\n\t\t\t\t\t\tconst t=x*trRange/xRange\r\n\t\t\t\t\t\tconst d=t*t/4\r\n\t\t\t\t\t\tconst y=-d*yRange/detRange\r\n\t\t\t\t\t\tctx[x?'lineTo':'moveTo'](x,y)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tif (all || (D==0 && T<0)) {\r\n\t\t\t\t\tctx.moveTo(-xRange,0)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D==0 && T>0)) {\r\n\t\t\t\t\tctx.moveTo(+xRange,0)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D>0 && T==0)) {\r\n\t\t\t\t\tctx.moveTo(0,-yRange)\r\n\t\t\t\t\tctx.lineTo(0,0)\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (4*D==T*T && T<0)) {\r\n\t\t\t\t\tctx.save()\r\n\t\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\t\tdrawParabola()\r\n\t\t\t\t\tctx.restore()\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (4*D==T*T && T>0)) {\r\n\t\t\t\t\tdrawParabola()\r\n\t\t\t\t}\r\n\t\t\t\tif (all || (D==0 && T==0)) {\r\n\t\t\t\t\tctx.moveTo(-2,-2)\r\n\t\t\t\t\tctx.lineTo(-2,+2)\r\n\t\t\t\t\tctx.lineTo(+2,+2)\r\n\t\t\t\t\tctx.lineTo(+2,-2)\r\n\t\t\t\t\tctx.closePath()\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke()\r\n\t\t\t}\r\n\t\t\tctx.lineCap='square'\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tdrawRegionLinesOnce(true)\r\n\t\t\tctx.lineWidth=4\r\n\t\t\tctx.strokeStyle='#F88'\r\n\t\t\tdrawRegionLinesOnce()\r\n\t\t\tctx.lineWidth=2\r\n\t\t\tctx.strokeStyle='#400'\r\n\t\t\tdrawRegionLinesOnce()\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tconst drawPosition=()=>{\r\n\t\t\tctx.save()\r\n\t\t\tctx.strokeStyle=ctx.fillStyle='#F00'\r\n\t\t\tlet x=matrix.tr/trRange*xRange\r\n\t\t\tlet y=-matrix.det/detRange*yRange\r\n\t\t\tif (x<0) {\r\n\t\t\t\tctx.scale(-1,1)\r\n\t\t\t\tx=-x\r\n\t\t\t}\r\n\t\t\tif (y<0) {\r\n\t\t\t\tctx.scale(1,-1)\r\n\t\t\t\ty=-y\r\n\t\t\t}\r\n\t\t\tif (x>xRange) {\r\n\t\t\t\tctx.transform(0,1,1,0,0,0)\r\n\t\t\t\t;[x,y]=[y,x]\r\n\t\t\t}\r\n\t\t\tif ((x>xRange && y>yRange-pointerMargin) || (x>xRange-pointerMargin && y>yRange)) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(xRange-pointerMargin,yRange-pointerMargin)\r\n\t\t\t\tctx.lineTo(xRange-pointerMargin,yRange-pointerMargin-pointerSize*Math.SQRT2)\r\n\t\t\t\tctx.lineTo(xRange-pointerMargin-pointerSize*Math.SQRT2,yRange-pointerMargin)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t} else if (y>xRange) {\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(x,yRange-pointerMargin)\r\n\t\t\t\tctx.lineTo(x+pointerSize,yRange-pointerMargin-pointerSize)\r\n\t\t\t\tctx.lineTo(x-pointerSize,yRange-pointerMargin-pointerSize)\r\n\t\t\t\tctx.closePath()\r\n\t\t\t\tctx.fill()\r\n\t\t\t} else {\r\n\t\t\t\tconst s=crosshairSize\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tctx.moveTo(x-s,y)\r\n\t\t\t\tctx.lineTo(x+s,y)\r\n\t\t\t\tctx.moveTo(x,y-s)\r\n\t\t\t\tctx.lineTo(x,y+s)\r\n\t\t\t\tctx.stroke()\r\n\t\t\t}\r\n\t\t\tctx.restore()\r\n\t\t}\r\n\t\tctx.save()\r\n\t\tctx.fillStyle='#FFF'\r\n\t\tctx.fillRect(0,0,this.width,this.height)\r\n\t\tctx.translate(xRange,yRange)\r\n\t\tdrawRegionAreas()\r\n\t\tthis.drawAxes('tr','det')\r\n\t\tdrawRegionLines()\r\n\t\tdrawPosition()\r\n\t\tctx.restore()\r\n\t}\r\n}\r\n\r\nmodule.exports=TrdetCanvas\r\n","'use strict'\r\n\r\nconst LinearEquation=require('./linear-equation')\r\n\r\nclass LinearConstantEquation extends LinearEquation {\r\n\tconstructor(x,f,equation,charPoly) {\r\n\t\tsuper(x,f,equation)\r\n\t\tthis.charPoly=charPoly\r\n\t}\r\n\tparticularSolutionCases() {\r\n\t\tconst x=this.x\r\n\t\tconst f=this.f\r\n\t\treturn nt=>[\r\n\t\t\t...super.particularSolutionCases()(nt),\r\n\t\t\t{type:'case',title:`using time invariance when \\\\( ${f}(t) = ${f}_1(t+t_1) \\\\)`,content:[\r\n\t\t\t\t`find a particular solution \\\\( ${x._('p',1)} \\\\) of:`,\r\n\t\t\t\t`\\\\[ ${this.equation(`${f}_1`,false)(nt)} \\\\]`,\r\n\t\t\t\t`particular solution of the original equation is:`,\r\n\t\t\t\tx._('p').parallelExpression(xp=>`${xp}(t) &= ${xp._(1)}(t+t_1)`),\r\n\t\t\t]},\r\n\t\t\t{type:'case',title:`using exponential response formula when \\\\( ${f}(t) = e^{α t} \\\\), \\\\( \\\\cos(ω t) \\\\), \\\\( \\\\sin(ω t) \\\\), \\\\( e^{α t} \\\\cos(ω t) \\\\) or \\\\( e^{α t} \\\\sin(ω t) \\\\)`,content:[\r\n\t\t\t\t`define characteristic polynomial \\\\( P \\\\) as`,\r\n\t\t\t\t`\\\\[ P(λ) = ${this.charPoly} \\\\]`,\r\n\t\t\t\t`get \\\\( r \\\\in \\\\mathbb{C} \\\\) by equating \\\\( ${f}(t) \\\\) to \\\\( e^{r t} \\\\), \\\\( \\\\operatorname{Re}(e^{r t}) \\\\) or \\\\( \\\\operatorname{Im}(e^{r t}) \\\\)`,\r\n\t\t\t\t`\\\\[ \\\\begin{array}{cc} `+\r\n\t\t\t\t\t`${f}(t) & r \\\\\\\\[1em] `+\r\n\t\t\t\t\t`\\\\hline `+\r\n\t\t\t\t\t`e^{α t} & α \\\\\\\\`+\r\n\t\t\t\t\t`\\\\cos(ω t) & i ω \\\\\\\\ `+\r\n\t\t\t\t\t`\\\\sin(ω t) & i ω \\\\\\\\ `+\r\n\t\t\t\t\t`e^{α t} \\\\cos(ω t) & α + i ω \\\\\\\\ `+\r\n\t\t\t\t\t`e^{α t} \\\\sin(ω t) & α + i ω `+\r\n\t\t\t\t`\\\\end{array} \\\\]`,\r\n\t\t\t\t{type:'derivation',content:[\r\n\t\t\t\t\tx.firstComponentExpressionPreamble(\r\n\t\t\t\t\t\tc=>`${c}the equation can be written as one of`\r\n\t\t\t\t\t),\r\n\t\t\t\t\tx.firstComponentExpression(\r\n\t\t\t\t\t\tx1=>`\\\\begin{aligned} `+\r\n\t\t\t\t\t\t\t\t\t\t  `P\\\\left(${nt.ddt}\\\\right) ${x1} &= e^{r t} \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`\\\\operatorname{Re}\\\\left( P\\\\left(${nt.ddt}\\\\right) ${x1} \\\\right) &= \\\\operatorname{Re}(e^{r t}) \\\\\\\\ `+\r\n\t\t\t\t\t\t\t`\\\\operatorname{Im}\\\\left( P\\\\left(${nt.ddt}\\\\right) ${x1} \\\\right) &= \\\\operatorname{Im}(e^{r t}) `+\r\n\t\t\t\t\t\t`\\\\end{aligned}`\r\n\t\t\t\t\t),\r\n\t\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t\t`the rest of this derivation uses the first form:`,\r\n\t\t\t\t\t\tx.firstComponentExpression(\r\n\t\t\t\t\t\t\tx1=>`P\\\\left(${nt.ddt}\\\\right) ${x1} = e^{r t}`\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t]},\r\n\t\t\t\t\t`evaluate \\\\( P\\\\left(${nt.ddt}\\\\right) e^{r t} \\\\)`,\r\n\t\t\t\t\t`\\\\[ P\\\\left(${nt.ddt}\\\\right) e^{r t} = P(r) e^{r t} \\\\]`,\r\n\t\t\t\t\t{type:'switch',title:`\\\\( P(r) \\\\) is`,content:[\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( P(r) \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`divide by \\\\( P(r) \\\\)`,\r\n\t\t\t\t\t\t\t`\\\\[ P\\\\left(${nt.ddt}\\\\right) \\\\frac{e^{r t}}{P(r)} = e^{r t} \\\\]`,\r\n\t\t\t\t\t\t\t`compare with`,\r\n\t\t\t\t\t\t\tx.firstComponentExpression(\r\n\t\t\t\t\t\t\t\tx1=>`P\\\\left(${nt.ddt}\\\\right) ${x1} = e^{r t}`\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tx.firstComponentExpressionPreamble(\r\n\t\t\t\t\t\t\t\tc=>`to see that ${c}a particular solution is`\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tx._('p').firstComponentExpression(\r\n\t\t\t\t\t\t\t\tx1=>`${x1} = \\\\frac{e^{r t}}{P(r)}`\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t{type:'case',title:`\\\\( P(r) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t`assume that \\\\( r \\\\) is a variable and differentiate by it`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\frac{\\\\partial}{\\\\partial r}\\\\left(\\\\! P\\\\left(\\\\!${nt.ddt}\\\\!\\\\right) e^{r t} \\\\!\\\\right) = \\\\frac{\\\\partial}{\\\\partial r}\\\\left( P(r) e^{r t} \\\\right) \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ \\\\begin{multline} `+\r\n\t\t\t\t\t\t\t\t`P\\\\left(\\\\!${nt.ddt}\\\\!\\\\right) \\\\frac{\\\\partial e^{r t}}{\\\\partial r} = \\\\\\\\ `+\r\n\t\t\t\t\t\t\t\t`= \\\\frac{\\\\partial P(r)}{\\\\partial r} e^{r t} + P(r) \\\\frac{\\\\partial e^{r t}}{\\\\partial r} `+\r\n\t\t\t\t\t\t\t`\\\\end{multline} \\\\]`,\r\n\t\t\t\t\t\t\t`\\\\[ P\\\\left(\\\\!${nt.ddt}\\\\!\\\\right) t e^{r t} = P'(r) e^{r t} + P(r) t e^{r t} \\\\]`,\r\n\t\t\t\t\t\t\t`treat \\\\( r \\\\) as a constant again with \\\\( P(r) = 0 \\\\)`,\r\n\t\t\t\t\t\t\t`\\\\[ P\\\\left(${nt.ddt}\\\\right) t e^{r t} = P'(r) e^{r t} \\\\]`,\r\n\t\t\t\t\t\t\t{type:'switch',title:`\\\\( P'(r) \\\\) is`,content:[\r\n\t\t\t\t\t\t\t\t{type:'case',title:`\\\\( P'(r) \\\\ne 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`divide by \\\\( P'(r) \\\\)`,\r\n\t\t\t\t\t\t\t\t\t`\\\\[ P\\\\left(${nt.ddt}\\\\right) \\\\frac{t e^{r t}}{P'(r)} = e^{r t} \\\\]`,\r\n\t\t\t\t\t\t\t\t\t`compare with`,\r\n\t\t\t\t\t\t\t\t\tx.firstComponentExpression(\r\n\t\t\t\t\t\t\t\t\t\tx1=>`P\\\\left(${nt.ddt}\\\\right) ${x1} = e^{r t}`\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\tx.firstComponentExpressionPreamble(\r\n\t\t\t\t\t\t\t\t\t\tc=>`to see that ${c}a particular solution is`\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\tx._('p').firstComponentExpression(\r\n\t\t\t\t\t\t\t\t\t\tx1=>`${x1} = \\\\frac{t e^{r t}}{P'(r)}`\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t\t{type:'case',title:`\\\\( P'(r) = 0 \\\\)`,content:[\r\n\t\t\t\t\t\t\t\t\t`continue differentiating by \\\\( r \\\\)`,\r\n\t\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t\t]},\r\n\t\t\t\t\t\t]},\r\n\t\t\t\t\t]},\r\n\t\t\t\t]},\r\n\t\t\t\t`if`,\r\n\t\t\t\t`\\\\[ P(r) {=} P'(r) {=} \\\\cdots {=} P^{(m-1)}(r) {=} 0 \\\\]`,\r\n\t\t\t\t`and`,\r\n\t\t\t\t`\\\\[ P^{(m)} \\\\ne 0 \\\\]`,\r\n\t\t\t\t{type:'note',content:[\r\n\t\t\t\t\t`this is equivalent to:`,\r\n\t\t\t\t\t`if \\\\( r \\\\) is a root of \\\\( P \\\\) with multiplicity \\\\( m \\\\)`,\r\n\t\t\t\t\t`where \\\\( m = 0 \\\\) means \\\\( r \\\\) is not a root of \\\\( P \\\\)`,\r\n\t\t\t\t]},\r\n\t\t\t\tx._('p').firstComponentExpressionPreamble(\r\n\t\t\t\t\tc=>`then ${c}a particular solution is one of`\r\n\t\t\t\t),\r\n\t\t\t\tx._('p').firstComponentExpression(\r\n\t\t\t\t\tx1=>`\\\\begin{array}{cc} `+\r\n\t\t\t\t\t\t`${f}(t) & ${x1} \\\\\\\\[1em] `+\r\n\t\t\t\t\t\t`\\\\hline `+\r\n\t\t\t\t\t\t`e^{α t} & \\\\frac{\\\\displaystyle t^m \\\\cdot e^{α t}}{\\\\displaystyle P^{(m)}(α)} \\\\\\\\`+\r\n\t\t\t\t\t\t`\\\\cos(ω t) & \\\\operatorname{Re}\\\\left(\\\\! \\\\frac{\\\\displaystyle t^m \\\\cdot e^{i ω t}}{\\\\displaystyle P^{(m)}(i ω)} \\\\!\\\\right) \\\\\\\\ `+\r\n\t\t\t\t\t\t`\\\\sin(ω t) & \\\\operatorname{Im}\\\\left(\\\\! \\\\frac{\\\\displaystyle t^m \\\\cdot e^{i ω t}}{\\\\displaystyle P^{(m)}(i ω)} \\\\!\\\\right) \\\\\\\\ `+\r\n\t\t\t\t\t\t`e^{α t} \\\\cos(ω t) & \\\\operatorname{Re}\\\\left(\\\\! \\\\frac{\\\\displaystyle t^m \\\\cdot e^{(α {+} i ω) t}}{\\\\displaystyle P^{(m)}(α {+} i ω)} \\\\!\\\\right) \\\\\\\\ `+\r\n\t\t\t\t\t\t`e^{α t} \\\\sin(ω t) & \\\\operatorname{Im}\\\\left(\\\\! \\\\frac{\\\\displaystyle t^m \\\\cdot e^{(α {+} i ω) t}}{\\\\displaystyle P^{(m)}(α {+} i ω)} \\\\!\\\\right) `+\r\n\t\t\t\t\t`\\\\end{array}`\r\n\t\t\t\t),\r\n\t\t\t\t...x._('p').restDiffComponentExpressionContent()(nt),\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=LinearConstantEquation\r\n","'use strict'\r\n\r\nclass LinearEquation {\r\n\tconstructor(x,f,equation) {\r\n\t\tthis.x=x\r\n\t\tthis.f=f\r\n\t\tthis.equation=equation\r\n\t}\r\n\tgetContentFor_generalSolutionMethod(homogeneousGeneralSolution) {\r\n\t\tconst x=this.x\r\n\t\tconst extraSection=(title,content)=>(content!==undefined\r\n\t\t\t? {type:'extra',title,content}\r\n\t\t\t: title\r\n\t\t)\r\n\t\treturn nt=>[\r\n\t\t\textraSection(`find the general solution \\\\( ${x._('h')} \\\\) of the associated homogeneous equation`,homogeneousGeneralSolution),\r\n\t\t\t{type:'switch',title:`find a particular solution \\\\( ${x._('p')} \\\\) of the original equation`,\r\n\t\t\t\tcontent:this.particularSolutionCases()(nt)\r\n\t\t\t},\r\n\t\t\t`general solution (with arbitrary constants included in \\\\( ${x._('h')}) \\\\):`,\r\n\t\t\tx.parallelExpression(x=>`${x} &= ${x._('h')} + ${x._('p')}`)\r\n\t\t]\r\n\t}\r\n\tparticularSolutionCases() {\r\n\t\tconst x=this.x\r\n\t\tconst f=this.f\r\n\t\treturn nt=>[\r\n\t\t\t// TODO guess coefficients - needs example\r\n\t\t\t{type:'case',title:`using superposition when \\\\( ${f}(t) = k_1 ${f}_1(t) + k_2 ${f}_2(t) + \\\\cdots \\\\)`,content:[\r\n\t\t\t\t`for each term \\\\( k_j ${f}_j(t) \\\\), find a particular solution \\\\( ${x._('p','j')} \\\\) of:`,\r\n\t\t\t\t`\\\\[ ${this.equation(`${f}_j`,false)(nt)} \\\\]`,\r\n\t\t\t\t`particular solution of the original equation is a linear combinations of these solutions:`,\r\n\t\t\t\tx._('p').parallelExpression(xp=>`${xp} &= k_1 ${xp._(1)} + k_2 ${xp._(2)} + \\\\cdots`),\r\n\t\t\t]},\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=LinearEquation\r\n","'use strict'\r\n\r\nconst UnorderedClassSubgraph=require('./unordered-class-subgraph')\r\nconst OrderedClassSubgraph=require('./ordered-class-subgraph')\r\nconst TheadLayout=require('./thead-layout')\r\nconst TrLayout=require('./tr-layout')\r\nconst Notation=require('./notation')\r\nconst data=require('./data')\r\nconst FormRowsOutput=require('./form-rows-output')\r\nconst TraitRowsOutput=require('./trait-rows-output')\r\n\r\nconst i18n=(id)=>{\r\n\tconst strings={\r\n\t\t'trait.entity': \"Associated entities\",\r\n\t\t'trait.associatedHomogeneousEquation': \"Associated homogeneous equation\",\r\n\t\t'trait.characteristicEquation': \"<a href='https://en.wikipedia.org/wiki/Characteristic_equation_(calculus)'>Characteristic equation</a>\",\r\n\t\t'trait.halfLife': \"<a href='https://en.wikipedia.org/wiki/Half-life'>Half-life</a>\",\r\n\r\n\t\t'trait.property': \"Properties\",\r\n\t\t'trait.isoclineProperty': \"Property of <a href='https://en.wikipedia.org/wiki/Isocline'>isoclines</a>\",\r\n\t\t'trait.solutionRelation': \"Solution relation properties\",\r\n\t\t'trait.shiftSolutionRelation': \"Time/value shifts of solutions\",\r\n\t\t'trait.linearitySolutionRelation': \"Linear/affine properties of solutions\",\r\n\t\t'trait.solutionSpaceBasis': \"Basis of the solution space\",\r\n\t\t'trait.homogeneitySolutionRelation': \"Homogeneity of solutions\",\r\n\t\t'trait.additivitySolutionRelation': \"Additivity of solutions\",\r\n\t\t'trait.linearCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Linear_combination'>Linear combination</a> property of solutions\",\r\n\t\t'trait.affineCombinationSolutionRelation': \"<a href='https://en.wikipedia.org/wiki/Affine_combination'>Affine combination</a> property of solutions\",\r\n\t\t'trait.realitySolutionRelation': \"Reality principle\", // https://ocw.mit.edu/courses/mathematics/18-03-differential-equations-spring-2010/readings/supp_notes/MIT18_03S10_chapter_6.pdf\r\n\t\t'trait.associatedSolutionRelation': \"Associated homogeneous equation solution\",\r\n\r\n\t\t// TODO remove\r\n\t\t'trait.transform': \"Transforms to different types\",\r\n\t\t'trait.orderReduction': \"Order reduction\",\r\n\r\n\t\t'trait.solutionMethod': \"Solutions\",\r\n\t\t'trait.generalSolutionMethod': \"General solution\",\r\n\t\t'trait.phaseSolutionMethod': \"<a href='https://en.wikipedia.org/wiki/Phase_space'>Phase space</a> trajectory\",\r\n\t\t'trait.equilibriumSolutionMethod': \"<a href='https://en.wikipedia.org/wiki/Equilibrium_point'>Equilibrium solutions</a>\",\r\n\t\t'trait.testSolutionMethod': \"Solution testing\",\r\n\r\n\t\t'trait.plot': \"Plot\",\r\n\t}\r\n\treturn strings[id]\r\n}\r\n\r\n$(function(){\r\n\t$('.crnx-ode-properties').each(function(){\r\n\t\tconst $container=$(this).empty()\r\n\t\tconst selectedNodes={} // visible nodes // TODO rename to visibleNodes\r\n\r\n\t\t// options\r\n\t\tlet traitAlignmentLevel=1\r\n\t\tconst maxTraitAlignmentLevel=4\r\n\t\tlet dependentVariables='yvz'\r\n\t\tconst availableDependentVariables=['xyw','yvz']\r\n\t\tconst viewDependentVariables={\r\n\t\t\txyw: `\\\\( x \\\\), \\\\( y \\\\), \\\\( w \\\\)`,\r\n\t\t\tyvz: `\\\\( y \\\\), \\\\( v \\\\), \\\\( z \\\\)`,\r\n\t\t}\r\n\t\tlet notation=new Notation(dependentVariables)\r\n\r\n\t\tfor (let id in data.classes) {\r\n\t\t\tif (data.classes[id].importance<=1) {\r\n\t\t\t\tselectedNodes[id]=true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet unorderedClassSubgraph,theadLayout,orderedClassSubgraph,trLayout\r\n\t\tconst recomputeLayouts=()=>{\r\n\t\t\tunorderedClassSubgraph=new UnorderedClassSubgraph(data.classes,selectedNodes)\r\n\t\t\ttheadLayout=new TheadLayout(unorderedClassSubgraph)\r\n\t\t\torderedClassSubgraph=new OrderedClassSubgraph(unorderedClassSubgraph,theadLayout.columns)\r\n\t\t\ttrLayout=new TrLayout(unorderedClassSubgraph,data.classes,theadLayout.columns)\r\n\t\t}\r\n\t\trecomputeLayouts()\r\n\r\n\t\t// TODO put into classSubgraph\r\n\t\tconst breadthWalk=(graph,id)=>{\r\n\t\t\tconst result=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst queue=[id]\r\n\t\t\twhile (queue.length>0) {\r\n\t\t\t\tid=queue.shift()\r\n\t\t\t\tif (visited[id]) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tif (!selectedNodes[id]) {\r\n\t\t\t\t\tresult.push(id)\r\n\t\t\t\t}\r\n\t\t\t\tqueue.push(...Object.keys(graph[id]).sort())\r\n\t\t\t}\r\n\t\t\treturn result\r\n\t\t}\r\n\t\tconst writeButton=(text,tip)=>{\r\n\t\t\tconst $button=$(`<button type='button'><span>${text}</span></button>`)\r\n\t\t\tif (tip!==undefined) {\r\n\t\t\t\t$button.attr('title',tip)\r\n\t\t\t}\r\n\t\t\treturn $button\r\n\t\t}\r\n\r\n\t\tlet $tableContainer,$quickSelect,$quickSelectButton\r\n\t\tconst updateQuickSelectButton=()=>{\r\n\t\t\tconst id=$quickSelect.val()\r\n\t\t\t$quickSelectButton.text(selectedNodes[id]\r\n\t\t\t\t? \"Delete\"\r\n\t\t\t\t: \"Add\"\r\n\t\t\t)\r\n\t\t}\r\n\t\tconst deleteNode=id=>{\r\n\t\t\tdelete selectedNodes[id]\r\n\t\t\t$quickSelect.children(`[value=\"${id}\"]`).removeClass('added')\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\trecomputeLayouts()\r\n\t\t\twriteTable()\r\n\t\t}\r\n\t\tconst addNode=id=>{\r\n\t\t\tselectedNodes[id]=true\r\n\t\t\t$quickSelect.children(`[value=\"${id}\"]`).addClass('added')\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\trecomputeLayouts()\r\n\t\t\twriteTable()\r\n\t\t}\r\n\t\tconst writeQuickSelectControls=()=>{\r\n\t\t\tconst $div=$(\"<div>\").append(\r\n\t\t\t\t$quickSelect=$(\"<select>\").append(\r\n\t\t\t\t\tObject.keys(data.classes).sort().map(id=>{\r\n\t\t\t\t\t\tconst $option=$(\"<option>\").val(id).text(data.classes[id].name)\r\n\t\t\t\t\t\tif (selectedNodes[id]) {\r\n\t\t\t\t\t\t\t$option.addClass('added')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $option\r\n\t\t\t\t\t})\r\n\t\t\t\t).change(function(){\r\n\t\t\t\t\tupdateQuickSelectButton()\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$quickSelectButton=$(\"<button>\").click(function(){\r\n\t\t\t\t\tconst id=$quickSelect.val()\r\n\t\t\t\t\tif (selectedNodes[id]) {\r\n\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\t\" \",\r\n\t\t\t\t$(\"<button>Clear all</button>\").click(function(){\r\n\t\t\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\t\t\tdelete selectedNodes[id]\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$quickSelect.children().removeClass('added')\r\n\t\t\t\t\tupdateQuickSelectButton()\r\n\t\t\t\t\trecomputeLayouts()\r\n\t\t\t\t\twriteTable()\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tupdateQuickSelectButton()\r\n\t\t\treturn $div\r\n\t\t}\r\n\t\tconst writeTable=()=>{ // TODO rename (doesn't return object)\r\n\t\t\tconst visibleAncestors={} // including self\r\n\t\t\tconst computeVisibleAncestors=(id,aid)=>{\r\n\t\t\t\tvisibleAncestors[id][aid]=true\r\n\t\t\t\tfor (let naid in unorderedClassSubgraph.visibleParents[aid]) {\r\n\t\t\t\t\tcomputeVisibleAncestors(id,naid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let id in selectedNodes) {\r\n\t\t\t\tvisibleAncestors[id]={}\r\n\t\t\t\tcomputeVisibleAncestors(id,id)\r\n\t\t\t}\r\n\t\t\tconst $classHighlightables={}\r\n\t\t\tlet $attachedMenu, $attachedToButton, attachedDirection, attachTimeoutId\r\n\t\t\tconst setCellClasses=($cell,cell)=>{\r\n\t\t\t\tfor (let dir of ['b','t','bt','rl','rt','bl']) {\r\n\t\t\t\t\tif (cell[dir]) {\r\n\t\t\t\t\t\t$cell.addClass(dir)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst writeTheadButton=($cell,text,tip,dir,nodes)=>{\r\n\t\t\t\tconst keyCodeEnter=13\r\n\t\t\t\tconst keyCodeSpace=32\r\n\t\t\t\tconst keyCodeUp=38\r\n\t\t\t\tconst keyCodeDown=40\r\n\t\t\t\tconst $button=writeButton(text,tip).addClass(dir).click(function(){\r\n\t\t\t\t\tconst removeAttachedMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton.removeClass('attached-t attached-b')\r\n\t\t\t\t\t\t$attachedMenu.remove()\r\n\t\t\t\t\t\tclearTimeout(attachTimeoutId)\r\n\t\t\t\t\t\t$attachedToButton=undefined\r\n\t\t\t\t\t\t$attachedMenu=undefined\r\n\t\t\t\t\t\tattachedDirection=undefined\r\n\t\t\t\t\t\tattachTimeoutId=undefined\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst startAttachingMenu=()=>{\r\n\t\t\t\t\t\t$attachedToButton=$button\r\n\t\t\t\t\t\t$attachedMenu=$(\"<ul>\").append(nodes.map(\r\n\t\t\t\t\t\t\tid=>$(\"<li tabindex='0'>\"+data.classes[id].name+\"</li>\").click(function(){\r\n\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\t\t\t\tif (!attachedDirection) return // not yet decided on attach direction (this can't happen)\r\n\t\t\t\t\t\t\t\tif (ev.keyCode==keyCodeUp) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).prev()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='b') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown) {\r\n\t\t\t\t\t\t\t\t\tconst $toFocus=$(this).next()\r\n\t\t\t\t\t\t\t\t\tif ($toFocus.length) {\r\n\t\t\t\t\t\t\t\t\t\t$toFocus.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t} else if (attachedDirection=='t') {\r\n\t\t\t\t\t\t\t\t\t\t$button.focus()\r\n\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (ev.keyCode==keyCodeEnter || ev.keyCode==keyCodeSpace) {\r\n\t\t\t\t\t\t\t\t\taddNode(id)\r\n\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t\t$cell.append($attachedMenu)\r\n\t\t\t\t\t\tattachTimeoutId=setTimeout(()=>{ // can calculate height only after it's displayed\r\n\t\t\t\t\t\t\tconst mh=$attachedMenu.outerHeight()\r\n\t\t\t\t\t\t\tconst mo=$attachedMenu.offset()\r\n\t\t\t\t\t\t\tconst bh=$button.outerHeight()\r\n\t\t\t\t\t\t\tconst bo=$button.offset()\r\n\t\t\t\t\t\t\tlet t=bo.top-mh+1\r\n\t\t\t\t\t\t\tif (dir!='t' || t<0) { // want below or doesn't fit to screen above the button\r\n\t\t\t\t\t\t\t\tt=bo.top+bh-1\r\n\t\t\t\t\t\t\t\tattachedDirection='b'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$attachedMenu.insertBefore($button)\r\n\t\t\t\t\t\t\t\tattachedDirection='t'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$attachedMenu.offset({\r\n\t\t\t\t\t\t\t\ttop: t,\r\n\t\t\t\t\t\t\t\tleft: mo.left,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t$attachedMenu.addClass('attached')\r\n\t\t\t\t\t\t\t$button.addClass('attached-'+attachedDirection)\r\n\t\t\t\t\t\t},0)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!$button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif ($attachedToButton) {\r\n\t\t\t\t\t\t\tremoveAttachedMenu() // close menu opened elsewhere\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstartAttachingMenu()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tremoveAttachedMenu() // close menu here\r\n\t\t\t\t\t}\r\n\t\t\t\t}).keydown(function(ev){\r\n\t\t\t\t\tif ($button.is($attachedToButton)) {\r\n\t\t\t\t\t\tif (ev.keyCode==keyCodeUp && attachedDirection=='t') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().last().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t} else if (ev.keyCode==keyCodeDown && attachedDirection=='b') {\r\n\t\t\t\t\t\t\t$attachedMenu.children().first().focus()\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn $button\r\n\t\t\t}\r\n\t\t\tconst writeTheadCell=cell=>{\r\n\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\tif (cell.node!==undefined) {\r\n\t\t\t\t\tconst id=cell.node\r\n\t\t\t\t\t$classHighlightables[id]=$cell\r\n\t\t\t\t\t$cell.append(data.classes[id].htmlName)\r\n\t\t\t\t\tconst ancestors=breadthWalk(unorderedClassSubgraph.allParents,id).reverse()\r\n\t\t\t\t\tif (ancestors.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add ancestor\",\"Add one of supertypes of this equation type\",'t',ancestors)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst descendants=breadthWalk(unorderedClassSubgraph.allChildren,id)\r\n\t\t\t\t\tif (descendants.length>0) {\r\n\t\t\t\t\t\t$cell.append(\r\n\t\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t\twriteTheadButton($cell,\"Add descendant\",\"Add one of subtypes of this equation type\",'b',descendants)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$cell.hover(function(){\r\n\t\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t\t$classHighlightables[aid].addClass('highlight')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\tfor (let aid in visibleAncestors[id]) {\r\n\t\t\t\t\t\t\t$classHighlightables[aid].removeClass('highlight')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn $cell\r\n\t\t\t}\r\n\t\t\tconst writeThead=()=>{\r\n\t\t\t\tconst $thead=$(\"<thead>\")\r\n\t\t\t\tfor (let i=0;i<theadLayout.nodeLayers.length;i++) {\r\n\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t$(\"<tr class='nodes'>\").append(\r\n\t\t\t\t\t\t\ttheadLayout.nodeLayers[i].map(writeTheadCell)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (i<theadLayout.arcLayers.length) {\r\n\t\t\t\t\t\t$thead.append(\r\n\t\t\t\t\t\t\ttheadLayout.arcLayers[i].map(row=>$(\"<tr class='arcs'>\").append(\r\n\t\t\t\t\t\t\t\trow.map(cell=>{\r\n\t\t\t\t\t\t\t\t\tconst $cell=$(\"<th>\")\r\n\t\t\t\t\t\t\t\t\tsetCellClasses($cell,cell)\r\n\t\t\t\t\t\t\t\t\treturn $cell\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $thead\r\n\t\t\t}\r\n\t\t\tconst writeTfoot=()=>{\r\n\t\t\t\treturn $(\"<tfoot>\").append(\r\n\t\t\t\t\t$(\"<tr>\").append(\r\n\t\t\t\t\t\ttheadLayout.columns.map(id=>$(\"<td>\").append(\r\n\t\t\t\t\t\t\twriteButton(\"Delete\",\"Delete this equation type\").click(function(){\r\n\t\t\t\t\t\t\t\tdeleteNode(id)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tconst writeTraitAlignmentControls=()=>{\r\n\t\t\t\tconst $container=$(\"<form>Trait alignment level:</form>\")\r\n\t\t\t\tfor (let i=0;i<=maxTraitAlignmentLevel;i++) {\r\n\t\t\t\t\t$container.append(\r\n\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t\t$(\"<input type='radio' name='trait-alignment-level'>\").prop('checked',i==traitAlignmentLevel).click(function(){\r\n\t\t\t\t\t\t\t\ttraitAlignmentLevel=i\r\n\t\t\t\t\t\t\t\twriteTable()\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\" \"+i\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn $container\r\n\t\t\t}\r\n\t\t\tconst writeDependentVariablesControls=()=>{\r\n\t\t\t\t// TODO text inputs with\r\n\t\t\t\t//\tsuggested names: u, v, w, x, y, z\r\n\t\t\t\t//\texamples: x,y,w; y,v,z\r\n\t\t\t\tconst $container=$(\"<form>Dependent variables notation (main variable, second variable in 2d system, substitution variable):</form>\")\r\n\t\t\t\tfor (let dvs of availableDependentVariables) {\r\n\t\t\t\t\t$container.append(\r\n\t\t\t\t\t\t\" \",\r\n\t\t\t\t\t\t$(\"<label>\").append(\r\n\t\t\t\t\t\t\t$(\"<input type='radio' name='dependent-variables'>\").prop('checked',dvs==dependentVariables).click(function(){\r\n\t\t\t\t\t\t\t\tdependentVariables=dvs\r\n\t\t\t\t\t\t\t\tnotation=new Notation(dependentVariables)\r\n\t\t\t\t\t\t\t\twriteTable()\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\" \"+viewDependentVariables[dvs]\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn $container\r\n\t\t\t}\r\n\t\t\tconst writeGeneralNotes=()=>{\r\n\t\t\t\tconst nt=notation\r\n\t\t\t\treturn $(\"<ul>\").append(\r\n\t\t\t\t\t`<li>how to read the diagram: <ul>`+\r\n\t\t\t\t\t\t`<li>equation type names are written among arrows that show the relationship between types</li>`+\r\n\t\t\t\t\t\t`<li>properties of an equation type are listed in the table column below its name</li>`+\r\n\t\t\t\t\t\t`<li>every property of the equation type on the tip of the arrow <span class='arrow'></span> is also true for the equation type on the other end of the arrow (like <a href='https://en.wikipedia.org/wiki/Class_diagram'>class diagram</a>)</li>`+\r\n\t\t\t\t\t`</ul></li>`,\r\n\t\t\t\t\t`<li>all functions have to be continuous on the interval of interest</li>`,\r\n\t\t\t\t\t`<li>\\\\( ${nt.x} \\\\), \\\\( ${nt.y} \\\\) or \\\\( ${nt.w} \\\\) possibly with a subscript is a function of \\\\( t \\\\); other functions are written with an argument like this: \\\\( f(t) \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( C \\\\), \\\\( K \\\\) and other uppercase letters are arbitrary constants</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t + C \\\\) is a family of antiderivatives of \\\\( f(t) \\\\) with parameter \\\\( C \\\\)</li>`,\r\n\t\t\t\t\t`<li>\\\\( \\\\int\\\\!f(t)\\\\,\\\\mathrm{d}t \\\\) is any single antiderivative of \\\\( f(t) \\\\)`\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t$tableContainer.empty()\r\n\t\t\tconst traitRowsOutput=new TraitRowsOutput(\r\n\t\t\t\ti18n,theadLayout,trLayout,\r\n\t\t\t\tdata.traits,data.classes, // TODO pass data before layouts\r\n\t\t\t\ttraitAlignmentLevel,notation\r\n\t\t\t)\r\n\t\t\tconst formRowsOutput=new FormRowsOutput(\r\n\t\t\t\ti18n,orderedClassSubgraph,theadLayout,\r\n\t\t\t\tdata.classes,\r\n\t\t\t\tnotation,\r\n\t\t\t\t$classHighlightables,\r\n\t\t\t\t(classId,form)=>traitRowsOutput.updateForm(classId,form)\r\n\t\t\t)\r\n\t\t\tif (Object.keys(selectedNodes).length>0) $tableContainer.append(\r\n\t\t\t\t$(\"<table class='classes'>\").append(\r\n\t\t\t\t\twriteThead(),\r\n\t\t\t\t\twriteTfoot(),\r\n\t\t\t\t\t$(\"<tbody>\").append(\r\n\t\t\t\t\t\tformRowsOutput.$trs,\r\n\t\t\t\t\t\ttraitRowsOutput.$trs\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t$tableContainer.append(\r\n\t\t\t\twriteTraitAlignmentControls(),\r\n\t\t\t\twriteDependentVariablesControls(),\r\n\t\t\t\t\"<p>General notes:</p>\",\r\n\t\t\t\twriteGeneralNotes()\r\n\t\t\t)\r\n\t\t\tMathJax.Hub.Queue([\"Typeset\",MathJax.Hub]) // TODO pass table container\r\n\t\t}\r\n\t\t$container.append(\r\n\t\t\twriteQuickSelectControls(),\r\n\t\t\t$tableContainer=$(\"<div>\")\r\n\t\t)\r\n\t\twriteTable()\r\n\t})\r\n})\r\n","'use strict'\r\n\r\n// TODO replace with:\r\n//\tsymbols table\r\n//\ttex helpers\r\n\r\nclass Notation {\r\n\tconstructor(dependentVariables) {\r\n\t\tthis.dependentVariables=dependentVariables // main variable, second variable in 2d system, substitution variable\r\n\t}\r\n\r\n\t// variable names\r\n\tget x() { // main dependent variable\r\n\t\treturn this.dependentVariables.charAt(0)\r\n\t}\r\n\tget X() { // vector of dependent variables\r\n\t\treturn '\\\\mathbf{'+this.dependentVariables.charAt(0).toUpperCase()+'}'\r\n\t}\r\n\tget y() { // second dependent variable for systems of 2 equations\r\n\t\treturn this.dependentVariables.charAt(1)\r\n\t}\r\n\tget w() { // substituted variable\r\n\t\treturn this.dependentVariables.charAt(2)\r\n\t}\r\n\r\n\t// tex shortcuts\r\n\tdd(a,b,n) {\r\n\t\tif (a===undefined) a=''\r\n\t\tif (b===undefined) b='t'\r\n\t\tif (n===undefined) n=1\r\n\t\tif (n==0) {\r\n\t\t\treturn a\r\n\t\t} else if (n==1) {\r\n\t\t\treturn `\\\\frac{\\\\mathrm{d}${a}}{\\\\mathrm{d}${b}}`\r\n\t\t} else {\r\n\t\t\treturn `\\\\frac{\\\\mathrm{d}^{${n}}${a}}{\\\\mathrm{d}${b}^{${n}}}`\r\n\t\t}\r\n\t}\r\n\tget ddt() {\r\n\t\treturn this.dd()\r\n\t}\r\n\tget dxdt() {\r\n\t\treturn this.dd(this.x)\r\n\t}\r\n\tsint(f,t) { // short integral = with no spacing before dt\r\n\t\tif (t===undefined) t='t'\r\n\t\treturn `\\\\int\\\\!${f}\\\\mathrm{d}${t}`\r\n\t}\r\n\tint(f,t) {\r\n\t\treturn this.sint(f+'\\\\,',t)\r\n\t}\r\n\tsys2(a,b) {\r\n\t\treturn `\\\\left\\\\{ \\\\begin{aligned} ${a} \\\\\\\\ ${b} \\\\end{aligned} \\\\right.`\r\n\t}\r\n\tvec2(a,b) {\r\n\t\treturn `\\\\begin{bmatrix} ${a} \\\\\\\\ ${b} \\\\end{bmatrix}`\r\n\t}\r\n\tsvec2(a,b) {\r\n\t\treturn `\\\\left[ \\\\begin{smallmatrix} ${a} \\\\\\\\ ${b} \\\\end{smallmatrix} \\\\right]`\r\n\t}\r\n\tmat2(a,b,c,d) {\r\n\t\treturn `\\\\begin{bmatrix} ${a} & ${b} \\\\\\\\ ${c} & ${d} \\\\end{bmatrix}`\r\n\t}\r\n\tsmat2(a,b,c,d) {\r\n\t\treturn `\\\\left[ \\\\begin{smallmatrix} ${a} & ${b} \\\\\\\\ ${c} & ${d} \\\\end{smallmatrix} \\\\right]`\r\n\t}\r\n\tsub(x,s) {\r\n\t\tconst i=x.indexOf('_')\r\n\t\tif (i<0) {\r\n\t\t\treturn x+'_'+s\r\n\t\t} else {\r\n\t\t\treturn x.slice(0,i)+'_{'+x.slice(i+1)+','+s+'}'\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=Notation\r\n","'use strict'\r\n\r\n// TODO maybe don't need this class - use iterators on unordered subgraph instead?\r\nclass OrderedClassGraph {\r\n\tconstructor(unorderedClassGraph,orderedClasses) {\r\n\t\tconst ranks={}\r\n\t\torderedClasses.forEach((id,i)=>{\r\n\t\t\tranks[id]=i\r\n\t\t})\r\n\t\tthis.visibleParents={}\r\n\t\tfor (let id in unorderedClassGraph.visibleParents) {\r\n\t\t\tthis.visibleParents[id]=Object.keys(unorderedClassGraph.visibleParents[id]).sort((id1,id2)=>ranks[id1]-ranks[id2])\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=OrderedClassGraph\r\n","'use strict'\r\n\r\n// TODO include in notation.js\r\n\r\nclass TexDepvar {\r\n\t//abstract:\r\n\t// _(...ii)\r\n\t// toString()\r\n\t// parallelExpression(template)\r\n\t// firstComponentExpressionPreamble(template)\r\n\t// firstComponentExpression(template)\r\n\t// restDiffComponentExpressionContent()(nt) // TODO remove nt\r\n}\r\n\r\nmodule.exports=TexDepvar\r\n","'use strict'\r\n\r\n// TODO include in notation.js\r\n\r\nconst TexDepvar=require('./tex-depvar')\r\n\r\nclass TexScalarDepvar extends TexDepvar {\r\n\tconstructor(x,subscripts=[]) {\r\n\t\tsuper()\r\n\t\tthis.x=x\r\n\t\tthis.subscripts=subscripts\r\n\t}\r\n\t_(...ii) {\r\n\t\treturn new TexScalarDepvar(this.x,[...this.subscripts,...ii])\r\n\t}\r\n\ttoString() {\r\n\t\tif (this.subscripts.length>0) {\r\n\t\t\treturn `${this.x}_{${this.subscripts.join()}}` // TODO comma-less joins like ij\r\n\t\t} else {\r\n\t\t\treturn this.x\r\n\t\t}\r\n\t}\r\n\tparallelExpression(template) {\r\n\t\treturn `\\\\[ ${template(this).replace(/&/g,'')} \\\\]`\r\n\t}\r\n\tfirstComponentExpressionPreamble(template) {\r\n\t\treturn template(``,this)\r\n\t}\r\n\tfirstComponentExpression(template) {\r\n\t\treturn `\\\\[ ${template(this)} \\\\]`\r\n\t}\r\n\trestDiffComponentExpressionContent() {\r\n\t\treturn nt=>[]\r\n\t}\r\n}\r\n\r\nmodule.exports=TexScalarDepvar\r\n","'use strict'\r\n\r\n// TODO include in notation.js\r\n\r\nconst TexDepvar=require('./tex-depvar')\r\nconst TexScalarDepvar=require('./tex-scalar-depvar')\r\n\r\nclass TexSystemDepvar extends TexDepvar {\r\n\tconstructor(x,subscripts=[]) {\r\n\t\tsuper()\r\n\t\tthis.x=x\r\n\t\tthis.subscripts=subscripts\r\n\t}\r\n\tcomponent(i) {\r\n\t\treturn new TexScalarDepvar(this.x,[i,...this.subscripts])\r\n\t}\r\n\t_(...ii) {\r\n\t\treturn new TexSystemDepvar(this.x,[...this.subscripts,...ii])\r\n\t}\r\n\ttoString() {\r\n\t\treturn `{\\\\scriptstyle \\\\left\\\\{ \\\\begin{array}{c} `+\r\n\t\t\t`${this.component(1)} \\\\\\\\[-1em] `+\r\n\t\t\t`\\\\cdots \\\\\\\\[-1em] `+\r\n\t\t\t`${this.component('n')} `+\r\n\t\t`\\\\end{array} \\\\right.}`\r\n\t}\r\n\tparallelExpression(template) {\r\n\t\treturn `\\\\[ \\\\left\\\\{ \\\\begin{aligned} `+\r\n\t\t\t`${template(this.component(1))} \\\\\\\\ `+\r\n\t\t\t`\\\\vdots \\\\\\\\ `+\r\n\t\t\t`${template(this.component('n'))} `+\r\n\t\t`\\\\end{aligned} \\\\right. \\\\]`\r\n\t}\r\n\tfirstComponentExpressionPreamble(template) {\r\n\t\treturn template(`first component of `,this.component(1))\r\n\t}\r\n\tfirstComponentExpression(template) {\r\n\t\treturn `\\\\[ ${template(this.component(1))} \\\\]`\r\n\t}\r\n\trestDiffComponentExpressionContent() {\r\n\t\treturn nt=>[\r\n\t\t\t`find other components by differentiating \\\\( ${this.component(1)} \\\\):`,\r\n\t\t\t`\\\\[ \\\\begin{array}{rcl}`+\r\n\t\t\t\t`${this.component(2)} &=& ${nt.dd(this.component(1),'t',1)} \\\\\\\\`+\r\n\t\t\t\t`${this.component(3)} &=& ${nt.dd(this.component(1),'t',2)} \\\\\\\\`+\r\n\t\t\t\t`&\\\\vdots \\\\\\\\`+\r\n\t\t\t\t`${this.component('n')} &=& ${nt.dd(this.component(1),'t','n-1')}`+\r\n\t\t\t`\\\\end{array} \\\\]`,\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=TexSystemDepvar\r\n","'use strict'\r\n\r\n// TODO include in notation.js\r\n\r\nconst TexDepvar=require('./tex-depvar')\r\nconst TexScalarDepvar=require('./tex-scalar-depvar')\r\n\r\nclass TexVectorDepvar extends TexDepvar {\r\n\tconstructor(X,x,subscripts=[]) {\r\n\t\tsuper()\r\n\t\tthis.X=X\r\n\t\tthis.x=x\r\n\t\tthis.subscripts=subscripts\r\n\t}\r\n\t_(...ii) {\r\n\t\treturn new TexVectorDepvar(this.X,this.x,[...this.subscripts,...ii])\r\n\t}\r\n\ttoString() {\r\n\t\tif (this.subscripts.length>0) {\r\n\t\t\treturn `${this.X}_{${this.subscripts.join()}}` // TODO comma-less joins like ij\r\n\t\t} else {\r\n\t\t\treturn this.X\r\n\t\t}\r\n\t}\r\n\tparallelExpression(template) {\r\n\t\treturn `\\\\[ ${template(this).replace(/&/g,'')} \\\\]`\r\n\t}\r\n\tfirstComponentExpressionPreamble(template) {\r\n\t\tconst x=new TexScalarDepvar(this.x,this.subscripts)\r\n\t\treturn template(`first component of `,x)\r\n\t}\r\n\tfirstComponentExpression(template) {\r\n\t\tconst x=new TexScalarDepvar(this.x,this.subscripts)\r\n\t\treturn `\\\\[ ${template(x)} \\\\]`\r\n\t}\r\n\trestDiffComponentExpressionContent() {\r\n\t\tconst x=new TexScalarDepvar(this.x,this.subscripts)\r\n\t\treturn nt=>[\r\n\t\t\t`find other components by differentiating \\\\( ${x} \\\\):`,\r\n\t\t\t`\\\\[ ${this} = \\\\begin{bmatrix}`+\r\n\t\t\t\t`${x} \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(x,'t',1)} \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(x,'t',2)} \\\\\\\\`+\r\n\t\t\t\t`\\\\vdots \\\\\\\\`+\r\n\t\t\t\t`${nt.dd(x,'t','n-1')}`+\r\n\t\t\t`\\\\end{bmatrix} \\\\]`,\r\n\t\t]\r\n\t}\r\n}\r\n\r\nmodule.exports=TexVectorDepvar\r\n","'use strict'\r\n\r\nconst sum=(...terms)=>{\r\n\tconst mergeSign=(sign,term)=>{\r\n\t\tif (sign=='-') {\r\n\t\t\tsign='+'\r\n\t\t\tif (term[0][0]=='-') {\r\n\t\t\t\tterm=[term[0].slice(1),...term.slice(1)]\r\n\t\t\t} else {\r\n\t\t\t\tterm=['-'+term[0],...term.slice(1)]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn [sign,term]\r\n\t}\r\n\tconst alterSign=(sign,term)=>{\r\n\t\tif (term[0][0]=='-') {\r\n\t\t\tterm=[term[0].slice(1),...term.slice(1)]\r\n\t\t\tif (sign=='+') {\r\n\t\t\t\tsign='-'\r\n\t\t\t} else if (sign=='-') {\r\n\t\t\t\tsign='+'\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn [sign,term]\r\n\t}\r\n\tlet result=''\r\n\tlet sign=''\r\n\tlet empty=true\r\n\tfor (let term of terms) {\r\n\t\tif (Array.isArray(term) && term[0]!=0) {\r\n\t\t\tterm=term.filter(factor=>factor!=1)\r\n\t\t\tif (term.length==0) term=[1]\r\n\t\t\tif (empty) {\r\n\t\t\t\t[sign,term]=mergeSign(sign,term)\r\n\t\t\t\tresult+=term.join(' ')\r\n\t\t\t\tempty=false\r\n\t\t\t} else {\r\n\t\t\t\t[sign,term]=alterSign(sign,term)\r\n\t\t\t\tresult+=' '+sign+' '+term.join(' ')\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (term=='=') {\r\n\t\t\t\tif (empty) {\r\n\t\t\t\t\tresult+='0'\r\n\t\t\t\t}\r\n\t\t\t\tresult+=' = '\r\n\t\t\t\tsign=''\r\n\t\t\t\tempty=true\r\n\t\t\t} else {\r\n\t\t\t\tsign=term\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (empty) {\r\n\t\tresult+='0'\r\n\t}\r\n\treturn result\r\n}\r\n\r\nconst blockSum=(...terms)=>`\\\\[ `+sum(...terms)+` \\\\]`\r\n\r\nmodule.exports={sum,blockSum}\r\n","'use strict'\r\n\r\nconst makeNodeLabelLayers=require('./thead-layout/node-layers')\r\nconst makeArcLocationLayers=require('./thead-layout/arc-layers')\r\nconst makeLayoutLayers=require('./thead-layout/cell-layers')\r\n\r\nclass TheadLayout {\r\n\tconstructor(unorderedClassGraph) {\r\n\t\tconst orderedVisibleDepthNodes=makeNodeLabelLayers(unorderedClassGraph.visibleParents,unorderedClassGraph.visibleDepthNodes)\r\n\t\tconst arcLocationLayers=makeArcLocationLayers(orderedVisibleDepthNodes,unorderedClassGraph.visibleParents)\r\n\t\tconst t=makeLayoutLayers(orderedVisibleDepthNodes,arcLocationLayers)\r\n\t\tthis.columns=[].concat(...orderedVisibleDepthNodes)\r\n\t\tthis.nodeLayers=t[0]\r\n\t\tthis.arcLayers=t[1]\r\n\t}\r\n}\r\n\r\nmodule.exports=TheadLayout\r\n","'use strict'\r\n\r\nmodule.exports=(depthList,parents)=>{ // TODO would prefer ordered parents list\r\n\tconst merge=(a,b)=>{ // can also use lodash union and sort\r\n\t\tconst c=[]\r\n\t\tlet i=0, j=0\r\n\t\twhile (i<a.length || j<b.length) {\r\n\t\t\tif (j>=b.length) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (i>=a.length) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else if (a[i]<b[j]) {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t} else if (a[i]>b[j]) {\r\n\t\t\t\tc.push(b[j++])\r\n\t\t\t} else {\r\n\t\t\t\tc.push(a[i++])\r\n\t\t\t\tj++\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn c\r\n\t}\r\n\tconst arcRows=[]\r\n\tconst xs={}\r\n\tlet x=0\r\n\tfor (let i=0;i<depthList.length;i++) {\r\n\t\tfor (const node of depthList[i]) {\r\n\t\t\txs[node]=x++\r\n\t\t}\r\n\t\tif (i>0) {\r\n\t\t\tconst arcs=[]\r\n\t\t\tfor (let j=depthList[i].length-1;j>=0;j--) {\r\n\t\t\t\tconst node=depthList[i][j]\r\n\t\t\t\tconst parentXs=Object.keys(parents[node]).map(parentNode=>xs[parentNode]).sort((a,b)=>a-b)\r\n\t\t\t\tarcs.push([parentXs,[xs[node]]])\r\n\t\t\t}\r\n\t\t\tfor (let j=1;j<arcs.length;j++) {\r\n\t\t\t\tif (String(arcs[j-1][0])===String(arcs[j][0])) { // sloppy but should be ok for numbers\r\n\t\t\t\t\tarcs[j-1][1]=merge(arcs[j-1][1],arcs[j][1]) // merge children - parents already merged\r\n\t\t\t\t\tarcs.splice(j,1)\r\n\t\t\t\t\tj-=1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tarcRows.push(arcs)\r\n\t\t}\r\n\t}\r\n\treturn arcRows\r\n}\r\n","'use strict'\r\n\r\n// TODO fake lodash\r\nconst sum=arr=>arr.reduce((a,b)=>a+b,0)\r\n//const times=(n,fn)=>Array(n).map((v,i)=>fn(i))\r\nconst times=(n,fn)=>{\r\n\tvar arr=Array(n)\r\n\tfor (var i=0;i<n;i++) {\r\n\t\tarr[i]=fn(i)\r\n\t}\r\n\treturn arr\r\n}\r\nconst head=arr=>arr[0]\r\nconst last=arr=>arr[arr.length-1]\r\n\r\nmodule.exports=(nodeLabelLayers,arcLocationLayers)=>{\r\n\tconst layoutWidth=sum(nodeLabelLayers.map(x=>x.length))\r\n\tconst makeBlankRow=()=>times(layoutWidth,()=>({}))\r\n\tconst nodeLayoutLayers=[], arcLayoutLayers=[]\r\n\tconst drawArcUp=(i,j,k)=>{\r\n\t\tfor (;i>=0;i--) {\r\n\t\t\tfor (j-=1;j>=0;j--) {\r\n\t\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t\t}\r\n\t\t\tif (nodeLayoutLayers[i][k].node!==undefined) {\r\n\t\t\t\tnodeLayoutLayers[i][k].b=true\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tnodeLayoutLayers[i][k].bt=true\r\n\t\t\tif (i<=0) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tj=arcLayoutLayers[i-1].length\r\n\t\t}\r\n\t}\r\n\tconst drawArcDown=(i,j,k)=>{\r\n\t\tfor (j+=1;j<arcLayoutLayers[i].length;j++) {\r\n\t\t\tarcLayoutLayers[i][j][k].bt=true\r\n\t\t}\r\n\t\tnodeLayoutLayers[i+1][k].t=true\r\n\t}\r\n\t// create empty cells\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tnodeLayoutLayers.push(makeBlankRow())\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tarcLayoutLayers.push(arcLocationLayers[i].map(makeBlankRow))\r\n\t}\r\n\t// fill cells\r\n\tlet x=0\r\n\tfor (let i=0;i<nodeLabelLayers.length;i++) {\r\n\t\tfor (const node of nodeLabelLayers[i]) {\r\n\t\t\tnodeLayoutLayers[i][x++].node=node\r\n\t\t}\r\n\t\tif (i>=arcLocationLayers.length) continue\r\n\t\tfor (let j=0;j<arcLocationLayers[i].length;j++) {\r\n\t\t\tconst parentLocations=arcLocationLayers[i][j][0]\r\n\t\t\tconst childLocations=arcLocationLayers[i][j][1]\r\n\t\t\tlet pi=0, ci=0\r\n\t\t\tfor (let k=0;k<layoutWidth;k++) {\r\n\t\t\t\tif (k>head(parentLocations) && k<last(childLocations)) {\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rl=true\r\n\t\t\t\t}\r\n\t\t\t\tif (k==parentLocations[pi]) {\r\n\t\t\t\t\tpi++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].rt=true\r\n\t\t\t\t\tdrawArcUp(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t\tif (k==childLocations[ci]) {\r\n\t\t\t\t\tci++\r\n\t\t\t\t\tarcLayoutLayers[i][j][k].bl=true\r\n\t\t\t\t\tdrawArcDown(i,j,k)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn [nodeLayoutLayers,arcLayoutLayers]\r\n}\r\n","'use strict'\r\n\r\n// dag = {nodeLabel:{parentLabel:true,...},...}\r\n// nodes = {nodeLabel:true,...}\r\nmodule.exports=(visibleParents,visibleDepthNodes)=>{\r\n\t// sort nodes at each depth by\r\n\t//\tlexicographic parent order\r\n\t//\tlabel\r\n\tconst orderedVisibleDepthNodes=[]\r\n\tlet nextParentOrder=0\r\n\tconst parentOrder={}\r\n\tfor (let depth in visibleDepthNodes) {\r\n\t\torderedVisibleDepthNodes[depth]=Object.keys(visibleDepthNodes[depth])\r\n\t\tconst sortedParents={}\r\n\t\tfor (let node in visibleDepthNodes[depth]) {\r\n\t\t\tsortedParents[node]=Object.keys(visibleParents[node]).map(\r\n\t\t\t\tparentNode=>parentOrder[parentNode]\r\n\t\t\t).sort((a,b)=>a-b)\r\n\t\t}\r\n\t\torderedVisibleDepthNodes[depth].sort((node0,node1)=>{\r\n\t\t\tconst p0=sortedParents[node0]\r\n\t\t\tconst p1=sortedParents[node1]\r\n\t\t\tfor (let i=0;i<p0.length||i<p1.length;i++) {\r\n\t\t\t\tconst cmpLen=(i<p0.length)-(i<p1.length)\r\n\t\t\t\tif (cmpLen!=0) {\r\n\t\t\t\t\treturn cmpLen\r\n\t\t\t\t}\r\n\t\t\t\tconst cmpOrd=p0[i]-p1[i]\r\n\t\t\t\tif (cmpOrd!=0) {\r\n\t\t\t\t\treturn cmpOrd\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (node0<node1) {\r\n\t\t\t\treturn -1\r\n\t\t\t} else if (node0>node1) {\r\n\t\t\t\treturn +1\r\n\t\t\t} else {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t})\r\n\t\tfor (const node of orderedVisibleDepthNodes[depth]) {\r\n\t\t\tparentOrder[node]=nextParentOrder++\r\n\t\t}\r\n\t}\r\n\treturn orderedVisibleDepthNodes\r\n}\r\n","'use strict'\r\n\r\nclass TrLayout {\r\n\tconstructor(classSubgraph,classData,classColumns) {\r\n\t\tthis.classSubgraph=classSubgraph\r\n\t\tthis.classData=classData\r\n\t\tthis.classColumns=classColumns\r\n\t}\r\n\r\n\t// returns list of cells: list of (class id, trait id)\r\n\t// \tclass id = which class to take property from\r\n\t// returns null if row is to be skipped\r\n\tgetSubtreeLayout(traitSubtree) {\r\n\t\tconst ancestorsHaveIntegratedTrait=(classId,traitId)=>{\r\n\t\t\tconst visited={}\r\n\t\t\tconst walk=classId=>{\r\n\t\t\t\tif (visited[classId]) return false\r\n\t\t\t\tvisited[classId]=true\r\n\t\t\t\tif (getIntegratedClassesForTrait(classId,traitId).length>0) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\tfor (let vpid in this.classSubgraph.visibleParents[classId]) {\r\n\t\t\t\t\tif (walk(vpid)) {\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tfor (let vpid in this.classSubgraph.visibleParents[classId]) {\r\n\t\t\t\tif (walk(vpid)) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tconst getIntegratedClassesForTrait=(classId,traitId)=>{ // TODO memoize?\r\n\t\t\tconst integratedClassIds=[]\r\n\t\t\tconst visited={}\r\n\t\t\tconst walk=id=>{\r\n\t\t\t\tif (visited[id]) return\r\n\t\t\t\tvisited[id]=true\r\n\t\t\t\tconst trait=this.classData[id].traits[traitId]\r\n\t\t\t\tif (trait) {\r\n\t\t\t\t\tif (!trait.close || ancestorsHaveIntegratedTrait(classId,traitId)) {\r\n\t\t\t\t\t\tintegratedClassIds.push(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tObject.keys(this.classSubgraph.integratedAncestors[classId][id]).sort().forEach(walk)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twalk(classId)\r\n\t\t\treturn integratedClassIds\r\n\t\t}\r\n\r\n\t\tconst cells=this.classColumns.map(classId=>{\r\n\t\t\tconst cell=[]\r\n\t\t\tconst walkTraits=(traitSubtree)=>{\r\n\t\t\t\tconst traitId=traitSubtree[0]\r\n\t\t\t\tconst traitChildren=traitSubtree[1]\r\n\t\t\t\tif (traitChildren) {\r\n\t\t\t\t\ttraitChildren.forEach(walkTraits)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (const id of getIntegratedClassesForTrait(classId,traitId)) {\r\n\t\t\t\t\t\tcell.push([id,traitId])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twalkTraits(traitSubtree)\r\n\t\t\treturn cell\r\n\t\t})\r\n\r\n\t\t// compared traits filtering\r\n\t\tconst keepTraits={}\r\n\t\tfor (const cell of cells) {\r\n\t\t\tfor (const classTraitId of cell) {\r\n\t\t\t\tconst classId=classTraitId[0]\r\n\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\tconst trait=this.classData[classId].traits[traitId]\r\n\t\t\t\tif (!trait.compare) {\r\n\t\t\t\t\tkeepTraits[traitId]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i=0;i<cells.length;i++) {\r\n\t\t\tcells[i]=cells[i].filter(classTraitId=>{\r\n\t\t\t\tconst traitId=classTraitId[1]\r\n\t\t\t\treturn keepTraits[traitId]\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// empty row detection\r\n\t\tif (cells.some(cell=>cell.length>0)) {\r\n\t\t\treturn cells\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TrLayout\r\n","'use strict'\r\n\r\nconst detailsPolyfill=require('crnx-base/details-polyfill')\r\n\r\nconst mathjaxDetailsFixAndPolyfill=function(){\r\n\tdetailsPolyfill.apply(this)\r\n\t$(this).on('toggle',function(){\r\n\t\t// mathjax common html renderer needs this to set correct font size\r\n\t\t// have to do it on every details opening, not just once b/c user can request redraw at any time\r\n\t\t// closed <details> behave like display:none; see http://stackoverflow.com/questions/36779037/mathjax-2-6-font-size-in-hidden-elements\r\n\t\tif ($(this).attr('open')) { // can't test for prop('open') when it's polyfilled\r\n\t\t\tMathJax.Hub.Queue([\"Rerender\",MathJax.Hub,this])\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// produces array of <tr>'s in this.$trs\r\nclass TraitRowsOutput {\r\n\tconstructor(i18n,theadLayout,trLayout,traitData,classData,traitAlignmentLevel,notation) {\r\n\t\tthis.columnTraitCells=theadLayout.columns.map(()=>[])\r\n\t\tconst writeTraitItem=(forClassId,fromClassId,traitId,selectedForm)=>{\r\n\t\t\tconst trait=classData[fromClassId].traits[traitId]\r\n\t\t\tif (!trait.contents) return // when trait is closed w/o contents\r\n\t\t\tconst getTitle=()=>{\r\n\t\t\t\tif (trait.title!==undefined) {\r\n\t\t\t\t\treturn trait.title\r\n\t\t\t\t} else if (trait.compare) {\r\n\t\t\t\t\treturn \"Property comparable to <em>\"+i18n('trait.'+traitId)+\"</em>\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn i18n('trait.'+traitId)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst $trait=$(\"<details class='trait'>\").append(\r\n\t\t\t\t$(\"<summary>\").append(getTitle())\r\n\t\t\t).each(mathjaxDetailsFixAndPolyfill)\r\n\t\t\tconst rec=(line)=>{\r\n\t\t\t\tif (typeof line == 'string') {\r\n\t\t\t\t\treturn $(\"<div class='line'>\").append(line)\r\n\t\t\t\t} else if (typeof line == 'function') {\r\n\t\t\t\t\treturn line()\r\n\t\t\t\t} else if (line.type=='derivation' || line.type=='proof' || line.type=='example' || line.type=='case' || line.type=='extra') {\r\n\t\t\t\t\treturn $(\"<details>\").append(\r\n\t\t\t\t\t\t$(\"<summary>\").append(line.title!==undefined ? line.title : line.type),\r\n\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t).each(mathjaxDetailsFixAndPolyfill)\r\n\t\t\t\t} else if (line.type=='switch') {\r\n\t\t\t\t\treturn $(\"<div class='\"+line.type+\"'>\").append(\r\n\t\t\t\t\t\t$(\"<div class='condition'>\").append(line.title!==undefined ? line.title : line.type,':'),\r\n\t\t\t\t\t\t$(\"<div class='cases'>\").append(\r\n\t\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn $(\"<div class='\"+line.type+\"'>\").append(\r\n\t\t\t\t\t\tline.content.map(rec)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet hasSelectedForm=false\r\n\t\t\tfor (let selectedFormType of selectedForm.split(',')) {\r\n\t\t\t\tif (trait.contents[selectedFormType]!==undefined) {\r\n\t\t\t\t\t$trait.append(trait.contents[selectedFormType](notation).map(rec))\r\n\t\t\t\t\thasSelectedForm=true\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!hasSelectedForm) {\r\n\t\t\t\tlet preferredForm\r\n\t\t\t\tfor (let form of classData[fromClassId].forms) {\r\n\t\t\t\t\tif (form.is.split(',')/*:Array*/.includes(trait.formType)) {\r\n\t\t\t\t\t\tpreferredForm=form\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$trait.append(\r\n\t\t\t\t\trec({type:'note',content:[\r\n\t\t\t\t\t\t\"when equation is written as\"+(forClassId!=fromClassId ? \" <em>\"+classData[fromClassId].htmlName+\"</em>:\" : \":\"),\r\n\t\t\t\t\t\t\"\\\\[\"+preferredForm.equation(notation)+\"\\\\]\",\r\n\t\t\t\t\t]}),\r\n\t\t\t\t\ttrait.contents[trait.formType](notation).map(rec)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn $trait\r\n\t\t}\r\n\t\tconst writeTraitCell=(forClassId,traitCell,selectedForm)=>{\r\n\t\t\tconst $cell=$(\"<td>\")\r\n\t\t\tif (traitCell.length>0) {\r\n\t\t\t\t// TODO put trait+form logic into TrLayout\r\n\t\t\t\t// ..or not - not sure if it's useful\r\n\t\t\t\t//const selectedFormTypes=selectedForm.split(',')\r\n\t\t\t\t//let traitCellFitting=traitCell.filter(([fromClassId,traitId])=>{\r\n\t\t\t\t//\tconst trait=classData[fromClassId].traits[traitId]\r\n\t\t\t\t//\treturn selectedFormTypes.some(selectedFormType=>trait.contents[selectedFormType]!==undefined)\r\n\t\t\t\t//})\r\n\t\t\t\t//if (traitCellFitting.length==0) { // TODO wrong! need to have at least one of each trait\r\n\t\t\t\t//\ttraitCellFitting=traitCell\r\n\t\t\t\t//}\r\n\t\t\t\t//$cell.append(traitCellFitting.map(([fromClassId,traitId])=>{\r\n\t\t\t\t//\treturn writeTraitItem(forClassId,fromClassId,traitId,selectedForm)\r\n\t\t\t\t//}))\r\n\t\t\t\t$cell.append(traitCell.map(([fromClassId,traitId])=>{\r\n\t\t\t\t\treturn writeTraitItem(forClassId,fromClassId,traitId,selectedForm)\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t\treturn $cell\r\n\t\t}\r\n\t\tconst writeTraitRow=(traitSubtree)=>{\r\n\t\t\tconst traitCells=trLayout.getSubtreeLayout(traitSubtree)\r\n\t\t\tif (!traitCells) return null\r\n\t\t\treturn $(\"<tr>\").append(traitCells.map(\r\n\t\t\t\t(traitCell,iColumn)=>{\r\n\t\t\t\t\tconst forClassId=theadLayout.columns[iColumn]\r\n\t\t\t\t\tconst selectedForm=classData[forClassId].forms[0].is\r\n\t\t\t\t\tconst cellWriterForForm=form=>writeTraitCell(forClassId,traitCell,form)\r\n\t\t\t\t\tconst $cell=cellWriterForForm(selectedForm)\r\n\t\t\t\t\tthis.columnTraitCells[iColumn].push([$cell,cellWriterForForm])\r\n\t\t\t\t\treturn $cell\r\n\t\t\t\t}\r\n\t\t\t))\r\n\t\t}\r\n\t\tthis.$trs=[]\r\n\t\tconst rec=(traitSubtree,depth)=>{\r\n\t\t\tconst traitId=traitSubtree[0]\r\n\t\t\tconst traitChildren=traitSubtree[1]\r\n\t\t\tif (depth>=traitAlignmentLevel || !traitChildren) {\r\n\t\t\t\tthis.$trs.push(writeTraitRow(traitSubtree))\r\n\t\t\t} else {\r\n\t\t\t\ttraitChildren.forEach(traitChild=>rec(traitChild,depth+1))\r\n\t\t\t}\r\n\t\t}\r\n\t\trec(['root',traitData],0)\r\n\t}\r\n\tupdateForm(iColumn,form) {\r\n\t\tfor (let i=0;i<this.columnTraitCells[iColumn].length;i++) {\r\n\t\t\tconst [$oldCell,cellWriterForForm]=this.columnTraitCells[iColumn][i]\r\n\t\t\tconst $newCell=cellWriterForForm(form)\r\n\t\t\t$oldCell.replaceWith($newCell)\r\n\t\t\tthis.columnTraitCells[iColumn][i][0]=$newCell\r\n\t\t\tMathJax.Hub.Queue([\"Typeset\",MathJax.Hub,$newCell[0]])\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=TraitRowsOutput\r\n","'use strict'\r\n\r\nclass UnorderedClassGraph {\r\n\tconstructor(classData,visibleClasses) {\r\n\t\tconst invertGraph=(graph)=>{\r\n\t\t\tconst igraph={}\r\n\t\t\tfor (let id in graph) {\r\n\t\t\t\tigraph[id]={}\r\n\t\t\t}\r\n\t\t\tfor (let id in graph) {\r\n\t\t\t\tfor (let pid in graph[id]) {\r\n\t\t\t\t\tigraph[pid][id]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn igraph\r\n\t\t}\r\n\r\n\t\t// this.allParents and this.allChildren\r\n\t\tthis.allParents={}\r\n\t\tfor (let id in classData) {\r\n\t\t\tthis.allParents[id]=classData[id].parents\r\n\t\t}\r\n\t\tthis.allChildren=invertGraph(this.allParents)\r\n\r\n\t\t// this.visibleParents, this.visibleChildren, this.visibleDepthNodes\r\n\t\tconst ancestorDistances={} // {node:{ancestorNode:distance,...},...}; node is any node, ancestorNode is one of selectedNodes\r\n\t\tconst addAncestorDistance=(fromNode,toNode,distance)=>{\r\n\t\t\tconst oldDistance=ancestorDistances[fromNode][toNode]\r\n\t\t\tconst newDistance=(oldDistance===undefined\r\n\t\t\t\t? distance\r\n\t\t\t\t: Math.max(distance,oldDistance)\r\n\t\t\t)\r\n\t\t\tancestorDistances[fromNode][toNode]=newDistance\r\n\t\t}\r\n\t\tconst traverseNode=node=>{\r\n\t\t\tif (ancestorDistances[node]) {\r\n\t\t\t\treturn // already visited\r\n\t\t\t}\r\n\t\t\tancestorDistances[node]={}\r\n\t\t\tfor (let parentNode in this.allParents[node]) {\r\n\t\t\t\ttraverseNode(parentNode)\r\n\t\t\t\tif (visibleClasses[parentNode]) {\r\n\t\t\t\t\taddAncestorDistance(node,parentNode,1)\r\n\t\t\t\t}\r\n\t\t\t\tfor (let ancestorNode in ancestorDistances[parentNode]) {\r\n\t\t\t\t\tconst parentDistance=ancestorDistances[parentNode][ancestorNode]\r\n\t\t\t\t\taddAncestorDistance(node,ancestorNode,parentDistance+!!visibleClasses[parentNode])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.visibleDepthNodes=[]\r\n\t\tthis.visibleParents={}\r\n\t\tfor (let node in visibleClasses) {\r\n\t\t\ttraverseNode(node)\r\n\t\t\tlet depth=0\r\n\t\t\tthis.visibleParents[node]={}\r\n\t\t\tfor (let ancestorNode in ancestorDistances[node]) {\r\n\t\t\t\tconst distance=ancestorDistances[node][ancestorNode]\r\n\t\t\t\tif (distance>depth) {\r\n\t\t\t\t\tdepth=distance\r\n\t\t\t\t}\r\n\t\t\t\tif (distance==1) {\r\n\t\t\t\t\tthis.visibleParents[node][ancestorNode]=true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.visibleDepthNodes[depth]===undefined) {\r\n\t\t\t\tthis.visibleDepthNodes[depth]={}\r\n\t\t\t}\r\n\t\t\tthis.visibleDepthNodes[depth][node]=true\r\n\t\t}\r\n\t\tthis.visibleChildren=invertGraph(this.visibleParents)\r\n\r\n\t\t// this.integratedAncestors = ancestors that are not (visible parents and/or ancestors of visible parents)\r\n\t\tthis.integratedAncestors={}\r\n\t\tfor (let cid in visibleClasses) {\r\n\t\t\tconst masked={}\r\n\t\t\tconst maskAncestors=id=>{\r\n\t\t\t\tif (masked[id]) return\r\n\t\t\t\tmasked[id]=true\r\n\t\t\t\tfor (let pid in this.allParents[id]) {\r\n\t\t\t\t\tmaskAncestors(pid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let pid in this.visibleParents[cid]) {\r\n\t\t\t\tmaskAncestors(pid)\r\n\t\t\t}\r\n\t\t\tthis.integratedAncestors[cid]={}\r\n\t\t\tconst integrateAncestors=id=>{\r\n\t\t\t\tif (this.integratedAncestors[cid][id]) return\r\n\t\t\t\tthis.integratedAncestors[cid][id]={}\r\n\t\t\t\tfor (let pid in this.allParents[id]) {\r\n\t\t\t\t\tif (!masked[pid]) {\r\n\t\t\t\t\t\tthis.integratedAncestors[cid][id][pid]=true\r\n\t\t\t\t\t\tintegrateAncestors(pid)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tintegrateAncestors(cid)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports=UnorderedClassGraph\r\n"],"sourceRoot":"."}